(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const u of c.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function n(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(o){if(o.ep)return;o.ep=!0;const c=n(o);fetch(o.href,c)}})();function cS(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var zd={exports:{}},go={};var V_;function uS(){if(V_)return go;V_=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,o,c){var u=null;if(c!==void 0&&(u=""+c),o.key!==void 0&&(u=""+o.key),"key"in o){c={};for(var d in o)d!=="key"&&(c[d]=o[d])}else c=o;return o=c.ref,{$$typeof:r,type:i,key:u,ref:o!==void 0?o:null,props:c}}return go.Fragment=e,go.jsx=n,go.jsxs=n,go}var I_;function hS(){return I_||(I_=1,zd.exports=uS()),zd.exports}var g=hS(),Bd={exports:{}},Te={};var P_;function dS(){if(P_)return Te;P_=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),_=Symbol.for("react.activity"),b=Symbol.iterator;function S(C){return C===null||typeof C!="object"?null:(C=b&&C[b]||C["@@iterator"],typeof C=="function"?C:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,A={};function E(C,P,ee){this.props=C,this.context=P,this.refs=A,this.updater=ee||w}E.prototype.isReactComponent={},E.prototype.setState=function(C,P){if(typeof C!="object"&&typeof C!="function"&&C!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,C,P,"setState")},E.prototype.forceUpdate=function(C){this.updater.enqueueForceUpdate(this,C,"forceUpdate")};function D(){}D.prototype=E.prototype;function O(C,P,ee){this.props=C,this.context=P,this.refs=A,this.updater=ee||w}var I=O.prototype=new D;I.constructor=O,x(I,E.prototype),I.isPureReactComponent=!0;var k=Array.isArray;function R(){}var M={H:null,A:null,T:null,S:null},z=Object.prototype.hasOwnProperty;function X(C,P,ee){var ie=ee.ref;return{$$typeof:r,type:C,key:P,ref:ie!==void 0?ie:null,props:ee}}function Q(C,P){return X(C.type,P,C.props)}function K(C){return typeof C=="object"&&C!==null&&C.$$typeof===r}function F(C){var P={"=":"=0",":":"=2"};return"$"+C.replace(/[=:]/g,function(ee){return P[ee]})}var re=/\/+/g;function te(C,P){return typeof C=="object"&&C!==null&&C.key!=null?F(""+C.key):P.toString(36)}function ue(C){switch(C.status){case"fulfilled":return C.value;case"rejected":throw C.reason;default:switch(typeof C.status=="string"?C.then(R,R):(C.status="pending",C.then(function(P){C.status==="pending"&&(C.status="fulfilled",C.value=P)},function(P){C.status==="pending"&&(C.status="rejected",C.reason=P)})),C.status){case"fulfilled":return C.value;case"rejected":throw C.reason}}throw C}function U(C,P,ee,ie,se){var he=typeof C;(he==="undefined"||he==="boolean")&&(C=null);var Se=!1;if(C===null)Se=!0;else switch(he){case"bigint":case"string":case"number":Se=!0;break;case"object":switch(C.$$typeof){case r:case e:Se=!0;break;case y:return Se=C._init,U(Se(C._payload),P,ee,ie,se)}}if(Se)return se=se(C),Se=ie===""?"."+te(C,0):ie,k(se)?(ee="",Se!=null&&(ee=Se.replace(re,"$&/")+"/"),U(se,P,ee,"",function(rn){return rn})):se!=null&&(K(se)&&(se=Q(se,ee+(se.key==null||C&&C.key===se.key?"":(""+se.key).replace(re,"$&/")+"/")+Se)),P.push(se)),1;Se=0;var le=ie===""?".":ie+":";if(k(C))for(var Le=0;Le<C.length;Le++)ie=C[Le],he=le+te(ie,Le),Se+=U(ie,P,ee,he,se);else if(Le=S(C),typeof Le=="function")for(C=Le.call(C),Le=0;!(ie=C.next()).done;)ie=ie.value,he=le+te(ie,Le++),Se+=U(ie,P,ee,he,se);else if(he==="object"){if(typeof C.then=="function")return U(ue(C),P,ee,ie,se);throw P=String(C),Error("Objects are not valid as a React child (found: "+(P==="[object Object]"?"object with keys {"+Object.keys(C).join(", ")+"}":P)+"). If you meant to render a collection of children, use an array instead.")}return Se}function $(C,P,ee){if(C==null)return C;var ie=[],se=0;return U(C,ie,"","",function(he){return P.call(ee,he,se++)}),ie}function J(C){if(C._status===-1){var P=C._result;P=P(),P.then(function(ee){(C._status===0||C._status===-1)&&(C._status=1,C._result=ee)},function(ee){(C._status===0||C._status===-1)&&(C._status=2,C._result=ee)}),C._status===-1&&(C._status=0,C._result=P)}if(C._status===1)return C._result.default;throw C._result}var ne=typeof reportError=="function"?reportError:function(C){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var P=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof C=="object"&&C!==null&&typeof C.message=="string"?String(C.message):String(C),error:C});if(!window.dispatchEvent(P))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",C);return}console.error(C)},oe={map:$,forEach:function(C,P,ee){$(C,function(){P.apply(this,arguments)},ee)},count:function(C){var P=0;return $(C,function(){P++}),P},toArray:function(C){return $(C,function(P){return P})||[]},only:function(C){if(!K(C))throw Error("React.Children.only expected to receive a single React element child.");return C}};return Te.Activity=_,Te.Children=oe,Te.Component=E,Te.Fragment=n,Te.Profiler=o,Te.PureComponent=O,Te.StrictMode=i,Te.Suspense=f,Te.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,Te.__COMPILER_RUNTIME={__proto__:null,c:function(C){return M.H.useMemoCache(C)}},Te.cache=function(C){return function(){return C.apply(null,arguments)}},Te.cacheSignal=function(){return null},Te.cloneElement=function(C,P,ee){if(C==null)throw Error("The argument must be a React element, but you passed "+C+".");var ie=x({},C.props),se=C.key;if(P!=null)for(he in P.key!==void 0&&(se=""+P.key),P)!z.call(P,he)||he==="key"||he==="__self"||he==="__source"||he==="ref"&&P.ref===void 0||(ie[he]=P[he]);var he=arguments.length-2;if(he===1)ie.children=ee;else if(1<he){for(var Se=Array(he),le=0;le<he;le++)Se[le]=arguments[le+2];ie.children=Se}return X(C.type,se,ie)},Te.createContext=function(C){return C={$$typeof:u,_currentValue:C,_currentValue2:C,_threadCount:0,Provider:null,Consumer:null},C.Provider=C,C.Consumer={$$typeof:c,_context:C},C},Te.createElement=function(C,P,ee){var ie,se={},he=null;if(P!=null)for(ie in P.key!==void 0&&(he=""+P.key),P)z.call(P,ie)&&ie!=="key"&&ie!=="__self"&&ie!=="__source"&&(se[ie]=P[ie]);var Se=arguments.length-2;if(Se===1)se.children=ee;else if(1<Se){for(var le=Array(Se),Le=0;Le<Se;Le++)le[Le]=arguments[Le+2];se.children=le}if(C&&C.defaultProps)for(ie in Se=C.defaultProps,Se)se[ie]===void 0&&(se[ie]=Se[ie]);return X(C,he,se)},Te.createRef=function(){return{current:null}},Te.forwardRef=function(C){return{$$typeof:d,render:C}},Te.isValidElement=K,Te.lazy=function(C){return{$$typeof:y,_payload:{_status:-1,_result:C},_init:J}},Te.memo=function(C,P){return{$$typeof:m,type:C,compare:P===void 0?null:P}},Te.startTransition=function(C){var P=M.T,ee={};M.T=ee;try{var ie=C(),se=M.S;se!==null&&se(ee,ie),typeof ie=="object"&&ie!==null&&typeof ie.then=="function"&&ie.then(R,ne)}catch(he){ne(he)}finally{P!==null&&ee.types!==null&&(P.types=ee.types),M.T=P}},Te.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},Te.use=function(C){return M.H.use(C)},Te.useActionState=function(C,P,ee){return M.H.useActionState(C,P,ee)},Te.useCallback=function(C,P){return M.H.useCallback(C,P)},Te.useContext=function(C){return M.H.useContext(C)},Te.useDebugValue=function(){},Te.useDeferredValue=function(C,P){return M.H.useDeferredValue(C,P)},Te.useEffect=function(C,P){return M.H.useEffect(C,P)},Te.useEffectEvent=function(C){return M.H.useEffectEvent(C)},Te.useId=function(){return M.H.useId()},Te.useImperativeHandle=function(C,P,ee){return M.H.useImperativeHandle(C,P,ee)},Te.useInsertionEffect=function(C,P){return M.H.useInsertionEffect(C,P)},Te.useLayoutEffect=function(C,P){return M.H.useLayoutEffect(C,P)},Te.useMemo=function(C,P){return M.H.useMemo(C,P)},Te.useOptimistic=function(C,P){return M.H.useOptimistic(C,P)},Te.useReducer=function(C,P,ee){return M.H.useReducer(C,P,ee)},Te.useRef=function(C){return M.H.useRef(C)},Te.useState=function(C){return M.H.useState(C)},Te.useSyncExternalStore=function(C,P,ee){return M.H.useSyncExternalStore(C,P,ee)},Te.useTransition=function(){return M.H.useTransition()},Te.version="19.2.3",Te}var H_;function Df(){return H_||(H_=1,Bd.exports=dS()),Bd.exports}var Z=Df();const fS=cS(Z);var qd={exports:{}},yo={},Ld={exports:{}},Vd={};var $_;function pS(){return $_||($_=1,(function(r){function e(U,$){var J=U.length;U.push($);e:for(;0<J;){var ne=J-1>>>1,oe=U[ne];if(0<o(oe,$))U[ne]=$,U[J]=oe,J=ne;else break e}}function n(U){return U.length===0?null:U[0]}function i(U){if(U.length===0)return null;var $=U[0],J=U.pop();if(J!==$){U[0]=J;e:for(var ne=0,oe=U.length,C=oe>>>1;ne<C;){var P=2*(ne+1)-1,ee=U[P],ie=P+1,se=U[ie];if(0>o(ee,J))ie<oe&&0>o(se,ee)?(U[ne]=se,U[ie]=J,ne=ie):(U[ne]=ee,U[P]=J,ne=P);else if(ie<oe&&0>o(se,J))U[ne]=se,U[ie]=J,ne=ie;else break e}}return $}function o(U,$){var J=U.sortIndex-$.sortIndex;return J!==0?J:U.id-$.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;r.unstable_now=function(){return c.now()}}else{var u=Date,d=u.now();r.unstable_now=function(){return u.now()-d}}var f=[],m=[],y=1,_=null,b=3,S=!1,w=!1,x=!1,A=!1,E=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;function I(U){for(var $=n(m);$!==null;){if($.callback===null)i(m);else if($.startTime<=U)i(m),$.sortIndex=$.expirationTime,e(f,$);else break;$=n(m)}}function k(U){if(x=!1,I(U),!w)if(n(f)!==null)w=!0,R||(R=!0,F());else{var $=n(m);$!==null&&ue(k,$.startTime-U)}}var R=!1,M=-1,z=5,X=-1;function Q(){return A?!0:!(r.unstable_now()-X<z)}function K(){if(A=!1,R){var U=r.unstable_now();X=U;var $=!0;try{e:{w=!1,x&&(x=!1,D(M),M=-1),S=!0;var J=b;try{t:{for(I(U),_=n(f);_!==null&&!(_.expirationTime>U&&Q());){var ne=_.callback;if(typeof ne=="function"){_.callback=null,b=_.priorityLevel;var oe=ne(_.expirationTime<=U);if(U=r.unstable_now(),typeof oe=="function"){_.callback=oe,I(U),$=!0;break t}_===n(f)&&i(f),I(U)}else i(f);_=n(f)}if(_!==null)$=!0;else{var C=n(m);C!==null&&ue(k,C.startTime-U),$=!1}}break e}finally{_=null,b=J,S=!1}$=void 0}}finally{$?F():R=!1}}}var F;if(typeof O=="function")F=function(){O(K)};else if(typeof MessageChannel<"u"){var re=new MessageChannel,te=re.port2;re.port1.onmessage=K,F=function(){te.postMessage(null)}}else F=function(){E(K,0)};function ue(U,$){M=E(function(){U(r.unstable_now())},$)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(U){U.callback=null},r.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<U?Math.floor(1e3/U):5},r.unstable_getCurrentPriorityLevel=function(){return b},r.unstable_next=function(U){switch(b){case 1:case 2:case 3:var $=3;break;default:$=b}var J=b;b=$;try{return U()}finally{b=J}},r.unstable_requestPaint=function(){A=!0},r.unstable_runWithPriority=function(U,$){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var J=b;b=U;try{return $()}finally{b=J}},r.unstable_scheduleCallback=function(U,$,J){var ne=r.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?ne+J:ne):J=ne,U){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=J+oe,U={id:y++,callback:$,priorityLevel:U,startTime:J,expirationTime:oe,sortIndex:-1},J>ne?(U.sortIndex=J,e(m,U),n(f)===null&&U===n(m)&&(x?(D(M),M=-1):x=!0,ue(k,J-ne))):(U.sortIndex=oe,e(f,U),w||S||(w=!0,R||(R=!0,F()))),U},r.unstable_shouldYield=Q,r.unstable_wrapCallback=function(U){var $=b;return function(){var J=b;b=$;try{return U.apply(this,arguments)}finally{b=J}}}})(Vd)),Vd}var G_;function mS(){return G_||(G_=1,Ld.exports=pS()),Ld.exports}var Id={exports:{}},It={};var F_;function gS(){if(F_)return It;F_=1;var r=Df();function e(f){var m="https://react.dev/errors/"+f;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)m+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+f+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function c(f,m,y){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:_==null?null:""+_,children:f,containerInfo:m,implementation:y}}var u=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(f,m){if(f==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return It.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,It.createPortal=function(f,m){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return c(f,m,null,y)},It.flushSync=function(f){var m=u.T,y=i.p;try{if(u.T=null,i.p=2,f)return f()}finally{u.T=m,i.p=y,i.d.f()}},It.preconnect=function(f,m){typeof f=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,i.d.C(f,m))},It.prefetchDNS=function(f){typeof f=="string"&&i.d.D(f)},It.preinit=function(f,m){if(typeof f=="string"&&m&&typeof m.as=="string"){var y=m.as,_=d(y,m.crossOrigin),b=typeof m.integrity=="string"?m.integrity:void 0,S=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;y==="style"?i.d.S(f,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:_,integrity:b,fetchPriority:S}):y==="script"&&i.d.X(f,{crossOrigin:_,integrity:b,fetchPriority:S,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},It.preinitModule=function(f,m){if(typeof f=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var y=d(m.as,m.crossOrigin);i.d.M(f,{crossOrigin:y,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&i.d.M(f)},It.preload=function(f,m){if(typeof f=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var y=m.as,_=d(y,m.crossOrigin);i.d.L(f,y,{crossOrigin:_,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},It.preloadModule=function(f,m){if(typeof f=="string")if(m){var y=d(m.as,m.crossOrigin);i.d.m(f,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:y,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else i.d.m(f)},It.requestFormReset=function(f){i.d.r(f)},It.unstable_batchedUpdates=function(f,m){return f(m)},It.useFormState=function(f,m,y){return u.H.useFormState(f,m,y)},It.useFormStatus=function(){return u.H.useHostTransitionStatus()},It.version="19.2.3",It}var Y_;function yS(){if(Y_)return Id.exports;Y_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Id.exports=gS(),Id.exports}var W_;function _S(){if(W_)return yo;W_=1;var r=mS(),e=Df(),n=yS();function i(t){var s="https://react.dev/errors/"+t;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function c(t){var s=t,a=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,(s.flags&4098)!==0&&(a=s.return),t=s.return;while(t)}return s.tag===3?a:null}function u(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function d(t){if(t.tag===31){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function f(t){if(c(t)!==t)throw Error(i(188))}function m(t){var s=t.alternate;if(!s){if(s=c(t),s===null)throw Error(i(188));return s!==t?null:t}for(var a=t,l=s;;){var h=a.return;if(h===null)break;var p=h.alternate;if(p===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===p.child){for(p=h.child;p;){if(p===a)return f(h),t;if(p===l)return f(h),s;p=p.sibling}throw Error(i(188))}if(a.return!==l.return)a=h,l=p;else{for(var v=!1,T=h.child;T;){if(T===a){v=!0,a=h,l=p;break}if(T===l){v=!0,l=h,a=p;break}T=T.sibling}if(!v){for(T=p.child;T;){if(T===a){v=!0,a=p,l=h;break}if(T===l){v=!0,l=p,a=h;break}T=T.sibling}if(!v)throw Error(i(189))}}if(a.alternate!==l)throw Error(i(190))}if(a.tag!==3)throw Error(i(188));return a.stateNode.current===a?t:s}function y(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t;for(t=t.child;t!==null;){if(s=y(t),s!==null)return s;t=t.sibling}return null}var _=Object.assign,b=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),D=Symbol.for("react.consumer"),O=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),z=Symbol.for("react.lazy"),X=Symbol.for("react.activity"),Q=Symbol.for("react.memo_cache_sentinel"),K=Symbol.iterator;function F(t){return t===null||typeof t!="object"?null:(t=K&&t[K]||t["@@iterator"],typeof t=="function"?t:null)}var re=Symbol.for("react.client.reference");function te(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===re?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case x:return"Fragment";case E:return"Profiler";case A:return"StrictMode";case k:return"Suspense";case R:return"SuspenseList";case X:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case w:return"Portal";case O:return t.displayName||"Context";case D:return(t._context.displayName||"Context")+".Consumer";case I:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case M:return s=t.displayName||null,s!==null?s:te(t.type)||"Memo";case z:s=t._payload,t=t._init;try{return te(t(s))}catch{}}return null}var ue=Array.isArray,U=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,$=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J={pending:!1,data:null,method:null,action:null},ne=[],oe=-1;function C(t){return{current:t}}function P(t){0>oe||(t.current=ne[oe],ne[oe]=null,oe--)}function ee(t,s){oe++,ne[oe]=t.current,t.current=s}var ie=C(null),se=C(null),he=C(null),Se=C(null);function le(t,s){switch(ee(he,s),ee(se,t),ee(ie,null),s.nodeType){case 9:case 11:t=(t=s.documentElement)&&(t=t.namespaceURI)?c_(t):0;break;default:if(t=s.tagName,s=s.namespaceURI)s=c_(s),t=u_(s,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}P(ie),ee(ie,t)}function Le(){P(ie),P(se),P(he)}function rn(t){t.memoizedState!==null&&ee(Se,t);var s=ie.current,a=u_(s,t.type);s!==a&&(ee(se,t),ee(ie,a))}function Mn(t){se.current===t&&(P(ie),P(se)),Se.current===t&&(P(Se),ho._currentValue=J)}var Jn,Qo;function ps(t){if(Jn===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);Jn=s&&s[1]||"",Qo=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Jn+t+Qo}var ae=!1;function ye(t,s){if(!t||ae)return"";ae=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(s){var W=function(){throw Error()};if(Object.defineProperty(W.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(W,[])}catch(H){var V=H}Reflect.construct(t,[],W)}else{try{W.call()}catch(H){V=H}t.call(W.prototype)}}else{try{throw Error()}catch(H){V=H}(W=t())&&typeof W.catch=="function"&&W.catch(function(){})}}catch(H){if(H&&V&&typeof H.stack=="string")return[H.stack,V.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=l.DetermineComponentFrameRoot(),v=p[0],T=p[1];if(v&&T){var N=v.split(`
`),L=T.split(`
`);for(h=l=0;l<N.length&&!N[l].includes("DetermineComponentFrameRoot");)l++;for(;h<L.length&&!L[h].includes("DetermineComponentFrameRoot");)h++;if(l===N.length||h===L.length)for(l=N.length-1,h=L.length-1;1<=l&&0<=h&&N[l]!==L[h];)h--;for(;1<=l&&0<=h;l--,h--)if(N[l]!==L[h]){if(l!==1||h!==1)do if(l--,h--,0>h||N[l]!==L[h]){var G=`
`+N[l].replace(" at new "," at ");return t.displayName&&G.includes("<anonymous>")&&(G=G.replace("<anonymous>",t.displayName)),G}while(1<=l&&0<=h);break}}}finally{ae=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?ps(a):""}function pt(t,s){switch(t.tag){case 26:case 27:case 5:return ps(t.type);case 16:return ps("Lazy");case 13:return t.child!==s&&s!==null?ps("Suspense Fallback"):ps("Suspense");case 19:return ps("SuspenseList");case 0:case 15:return ye(t.type,!1);case 11:return ye(t.type.render,!1);case 1:return ye(t.type,!0);case 31:return ps("Activity");default:return""}}function Ze(t){try{var s="",a=null;do s+=pt(t,a),a=t,t=t.return;while(t);return s}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var je=Object.prototype.hasOwnProperty,Qe=r.unstable_scheduleCallback,Vt=r.unstable_cancelCallback,es=r.unstable_shouldYield,xi=r.unstable_requestPaint,Rt=r.unstable_now,Tu=r.unstable_getCurrentPriorityLevel,Jo=r.unstable_ImmediatePriority,Pp=r.unstable_UserBlockingPriority,el=r.unstable_NormalPriority,$b=r.unstable_LowPriority,Hp=r.unstable_IdlePriority,Gb=r.log,Fb=r.unstable_setDisableYieldValue,Ta=null,an=null;function Ps(t){if(typeof Gb=="function"&&Fb(t),an&&typeof an.setStrictMode=="function")try{an.setStrictMode(Ta,t)}catch{}}var on=Math.clz32?Math.clz32:Xb,Yb=Math.log,Wb=Math.LN2;function Xb(t){return t>>>=0,t===0?32:31-(Yb(t)/Wb|0)|0}var tl=256,nl=262144,sl=4194304;function Ai(t){var s=t&42;if(s!==0)return s;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function il(t,s,a){var l=t.pendingLanes;if(l===0)return 0;var h=0,p=t.suspendedLanes,v=t.pingedLanes;t=t.warmLanes;var T=l&134217727;return T!==0?(l=T&~p,l!==0?h=Ai(l):(v&=T,v!==0?h=Ai(v):a||(a=T&~t,a!==0&&(h=Ai(a))))):(T=l&~p,T!==0?h=Ai(T):v!==0?h=Ai(v):a||(a=l&~t,a!==0&&(h=Ai(a)))),h===0?0:s!==0&&s!==h&&(s&p)===0&&(p=h&-h,a=s&-s,p>=a||p===32&&(a&4194048)!==0)?s:h}function xa(t,s){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&s)===0}function Kb(t,s){switch(t){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $p(){var t=sl;return sl<<=1,(sl&62914560)===0&&(sl=4194304),t}function xu(t){for(var s=[],a=0;31>a;a++)s.push(t);return s}function Aa(t,s){t.pendingLanes|=s,s!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Zb(t,s,a,l,h,p){var v=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var T=t.entanglements,N=t.expirationTimes,L=t.hiddenUpdates;for(a=v&~a;0<a;){var G=31-on(a),W=1<<G;T[G]=0,N[G]=-1;var V=L[G];if(V!==null)for(L[G]=null,G=0;G<V.length;G++){var H=V[G];H!==null&&(H.lane&=-536870913)}a&=~W}l!==0&&Gp(t,l,0),p!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=p&~(v&~s))}function Gp(t,s,a){t.pendingLanes|=s,t.suspendedLanes&=~s;var l=31-on(s);t.entangledLanes|=s,t.entanglements[l]=t.entanglements[l]|1073741824|a&261930}function Fp(t,s){var a=t.entangledLanes|=s;for(t=t.entanglements;a;){var l=31-on(a),h=1<<l;h&s|t[l]&s&&(t[l]|=s),a&=~h}}function Yp(t,s){var a=s&-s;return a=(a&42)!==0?1:Au(a),(a&(t.suspendedLanes|s))!==0?0:a}function Au(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Eu(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Wp(){var t=$.p;return t!==0?t:(t=window.event,t===void 0?32:D_(t.type))}function Xp(t,s){var a=$.p;try{return $.p=t,s()}finally{$.p=a}}var Hs=Math.random().toString(36).slice(2),jt="__reactFiber$"+Hs,Wt="__reactProps$"+Hs,ar="__reactContainer$"+Hs,Cu="__reactEvents$"+Hs,Qb="__reactListeners$"+Hs,Jb="__reactHandles$"+Hs,Kp="__reactResources$"+Hs,Ea="__reactMarker$"+Hs;function Nu(t){delete t[jt],delete t[Wt],delete t[Cu],delete t[Qb],delete t[Jb]}function or(t){var s=t[jt];if(s)return s;for(var a=t.parentNode;a;){if(s=a[ar]||a[jt]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(t=y_(t);t!==null;){if(a=t[jt])return a;t=y_(t)}return s}t=a,a=t.parentNode}return null}function lr(t){if(t=t[jt]||t[ar]){var s=t.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return t}return null}function Ca(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t.stateNode;throw Error(i(33))}function cr(t){var s=t[Kp];return s||(s=t[Kp]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Nt(t){t[Ea]=!0}var Zp=new Set,Qp={};function Ei(t,s){ur(t,s),ur(t+"Capture",s)}function ur(t,s){for(Qp[t]=s,t=0;t<s.length;t++)Zp.add(s[t])}var ew=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Jp={},em={};function tw(t){return je.call(em,t)?!0:je.call(Jp,t)?!1:ew.test(t)?em[t]=!0:(Jp[t]=!0,!1)}function rl(t,s,a){if(tw(s))if(a===null)t.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(s);return;case"boolean":var l=s.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(s);return}}t.setAttribute(s,""+a)}}function al(t,s,a){if(a===null)t.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttribute(s,""+a)}}function ms(t,s,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(s,a,""+l)}}function bn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function tm(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function nw(t,s,a){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,s);if(!t.hasOwnProperty(s)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var h=l.get,p=l.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return h.call(this)},set:function(v){a=""+v,p.call(this,v)}}),Object.defineProperty(t,s,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(v){a=""+v},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function Ou(t){if(!t._valueTracker){var s=tm(t)?"checked":"value";t._valueTracker=nw(t,s,""+t[s])}}function nm(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var a=s.getValue(),l="";return t&&(l=tm(t)?t.checked?"true":"false":t.value),t=l,t!==a?(s.setValue(t),!0):!1}function ol(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var sw=/[\n"\\]/g;function wn(t){return t.replace(sw,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function ku(t,s,a,l,h,p,v,T){t.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?t.type=v:t.removeAttribute("type"),s!=null?v==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+bn(s)):t.value!==""+bn(s)&&(t.value=""+bn(s)):v!=="submit"&&v!=="reset"||t.removeAttribute("value"),s!=null?Ru(t,v,bn(s)):a!=null?Ru(t,v,bn(a)):l!=null&&t.removeAttribute("value"),h==null&&p!=null&&(t.defaultChecked=!!p),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?t.name=""+bn(T):t.removeAttribute("name")}function sm(t,s,a,l,h,p,v,T){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(t.type=p),s!=null||a!=null){if(!(p!=="submit"&&p!=="reset"||s!=null)){Ou(t);return}a=a!=null?""+bn(a):"",s=s!=null?""+bn(s):a,T||s===t.value||(t.value=s),t.defaultValue=s}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=T?t.checked:!!l,t.defaultChecked=!!l,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(t.name=v),Ou(t)}function Ru(t,s,a){s==="number"&&ol(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function hr(t,s,a,l){if(t=t.options,s){s={};for(var h=0;h<a.length;h++)s["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=s.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&l&&(t[a].defaultSelected=!0)}else{for(a=""+bn(a),s=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,l&&(t[h].defaultSelected=!0);return}s!==null||t[h].disabled||(s=t[h])}s!==null&&(s.selected=!0)}}function im(t,s,a){if(s!=null&&(s=""+bn(s),s!==t.value&&(t.value=s),a==null)){t.defaultValue!==s&&(t.defaultValue=s);return}t.defaultValue=a!=null?""+bn(a):""}function rm(t,s,a,l){if(s==null){if(l!=null){if(a!=null)throw Error(i(92));if(ue(l)){if(1<l.length)throw Error(i(93));l=l[0]}a=l}a==null&&(a=""),s=a}a=bn(s),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l),Ou(t)}function dr(t,s){if(s){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=s;return}}t.textContent=s}var iw=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function am(t,s,a){var l=s.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(s,""):s==="float"?t.cssFloat="":t[s]="":l?t.setProperty(s,a):typeof a!="number"||a===0||iw.has(s)?s==="float"?t.cssFloat=a:t[s]=(""+a).trim():t[s]=a+"px"}function om(t,s,a){if(s!=null&&typeof s!="object")throw Error(i(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||s!=null&&s.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var h in s)l=s[h],s.hasOwnProperty(h)&&a[h]!==l&&am(t,h,l)}else for(var p in s)s.hasOwnProperty(p)&&am(t,p,s[p])}function ju(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var rw=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),aw=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ll(t){return aw.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function gs(){}var Du=null;function Mu(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var fr=null,pr=null;function lm(t){var s=lr(t);if(s&&(t=s.stateNode)){var a=t[Wt]||null;e:switch(t=s.stateNode,s.type){case"input":if(ku(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),s=a.name,a.type==="radio"&&s!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+wn(""+s)+'"][type="radio"]'),s=0;s<a.length;s++){var l=a[s];if(l!==t&&l.form===t.form){var h=l[Wt]||null;if(!h)throw Error(i(90));ku(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(s=0;s<a.length;s++)l=a[s],l.form===t.form&&nm(l)}break e;case"textarea":im(t,a.value,a.defaultValue);break e;case"select":s=a.value,s!=null&&hr(t,!!a.multiple,s,!1)}}}var Uu=!1;function cm(t,s,a){if(Uu)return t(s,a);Uu=!0;try{var l=t(s);return l}finally{if(Uu=!1,(fr!==null||pr!==null)&&(Xl(),fr&&(s=fr,t=pr,pr=fr=null,lm(s),t)))for(s=0;s<t.length;s++)lm(t[s])}}function Na(t,s){var a=t.stateNode;if(a===null)return null;var l=a[Wt]||null;if(l===null)return null;a=l[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(i(231,s,typeof a));return a}var ys=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),zu=!1;if(ys)try{var Oa={};Object.defineProperty(Oa,"passive",{get:function(){zu=!0}}),window.addEventListener("test",Oa,Oa),window.removeEventListener("test",Oa,Oa)}catch{zu=!1}var $s=null,Bu=null,cl=null;function um(){if(cl)return cl;var t,s=Bu,a=s.length,l,h="value"in $s?$s.value:$s.textContent,p=h.length;for(t=0;t<a&&s[t]===h[t];t++);var v=a-t;for(l=1;l<=v&&s[a-l]===h[p-l];l++);return cl=h.slice(t,1<l?1-l:void 0)}function ul(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function hl(){return!0}function hm(){return!1}function Xt(t){function s(a,l,h,p,v){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=p,this.target=v,this.currentTarget=null;for(var T in t)t.hasOwnProperty(T)&&(a=t[T],this[T]=a?a(p):p[T]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?hl:hm,this.isPropagationStopped=hm,this}return _(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=hl)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=hl)},persist:function(){},isPersistent:hl}),s}var Ci={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dl=Xt(Ci),ka=_({},Ci,{view:0,detail:0}),ow=Xt(ka),qu,Lu,Ra,fl=_({},ka,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Iu,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ra&&(Ra&&t.type==="mousemove"?(qu=t.screenX-Ra.screenX,Lu=t.screenY-Ra.screenY):Lu=qu=0,Ra=t),qu)},movementY:function(t){return"movementY"in t?t.movementY:Lu}}),dm=Xt(fl),lw=_({},fl,{dataTransfer:0}),cw=Xt(lw),uw=_({},ka,{relatedTarget:0}),Vu=Xt(uw),hw=_({},Ci,{animationName:0,elapsedTime:0,pseudoElement:0}),dw=Xt(hw),fw=_({},Ci,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),pw=Xt(fw),mw=_({},Ci,{data:0}),fm=Xt(mw),gw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},yw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_w={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function vw(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=_w[t])?!!s[t]:!1}function Iu(){return vw}var bw=_({},ka,{key:function(t){if(t.key){var s=gw[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=ul(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?yw[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Iu,charCode:function(t){return t.type==="keypress"?ul(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ul(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),ww=Xt(bw),Sw=_({},fl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),pm=Xt(Sw),Tw=_({},ka,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Iu}),xw=Xt(Tw),Aw=_({},Ci,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ew=Xt(Aw),Cw=_({},fl,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Nw=Xt(Cw),Ow=_({},Ci,{newState:0,oldState:0}),kw=Xt(Ow),Rw=[9,13,27,32],Pu=ys&&"CompositionEvent"in window,ja=null;ys&&"documentMode"in document&&(ja=document.documentMode);var jw=ys&&"TextEvent"in window&&!ja,mm=ys&&(!Pu||ja&&8<ja&&11>=ja),gm=" ",ym=!1;function _m(t,s){switch(t){case"keyup":return Rw.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vm(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var mr=!1;function Dw(t,s){switch(t){case"compositionend":return vm(s);case"keypress":return s.which!==32?null:(ym=!0,gm);case"textInput":return t=s.data,t===gm&&ym?null:t;default:return null}}function Mw(t,s){if(mr)return t==="compositionend"||!Pu&&_m(t,s)?(t=um(),cl=Bu=$s=null,mr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return mm&&s.locale!=="ko"?null:s.data;default:return null}}var Uw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function bm(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!Uw[t.type]:s==="textarea"}function wm(t,s,a,l){fr?pr?pr.push(l):pr=[l]:fr=l,s=nc(s,"onChange"),0<s.length&&(a=new dl("onChange","change",null,a,l),t.push({event:a,listeners:s}))}var Da=null,Ma=null;function zw(t){s_(t,0)}function pl(t){var s=Ca(t);if(nm(s))return t}function Sm(t,s){if(t==="change")return s}var Tm=!1;if(ys){var Hu;if(ys){var $u="oninput"in document;if(!$u){var xm=document.createElement("div");xm.setAttribute("oninput","return;"),$u=typeof xm.oninput=="function"}Hu=$u}else Hu=!1;Tm=Hu&&(!document.documentMode||9<document.documentMode)}function Am(){Da&&(Da.detachEvent("onpropertychange",Em),Ma=Da=null)}function Em(t){if(t.propertyName==="value"&&pl(Ma)){var s=[];wm(s,Ma,t,Mu(t)),cm(zw,s)}}function Bw(t,s,a){t==="focusin"?(Am(),Da=s,Ma=a,Da.attachEvent("onpropertychange",Em)):t==="focusout"&&Am()}function qw(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return pl(Ma)}function Lw(t,s){if(t==="click")return pl(s)}function Vw(t,s){if(t==="input"||t==="change")return pl(s)}function Iw(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var ln=typeof Object.is=="function"?Object.is:Iw;function Ua(t,s){if(ln(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var a=Object.keys(t),l=Object.keys(s);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!je.call(s,h)||!ln(t[h],s[h]))return!1}return!0}function Cm(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Nm(t,s){var a=Cm(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=s&&l>=s)return{node:a,offset:s-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Cm(a)}}function Om(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?Om(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function km(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var s=ol(t.document);s instanceof t.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)t=s.contentWindow;else break;s=ol(t.document)}return s}function Gu(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}var Pw=ys&&"documentMode"in document&&11>=document.documentMode,gr=null,Fu=null,za=null,Yu=!1;function Rm(t,s,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Yu||gr==null||gr!==ol(l)||(l=gr,"selectionStart"in l&&Gu(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),za&&Ua(za,l)||(za=l,l=nc(Fu,"onSelect"),0<l.length&&(s=new dl("onSelect","select",null,s,a),t.push({event:s,listeners:l}),s.target=gr)))}function Ni(t,s){var a={};return a[t.toLowerCase()]=s.toLowerCase(),a["Webkit"+t]="webkit"+s,a["Moz"+t]="moz"+s,a}var yr={animationend:Ni("Animation","AnimationEnd"),animationiteration:Ni("Animation","AnimationIteration"),animationstart:Ni("Animation","AnimationStart"),transitionrun:Ni("Transition","TransitionRun"),transitionstart:Ni("Transition","TransitionStart"),transitioncancel:Ni("Transition","TransitionCancel"),transitionend:Ni("Transition","TransitionEnd")},Wu={},jm={};ys&&(jm=document.createElement("div").style,"AnimationEvent"in window||(delete yr.animationend.animation,delete yr.animationiteration.animation,delete yr.animationstart.animation),"TransitionEvent"in window||delete yr.transitionend.transition);function Oi(t){if(Wu[t])return Wu[t];if(!yr[t])return t;var s=yr[t],a;for(a in s)if(s.hasOwnProperty(a)&&a in jm)return Wu[t]=s[a];return t}var Dm=Oi("animationend"),Mm=Oi("animationiteration"),Um=Oi("animationstart"),Hw=Oi("transitionrun"),$w=Oi("transitionstart"),Gw=Oi("transitioncancel"),zm=Oi("transitionend"),Bm=new Map,Xu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Xu.push("scrollEnd");function Un(t,s){Bm.set(t,s),Ei(s,[t])}var ml=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Sn=[],_r=0,Ku=0;function gl(){for(var t=_r,s=Ku=_r=0;s<t;){var a=Sn[s];Sn[s++]=null;var l=Sn[s];Sn[s++]=null;var h=Sn[s];Sn[s++]=null;var p=Sn[s];if(Sn[s++]=null,l!==null&&h!==null){var v=l.pending;v===null?h.next=h:(h.next=v.next,v.next=h),l.pending=h}p!==0&&qm(a,h,p)}}function yl(t,s,a,l){Sn[_r++]=t,Sn[_r++]=s,Sn[_r++]=a,Sn[_r++]=l,Ku|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function Zu(t,s,a,l){return yl(t,s,a,l),_l(t)}function ki(t,s){return yl(t,null,null,s),_l(t)}function qm(t,s,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var h=!1,p=t.return;p!==null;)p.childLanes|=a,l=p.alternate,l!==null&&(l.childLanes|=a),p.tag===22&&(t=p.stateNode,t===null||t._visibility&1||(h=!0)),t=p,p=p.return;return t.tag===3?(p=t.stateNode,h&&s!==null&&(h=31-on(a),t=p.hiddenUpdates,l=t[h],l===null?t[h]=[s]:l.push(s),s.lane=a|536870912),p):null}function _l(t){if(50<io)throw io=0,ad=null,Error(i(185));for(var s=t.return;s!==null;)t=s,s=t.return;return t.tag===3?t.stateNode:null}var vr={};function Fw(t,s,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function cn(t,s,a,l){return new Fw(t,s,a,l)}function Qu(t){return t=t.prototype,!(!t||!t.isReactComponent)}function _s(t,s){var a=t.alternate;return a===null?(a=cn(t.tag,s,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=s,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,s=t.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function Lm(t,s){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=s,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,s=a.dependencies,t.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),t}function vl(t,s,a,l,h,p){var v=0;if(l=t,typeof t=="function")Qu(t)&&(v=1);else if(typeof t=="string")v=Z1(t,a,ie.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case X:return t=cn(31,a,s,h),t.elementType=X,t.lanes=p,t;case x:return Ri(a.children,h,p,s);case A:v=8,h|=24;break;case E:return t=cn(12,a,s,h|2),t.elementType=E,t.lanes=p,t;case k:return t=cn(13,a,s,h),t.elementType=k,t.lanes=p,t;case R:return t=cn(19,a,s,h),t.elementType=R,t.lanes=p,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case O:v=10;break e;case D:v=9;break e;case I:v=11;break e;case M:v=14;break e;case z:v=16,l=null;break e}v=29,a=Error(i(130,t===null?"null":typeof t,"")),l=null}return s=cn(v,a,s,h),s.elementType=t,s.type=l,s.lanes=p,s}function Ri(t,s,a,l){return t=cn(7,t,l,s),t.lanes=a,t}function Ju(t,s,a){return t=cn(6,t,null,s),t.lanes=a,t}function Vm(t){var s=cn(18,null,null,0);return s.stateNode=t,s}function eh(t,s,a){return s=cn(4,t.children!==null?t.children:[],t.key,s),s.lanes=a,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}var Im=new WeakMap;function Tn(t,s){if(typeof t=="object"&&t!==null){var a=Im.get(t);return a!==void 0?a:(s={value:t,source:s,stack:Ze(s)},Im.set(t,s),s)}return{value:t,source:s,stack:Ze(s)}}var br=[],wr=0,bl=null,Ba=0,xn=[],An=0,Gs=null,ts=1,ns="";function vs(t,s){br[wr++]=Ba,br[wr++]=bl,bl=t,Ba=s}function Pm(t,s,a){xn[An++]=ts,xn[An++]=ns,xn[An++]=Gs,Gs=t;var l=ts;t=ns;var h=32-on(l)-1;l&=~(1<<h),a+=1;var p=32-on(s)+h;if(30<p){var v=h-h%5;p=(l&(1<<v)-1).toString(32),l>>=v,h-=v,ts=1<<32-on(s)+h|a<<h|l,ns=p+t}else ts=1<<p|a<<h|l,ns=t}function th(t){t.return!==null&&(vs(t,1),Pm(t,1,0))}function nh(t){for(;t===bl;)bl=br[--wr],br[wr]=null,Ba=br[--wr],br[wr]=null;for(;t===Gs;)Gs=xn[--An],xn[An]=null,ns=xn[--An],xn[An]=null,ts=xn[--An],xn[An]=null}function Hm(t,s){xn[An++]=ts,xn[An++]=ns,xn[An++]=Gs,ts=s.id,ns=s.overflow,Gs=t}var Dt=null,tt=null,De=!1,Fs=null,En=!1,sh=Error(i(519));function Ys(t){var s=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw qa(Tn(s,t)),sh}function $m(t){var s=t.stateNode,a=t.type,l=t.memoizedProps;switch(s[jt]=t,s[Wt]=l,a){case"dialog":Oe("cancel",s),Oe("close",s);break;case"iframe":case"object":case"embed":Oe("load",s);break;case"video":case"audio":for(a=0;a<ao.length;a++)Oe(ao[a],s);break;case"source":Oe("error",s);break;case"img":case"image":case"link":Oe("error",s),Oe("load",s);break;case"details":Oe("toggle",s);break;case"input":Oe("invalid",s),sm(s,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Oe("invalid",s);break;case"textarea":Oe("invalid",s),rm(s,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||s.textContent===""+a||l.suppressHydrationWarning===!0||o_(s.textContent,a)?(l.popover!=null&&(Oe("beforetoggle",s),Oe("toggle",s)),l.onScroll!=null&&Oe("scroll",s),l.onScrollEnd!=null&&Oe("scrollend",s),l.onClick!=null&&(s.onclick=gs),s=!0):s=!1,s||Ys(t,!0)}function Gm(t){for(Dt=t.return;Dt;)switch(Dt.tag){case 5:case 31:case 13:En=!1;return;case 27:case 3:En=!0;return;default:Dt=Dt.return}}function Sr(t){if(t!==Dt)return!1;if(!De)return Gm(t),De=!0,!1;var s=t.tag,a;if((a=s!==3&&s!==27)&&((a=s===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||wd(t.type,t.memoizedProps)),a=!a),a&&tt&&Ys(t),Gm(t),s===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));tt=g_(t)}else if(s===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));tt=g_(t)}else s===27?(s=tt,oi(t.type)?(t=Ed,Ed=null,tt=t):tt=s):tt=Dt?Nn(t.stateNode.nextSibling):null;return!0}function ji(){tt=Dt=null,De=!1}function ih(){var t=Fs;return t!==null&&(Jt===null?Jt=t:Jt.push.apply(Jt,t),Fs=null),t}function qa(t){Fs===null?Fs=[t]:Fs.push(t)}var rh=C(null),Di=null,bs=null;function Ws(t,s,a){ee(rh,s._currentValue),s._currentValue=a}function ws(t){t._currentValue=rh.current,P(rh)}function ah(t,s,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,l!==null&&(l.childLanes|=s)):l!==null&&(l.childLanes&s)!==s&&(l.childLanes|=s),t===a)break;t=t.return}}function oh(t,s,a,l){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var p=h.dependencies;if(p!==null){var v=h.child;p=p.firstContext;e:for(;p!==null;){var T=p;p=h;for(var N=0;N<s.length;N++)if(T.context===s[N]){p.lanes|=a,T=p.alternate,T!==null&&(T.lanes|=a),ah(p.return,a,t),l||(v=null);break e}p=T.next}}else if(h.tag===18){if(v=h.return,v===null)throw Error(i(341));v.lanes|=a,p=v.alternate,p!==null&&(p.lanes|=a),ah(v,a,t),v=null}else v=h.child;if(v!==null)v.return=h;else for(v=h;v!==null;){if(v===t){v=null;break}if(h=v.sibling,h!==null){h.return=v.return,v=h;break}v=v.return}h=v}}function Tr(t,s,a,l){t=null;for(var h=s,p=!1;h!==null;){if(!p){if((h.flags&524288)!==0)p=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var v=h.alternate;if(v===null)throw Error(i(387));if(v=v.memoizedProps,v!==null){var T=h.type;ln(h.pendingProps.value,v.value)||(t!==null?t.push(T):t=[T])}}else if(h===Se.current){if(v=h.alternate,v===null)throw Error(i(387));v.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(ho):t=[ho])}h=h.return}t!==null&&oh(s,t,a,l),s.flags|=262144}function wl(t){for(t=t.firstContext;t!==null;){if(!ln(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Mi(t){Di=t,bs=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Mt(t){return Fm(Di,t)}function Sl(t,s){return Di===null&&Mi(t),Fm(t,s)}function Fm(t,s){var a=s._currentValue;if(s={context:s,memoizedValue:a,next:null},bs===null){if(t===null)throw Error(i(308));bs=s,t.dependencies={lanes:0,firstContext:s},t.flags|=524288}else bs=bs.next=s;return a}var Yw=typeof AbortController<"u"?AbortController:function(){var t=[],s=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){s.aborted=!0,t.forEach(function(a){return a()})}},Ww=r.unstable_scheduleCallback,Xw=r.unstable_NormalPriority,_t={$$typeof:O,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function lh(){return{controller:new Yw,data:new Map,refCount:0}}function La(t){t.refCount--,t.refCount===0&&Ww(Xw,function(){t.controller.abort()})}var Va=null,ch=0,xr=0,Ar=null;function Kw(t,s){if(Va===null){var a=Va=[];ch=0,xr=dd(),Ar={status:"pending",value:void 0,then:function(l){a.push(l)}}}return ch++,s.then(Ym,Ym),s}function Ym(){if(--ch===0&&Va!==null){Ar!==null&&(Ar.status="fulfilled");var t=Va;Va=null,xr=0,Ar=null;for(var s=0;s<t.length;s++)(0,t[s])()}}function Zw(t,s){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){l.status="fulfilled",l.value=s;for(var h=0;h<a.length;h++)(0,a[h])(s)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var Wm=U.S;U.S=function(t,s){Ry=Rt(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&Kw(t,s),Wm!==null&&Wm(t,s)};var Ui=C(null);function uh(){var t=Ui.current;return t!==null?t:Xe.pooledCache}function Tl(t,s){s===null?ee(Ui,Ui.current):ee(Ui,s.pool)}function Xm(){var t=uh();return t===null?null:{parent:_t._currentValue,pool:t}}var Er=Error(i(460)),hh=Error(i(474)),xl=Error(i(542)),Al={then:function(){}};function Km(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Zm(t,s,a){switch(a=t[a],a===void 0?t.push(s):a!==s&&(s.then(gs,gs),s=a),s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,Jm(t),t;default:if(typeof s.status=="string")s.then(gs,gs);else{if(t=Xe,t!==null&&100<t.shellSuspendCounter)throw Error(i(482));t=s,t.status="pending",t.then(function(l){if(s.status==="pending"){var h=s;h.status="fulfilled",h.value=l}},function(l){if(s.status==="pending"){var h=s;h.status="rejected",h.reason=l}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,Jm(t),t}throw Bi=s,Er}}function zi(t){try{var s=t._init;return s(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Bi=a,Er):a}}var Bi=null;function Qm(){if(Bi===null)throw Error(i(459));var t=Bi;return Bi=null,t}function Jm(t){if(t===Er||t===xl)throw Error(i(483))}var Cr=null,Ia=0;function El(t){var s=Ia;return Ia+=1,Cr===null&&(Cr=[]),Zm(Cr,t,s)}function Pa(t,s){s=s.props.ref,t.ref=s!==void 0?s:null}function Cl(t,s){throw s.$$typeof===b?Error(i(525)):(t=Object.prototype.toString.call(s),Error(i(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t)))}function eg(t){function s(B,j){if(t){var q=B.deletions;q===null?(B.deletions=[j],B.flags|=16):q.push(j)}}function a(B,j){if(!t)return null;for(;j!==null;)s(B,j),j=j.sibling;return null}function l(B){for(var j=new Map;B!==null;)B.key!==null?j.set(B.key,B):j.set(B.index,B),B=B.sibling;return j}function h(B,j){return B=_s(B,j),B.index=0,B.sibling=null,B}function p(B,j,q){return B.index=q,t?(q=B.alternate,q!==null?(q=q.index,q<j?(B.flags|=67108866,j):q):(B.flags|=67108866,j)):(B.flags|=1048576,j)}function v(B){return t&&B.alternate===null&&(B.flags|=67108866),B}function T(B,j,q,Y){return j===null||j.tag!==6?(j=Ju(q,B.mode,Y),j.return=B,j):(j=h(j,q),j.return=B,j)}function N(B,j,q,Y){var me=q.type;return me===x?G(B,j,q.props.children,Y,q.key):j!==null&&(j.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===z&&zi(me)===j.type)?(j=h(j,q.props),Pa(j,q),j.return=B,j):(j=vl(q.type,q.key,q.props,null,B.mode,Y),Pa(j,q),j.return=B,j)}function L(B,j,q,Y){return j===null||j.tag!==4||j.stateNode.containerInfo!==q.containerInfo||j.stateNode.implementation!==q.implementation?(j=eh(q,B.mode,Y),j.return=B,j):(j=h(j,q.children||[]),j.return=B,j)}function G(B,j,q,Y,me){return j===null||j.tag!==7?(j=Ri(q,B.mode,Y,me),j.return=B,j):(j=h(j,q),j.return=B,j)}function W(B,j,q){if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return j=Ju(""+j,B.mode,q),j.return=B,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case S:return q=vl(j.type,j.key,j.props,null,B.mode,q),Pa(q,j),q.return=B,q;case w:return j=eh(j,B.mode,q),j.return=B,j;case z:return j=zi(j),W(B,j,q)}if(ue(j)||F(j))return j=Ri(j,B.mode,q,null),j.return=B,j;if(typeof j.then=="function")return W(B,El(j),q);if(j.$$typeof===O)return W(B,Sl(B,j),q);Cl(B,j)}return null}function V(B,j,q,Y){var me=j!==null?j.key:null;if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return me!==null?null:T(B,j,""+q,Y);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case S:return q.key===me?N(B,j,q,Y):null;case w:return q.key===me?L(B,j,q,Y):null;case z:return q=zi(q),V(B,j,q,Y)}if(ue(q)||F(q))return me!==null?null:G(B,j,q,Y,null);if(typeof q.then=="function")return V(B,j,El(q),Y);if(q.$$typeof===O)return V(B,j,Sl(B,q),Y);Cl(B,q)}return null}function H(B,j,q,Y,me){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return B=B.get(q)||null,T(j,B,""+Y,me);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case S:return B=B.get(Y.key===null?q:Y.key)||null,N(j,B,Y,me);case w:return B=B.get(Y.key===null?q:Y.key)||null,L(j,B,Y,me);case z:return Y=zi(Y),H(B,j,q,Y,me)}if(ue(Y)||F(Y))return B=B.get(q)||null,G(j,B,Y,me,null);if(typeof Y.then=="function")return H(B,j,q,El(Y),me);if(Y.$$typeof===O)return H(B,j,q,Sl(j,Y),me);Cl(j,Y)}return null}function ce(B,j,q,Y){for(var me=null,Ue=null,de=j,Ee=j=0,Re=null;de!==null&&Ee<q.length;Ee++){de.index>Ee?(Re=de,de=null):Re=de.sibling;var ze=V(B,de,q[Ee],Y);if(ze===null){de===null&&(de=Re);break}t&&de&&ze.alternate===null&&s(B,de),j=p(ze,j,Ee),Ue===null?me=ze:Ue.sibling=ze,Ue=ze,de=Re}if(Ee===q.length)return a(B,de),De&&vs(B,Ee),me;if(de===null){for(;Ee<q.length;Ee++)de=W(B,q[Ee],Y),de!==null&&(j=p(de,j,Ee),Ue===null?me=de:Ue.sibling=de,Ue=de);return De&&vs(B,Ee),me}for(de=l(de);Ee<q.length;Ee++)Re=H(de,B,Ee,q[Ee],Y),Re!==null&&(t&&Re.alternate!==null&&de.delete(Re.key===null?Ee:Re.key),j=p(Re,j,Ee),Ue===null?me=Re:Ue.sibling=Re,Ue=Re);return t&&de.forEach(function(di){return s(B,di)}),De&&vs(B,Ee),me}function _e(B,j,q,Y){if(q==null)throw Error(i(151));for(var me=null,Ue=null,de=j,Ee=j=0,Re=null,ze=q.next();de!==null&&!ze.done;Ee++,ze=q.next()){de.index>Ee?(Re=de,de=null):Re=de.sibling;var di=V(B,de,ze.value,Y);if(di===null){de===null&&(de=Re);break}t&&de&&di.alternate===null&&s(B,de),j=p(di,j,Ee),Ue===null?me=di:Ue.sibling=di,Ue=di,de=Re}if(ze.done)return a(B,de),De&&vs(B,Ee),me;if(de===null){for(;!ze.done;Ee++,ze=q.next())ze=W(B,ze.value,Y),ze!==null&&(j=p(ze,j,Ee),Ue===null?me=ze:Ue.sibling=ze,Ue=ze);return De&&vs(B,Ee),me}for(de=l(de);!ze.done;Ee++,ze=q.next())ze=H(de,B,Ee,ze.value,Y),ze!==null&&(t&&ze.alternate!==null&&de.delete(ze.key===null?Ee:ze.key),j=p(ze,j,Ee),Ue===null?me=ze:Ue.sibling=ze,Ue=ze);return t&&de.forEach(function(lS){return s(B,lS)}),De&&vs(B,Ee),me}function Fe(B,j,q,Y){if(typeof q=="object"&&q!==null&&q.type===x&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case S:e:{for(var me=q.key;j!==null;){if(j.key===me){if(me=q.type,me===x){if(j.tag===7){a(B,j.sibling),Y=h(j,q.props.children),Y.return=B,B=Y;break e}}else if(j.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===z&&zi(me)===j.type){a(B,j.sibling),Y=h(j,q.props),Pa(Y,q),Y.return=B,B=Y;break e}a(B,j);break}else s(B,j);j=j.sibling}q.type===x?(Y=Ri(q.props.children,B.mode,Y,q.key),Y.return=B,B=Y):(Y=vl(q.type,q.key,q.props,null,B.mode,Y),Pa(Y,q),Y.return=B,B=Y)}return v(B);case w:e:{for(me=q.key;j!==null;){if(j.key===me)if(j.tag===4&&j.stateNode.containerInfo===q.containerInfo&&j.stateNode.implementation===q.implementation){a(B,j.sibling),Y=h(j,q.children||[]),Y.return=B,B=Y;break e}else{a(B,j);break}else s(B,j);j=j.sibling}Y=eh(q,B.mode,Y),Y.return=B,B=Y}return v(B);case z:return q=zi(q),Fe(B,j,q,Y)}if(ue(q))return ce(B,j,q,Y);if(F(q)){if(me=F(q),typeof me!="function")throw Error(i(150));return q=me.call(q),_e(B,j,q,Y)}if(typeof q.then=="function")return Fe(B,j,El(q),Y);if(q.$$typeof===O)return Fe(B,j,Sl(B,q),Y);Cl(B,q)}return typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint"?(q=""+q,j!==null&&j.tag===6?(a(B,j.sibling),Y=h(j,q),Y.return=B,B=Y):(a(B,j),Y=Ju(q,B.mode,Y),Y.return=B,B=Y),v(B)):a(B,j)}return function(B,j,q,Y){try{Ia=0;var me=Fe(B,j,q,Y);return Cr=null,me}catch(de){if(de===Er||de===xl)throw de;var Ue=cn(29,de,null,B.mode);return Ue.lanes=Y,Ue.return=B,Ue}}}var qi=eg(!0),tg=eg(!1),Xs=!1;function dh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function fh(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Ks(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Zs(t,s,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(Be&2)!==0){var h=l.pending;return h===null?s.next=s:(s.next=h.next,h.next=s),l.pending=s,s=_l(t),qm(t,null,a),s}return yl(t,l,s,a),_l(t)}function Ha(t,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194048)!==0)){var l=s.lanes;l&=t.pendingLanes,a|=l,s.lanes=a,Fp(t,a)}}function ph(t,s){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,p=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};p===null?h=p=v:p=p.next=v,a=a.next}while(a!==null);p===null?h=p=s:p=p.next=s}else h=p=s;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:p,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=s:t.next=s,a.lastBaseUpdate=s}var mh=!1;function $a(){if(mh){var t=Ar;if(t!==null)throw t}}function Ga(t,s,a,l){mh=!1;var h=t.updateQueue;Xs=!1;var p=h.firstBaseUpdate,v=h.lastBaseUpdate,T=h.shared.pending;if(T!==null){h.shared.pending=null;var N=T,L=N.next;N.next=null,v===null?p=L:v.next=L,v=N;var G=t.alternate;G!==null&&(G=G.updateQueue,T=G.lastBaseUpdate,T!==v&&(T===null?G.firstBaseUpdate=L:T.next=L,G.lastBaseUpdate=N))}if(p!==null){var W=h.baseState;v=0,G=L=N=null,T=p;do{var V=T.lane&-536870913,H=V!==T.lane;if(H?(ke&V)===V:(l&V)===V){V!==0&&V===xr&&(mh=!0),G!==null&&(G=G.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var ce=t,_e=T;V=s;var Fe=a;switch(_e.tag){case 1:if(ce=_e.payload,typeof ce=="function"){W=ce.call(Fe,W,V);break e}W=ce;break e;case 3:ce.flags=ce.flags&-65537|128;case 0:if(ce=_e.payload,V=typeof ce=="function"?ce.call(Fe,W,V):ce,V==null)break e;W=_({},W,V);break e;case 2:Xs=!0}}V=T.callback,V!==null&&(t.flags|=64,H&&(t.flags|=8192),H=h.callbacks,H===null?h.callbacks=[V]:H.push(V))}else H={lane:V,tag:T.tag,payload:T.payload,callback:T.callback,next:null},G===null?(L=G=H,N=W):G=G.next=H,v|=V;if(T=T.next,T===null){if(T=h.shared.pending,T===null)break;H=T,T=H.next,H.next=null,h.lastBaseUpdate=H,h.shared.pending=null}}while(!0);G===null&&(N=W),h.baseState=N,h.firstBaseUpdate=L,h.lastBaseUpdate=G,p===null&&(h.shared.lanes=0),ni|=v,t.lanes=v,t.memoizedState=W}}function ng(t,s){if(typeof t!="function")throw Error(i(191,t));t.call(s)}function sg(t,s){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)ng(a[t],s)}var Nr=C(null),Nl=C(0);function ig(t,s){t=ks,ee(Nl,t),ee(Nr,s),ks=t|s.baseLanes}function gh(){ee(Nl,ks),ee(Nr,Nr.current)}function yh(){ks=Nl.current,P(Nr),P(Nl)}var un=C(null),Cn=null;function Qs(t){var s=t.alternate;ee(mt,mt.current&1),ee(un,t),Cn===null&&(s===null||Nr.current!==null||s.memoizedState!==null)&&(Cn=t)}function _h(t){ee(mt,mt.current),ee(un,t),Cn===null&&(Cn=t)}function rg(t){t.tag===22?(ee(mt,mt.current),ee(un,t),Cn===null&&(Cn=t)):Js()}function Js(){ee(mt,mt.current),ee(un,un.current)}function hn(t){P(un),Cn===t&&(Cn=null),P(mt)}var mt=C(0);function Ol(t){for(var s=t;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||xd(a)||Ad(a)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Ss=0,Ae=null,$e=null,vt=null,kl=!1,Or=!1,Li=!1,Rl=0,Fa=0,kr=null,Qw=0;function ct(){throw Error(i(321))}function vh(t,s){if(s===null)return!1;for(var a=0;a<s.length&&a<t.length;a++)if(!ln(t[a],s[a]))return!1;return!0}function bh(t,s,a,l,h,p){return Ss=p,Ae=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,U.H=t===null||t.memoizedState===null?Pg:Uh,Li=!1,p=a(l,h),Li=!1,Or&&(p=og(s,a,l,h)),ag(t),p}function ag(t){U.H=Xa;var s=$e!==null&&$e.next!==null;if(Ss=0,vt=$e=Ae=null,kl=!1,Fa=0,kr=null,s)throw Error(i(300));t===null||bt||(t=t.dependencies,t!==null&&wl(t)&&(bt=!0))}function og(t,s,a,l){Ae=t;var h=0;do{if(Or&&(kr=null),Fa=0,Or=!1,25<=h)throw Error(i(301));if(h+=1,vt=$e=null,t.updateQueue!=null){var p=t.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}U.H=Hg,p=s(a,l)}while(Or);return p}function Jw(){var t=U.H,s=t.useState()[0];return s=typeof s.then=="function"?Ya(s):s,t=t.useState()[0],($e!==null?$e.memoizedState:null)!==t&&(Ae.flags|=1024),s}function wh(){var t=Rl!==0;return Rl=0,t}function Sh(t,s,a){s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~a}function Th(t){if(kl){for(t=t.memoizedState;t!==null;){var s=t.queue;s!==null&&(s.pending=null),t=t.next}kl=!1}Ss=0,vt=$e=Ae=null,Or=!1,Fa=Rl=0,kr=null}function Ht(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vt===null?Ae.memoizedState=vt=t:vt=vt.next=t,vt}function gt(){if($e===null){var t=Ae.alternate;t=t!==null?t.memoizedState:null}else t=$e.next;var s=vt===null?Ae.memoizedState:vt.next;if(s!==null)vt=s,$e=t;else{if(t===null)throw Ae.alternate===null?Error(i(467)):Error(i(310));$e=t,t={memoizedState:$e.memoizedState,baseState:$e.baseState,baseQueue:$e.baseQueue,queue:$e.queue,next:null},vt===null?Ae.memoizedState=vt=t:vt=vt.next=t}return vt}function jl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ya(t){var s=Fa;return Fa+=1,kr===null&&(kr=[]),t=Zm(kr,t,s),s=Ae,(vt===null?s.memoizedState:vt.next)===null&&(s=s.alternate,U.H=s===null||s.memoizedState===null?Pg:Uh),t}function Dl(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Ya(t);if(t.$$typeof===O)return Mt(t)}throw Error(i(438,String(t)))}function xh(t){var s=null,a=Ae.updateQueue;if(a!==null&&(s=a.memoCache),s==null){var l=Ae.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(s={data:l.data.map(function(h){return h.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),a===null&&(a=jl(),Ae.updateQueue=a),a.memoCache=s,a=s.data[s.index],a===void 0)for(a=s.data[s.index]=Array(t),l=0;l<t;l++)a[l]=Q;return s.index++,a}function Ts(t,s){return typeof s=="function"?s(t):s}function Ml(t){var s=gt();return Ah(s,$e,t)}function Ah(t,s,a){var l=t.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=a;var h=t.baseQueue,p=l.pending;if(p!==null){if(h!==null){var v=h.next;h.next=p.next,p.next=v}s.baseQueue=h=p,l.pending=null}if(p=t.baseState,h===null)t.memoizedState=p;else{s=h.next;var T=v=null,N=null,L=s,G=!1;do{var W=L.lane&-536870913;if(W!==L.lane?(ke&W)===W:(Ss&W)===W){var V=L.revertLane;if(V===0)N!==null&&(N=N.next={lane:0,revertLane:0,gesture:null,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null}),W===xr&&(G=!0);else if((Ss&V)===V){L=L.next,V===xr&&(G=!0);continue}else W={lane:0,revertLane:L.revertLane,gesture:null,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null},N===null?(T=N=W,v=p):N=N.next=W,Ae.lanes|=V,ni|=V;W=L.action,Li&&a(p,W),p=L.hasEagerState?L.eagerState:a(p,W)}else V={lane:W,revertLane:L.revertLane,gesture:L.gesture,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null},N===null?(T=N=V,v=p):N=N.next=V,Ae.lanes|=W,ni|=W;L=L.next}while(L!==null&&L!==s);if(N===null?v=p:N.next=T,!ln(p,t.memoizedState)&&(bt=!0,G&&(a=Ar,a!==null)))throw a;t.memoizedState=p,t.baseState=v,t.baseQueue=N,l.lastRenderedState=p}return h===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function Eh(t){var s=gt(),a=s.queue;if(a===null)throw Error(i(311));a.lastRenderedReducer=t;var l=a.dispatch,h=a.pending,p=s.memoizedState;if(h!==null){a.pending=null;var v=h=h.next;do p=t(p,v.action),v=v.next;while(v!==h);ln(p,s.memoizedState)||(bt=!0),s.memoizedState=p,s.baseQueue===null&&(s.baseState=p),a.lastRenderedState=p}return[p,l]}function lg(t,s,a){var l=Ae,h=gt(),p=De;if(p){if(a===void 0)throw Error(i(407));a=a()}else a=s();var v=!ln(($e||h).memoizedState,a);if(v&&(h.memoizedState=a,bt=!0),h=h.queue,Oh(hg.bind(null,l,h,t),[t]),h.getSnapshot!==s||v||vt!==null&&vt.memoizedState.tag&1){if(l.flags|=2048,Rr(9,{destroy:void 0},ug.bind(null,l,h,a,s),null),Xe===null)throw Error(i(349));p||(Ss&127)!==0||cg(l,s,a)}return a}function cg(t,s,a){t.flags|=16384,t={getSnapshot:s,value:a},s=Ae.updateQueue,s===null?(s=jl(),Ae.updateQueue=s,s.stores=[t]):(a=s.stores,a===null?s.stores=[t]:a.push(t))}function ug(t,s,a,l){s.value=a,s.getSnapshot=l,dg(s)&&fg(t)}function hg(t,s,a){return a(function(){dg(s)&&fg(t)})}function dg(t){var s=t.getSnapshot;t=t.value;try{var a=s();return!ln(t,a)}catch{return!0}}function fg(t){var s=ki(t,2);s!==null&&en(s,t,2)}function Ch(t){var s=Ht();if(typeof t=="function"){var a=t;if(t=a(),Li){Ps(!0);try{a()}finally{Ps(!1)}}}return s.memoizedState=s.baseState=t,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ts,lastRenderedState:t},s}function pg(t,s,a,l){return t.baseState=a,Ah(t,$e,typeof l=="function"?l:Ts)}function e1(t,s,a,l,h){if(Bl(t))throw Error(i(485));if(t=s.action,t!==null){var p={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){p.listeners.push(v)}};U.T!==null?a(!0):p.isTransition=!1,l(p),a=s.pending,a===null?(p.next=s.pending=p,mg(s,p)):(p.next=a.next,s.pending=a.next=p)}}function mg(t,s){var a=s.action,l=s.payload,h=t.state;if(s.isTransition){var p=U.T,v={};U.T=v;try{var T=a(h,l),N=U.S;N!==null&&N(v,T),gg(t,s,T)}catch(L){Nh(t,s,L)}finally{p!==null&&v.types!==null&&(p.types=v.types),U.T=p}}else try{p=a(h,l),gg(t,s,p)}catch(L){Nh(t,s,L)}}function gg(t,s,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){yg(t,s,l)},function(l){return Nh(t,s,l)}):yg(t,s,a)}function yg(t,s,a){s.status="fulfilled",s.value=a,_g(s),t.state=a,s=t.pending,s!==null&&(a=s.next,a===s?t.pending=null:(a=a.next,s.next=a,mg(t,a)))}function Nh(t,s,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do s.status="rejected",s.reason=a,_g(s),s=s.next;while(s!==l)}t.action=null}function _g(t){t=t.listeners;for(var s=0;s<t.length;s++)(0,t[s])()}function vg(t,s){return s}function bg(t,s){if(De){var a=Xe.formState;if(a!==null){e:{var l=Ae;if(De){if(tt){t:{for(var h=tt,p=En;h.nodeType!==8;){if(!p){h=null;break t}if(h=Nn(h.nextSibling),h===null){h=null;break t}}p=h.data,h=p==="F!"||p==="F"?h:null}if(h){tt=Nn(h.nextSibling),l=h.data==="F!";break e}}Ys(l)}l=!1}l&&(s=a[0])}}return a=Ht(),a.memoizedState=a.baseState=s,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:vg,lastRenderedState:s},a.queue=l,a=Lg.bind(null,Ae,l),l.dispatch=a,l=Ch(!1),p=Mh.bind(null,Ae,!1,l.queue),l=Ht(),h={state:s,dispatch:null,action:t,pending:null},l.queue=h,a=e1.bind(null,Ae,h,p,a),h.dispatch=a,l.memoizedState=t,[s,a,!1]}function wg(t){var s=gt();return Sg(s,$e,t)}function Sg(t,s,a){if(s=Ah(t,s,vg)[0],t=Ml(Ts)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var l=Ya(s)}catch(v){throw v===Er?xl:v}else l=s;s=gt();var h=s.queue,p=h.dispatch;return a!==s.memoizedState&&(Ae.flags|=2048,Rr(9,{destroy:void 0},t1.bind(null,h,a),null)),[l,p,t]}function t1(t,s){t.action=s}function Tg(t){var s=gt(),a=$e;if(a!==null)return Sg(s,a,t);gt(),s=s.memoizedState,a=gt();var l=a.queue.dispatch;return a.memoizedState=t,[s,l,!1]}function Rr(t,s,a,l){return t={tag:t,create:a,deps:l,inst:s,next:null},s=Ae.updateQueue,s===null&&(s=jl(),Ae.updateQueue=s),a=s.lastEffect,a===null?s.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,s.lastEffect=t),t}function xg(){return gt().memoizedState}function Ul(t,s,a,l){var h=Ht();Ae.flags|=t,h.memoizedState=Rr(1|s,{destroy:void 0},a,l===void 0?null:l)}function zl(t,s,a,l){var h=gt();l=l===void 0?null:l;var p=h.memoizedState.inst;$e!==null&&l!==null&&vh(l,$e.memoizedState.deps)?h.memoizedState=Rr(s,p,a,l):(Ae.flags|=t,h.memoizedState=Rr(1|s,p,a,l))}function Ag(t,s){Ul(8390656,8,t,s)}function Oh(t,s){zl(2048,8,t,s)}function n1(t){Ae.flags|=4;var s=Ae.updateQueue;if(s===null)s=jl(),Ae.updateQueue=s,s.events=[t];else{var a=s.events;a===null?s.events=[t]:a.push(t)}}function Eg(t){var s=gt().memoizedState;return n1({ref:s,nextImpl:t}),function(){if((Be&2)!==0)throw Error(i(440));return s.impl.apply(void 0,arguments)}}function Cg(t,s){return zl(4,2,t,s)}function Ng(t,s){return zl(4,4,t,s)}function Og(t,s){if(typeof s=="function"){t=t();var a=s(t);return function(){typeof a=="function"?a():s(null)}}if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function kg(t,s,a){a=a!=null?a.concat([t]):null,zl(4,4,Og.bind(null,s,t),a)}function kh(){}function Rg(t,s){var a=gt();s=s===void 0?null:s;var l=a.memoizedState;return s!==null&&vh(s,l[1])?l[0]:(a.memoizedState=[t,s],t)}function jg(t,s){var a=gt();s=s===void 0?null:s;var l=a.memoizedState;if(s!==null&&vh(s,l[1]))return l[0];if(l=t(),Li){Ps(!0);try{t()}finally{Ps(!1)}}return a.memoizedState=[l,s],l}function Rh(t,s,a){return a===void 0||(Ss&1073741824)!==0&&(ke&261930)===0?t.memoizedState=s:(t.memoizedState=a,t=Dy(),Ae.lanes|=t,ni|=t,a)}function Dg(t,s,a,l){return ln(a,s)?a:Nr.current!==null?(t=Rh(t,a,l),ln(t,s)||(bt=!0),t):(Ss&42)===0||(Ss&1073741824)!==0&&(ke&261930)===0?(bt=!0,t.memoizedState=a):(t=Dy(),Ae.lanes|=t,ni|=t,s)}function Mg(t,s,a,l,h){var p=$.p;$.p=p!==0&&8>p?p:8;var v=U.T,T={};U.T=T,Mh(t,!1,s,a);try{var N=h(),L=U.S;if(L!==null&&L(T,N),N!==null&&typeof N=="object"&&typeof N.then=="function"){var G=Zw(N,l);Wa(t,s,G,pn(t))}else Wa(t,s,l,pn(t))}catch(W){Wa(t,s,{then:function(){},status:"rejected",reason:W},pn())}finally{$.p=p,v!==null&&T.types!==null&&(v.types=T.types),U.T=v}}function s1(){}function jh(t,s,a,l){if(t.tag!==5)throw Error(i(476));var h=Ug(t).queue;Mg(t,h,s,J,a===null?s1:function(){return zg(t),a(l)})}function Ug(t){var s=t.memoizedState;if(s!==null)return s;s={memoizedState:J,baseState:J,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ts,lastRenderedState:J},next:null};var a={};return s.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ts,lastRenderedState:a},next:null},t.memoizedState=s,t=t.alternate,t!==null&&(t.memoizedState=s),s}function zg(t){var s=Ug(t);s.next===null&&(s=t.alternate.memoizedState),Wa(t,s.next.queue,{},pn())}function Dh(){return Mt(ho)}function Bg(){return gt().memoizedState}function qg(){return gt().memoizedState}function i1(t){for(var s=t.return;s!==null;){switch(s.tag){case 24:case 3:var a=pn();t=Ks(a);var l=Zs(s,t,a);l!==null&&(en(l,s,a),Ha(l,s,a)),s={cache:lh()},t.payload=s;return}s=s.return}}function r1(t,s,a){var l=pn();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Bl(t)?Vg(s,a):(a=Zu(t,s,a,l),a!==null&&(en(a,t,l),Ig(a,s,l)))}function Lg(t,s,a){var l=pn();Wa(t,s,a,l)}function Wa(t,s,a,l){var h={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Bl(t))Vg(s,h);else{var p=t.alternate;if(t.lanes===0&&(p===null||p.lanes===0)&&(p=s.lastRenderedReducer,p!==null))try{var v=s.lastRenderedState,T=p(v,a);if(h.hasEagerState=!0,h.eagerState=T,ln(T,v))return yl(t,s,h,0),Xe===null&&gl(),!1}catch{}if(a=Zu(t,s,h,l),a!==null)return en(a,t,l),Ig(a,s,l),!0}return!1}function Mh(t,s,a,l){if(l={lane:2,revertLane:dd(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Bl(t)){if(s)throw Error(i(479))}else s=Zu(t,a,l,2),s!==null&&en(s,t,2)}function Bl(t){var s=t.alternate;return t===Ae||s!==null&&s===Ae}function Vg(t,s){Or=kl=!0;var a=t.pending;a===null?s.next=s:(s.next=a.next,a.next=s),t.pending=s}function Ig(t,s,a){if((a&4194048)!==0){var l=s.lanes;l&=t.pendingLanes,a|=l,s.lanes=a,Fp(t,a)}}var Xa={readContext:Mt,use:Dl,useCallback:ct,useContext:ct,useEffect:ct,useImperativeHandle:ct,useLayoutEffect:ct,useInsertionEffect:ct,useMemo:ct,useReducer:ct,useRef:ct,useState:ct,useDebugValue:ct,useDeferredValue:ct,useTransition:ct,useSyncExternalStore:ct,useId:ct,useHostTransitionStatus:ct,useFormState:ct,useActionState:ct,useOptimistic:ct,useMemoCache:ct,useCacheRefresh:ct};Xa.useEffectEvent=ct;var Pg={readContext:Mt,use:Dl,useCallback:function(t,s){return Ht().memoizedState=[t,s===void 0?null:s],t},useContext:Mt,useEffect:Ag,useImperativeHandle:function(t,s,a){a=a!=null?a.concat([t]):null,Ul(4194308,4,Og.bind(null,s,t),a)},useLayoutEffect:function(t,s){return Ul(4194308,4,t,s)},useInsertionEffect:function(t,s){Ul(4,2,t,s)},useMemo:function(t,s){var a=Ht();s=s===void 0?null:s;var l=t();if(Li){Ps(!0);try{t()}finally{Ps(!1)}}return a.memoizedState=[l,s],l},useReducer:function(t,s,a){var l=Ht();if(a!==void 0){var h=a(s);if(Li){Ps(!0);try{a(s)}finally{Ps(!1)}}}else h=s;return l.memoizedState=l.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},l.queue=t,t=t.dispatch=r1.bind(null,Ae,t),[l.memoizedState,t]},useRef:function(t){var s=Ht();return t={current:t},s.memoizedState=t},useState:function(t){t=Ch(t);var s=t.queue,a=Lg.bind(null,Ae,s);return s.dispatch=a,[t.memoizedState,a]},useDebugValue:kh,useDeferredValue:function(t,s){var a=Ht();return Rh(a,t,s)},useTransition:function(){var t=Ch(!1);return t=Mg.bind(null,Ae,t.queue,!0,!1),Ht().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,s,a){var l=Ae,h=Ht();if(De){if(a===void 0)throw Error(i(407));a=a()}else{if(a=s(),Xe===null)throw Error(i(349));(ke&127)!==0||cg(l,s,a)}h.memoizedState=a;var p={value:a,getSnapshot:s};return h.queue=p,Ag(hg.bind(null,l,p,t),[t]),l.flags|=2048,Rr(9,{destroy:void 0},ug.bind(null,l,p,a,s),null),a},useId:function(){var t=Ht(),s=Xe.identifierPrefix;if(De){var a=ns,l=ts;a=(l&~(1<<32-on(l)-1)).toString(32)+a,s="_"+s+"R_"+a,a=Rl++,0<a&&(s+="H"+a.toString(32)),s+="_"}else a=Qw++,s="_"+s+"r_"+a.toString(32)+"_";return t.memoizedState=s},useHostTransitionStatus:Dh,useFormState:bg,useActionState:bg,useOptimistic:function(t){var s=Ht();s.memoizedState=s.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=a,s=Mh.bind(null,Ae,!0,a),a.dispatch=s,[t,s]},useMemoCache:xh,useCacheRefresh:function(){return Ht().memoizedState=i1.bind(null,Ae)},useEffectEvent:function(t){var s=Ht(),a={impl:t};return s.memoizedState=a,function(){if((Be&2)!==0)throw Error(i(440));return a.impl.apply(void 0,arguments)}}},Uh={readContext:Mt,use:Dl,useCallback:Rg,useContext:Mt,useEffect:Oh,useImperativeHandle:kg,useInsertionEffect:Cg,useLayoutEffect:Ng,useMemo:jg,useReducer:Ml,useRef:xg,useState:function(){return Ml(Ts)},useDebugValue:kh,useDeferredValue:function(t,s){var a=gt();return Dg(a,$e.memoizedState,t,s)},useTransition:function(){var t=Ml(Ts)[0],s=gt().memoizedState;return[typeof t=="boolean"?t:Ya(t),s]},useSyncExternalStore:lg,useId:Bg,useHostTransitionStatus:Dh,useFormState:wg,useActionState:wg,useOptimistic:function(t,s){var a=gt();return pg(a,$e,t,s)},useMemoCache:xh,useCacheRefresh:qg};Uh.useEffectEvent=Eg;var Hg={readContext:Mt,use:Dl,useCallback:Rg,useContext:Mt,useEffect:Oh,useImperativeHandle:kg,useInsertionEffect:Cg,useLayoutEffect:Ng,useMemo:jg,useReducer:Eh,useRef:xg,useState:function(){return Eh(Ts)},useDebugValue:kh,useDeferredValue:function(t,s){var a=gt();return $e===null?Rh(a,t,s):Dg(a,$e.memoizedState,t,s)},useTransition:function(){var t=Eh(Ts)[0],s=gt().memoizedState;return[typeof t=="boolean"?t:Ya(t),s]},useSyncExternalStore:lg,useId:Bg,useHostTransitionStatus:Dh,useFormState:Tg,useActionState:Tg,useOptimistic:function(t,s){var a=gt();return $e!==null?pg(a,$e,t,s):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:xh,useCacheRefresh:qg};Hg.useEffectEvent=Eg;function zh(t,s,a,l){s=t.memoizedState,a=a(l,s),a=a==null?s:_({},s,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var Bh={enqueueSetState:function(t,s,a){t=t._reactInternals;var l=pn(),h=Ks(l);h.payload=s,a!=null&&(h.callback=a),s=Zs(t,h,l),s!==null&&(en(s,t,l),Ha(s,t,l))},enqueueReplaceState:function(t,s,a){t=t._reactInternals;var l=pn(),h=Ks(l);h.tag=1,h.payload=s,a!=null&&(h.callback=a),s=Zs(t,h,l),s!==null&&(en(s,t,l),Ha(s,t,l))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var a=pn(),l=Ks(a);l.tag=2,s!=null&&(l.callback=s),s=Zs(t,l,a),s!==null&&(en(s,t,a),Ha(s,t,a))}};function $g(t,s,a,l,h,p,v){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,p,v):s.prototype&&s.prototype.isPureReactComponent?!Ua(a,l)||!Ua(h,p):!0}function Gg(t,s,a,l){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,l),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,l),s.state!==t&&Bh.enqueueReplaceState(s,s.state,null)}function Vi(t,s){var a=s;if("ref"in s){a={};for(var l in s)l!=="ref"&&(a[l]=s[l])}if(t=t.defaultProps){a===s&&(a=_({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}function Fg(t){ml(t)}function Yg(t){console.error(t)}function Wg(t){ml(t)}function ql(t,s){try{var a=t.onUncaughtError;a(s.value,{componentStack:s.stack})}catch(l){setTimeout(function(){throw l})}}function Xg(t,s,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function qh(t,s,a){return a=Ks(a),a.tag=3,a.payload={element:null},a.callback=function(){ql(t,s)},a}function Kg(t){return t=Ks(t),t.tag=3,t}function Zg(t,s,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var p=l.value;t.payload=function(){return h(p)},t.callback=function(){Xg(s,a,l)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(t.callback=function(){Xg(s,a,l),typeof h!="function"&&(si===null?si=new Set([this]):si.add(this));var T=l.stack;this.componentDidCatch(l.value,{componentStack:T!==null?T:""})})}function a1(t,s,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(s=a.alternate,s!==null&&Tr(s,a,h,!0),a=un.current,a!==null){switch(a.tag){case 31:case 13:return Cn===null?Kl():a.alternate===null&&ut===0&&(ut=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===Al?a.flags|=16384:(s=a.updateQueue,s===null?a.updateQueue=new Set([l]):s.add(l),cd(t,l,h)),!1;case 22:return a.flags|=65536,l===Al?a.flags|=16384:(s=a.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=s):(a=s.retryQueue,a===null?s.retryQueue=new Set([l]):a.add(l)),cd(t,l,h)),!1}throw Error(i(435,a.tag))}return cd(t,l,h),Kl(),!1}if(De)return s=un.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=h,l!==sh&&(t=Error(i(422),{cause:l}),qa(Tn(t,a)))):(l!==sh&&(s=Error(i(423),{cause:l}),qa(Tn(s,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,l=Tn(l,a),h=qh(t.stateNode,l,h),ph(t,h),ut!==4&&(ut=2)),!1;var p=Error(i(520),{cause:l});if(p=Tn(p,a),so===null?so=[p]:so.push(p),ut!==4&&(ut=2),s===null)return!0;l=Tn(l,a),a=s;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=qh(a.stateNode,l,t),ph(a,t),!1;case 1:if(s=a.type,p=a.stateNode,(a.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(si===null||!si.has(p))))return a.flags|=65536,h&=-h,a.lanes|=h,h=Kg(h),Zg(h,t,a,l),ph(a,h),!1}a=a.return}while(a!==null);return!1}var Lh=Error(i(461)),bt=!1;function Ut(t,s,a,l){s.child=t===null?tg(s,null,a,l):qi(s,t.child,a,l)}function Qg(t,s,a,l,h){a=a.render;var p=s.ref;if("ref"in l){var v={};for(var T in l)T!=="ref"&&(v[T]=l[T])}else v=l;return Mi(s),l=bh(t,s,a,v,p,h),T=wh(),t!==null&&!bt?(Sh(t,s,h),xs(t,s,h)):(De&&T&&th(s),s.flags|=1,Ut(t,s,l,h),s.child)}function Jg(t,s,a,l,h){if(t===null){var p=a.type;return typeof p=="function"&&!Qu(p)&&p.defaultProps===void 0&&a.compare===null?(s.tag=15,s.type=p,ey(t,s,p,l,h)):(t=vl(a.type,null,l,s,s.mode,h),t.ref=s.ref,t.return=s,s.child=t)}if(p=t.child,!Yh(t,h)){var v=p.memoizedProps;if(a=a.compare,a=a!==null?a:Ua,a(v,l)&&t.ref===s.ref)return xs(t,s,h)}return s.flags|=1,t=_s(p,l),t.ref=s.ref,t.return=s,s.child=t}function ey(t,s,a,l,h){if(t!==null){var p=t.memoizedProps;if(Ua(p,l)&&t.ref===s.ref)if(bt=!1,s.pendingProps=l=p,Yh(t,h))(t.flags&131072)!==0&&(bt=!0);else return s.lanes=t.lanes,xs(t,s,h)}return Vh(t,s,a,l,h)}function ty(t,s,a,l){var h=l.children,p=t!==null?t.memoizedState:null;if(t===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((s.flags&128)!==0){if(p=p!==null?p.baseLanes|a:a,t!==null){for(l=s.child=t.child,h=0;l!==null;)h=h|l.lanes|l.childLanes,l=l.sibling;l=h&~p}else l=0,s.child=null;return ny(t,s,p,a,l)}if((a&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},t!==null&&Tl(s,p!==null?p.cachePool:null),p!==null?ig(s,p):gh(),rg(s);else return l=s.lanes=536870912,ny(t,s,p!==null?p.baseLanes|a:a,a,l)}else p!==null?(Tl(s,p.cachePool),ig(s,p),Js(),s.memoizedState=null):(t!==null&&Tl(s,null),gh(),Js());return Ut(t,s,h,a),s.child}function Ka(t,s){return t!==null&&t.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function ny(t,s,a,l,h){var p=uh();return p=p===null?null:{parent:_t._currentValue,pool:p},s.memoizedState={baseLanes:a,cachePool:p},t!==null&&Tl(s,null),gh(),rg(s),t!==null&&Tr(t,s,l,!0),s.childLanes=h,null}function Ll(t,s){return s=Il({mode:s.mode,children:s.children},t.mode),s.ref=t.ref,t.child=s,s.return=t,s}function sy(t,s,a){return qi(s,t.child,null,a),t=Ll(s,s.pendingProps),t.flags|=2,hn(s),s.memoizedState=null,t}function o1(t,s,a){var l=s.pendingProps,h=(s.flags&128)!==0;if(s.flags&=-129,t===null){if(De){if(l.mode==="hidden")return t=Ll(s,l),s.lanes=536870912,Ka(null,t);if(_h(s),(t=tt)?(t=m_(t,En),t=t!==null&&t.data==="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:Gs!==null?{id:ts,overflow:ns}:null,retryLane:536870912,hydrationErrors:null},a=Vm(t),a.return=s,s.child=a,Dt=s,tt=null)):t=null,t===null)throw Ys(s);return s.lanes=536870912,null}return Ll(s,l)}var p=t.memoizedState;if(p!==null){var v=p.dehydrated;if(_h(s),h)if(s.flags&256)s.flags&=-257,s=sy(t,s,a);else if(s.memoizedState!==null)s.child=t.child,s.flags|=128,s=null;else throw Error(i(558));else if(bt||Tr(t,s,a,!1),h=(a&t.childLanes)!==0,bt||h){if(l=Xe,l!==null&&(v=Yp(l,a),v!==0&&v!==p.retryLane))throw p.retryLane=v,ki(t,v),en(l,t,v),Lh;Kl(),s=sy(t,s,a)}else t=p.treeContext,tt=Nn(v.nextSibling),Dt=s,De=!0,Fs=null,En=!1,t!==null&&Hm(s,t),s=Ll(s,l),s.flags|=4096;return s}return t=_s(t.child,{mode:l.mode,children:l.children}),t.ref=s.ref,s.child=t,t.return=s,t}function Vl(t,s){var a=s.ref;if(a===null)t!==null&&t.ref!==null&&(s.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(i(284));(t===null||t.ref!==a)&&(s.flags|=4194816)}}function Vh(t,s,a,l,h){return Mi(s),a=bh(t,s,a,l,void 0,h),l=wh(),t!==null&&!bt?(Sh(t,s,h),xs(t,s,h)):(De&&l&&th(s),s.flags|=1,Ut(t,s,a,h),s.child)}function iy(t,s,a,l,h,p){return Mi(s),s.updateQueue=null,a=og(s,l,a,h),ag(t),l=wh(),t!==null&&!bt?(Sh(t,s,p),xs(t,s,p)):(De&&l&&th(s),s.flags|=1,Ut(t,s,a,p),s.child)}function ry(t,s,a,l,h){if(Mi(s),s.stateNode===null){var p=vr,v=a.contextType;typeof v=="object"&&v!==null&&(p=Mt(v)),p=new a(l,p),s.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=Bh,s.stateNode=p,p._reactInternals=s,p=s.stateNode,p.props=l,p.state=s.memoizedState,p.refs={},dh(s),v=a.contextType,p.context=typeof v=="object"&&v!==null?Mt(v):vr,p.state=s.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(zh(s,a,v,l),p.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(v=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),v!==p.state&&Bh.enqueueReplaceState(p,p.state,null),Ga(s,l,p,h),$a(),p.state=s.memoizedState),typeof p.componentDidMount=="function"&&(s.flags|=4194308),l=!0}else if(t===null){p=s.stateNode;var T=s.memoizedProps,N=Vi(a,T);p.props=N;var L=p.context,G=a.contextType;v=vr,typeof G=="object"&&G!==null&&(v=Mt(G));var W=a.getDerivedStateFromProps;G=typeof W=="function"||typeof p.getSnapshotBeforeUpdate=="function",T=s.pendingProps!==T,G||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(T||L!==v)&&Gg(s,p,l,v),Xs=!1;var V=s.memoizedState;p.state=V,Ga(s,l,p,h),$a(),L=s.memoizedState,T||V!==L||Xs?(typeof W=="function"&&(zh(s,a,W,l),L=s.memoizedState),(N=Xs||$g(s,a,N,l,V,L,v))?(G||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(s.flags|=4194308)):(typeof p.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=l,s.memoizedState=L),p.props=l,p.state=L,p.context=v,l=N):(typeof p.componentDidMount=="function"&&(s.flags|=4194308),l=!1)}else{p=s.stateNode,fh(t,s),v=s.memoizedProps,G=Vi(a,v),p.props=G,W=s.pendingProps,V=p.context,L=a.contextType,N=vr,typeof L=="object"&&L!==null&&(N=Mt(L)),T=a.getDerivedStateFromProps,(L=typeof T=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(v!==W||V!==N)&&Gg(s,p,l,N),Xs=!1,V=s.memoizedState,p.state=V,Ga(s,l,p,h),$a();var H=s.memoizedState;v!==W||V!==H||Xs||t!==null&&t.dependencies!==null&&wl(t.dependencies)?(typeof T=="function"&&(zh(s,a,T,l),H=s.memoizedState),(G=Xs||$g(s,a,G,l,V,H,N)||t!==null&&t.dependencies!==null&&wl(t.dependencies))?(L||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(l,H,N),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(l,H,N)),typeof p.componentDidUpdate=="function"&&(s.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof p.componentDidUpdate!="function"||v===t.memoizedProps&&V===t.memoizedState||(s.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&V===t.memoizedState||(s.flags|=1024),s.memoizedProps=l,s.memoizedState=H),p.props=l,p.state=H,p.context=N,l=G):(typeof p.componentDidUpdate!="function"||v===t.memoizedProps&&V===t.memoizedState||(s.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&V===t.memoizedState||(s.flags|=1024),l=!1)}return p=l,Vl(t,s),l=(s.flags&128)!==0,p||l?(p=s.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:p.render(),s.flags|=1,t!==null&&l?(s.child=qi(s,t.child,null,h),s.child=qi(s,null,a,h)):Ut(t,s,a,h),s.memoizedState=p.state,t=s.child):t=xs(t,s,h),t}function ay(t,s,a,l){return ji(),s.flags|=256,Ut(t,s,a,l),s.child}var Ih={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ph(t){return{baseLanes:t,cachePool:Xm()}}function Hh(t,s,a){return t=t!==null?t.childLanes&~a:0,s&&(t|=fn),t}function oy(t,s,a){var l=s.pendingProps,h=!1,p=(s.flags&128)!==0,v;if((v=p)||(v=t!==null&&t.memoizedState===null?!1:(mt.current&2)!==0),v&&(h=!0,s.flags&=-129),v=(s.flags&32)!==0,s.flags&=-33,t===null){if(De){if(h?Qs(s):Js(),(t=tt)?(t=m_(t,En),t=t!==null&&t.data!=="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:Gs!==null?{id:ts,overflow:ns}:null,retryLane:536870912,hydrationErrors:null},a=Vm(t),a.return=s,s.child=a,Dt=s,tt=null)):t=null,t===null)throw Ys(s);return Ad(t)?s.lanes=32:s.lanes=536870912,null}var T=l.children;return l=l.fallback,h?(Js(),h=s.mode,T=Il({mode:"hidden",children:T},h),l=Ri(l,h,a,null),T.return=s,l.return=s,T.sibling=l,s.child=T,l=s.child,l.memoizedState=Ph(a),l.childLanes=Hh(t,v,a),s.memoizedState=Ih,Ka(null,l)):(Qs(s),$h(s,T))}var N=t.memoizedState;if(N!==null&&(T=N.dehydrated,T!==null)){if(p)s.flags&256?(Qs(s),s.flags&=-257,s=Gh(t,s,a)):s.memoizedState!==null?(Js(),s.child=t.child,s.flags|=128,s=null):(Js(),T=l.fallback,h=s.mode,l=Il({mode:"visible",children:l.children},h),T=Ri(T,h,a,null),T.flags|=2,l.return=s,T.return=s,l.sibling=T,s.child=l,qi(s,t.child,null,a),l=s.child,l.memoizedState=Ph(a),l.childLanes=Hh(t,v,a),s.memoizedState=Ih,s=Ka(null,l));else if(Qs(s),Ad(T)){if(v=T.nextSibling&&T.nextSibling.dataset,v)var L=v.dgst;v=L,l=Error(i(419)),l.stack="",l.digest=v,qa({value:l,source:null,stack:null}),s=Gh(t,s,a)}else if(bt||Tr(t,s,a,!1),v=(a&t.childLanes)!==0,bt||v){if(v=Xe,v!==null&&(l=Yp(v,a),l!==0&&l!==N.retryLane))throw N.retryLane=l,ki(t,l),en(v,t,l),Lh;xd(T)||Kl(),s=Gh(t,s,a)}else xd(T)?(s.flags|=192,s.child=t.child,s=null):(t=N.treeContext,tt=Nn(T.nextSibling),Dt=s,De=!0,Fs=null,En=!1,t!==null&&Hm(s,t),s=$h(s,l.children),s.flags|=4096);return s}return h?(Js(),T=l.fallback,h=s.mode,N=t.child,L=N.sibling,l=_s(N,{mode:"hidden",children:l.children}),l.subtreeFlags=N.subtreeFlags&65011712,L!==null?T=_s(L,T):(T=Ri(T,h,a,null),T.flags|=2),T.return=s,l.return=s,l.sibling=T,s.child=l,Ka(null,l),l=s.child,T=t.child.memoizedState,T===null?T=Ph(a):(h=T.cachePool,h!==null?(N=_t._currentValue,h=h.parent!==N?{parent:N,pool:N}:h):h=Xm(),T={baseLanes:T.baseLanes|a,cachePool:h}),l.memoizedState=T,l.childLanes=Hh(t,v,a),s.memoizedState=Ih,Ka(t.child,l)):(Qs(s),a=t.child,t=a.sibling,a=_s(a,{mode:"visible",children:l.children}),a.return=s,a.sibling=null,t!==null&&(v=s.deletions,v===null?(s.deletions=[t],s.flags|=16):v.push(t)),s.child=a,s.memoizedState=null,a)}function $h(t,s){return s=Il({mode:"visible",children:s},t.mode),s.return=t,t.child=s}function Il(t,s){return t=cn(22,t,null,s),t.lanes=0,t}function Gh(t,s,a){return qi(s,t.child,null,a),t=$h(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function ly(t,s,a){t.lanes|=s;var l=t.alternate;l!==null&&(l.lanes|=s),ah(t.return,s,a)}function Fh(t,s,a,l,h,p){var v=t.memoizedState;v===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h,treeForkCount:p}:(v.isBackwards=s,v.rendering=null,v.renderingStartTime=0,v.last=l,v.tail=a,v.tailMode=h,v.treeForkCount=p)}function cy(t,s,a){var l=s.pendingProps,h=l.revealOrder,p=l.tail;l=l.children;var v=mt.current,T=(v&2)!==0;if(T?(v=v&1|2,s.flags|=128):v&=1,ee(mt,v),Ut(t,s,l,a),l=De?Ba:0,!T&&t!==null&&(t.flags&128)!==0)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ly(t,a,s);else if(t.tag===19)ly(t,a,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(h){case"forwards":for(a=s.child,h=null;a!==null;)t=a.alternate,t!==null&&Ol(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=s.child,s.child=null):(h=a.sibling,a.sibling=null),Fh(s,!1,h,a,p,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,h=s.child,s.child=null;h!==null;){if(t=h.alternate,t!==null&&Ol(t)===null){s.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}Fh(s,!0,a,null,p,l);break;case"together":Fh(s,!1,null,null,void 0,l);break;default:s.memoizedState=null}return s.child}function xs(t,s,a){if(t!==null&&(s.dependencies=t.dependencies),ni|=s.lanes,(a&s.childLanes)===0)if(t!==null){if(Tr(t,s,a,!1),(a&s.childLanes)===0)return null}else return null;if(t!==null&&s.child!==t.child)throw Error(i(153));if(s.child!==null){for(t=s.child,a=_s(t,t.pendingProps),s.child=a,a.return=s;t.sibling!==null;)t=t.sibling,a=a.sibling=_s(t,t.pendingProps),a.return=s;a.sibling=null}return s.child}function Yh(t,s){return(t.lanes&s)!==0?!0:(t=t.dependencies,!!(t!==null&&wl(t)))}function l1(t,s,a){switch(s.tag){case 3:le(s,s.stateNode.containerInfo),Ws(s,_t,t.memoizedState.cache),ji();break;case 27:case 5:rn(s);break;case 4:le(s,s.stateNode.containerInfo);break;case 10:Ws(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,_h(s),null;break;case 13:var l=s.memoizedState;if(l!==null)return l.dehydrated!==null?(Qs(s),s.flags|=128,null):(a&s.child.childLanes)!==0?oy(t,s,a):(Qs(s),t=xs(t,s,a),t!==null?t.sibling:null);Qs(s);break;case 19:var h=(t.flags&128)!==0;if(l=(a&s.childLanes)!==0,l||(Tr(t,s,a,!1),l=(a&s.childLanes)!==0),h){if(l)return cy(t,s,a);s.flags|=128}if(h=s.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),ee(mt,mt.current),l)break;return null;case 22:return s.lanes=0,ty(t,s,a,s.pendingProps);case 24:Ws(s,_t,t.memoizedState.cache)}return xs(t,s,a)}function uy(t,s,a){if(t!==null)if(t.memoizedProps!==s.pendingProps)bt=!0;else{if(!Yh(t,a)&&(s.flags&128)===0)return bt=!1,l1(t,s,a);bt=(t.flags&131072)!==0}else bt=!1,De&&(s.flags&1048576)!==0&&Pm(s,Ba,s.index);switch(s.lanes=0,s.tag){case 16:e:{var l=s.pendingProps;if(t=zi(s.elementType),s.type=t,typeof t=="function")Qu(t)?(l=Vi(t,l),s.tag=1,s=ry(null,s,t,l,a)):(s.tag=0,s=Vh(null,s,t,l,a));else{if(t!=null){var h=t.$$typeof;if(h===I){s.tag=11,s=Qg(null,s,t,l,a);break e}else if(h===M){s.tag=14,s=Jg(null,s,t,l,a);break e}}throw s=te(t)||t,Error(i(306,s,""))}}return s;case 0:return Vh(t,s,s.type,s.pendingProps,a);case 1:return l=s.type,h=Vi(l,s.pendingProps),ry(t,s,l,h,a);case 3:e:{if(le(s,s.stateNode.containerInfo),t===null)throw Error(i(387));l=s.pendingProps;var p=s.memoizedState;h=p.element,fh(t,s),Ga(s,l,null,a);var v=s.memoizedState;if(l=v.cache,Ws(s,_t,l),l!==p.cache&&oh(s,[_t],a,!0),$a(),l=v.element,p.isDehydrated)if(p={element:l,isDehydrated:!1,cache:v.cache},s.updateQueue.baseState=p,s.memoizedState=p,s.flags&256){s=ay(t,s,l,a);break e}else if(l!==h){h=Tn(Error(i(424)),s),qa(h),s=ay(t,s,l,a);break e}else for(t=s.stateNode.containerInfo,t.nodeType===9?t=t.body:t=t.nodeName==="HTML"?t.ownerDocument.body:t,tt=Nn(t.firstChild),Dt=s,De=!0,Fs=null,En=!0,a=tg(s,null,l,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(ji(),l===h){s=xs(t,s,a);break e}Ut(t,s,l,a)}s=s.child}return s;case 26:return Vl(t,s),t===null?(a=w_(s.type,null,s.pendingProps,null))?s.memoizedState=a:De||(a=s.type,t=s.pendingProps,l=sc(he.current).createElement(a),l[jt]=s,l[Wt]=t,zt(l,a,t),Nt(l),s.stateNode=l):s.memoizedState=w_(s.type,t.memoizedProps,s.pendingProps,t.memoizedState),null;case 27:return rn(s),t===null&&De&&(l=s.stateNode=__(s.type,s.pendingProps,he.current),Dt=s,En=!0,h=tt,oi(s.type)?(Ed=h,tt=Nn(l.firstChild)):tt=h),Ut(t,s,s.pendingProps.children,a),Vl(t,s),t===null&&(s.flags|=4194304),s.child;case 5:return t===null&&De&&((h=l=tt)&&(l=q1(l,s.type,s.pendingProps,En),l!==null?(s.stateNode=l,Dt=s,tt=Nn(l.firstChild),En=!1,h=!0):h=!1),h||Ys(s)),rn(s),h=s.type,p=s.pendingProps,v=t!==null?t.memoizedProps:null,l=p.children,wd(h,p)?l=null:v!==null&&wd(h,v)&&(s.flags|=32),s.memoizedState!==null&&(h=bh(t,s,Jw,null,null,a),ho._currentValue=h),Vl(t,s),Ut(t,s,l,a),s.child;case 6:return t===null&&De&&((t=a=tt)&&(a=L1(a,s.pendingProps,En),a!==null?(s.stateNode=a,Dt=s,tt=null,t=!0):t=!1),t||Ys(s)),null;case 13:return oy(t,s,a);case 4:return le(s,s.stateNode.containerInfo),l=s.pendingProps,t===null?s.child=qi(s,null,l,a):Ut(t,s,l,a),s.child;case 11:return Qg(t,s,s.type,s.pendingProps,a);case 7:return Ut(t,s,s.pendingProps,a),s.child;case 8:return Ut(t,s,s.pendingProps.children,a),s.child;case 12:return Ut(t,s,s.pendingProps.children,a),s.child;case 10:return l=s.pendingProps,Ws(s,s.type,l.value),Ut(t,s,l.children,a),s.child;case 9:return h=s.type._context,l=s.pendingProps.children,Mi(s),h=Mt(h),l=l(h),s.flags|=1,Ut(t,s,l,a),s.child;case 14:return Jg(t,s,s.type,s.pendingProps,a);case 15:return ey(t,s,s.type,s.pendingProps,a);case 19:return cy(t,s,a);case 31:return o1(t,s,a);case 22:return ty(t,s,a,s.pendingProps);case 24:return Mi(s),l=Mt(_t),t===null?(h=uh(),h===null&&(h=Xe,p=lh(),h.pooledCache=p,p.refCount++,p!==null&&(h.pooledCacheLanes|=a),h=p),s.memoizedState={parent:l,cache:h},dh(s),Ws(s,_t,h)):((t.lanes&a)!==0&&(fh(t,s),Ga(s,null,null,a),$a()),h=t.memoizedState,p=s.memoizedState,h.parent!==l?(h={parent:l,cache:l},s.memoizedState=h,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=h),Ws(s,_t,l)):(l=p.cache,Ws(s,_t,l),l!==h.cache&&oh(s,[_t],a,!0))),Ut(t,s,s.pendingProps.children,a),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function As(t){t.flags|=4}function Wh(t,s,a,l,h){if((s=(t.mode&32)!==0)&&(s=!1),s){if(t.flags|=16777216,(h&335544128)===h)if(t.stateNode.complete)t.flags|=8192;else if(By())t.flags|=8192;else throw Bi=Al,hh}else t.flags&=-16777217}function hy(t,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!E_(s))if(By())t.flags|=8192;else throw Bi=Al,hh}function Pl(t,s){s!==null&&(t.flags|=4),t.flags&16384&&(s=t.tag!==22?$p():536870912,t.lanes|=s,Ur|=s)}function Za(t,s){if(!De)switch(t.tailMode){case"hidden":s=t.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function nt(t){var s=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(s)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=l,t.childLanes=a,s}function c1(t,s,a){var l=s.pendingProps;switch(nh(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return nt(s),null;case 1:return nt(s),null;case 3:return a=s.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),s.memoizedState.cache!==l&&(s.flags|=2048),ws(_t),Le(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(Sr(s)?As(s):t===null||t.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,ih())),nt(s),null;case 26:var h=s.type,p=s.memoizedState;return t===null?(As(s),p!==null?(nt(s),hy(s,p)):(nt(s),Wh(s,h,null,l,a))):p?p!==t.memoizedState?(As(s),nt(s),hy(s,p)):(nt(s),s.flags&=-16777217):(t=t.memoizedProps,t!==l&&As(s),nt(s),Wh(s,h,t,l,a)),null;case 27:if(Mn(s),a=he.current,h=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==l&&As(s);else{if(!l){if(s.stateNode===null)throw Error(i(166));return nt(s),null}t=ie.current,Sr(s)?$m(s):(t=__(h,l,a),s.stateNode=t,As(s))}return nt(s),null;case 5:if(Mn(s),h=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==l&&As(s);else{if(!l){if(s.stateNode===null)throw Error(i(166));return nt(s),null}if(p=ie.current,Sr(s))$m(s);else{var v=sc(he.current);switch(p){case 1:p=v.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:p=v.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":p=v.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":p=v.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":p=v.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild);break;case"select":p=typeof l.is=="string"?v.createElement("select",{is:l.is}):v.createElement("select"),l.multiple?p.multiple=!0:l.size&&(p.size=l.size);break;default:p=typeof l.is=="string"?v.createElement(h,{is:l.is}):v.createElement(h)}}p[jt]=s,p[Wt]=l;e:for(v=s.child;v!==null;){if(v.tag===5||v.tag===6)p.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===s)break e;for(;v.sibling===null;){if(v.return===null||v.return===s)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}s.stateNode=p;e:switch(zt(p,h,l),h){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&As(s)}}return nt(s),Wh(s,s.type,t===null?null:t.memoizedProps,s.pendingProps,a),null;case 6:if(t&&s.stateNode!=null)t.memoizedProps!==l&&As(s);else{if(typeof l!="string"&&s.stateNode===null)throw Error(i(166));if(t=he.current,Sr(s)){if(t=s.stateNode,a=s.memoizedProps,l=null,h=Dt,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}t[jt]=s,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||o_(t.nodeValue,a)),t||Ys(s,!0)}else t=sc(t).createTextNode(l),t[jt]=s,s.stateNode=t}return nt(s),null;case 31:if(a=s.memoizedState,t===null||t.memoizedState!==null){if(l=Sr(s),a!==null){if(t===null){if(!l)throw Error(i(318));if(t=s.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(557));t[jt]=s}else ji(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;nt(s),t=!1}else a=ih(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return s.flags&256?(hn(s),s):(hn(s),null);if((s.flags&128)!==0)throw Error(i(558))}return nt(s),null;case 13:if(l=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=Sr(s),l!==null&&l.dehydrated!==null){if(t===null){if(!h)throw Error(i(318));if(h=s.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(i(317));h[jt]=s}else ji(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;nt(s),h=!1}else h=ih(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return s.flags&256?(hn(s),s):(hn(s),null)}return hn(s),(s.flags&128)!==0?(s.lanes=a,s):(a=l!==null,t=t!==null&&t.memoizedState!==null,a&&(l=s.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool),p=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),p!==h&&(l.flags|=2048)),a!==t&&a&&(s.child.flags|=8192),Pl(s,s.updateQueue),nt(s),null);case 4:return Le(),t===null&&gd(s.stateNode.containerInfo),nt(s),null;case 10:return ws(s.type),nt(s),null;case 19:if(P(mt),l=s.memoizedState,l===null)return nt(s),null;if(h=(s.flags&128)!==0,p=l.rendering,p===null)if(h)Za(l,!1);else{if(ut!==0||t!==null&&(t.flags&128)!==0)for(t=s.child;t!==null;){if(p=Ol(t),p!==null){for(s.flags|=128,Za(l,!1),t=p.updateQueue,s.updateQueue=t,Pl(s,t),s.subtreeFlags=0,t=a,a=s.child;a!==null;)Lm(a,t),a=a.sibling;return ee(mt,mt.current&1|2),De&&vs(s,l.treeForkCount),s.child}t=t.sibling}l.tail!==null&&Rt()>Yl&&(s.flags|=128,h=!0,Za(l,!1),s.lanes=4194304)}else{if(!h)if(t=Ol(p),t!==null){if(s.flags|=128,h=!0,t=t.updateQueue,s.updateQueue=t,Pl(s,t),Za(l,!0),l.tail===null&&l.tailMode==="hidden"&&!p.alternate&&!De)return nt(s),null}else 2*Rt()-l.renderingStartTime>Yl&&a!==536870912&&(s.flags|=128,h=!0,Za(l,!1),s.lanes=4194304);l.isBackwards?(p.sibling=s.child,s.child=p):(t=l.last,t!==null?t.sibling=p:s.child=p,l.last=p)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=Rt(),t.sibling=null,a=mt.current,ee(mt,h?a&1|2:a&1),De&&vs(s,l.treeForkCount),t):(nt(s),null);case 22:case 23:return hn(s),yh(),l=s.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(s.flags|=8192):l&&(s.flags|=8192),l?(a&536870912)!==0&&(s.flags&128)===0&&(nt(s),s.subtreeFlags&6&&(s.flags|=8192)):nt(s),a=s.updateQueue,a!==null&&Pl(s,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),l!==a&&(s.flags|=2048),t!==null&&P(Ui),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),s.memoizedState.cache!==a&&(s.flags|=2048),ws(_t),nt(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function u1(t,s){switch(nh(s),s.tag){case 1:return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return ws(_t),Le(),t=s.flags,(t&65536)!==0&&(t&128)===0?(s.flags=t&-65537|128,s):null;case 26:case 27:case 5:return Mn(s),null;case 31:if(s.memoizedState!==null){if(hn(s),s.alternate===null)throw Error(i(340));ji()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 13:if(hn(s),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(i(340));ji()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return P(mt),null;case 4:return Le(),null;case 10:return ws(s.type),null;case 22:case 23:return hn(s),yh(),t!==null&&P(Ui),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 24:return ws(_t),null;case 25:return null;default:return null}}function dy(t,s){switch(nh(s),s.tag){case 3:ws(_t),Le();break;case 26:case 27:case 5:Mn(s);break;case 4:Le();break;case 31:s.memoizedState!==null&&hn(s);break;case 13:hn(s);break;case 19:P(mt);break;case 10:ws(s.type);break;case 22:case 23:hn(s),yh(),t!==null&&P(Ui);break;case 24:ws(_t)}}function Qa(t,s){try{var a=s.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&t)===t){l=void 0;var p=a.create,v=a.inst;l=p(),v.destroy=l}a=a.next}while(a!==h)}}catch(T){Ie(s,s.return,T)}}function ei(t,s,a){try{var l=s.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var p=h.next;l=p;do{if((l.tag&t)===t){var v=l.inst,T=v.destroy;if(T!==void 0){v.destroy=void 0,h=s;var N=a,L=T;try{L()}catch(G){Ie(h,N,G)}}}l=l.next}while(l!==p)}}catch(G){Ie(s,s.return,G)}}function fy(t){var s=t.updateQueue;if(s!==null){var a=t.stateNode;try{sg(s,a)}catch(l){Ie(t,t.return,l)}}}function py(t,s,a){a.props=Vi(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){Ie(t,s,l)}}function Ja(t,s){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(h){Ie(t,s,h)}}function ss(t,s){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){Ie(t,s,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){Ie(t,s,h)}else a.current=null}function my(t){var s=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){Ie(t,t.return,h)}}function Xh(t,s,a){try{var l=t.stateNode;j1(l,t.type,a,s),l[Wt]=s}catch(h){Ie(t,t.return,h)}}function gy(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&oi(t.type)||t.tag===4}function Kh(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||gy(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&oi(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Zh(t,s,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,s?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,s):(s=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,s.appendChild(t),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=gs));else if(l!==4&&(l===27&&oi(t.type)&&(a=t.stateNode,s=null),t=t.child,t!==null))for(Zh(t,s,a),t=t.sibling;t!==null;)Zh(t,s,a),t=t.sibling}function Hl(t,s,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,s?a.insertBefore(t,s):a.appendChild(t);else if(l!==4&&(l===27&&oi(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(Hl(t,s,a),t=t.sibling;t!==null;)Hl(t,s,a),t=t.sibling}function yy(t){var s=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,h=s.attributes;h.length;)s.removeAttributeNode(h[0]);zt(s,l,a),s[jt]=t,s[Wt]=a}catch(p){Ie(t,t.return,p)}}var Es=!1,wt=!1,Qh=!1,_y=typeof WeakSet=="function"?WeakSet:Set,Ot=null;function h1(t,s){if(t=t.containerInfo,vd=uc,t=km(t),Gu(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,p=l.focusNode;l=l.focusOffset;try{a.nodeType,p.nodeType}catch{a=null;break e}var v=0,T=-1,N=-1,L=0,G=0,W=t,V=null;t:for(;;){for(var H;W!==a||h!==0&&W.nodeType!==3||(T=v+h),W!==p||l!==0&&W.nodeType!==3||(N=v+l),W.nodeType===3&&(v+=W.nodeValue.length),(H=W.firstChild)!==null;)V=W,W=H;for(;;){if(W===t)break t;if(V===a&&++L===h&&(T=v),V===p&&++G===l&&(N=v),(H=W.nextSibling)!==null)break;W=V,V=W.parentNode}W=H}a=T===-1||N===-1?null:{start:T,end:N}}else a=null}a=a||{start:0,end:0}}else a=null;for(bd={focusedElem:t,selectionRange:a},uc=!1,Ot=s;Ot!==null;)if(s=Ot,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,Ot=t;else for(;Ot!==null;){switch(s=Ot,p=s.alternate,t=s.flags,s.tag){case 0:if((t&4)!==0&&(t=s.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)h=t[a],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&p!==null){t=void 0,a=s,h=p.memoizedProps,p=p.memoizedState,l=a.stateNode;try{var ce=Vi(a.type,h);t=l.getSnapshotBeforeUpdate(ce,p),l.__reactInternalSnapshotBeforeUpdate=t}catch(_e){Ie(a,a.return,_e)}}break;case 3:if((t&1024)!==0){if(t=s.stateNode.containerInfo,a=t.nodeType,a===9)Td(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Td(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(i(163))}if(t=s.sibling,t!==null){t.return=s.return,Ot=t;break}Ot=s.return}}function vy(t,s,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Ns(t,a),l&4&&Qa(5,a);break;case 1:if(Ns(t,a),l&4)if(t=a.stateNode,s===null)try{t.componentDidMount()}catch(v){Ie(a,a.return,v)}else{var h=Vi(a.type,s.memoizedProps);s=s.memoizedState;try{t.componentDidUpdate(h,s,t.__reactInternalSnapshotBeforeUpdate)}catch(v){Ie(a,a.return,v)}}l&64&&fy(a),l&512&&Ja(a,a.return);break;case 3:if(Ns(t,a),l&64&&(t=a.updateQueue,t!==null)){if(s=null,a.child!==null)switch(a.child.tag){case 27:case 5:s=a.child.stateNode;break;case 1:s=a.child.stateNode}try{sg(t,s)}catch(v){Ie(a,a.return,v)}}break;case 27:s===null&&l&4&&yy(a);case 26:case 5:Ns(t,a),s===null&&l&4&&my(a),l&512&&Ja(a,a.return);break;case 12:Ns(t,a);break;case 31:Ns(t,a),l&4&&Sy(t,a);break;case 13:Ns(t,a),l&4&&Ty(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=b1.bind(null,a),V1(t,a))));break;case 22:if(l=a.memoizedState!==null||Es,!l){s=s!==null&&s.memoizedState!==null||wt,h=Es;var p=wt;Es=l,(wt=s)&&!p?Os(t,a,(a.subtreeFlags&8772)!==0):Ns(t,a),Es=h,wt=p}break;case 30:break;default:Ns(t,a)}}function by(t){var s=t.alternate;s!==null&&(t.alternate=null,by(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&Nu(s)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var it=null,Kt=!1;function Cs(t,s,a){for(a=a.child;a!==null;)wy(t,s,a),a=a.sibling}function wy(t,s,a){if(an&&typeof an.onCommitFiberUnmount=="function")try{an.onCommitFiberUnmount(Ta,a)}catch{}switch(a.tag){case 26:wt||ss(a,s),Cs(t,s,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:wt||ss(a,s);var l=it,h=Kt;oi(a.type)&&(it=a.stateNode,Kt=!1),Cs(t,s,a),lo(a.stateNode),it=l,Kt=h;break;case 5:wt||ss(a,s);case 6:if(l=it,h=Kt,it=null,Cs(t,s,a),it=l,Kt=h,it!==null)if(Kt)try{(it.nodeType===9?it.body:it.nodeName==="HTML"?it.ownerDocument.body:it).removeChild(a.stateNode)}catch(p){Ie(a,s,p)}else try{it.removeChild(a.stateNode)}catch(p){Ie(a,s,p)}break;case 18:it!==null&&(Kt?(t=it,f_(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),Hr(t)):f_(it,a.stateNode));break;case 4:l=it,h=Kt,it=a.stateNode.containerInfo,Kt=!0,Cs(t,s,a),it=l,Kt=h;break;case 0:case 11:case 14:case 15:ei(2,a,s),wt||ei(4,a,s),Cs(t,s,a);break;case 1:wt||(ss(a,s),l=a.stateNode,typeof l.componentWillUnmount=="function"&&py(a,s,l)),Cs(t,s,a);break;case 21:Cs(t,s,a);break;case 22:wt=(l=wt)||a.memoizedState!==null,Cs(t,s,a),wt=l;break;default:Cs(t,s,a)}}function Sy(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Hr(t)}catch(a){Ie(s,s.return,a)}}}function Ty(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Hr(t)}catch(a){Ie(s,s.return,a)}}function d1(t){switch(t.tag){case 31:case 13:case 19:var s=t.stateNode;return s===null&&(s=t.stateNode=new _y),s;case 22:return t=t.stateNode,s=t._retryCache,s===null&&(s=t._retryCache=new _y),s;default:throw Error(i(435,t.tag))}}function $l(t,s){var a=d1(t);s.forEach(function(l){if(!a.has(l)){a.add(l);var h=w1.bind(null,t,l);l.then(h,h)}})}function Zt(t,s){var a=s.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],p=t,v=s,T=v;e:for(;T!==null;){switch(T.tag){case 27:if(oi(T.type)){it=T.stateNode,Kt=!1;break e}break;case 5:it=T.stateNode,Kt=!1;break e;case 3:case 4:it=T.stateNode.containerInfo,Kt=!0;break e}T=T.return}if(it===null)throw Error(i(160));wy(p,v,h),it=null,Kt=!1,p=h.alternate,p!==null&&(p.return=null),h.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)xy(s,t),s=s.sibling}var zn=null;function xy(t,s){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Zt(s,t),Qt(t),l&4&&(ei(3,t,t.return),Qa(3,t),ei(5,t,t.return));break;case 1:Zt(s,t),Qt(t),l&512&&(wt||a===null||ss(a,a.return)),l&64&&Es&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=zn;if(Zt(s,t),Qt(t),l&512&&(wt||a===null||ss(a,a.return)),l&4){var p=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(l){case"title":p=h.getElementsByTagName("title")[0],(!p||p[Ea]||p[jt]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=h.createElement(l),h.head.insertBefore(p,h.querySelector("head > title"))),zt(p,l,a),p[jt]=t,Nt(p),l=p;break e;case"link":var v=x_("link","href",h).get(l+(a.href||""));if(v){for(var T=0;T<v.length;T++)if(p=v[T],p.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&p.getAttribute("rel")===(a.rel==null?null:a.rel)&&p.getAttribute("title")===(a.title==null?null:a.title)&&p.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(T,1);break t}}p=h.createElement(l),zt(p,l,a),h.head.appendChild(p);break;case"meta":if(v=x_("meta","content",h).get(l+(a.content||""))){for(T=0;T<v.length;T++)if(p=v[T],p.getAttribute("content")===(a.content==null?null:""+a.content)&&p.getAttribute("name")===(a.name==null?null:a.name)&&p.getAttribute("property")===(a.property==null?null:a.property)&&p.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&p.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(T,1);break t}}p=h.createElement(l),zt(p,l,a),h.head.appendChild(p);break;default:throw Error(i(468,l))}p[jt]=t,Nt(p),l=p}t.stateNode=l}else A_(h,t.type,t.stateNode);else t.stateNode=T_(h,l,t.memoizedProps);else p!==l?(p===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):p.count--,l===null?A_(h,t.type,t.stateNode):T_(h,l,t.memoizedProps)):l===null&&t.stateNode!==null&&Xh(t,t.memoizedProps,a.memoizedProps)}break;case 27:Zt(s,t),Qt(t),l&512&&(wt||a===null||ss(a,a.return)),a!==null&&l&4&&Xh(t,t.memoizedProps,a.memoizedProps);break;case 5:if(Zt(s,t),Qt(t),l&512&&(wt||a===null||ss(a,a.return)),t.flags&32){h=t.stateNode;try{dr(h,"")}catch(ce){Ie(t,t.return,ce)}}l&4&&t.stateNode!=null&&(h=t.memoizedProps,Xh(t,h,a!==null?a.memoizedProps:h)),l&1024&&(Qh=!0);break;case 6:if(Zt(s,t),Qt(t),l&4){if(t.stateNode===null)throw Error(i(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(ce){Ie(t,t.return,ce)}}break;case 3:if(ac=null,h=zn,zn=ic(s.containerInfo),Zt(s,t),zn=h,Qt(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Hr(s.containerInfo)}catch(ce){Ie(t,t.return,ce)}Qh&&(Qh=!1,Ay(t));break;case 4:l=zn,zn=ic(t.stateNode.containerInfo),Zt(s,t),Qt(t),zn=l;break;case 12:Zt(s,t),Qt(t);break;case 31:Zt(s,t),Qt(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,$l(t,l)));break;case 13:Zt(s,t),Qt(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Fl=Rt()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,$l(t,l)));break;case 22:h=t.memoizedState!==null;var N=a!==null&&a.memoizedState!==null,L=Es,G=wt;if(Es=L||h,wt=G||N,Zt(s,t),wt=G,Es=L,Qt(t),l&8192)e:for(s=t.stateNode,s._visibility=h?s._visibility&-2:s._visibility|1,h&&(a===null||N||Es||wt||Ii(t)),a=null,s=t;;){if(s.tag===5||s.tag===26){if(a===null){N=a=s;try{if(p=N.stateNode,h)v=p.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{T=N.stateNode;var W=N.memoizedProps.style,V=W!=null&&W.hasOwnProperty("display")?W.display:null;T.style.display=V==null||typeof V=="boolean"?"":(""+V).trim()}}catch(ce){Ie(N,N.return,ce)}}}else if(s.tag===6){if(a===null){N=s;try{N.stateNode.nodeValue=h?"":N.memoizedProps}catch(ce){Ie(N,N.return,ce)}}}else if(s.tag===18){if(a===null){N=s;try{var H=N.stateNode;h?p_(H,!0):p_(N.stateNode,!1)}catch(ce){Ie(N,N.return,ce)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===t)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;s.sibling===null;){if(s.return===null||s.return===t)break e;a===s&&(a=null),s=s.return}a===s&&(a=null),s.sibling.return=s.return,s=s.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,$l(t,a))));break;case 19:Zt(s,t),Qt(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,$l(t,l)));break;case 30:break;case 21:break;default:Zt(s,t),Qt(t)}}function Qt(t){var s=t.flags;if(s&2){try{for(var a,l=t.return;l!==null;){if(gy(l)){a=l;break}l=l.return}if(a==null)throw Error(i(160));switch(a.tag){case 27:var h=a.stateNode,p=Kh(t);Hl(t,p,h);break;case 5:var v=a.stateNode;a.flags&32&&(dr(v,""),a.flags&=-33);var T=Kh(t);Hl(t,T,v);break;case 3:case 4:var N=a.stateNode.containerInfo,L=Kh(t);Zh(t,L,N);break;default:throw Error(i(161))}}catch(G){Ie(t,t.return,G)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function Ay(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var s=t;Ay(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),t=t.sibling}}function Ns(t,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)vy(t,s.alternate,s),s=s.sibling}function Ii(t){for(t=t.child;t!==null;){var s=t;switch(s.tag){case 0:case 11:case 14:case 15:ei(4,s,s.return),Ii(s);break;case 1:ss(s,s.return);var a=s.stateNode;typeof a.componentWillUnmount=="function"&&py(s,s.return,a),Ii(s);break;case 27:lo(s.stateNode);case 26:case 5:ss(s,s.return),Ii(s);break;case 22:s.memoizedState===null&&Ii(s);break;case 30:Ii(s);break;default:Ii(s)}t=t.sibling}}function Os(t,s,a){for(a=a&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var l=s.alternate,h=t,p=s,v=p.flags;switch(p.tag){case 0:case 11:case 15:Os(h,p,a),Qa(4,p);break;case 1:if(Os(h,p,a),l=p,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(L){Ie(l,l.return,L)}if(l=p,h=l.updateQueue,h!==null){var T=l.stateNode;try{var N=h.shared.hiddenCallbacks;if(N!==null)for(h.shared.hiddenCallbacks=null,h=0;h<N.length;h++)ng(N[h],T)}catch(L){Ie(l,l.return,L)}}a&&v&64&&fy(p),Ja(p,p.return);break;case 27:yy(p);case 26:case 5:Os(h,p,a),a&&l===null&&v&4&&my(p),Ja(p,p.return);break;case 12:Os(h,p,a);break;case 31:Os(h,p,a),a&&v&4&&Sy(h,p);break;case 13:Os(h,p,a),a&&v&4&&Ty(h,p);break;case 22:p.memoizedState===null&&Os(h,p,a),Ja(p,p.return);break;case 30:break;default:Os(h,p,a)}s=s.sibling}}function Jh(t,s){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(t=s.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&La(a))}function ed(t,s){t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&La(t))}function Bn(t,s,a,l){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Ey(t,s,a,l),s=s.sibling}function Ey(t,s,a,l){var h=s.flags;switch(s.tag){case 0:case 11:case 15:Bn(t,s,a,l),h&2048&&Qa(9,s);break;case 1:Bn(t,s,a,l);break;case 3:Bn(t,s,a,l),h&2048&&(t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&La(t)));break;case 12:if(h&2048){Bn(t,s,a,l),t=s.stateNode;try{var p=s.memoizedProps,v=p.id,T=p.onPostCommit;typeof T=="function"&&T(v,s.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(N){Ie(s,s.return,N)}}else Bn(t,s,a,l);break;case 31:Bn(t,s,a,l);break;case 13:Bn(t,s,a,l);break;case 23:break;case 22:p=s.stateNode,v=s.alternate,s.memoizedState!==null?p._visibility&2?Bn(t,s,a,l):eo(t,s):p._visibility&2?Bn(t,s,a,l):(p._visibility|=2,jr(t,s,a,l,(s.subtreeFlags&10256)!==0||!1)),h&2048&&Jh(v,s);break;case 24:Bn(t,s,a,l),h&2048&&ed(s.alternate,s);break;default:Bn(t,s,a,l)}}function jr(t,s,a,l,h){for(h=h&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var p=t,v=s,T=a,N=l,L=v.flags;switch(v.tag){case 0:case 11:case 15:jr(p,v,T,N,h),Qa(8,v);break;case 23:break;case 22:var G=v.stateNode;v.memoizedState!==null?G._visibility&2?jr(p,v,T,N,h):eo(p,v):(G._visibility|=2,jr(p,v,T,N,h)),h&&L&2048&&Jh(v.alternate,v);break;case 24:jr(p,v,T,N,h),h&&L&2048&&ed(v.alternate,v);break;default:jr(p,v,T,N,h)}s=s.sibling}}function eo(t,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var a=t,l=s,h=l.flags;switch(l.tag){case 22:eo(a,l),h&2048&&Jh(l.alternate,l);break;case 24:eo(a,l),h&2048&&ed(l.alternate,l);break;default:eo(a,l)}s=s.sibling}}var to=8192;function Dr(t,s,a){if(t.subtreeFlags&to)for(t=t.child;t!==null;)Cy(t,s,a),t=t.sibling}function Cy(t,s,a){switch(t.tag){case 26:Dr(t,s,a),t.flags&to&&t.memoizedState!==null&&Q1(a,zn,t.memoizedState,t.memoizedProps);break;case 5:Dr(t,s,a);break;case 3:case 4:var l=zn;zn=ic(t.stateNode.containerInfo),Dr(t,s,a),zn=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=to,to=16777216,Dr(t,s,a),to=l):Dr(t,s,a));break;default:Dr(t,s,a)}}function Ny(t){var s=t.alternate;if(s!==null&&(t=s.child,t!==null)){s.child=null;do s=t.sibling,t.sibling=null,t=s;while(t!==null)}}function no(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var l=s[a];Ot=l,ky(l,t)}Ny(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Oy(t),t=t.sibling}function Oy(t){switch(t.tag){case 0:case 11:case 15:no(t),t.flags&2048&&ei(9,t,t.return);break;case 3:no(t);break;case 12:no(t);break;case 22:var s=t.stateNode;t.memoizedState!==null&&s._visibility&2&&(t.return===null||t.return.tag!==13)?(s._visibility&=-3,Gl(t)):no(t);break;default:no(t)}}function Gl(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var l=s[a];Ot=l,ky(l,t)}Ny(t)}for(t=t.child;t!==null;){switch(s=t,s.tag){case 0:case 11:case 15:ei(8,s,s.return),Gl(s);break;case 22:a=s.stateNode,a._visibility&2&&(a._visibility&=-3,Gl(s));break;default:Gl(s)}t=t.sibling}}function ky(t,s){for(;Ot!==null;){var a=Ot;switch(a.tag){case 0:case 11:case 15:ei(8,a,s);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:La(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Ot=l;else e:for(a=t;Ot!==null;){l=Ot;var h=l.sibling,p=l.return;if(by(l),l===a){Ot=null;break e}if(h!==null){h.return=p,Ot=h;break e}Ot=p}}}var f1={getCacheForType:function(t){var s=Mt(_t),a=s.data.get(t);return a===void 0&&(a=t(),s.data.set(t,a)),a},cacheSignal:function(){return Mt(_t).controller.signal}},p1=typeof WeakMap=="function"?WeakMap:Map,Be=0,Xe=null,Ne=null,ke=0,Ve=0,dn=null,ti=!1,Mr=!1,td=!1,ks=0,ut=0,ni=0,Pi=0,nd=0,fn=0,Ur=0,so=null,Jt=null,sd=!1,Fl=0,Ry=0,Yl=1/0,Wl=null,si=null,At=0,ii=null,zr=null,Rs=0,id=0,rd=null,jy=null,io=0,ad=null;function pn(){return(Be&2)!==0&&ke!==0?ke&-ke:U.T!==null?dd():Wp()}function Dy(){if(fn===0)if((ke&536870912)===0||De){var t=nl;nl<<=1,(nl&3932160)===0&&(nl=262144),fn=t}else fn=536870912;return t=un.current,t!==null&&(t.flags|=32),fn}function en(t,s,a){(t===Xe&&(Ve===2||Ve===9)||t.cancelPendingCommit!==null)&&(Br(t,0),ri(t,ke,fn,!1)),Aa(t,a),((Be&2)===0||t!==Xe)&&(t===Xe&&((Be&2)===0&&(Pi|=a),ut===4&&ri(t,ke,fn,!1)),is(t))}function My(t,s,a){if((Be&6)!==0)throw Error(i(327));var l=!a&&(s&127)===0&&(s&t.expiredLanes)===0||xa(t,s),h=l?y1(t,s):ld(t,s,!0),p=l;do{if(h===0){Mr&&!l&&ri(t,s,0,!1);break}else{if(a=t.current.alternate,p&&!m1(a)){h=ld(t,s,!1),p=!1;continue}if(h===2){if(p=s,t.errorRecoveryDisabledLanes&p)var v=0;else v=t.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){s=v;e:{var T=t;h=so;var N=T.current.memoizedState.isDehydrated;if(N&&(Br(T,v).flags|=256),v=ld(T,v,!1),v!==2){if(td&&!N){T.errorRecoveryDisabledLanes|=p,Pi|=p,h=4;break e}p=Jt,Jt=h,p!==null&&(Jt===null?Jt=p:Jt.push.apply(Jt,p))}h=v}if(p=!1,h!==2)continue}}if(h===1){Br(t,0),ri(t,s,0,!0);break}e:{switch(l=t,p=h,p){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:ri(l,s,fn,!ti);break e;case 2:Jt=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(h=Fl+300-Rt(),10<h)){if(ri(l,s,fn,!ti),il(l,0,!0)!==0)break e;Rs=s,l.timeoutHandle=h_(Uy.bind(null,l,a,Jt,Wl,sd,s,fn,Pi,Ur,ti,p,"Throttled",-0,0),h);break e}Uy(l,a,Jt,Wl,sd,s,fn,Pi,Ur,ti,p,null,-0,0)}}break}while(!0);is(t)}function Uy(t,s,a,l,h,p,v,T,N,L,G,W,V,H){if(t.timeoutHandle=-1,W=s.subtreeFlags,W&8192||(W&16785408)===16785408){W={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:gs},Cy(s,p,W);var ce=(p&62914560)===p?Fl-Rt():(p&4194048)===p?Ry-Rt():0;if(ce=J1(W,ce),ce!==null){Rs=p,t.cancelPendingCommit=ce(Hy.bind(null,t,s,p,a,l,h,v,T,N,G,W,null,V,H)),ri(t,p,v,!L);return}}Hy(t,s,p,a,l,h,v,T,N)}function m1(t){for(var s=t;;){var a=s.tag;if((a===0||a===11||a===15)&&s.flags&16384&&(a=s.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],p=h.getSnapshot;h=h.value;try{if(!ln(p(),h))return!1}catch{return!1}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function ri(t,s,a,l){s&=~nd,s&=~Pi,t.suspendedLanes|=s,t.pingedLanes&=~s,l&&(t.warmLanes|=s),l=t.expirationTimes;for(var h=s;0<h;){var p=31-on(h),v=1<<p;l[p]=-1,h&=~v}a!==0&&Gp(t,a,s)}function Xl(){return(Be&6)===0?(ro(0),!1):!0}function od(){if(Ne!==null){if(Ve===0)var t=Ne.return;else t=Ne,bs=Di=null,Th(t),Cr=null,Ia=0,t=Ne;for(;t!==null;)dy(t.alternate,t),t=t.return;Ne=null}}function Br(t,s){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,U1(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),Rs=0,od(),Xe=t,Ne=a=_s(t.current,null),ke=s,Ve=0,dn=null,ti=!1,Mr=xa(t,s),td=!1,Ur=fn=nd=Pi=ni=ut=0,Jt=so=null,sd=!1,(s&8)!==0&&(s|=s&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=s;0<l;){var h=31-on(l),p=1<<h;s|=t[h],l&=~p}return ks=s,gl(),a}function zy(t,s){Ae=null,U.H=Xa,s===Er||s===xl?(s=Qm(),Ve=3):s===hh?(s=Qm(),Ve=4):Ve=s===Lh?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,dn=s,Ne===null&&(ut=1,ql(t,Tn(s,t.current)))}function By(){var t=un.current;return t===null?!0:(ke&4194048)===ke?Cn===null:(ke&62914560)===ke||(ke&536870912)!==0?t===Cn:!1}function qy(){var t=U.H;return U.H=Xa,t===null?Xa:t}function Ly(){var t=U.A;return U.A=f1,t}function Kl(){ut=4,ti||(ke&4194048)!==ke&&un.current!==null||(Mr=!0),(ni&134217727)===0&&(Pi&134217727)===0||Xe===null||ri(Xe,ke,fn,!1)}function ld(t,s,a){var l=Be;Be|=2;var h=qy(),p=Ly();(Xe!==t||ke!==s)&&(Wl=null,Br(t,s)),s=!1;var v=ut;e:do try{if(Ve!==0&&Ne!==null){var T=Ne,N=dn;switch(Ve){case 8:od(),v=6;break e;case 3:case 2:case 9:case 6:un.current===null&&(s=!0);var L=Ve;if(Ve=0,dn=null,qr(t,T,N,L),a&&Mr){v=0;break e}break;default:L=Ve,Ve=0,dn=null,qr(t,T,N,L)}}g1(),v=ut;break}catch(G){zy(t,G)}while(!0);return s&&t.shellSuspendCounter++,bs=Di=null,Be=l,U.H=h,U.A=p,Ne===null&&(Xe=null,ke=0,gl()),v}function g1(){for(;Ne!==null;)Vy(Ne)}function y1(t,s){var a=Be;Be|=2;var l=qy(),h=Ly();Xe!==t||ke!==s?(Wl=null,Yl=Rt()+500,Br(t,s)):Mr=xa(t,s);e:do try{if(Ve!==0&&Ne!==null){s=Ne;var p=dn;t:switch(Ve){case 1:Ve=0,dn=null,qr(t,s,p,1);break;case 2:case 9:if(Km(p)){Ve=0,dn=null,Iy(s);break}s=function(){Ve!==2&&Ve!==9||Xe!==t||(Ve=7),is(t)},p.then(s,s);break e;case 3:Ve=7;break e;case 4:Ve=5;break e;case 7:Km(p)?(Ve=0,dn=null,Iy(s)):(Ve=0,dn=null,qr(t,s,p,7));break;case 5:var v=null;switch(Ne.tag){case 26:v=Ne.memoizedState;case 5:case 27:var T=Ne;if(v?E_(v):T.stateNode.complete){Ve=0,dn=null;var N=T.sibling;if(N!==null)Ne=N;else{var L=T.return;L!==null?(Ne=L,Zl(L)):Ne=null}break t}}Ve=0,dn=null,qr(t,s,p,5);break;case 6:Ve=0,dn=null,qr(t,s,p,6);break;case 8:od(),ut=6;break e;default:throw Error(i(462))}}_1();break}catch(G){zy(t,G)}while(!0);return bs=Di=null,U.H=l,U.A=h,Be=a,Ne!==null?0:(Xe=null,ke=0,gl(),ut)}function _1(){for(;Ne!==null&&!es();)Vy(Ne)}function Vy(t){var s=uy(t.alternate,t,ks);t.memoizedProps=t.pendingProps,s===null?Zl(t):Ne=s}function Iy(t){var s=t,a=s.alternate;switch(s.tag){case 15:case 0:s=iy(a,s,s.pendingProps,s.type,void 0,ke);break;case 11:s=iy(a,s,s.pendingProps,s.type.render,s.ref,ke);break;case 5:Th(s);default:dy(a,s),s=Ne=Lm(s,ks),s=uy(a,s,ks)}t.memoizedProps=t.pendingProps,s===null?Zl(t):Ne=s}function qr(t,s,a,l){bs=Di=null,Th(s),Cr=null,Ia=0;var h=s.return;try{if(a1(t,h,s,a,ke)){ut=1,ql(t,Tn(a,t.current)),Ne=null;return}}catch(p){if(h!==null)throw Ne=h,p;ut=1,ql(t,Tn(a,t.current)),Ne=null;return}s.flags&32768?(De||l===1?t=!0:Mr||(ke&536870912)!==0?t=!1:(ti=t=!0,(l===2||l===9||l===3||l===6)&&(l=un.current,l!==null&&l.tag===13&&(l.flags|=16384))),Py(s,t)):Zl(s)}function Zl(t){var s=t;do{if((s.flags&32768)!==0){Py(s,ti);return}t=s.return;var a=c1(s.alternate,s,ks);if(a!==null){Ne=a;return}if(s=s.sibling,s!==null){Ne=s;return}Ne=s=t}while(s!==null);ut===0&&(ut=5)}function Py(t,s){do{var a=u1(t.alternate,t);if(a!==null){a.flags&=32767,Ne=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!s&&(t=t.sibling,t!==null)){Ne=t;return}Ne=t=a}while(t!==null);ut=6,Ne=null}function Hy(t,s,a,l,h,p,v,T,N){t.cancelPendingCommit=null;do Ql();while(At!==0);if((Be&6)!==0)throw Error(i(327));if(s!==null){if(s===t.current)throw Error(i(177));if(p=s.lanes|s.childLanes,p|=Ku,Zb(t,a,p,v,T,N),t===Xe&&(Ne=Xe=null,ke=0),zr=s,ii=t,Rs=a,id=p,rd=h,jy=l,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,S1(el,function(){return Wy(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||l){l=U.T,U.T=null,h=$.p,$.p=2,v=Be,Be|=4;try{h1(t,s,a)}finally{Be=v,$.p=h,U.T=l}}At=1,$y(),Gy(),Fy()}}function $y(){if(At===1){At=0;var t=ii,s=zr,a=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||a){a=U.T,U.T=null;var l=$.p;$.p=2;var h=Be;Be|=4;try{xy(s,t);var p=bd,v=km(t.containerInfo),T=p.focusedElem,N=p.selectionRange;if(v!==T&&T&&T.ownerDocument&&Om(T.ownerDocument.documentElement,T)){if(N!==null&&Gu(T)){var L=N.start,G=N.end;if(G===void 0&&(G=L),"selectionStart"in T)T.selectionStart=L,T.selectionEnd=Math.min(G,T.value.length);else{var W=T.ownerDocument||document,V=W&&W.defaultView||window;if(V.getSelection){var H=V.getSelection(),ce=T.textContent.length,_e=Math.min(N.start,ce),Fe=N.end===void 0?_e:Math.min(N.end,ce);!H.extend&&_e>Fe&&(v=Fe,Fe=_e,_e=v);var B=Nm(T,_e),j=Nm(T,Fe);if(B&&j&&(H.rangeCount!==1||H.anchorNode!==B.node||H.anchorOffset!==B.offset||H.focusNode!==j.node||H.focusOffset!==j.offset)){var q=W.createRange();q.setStart(B.node,B.offset),H.removeAllRanges(),_e>Fe?(H.addRange(q),H.extend(j.node,j.offset)):(q.setEnd(j.node,j.offset),H.addRange(q))}}}}for(W=[],H=T;H=H.parentNode;)H.nodeType===1&&W.push({element:H,left:H.scrollLeft,top:H.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<W.length;T++){var Y=W[T];Y.element.scrollLeft=Y.left,Y.element.scrollTop=Y.top}}uc=!!vd,bd=vd=null}finally{Be=h,$.p=l,U.T=a}}t.current=s,At=2}}function Gy(){if(At===2){At=0;var t=ii,s=zr,a=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||a){a=U.T,U.T=null;var l=$.p;$.p=2;var h=Be;Be|=4;try{vy(t,s.alternate,s)}finally{Be=h,$.p=l,U.T=a}}At=3}}function Fy(){if(At===4||At===3){At=0,xi();var t=ii,s=zr,a=Rs,l=jy;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?At=5:(At=0,zr=ii=null,Yy(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(si=null),Eu(a),s=s.stateNode,an&&typeof an.onCommitFiberRoot=="function")try{an.onCommitFiberRoot(Ta,s,void 0,(s.current.flags&128)===128)}catch{}if(l!==null){s=U.T,h=$.p,$.p=2,U.T=null;try{for(var p=t.onRecoverableError,v=0;v<l.length;v++){var T=l[v];p(T.value,{componentStack:T.stack})}}finally{U.T=s,$.p=h}}(Rs&3)!==0&&Ql(),is(t),h=t.pendingLanes,(a&261930)!==0&&(h&42)!==0?t===ad?io++:(io=0,ad=t):io=0,ro(0)}}function Yy(t,s){(t.pooledCacheLanes&=s)===0&&(s=t.pooledCache,s!=null&&(t.pooledCache=null,La(s)))}function Ql(){return $y(),Gy(),Fy(),Wy()}function Wy(){if(At!==5)return!1;var t=ii,s=id;id=0;var a=Eu(Rs),l=U.T,h=$.p;try{$.p=32>a?32:a,U.T=null,a=rd,rd=null;var p=ii,v=Rs;if(At=0,zr=ii=null,Rs=0,(Be&6)!==0)throw Error(i(331));var T=Be;if(Be|=4,Oy(p.current),Ey(p,p.current,v,a),Be=T,ro(0,!1),an&&typeof an.onPostCommitFiberRoot=="function")try{an.onPostCommitFiberRoot(Ta,p)}catch{}return!0}finally{$.p=h,U.T=l,Yy(t,s)}}function Xy(t,s,a){s=Tn(a,s),s=qh(t.stateNode,s,2),t=Zs(t,s,2),t!==null&&(Aa(t,2),is(t))}function Ie(t,s,a){if(t.tag===3)Xy(t,t,a);else for(;s!==null;){if(s.tag===3){Xy(s,t,a);break}else if(s.tag===1){var l=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(si===null||!si.has(l))){t=Tn(a,t),a=Kg(2),l=Zs(s,a,2),l!==null&&(Zg(a,l,s,t),Aa(l,2),is(l));break}}s=s.return}}function cd(t,s,a){var l=t.pingCache;if(l===null){l=t.pingCache=new p1;var h=new Set;l.set(s,h)}else h=l.get(s),h===void 0&&(h=new Set,l.set(s,h));h.has(a)||(td=!0,h.add(a),t=v1.bind(null,t,s,a),s.then(t,t))}function v1(t,s,a){var l=t.pingCache;l!==null&&l.delete(s),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,Xe===t&&(ke&a)===a&&(ut===4||ut===3&&(ke&62914560)===ke&&300>Rt()-Fl?(Be&2)===0&&Br(t,0):nd|=a,Ur===ke&&(Ur=0)),is(t)}function Ky(t,s){s===0&&(s=$p()),t=ki(t,s),t!==null&&(Aa(t,s),is(t))}function b1(t){var s=t.memoizedState,a=0;s!==null&&(a=s.retryLane),Ky(t,a)}function w1(t,s){var a=0;switch(t.tag){case 31:case 13:var l=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(i(314))}l!==null&&l.delete(s),Ky(t,a)}function S1(t,s){return Qe(t,s)}var Jl=null,Lr=null,ud=!1,ec=!1,hd=!1,ai=0;function is(t){t!==Lr&&t.next===null&&(Lr===null?Jl=Lr=t:Lr=Lr.next=t),ec=!0,ud||(ud=!0,x1())}function ro(t,s){if(!hd&&ec){hd=!0;do for(var a=!1,l=Jl;l!==null;){if(t!==0){var h=l.pendingLanes;if(h===0)var p=0;else{var v=l.suspendedLanes,T=l.pingedLanes;p=(1<<31-on(42|t)+1)-1,p&=h&~(v&~T),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(a=!0,e_(l,p))}else p=ke,p=il(l,l===Xe?p:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(p&3)===0||xa(l,p)||(a=!0,e_(l,p));l=l.next}while(a);hd=!1}}function T1(){Zy()}function Zy(){ec=ud=!1;var t=0;ai!==0&&M1()&&(t=ai);for(var s=Rt(),a=null,l=Jl;l!==null;){var h=l.next,p=Qy(l,s);p===0?(l.next=null,a===null?Jl=h:a.next=h,h===null&&(Lr=a)):(a=l,(t!==0||(p&3)!==0)&&(ec=!0)),l=h}At!==0&&At!==5||ro(t),ai!==0&&(ai=0)}function Qy(t,s){for(var a=t.suspendedLanes,l=t.pingedLanes,h=t.expirationTimes,p=t.pendingLanes&-62914561;0<p;){var v=31-on(p),T=1<<v,N=h[v];N===-1?((T&a)===0||(T&l)!==0)&&(h[v]=Kb(T,s)):N<=s&&(t.expiredLanes|=T),p&=~T}if(s=Xe,a=ke,a=il(t,t===s?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===s&&(Ve===2||Ve===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&Vt(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||xa(t,a)){if(s=a&-a,s===t.callbackPriority)return s;switch(l!==null&&Vt(l),Eu(a)){case 2:case 8:a=Pp;break;case 32:a=el;break;case 268435456:a=Hp;break;default:a=el}return l=Jy.bind(null,t),a=Qe(a,l),t.callbackPriority=s,t.callbackNode=a,s}return l!==null&&l!==null&&Vt(l),t.callbackPriority=2,t.callbackNode=null,2}function Jy(t,s){if(At!==0&&At!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(Ql()&&t.callbackNode!==a)return null;var l=ke;return l=il(t,t===Xe?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(My(t,l,s),Qy(t,Rt()),t.callbackNode!=null&&t.callbackNode===a?Jy.bind(null,t):null)}function e_(t,s){if(Ql())return null;My(t,s,!0)}function x1(){z1(function(){(Be&6)!==0?Qe(Jo,T1):Zy()})}function dd(){if(ai===0){var t=xr;t===0&&(t=tl,tl<<=1,(tl&261888)===0&&(tl=256)),ai=t}return ai}function t_(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:ll(""+t)}function n_(t,s){var a=s.ownerDocument.createElement("input");return a.name=s.name,a.value=s.value,t.id&&a.setAttribute("form",t.id),s.parentNode.insertBefore(a,s),t=new FormData(t),a.parentNode.removeChild(a),t}function A1(t,s,a,l,h){if(s==="submit"&&a&&a.stateNode===h){var p=t_((h[Wt]||null).action),v=l.submitter;v&&(s=(s=v[Wt]||null)?t_(s.formAction):v.getAttribute("formAction"),s!==null&&(p=s,v=null));var T=new dl("action","action",null,l,h);t.push({event:T,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(ai!==0){var N=v?n_(h,v):new FormData(h);jh(a,{pending:!0,data:N,method:h.method,action:p},null,N)}}else typeof p=="function"&&(T.preventDefault(),N=v?n_(h,v):new FormData(h),jh(a,{pending:!0,data:N,method:h.method,action:p},p,N))},currentTarget:h}]})}}for(var fd=0;fd<Xu.length;fd++){var pd=Xu[fd],E1=pd.toLowerCase(),C1=pd[0].toUpperCase()+pd.slice(1);Un(E1,"on"+C1)}Un(Dm,"onAnimationEnd"),Un(Mm,"onAnimationIteration"),Un(Um,"onAnimationStart"),Un("dblclick","onDoubleClick"),Un("focusin","onFocus"),Un("focusout","onBlur"),Un(Hw,"onTransitionRun"),Un($w,"onTransitionStart"),Un(Gw,"onTransitionCancel"),Un(zm,"onTransitionEnd"),ur("onMouseEnter",["mouseout","mouseover"]),ur("onMouseLeave",["mouseout","mouseover"]),ur("onPointerEnter",["pointerout","pointerover"]),ur("onPointerLeave",["pointerout","pointerover"]),Ei("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ei("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ei("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ei("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ei("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ei("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ao="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),N1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ao));function s_(t,s){s=(s&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],h=l.event;l=l.listeners;e:{var p=void 0;if(s)for(var v=l.length-1;0<=v;v--){var T=l[v],N=T.instance,L=T.currentTarget;if(T=T.listener,N!==p&&h.isPropagationStopped())break e;p=T,h.currentTarget=L;try{p(h)}catch(G){ml(G)}h.currentTarget=null,p=N}else for(v=0;v<l.length;v++){if(T=l[v],N=T.instance,L=T.currentTarget,T=T.listener,N!==p&&h.isPropagationStopped())break e;p=T,h.currentTarget=L;try{p(h)}catch(G){ml(G)}h.currentTarget=null,p=N}}}}function Oe(t,s){var a=s[Cu];a===void 0&&(a=s[Cu]=new Set);var l=t+"__bubble";a.has(l)||(i_(s,t,2,!1),a.add(l))}function md(t,s,a){var l=0;s&&(l|=4),i_(a,t,l,s)}var tc="_reactListening"+Math.random().toString(36).slice(2);function gd(t){if(!t[tc]){t[tc]=!0,Zp.forEach(function(a){a!=="selectionchange"&&(N1.has(a)||md(a,!1,t),md(a,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[tc]||(s[tc]=!0,md("selectionchange",!1,s))}}function i_(t,s,a,l){switch(D_(s)){case 2:var h=nS;break;case 8:h=sS;break;default:h=Rd}a=h.bind(null,s,a,t),h=void 0,!zu||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(h=!0),l?h!==void 0?t.addEventListener(s,a,{capture:!0,passive:h}):t.addEventListener(s,a,!0):h!==void 0?t.addEventListener(s,a,{passive:h}):t.addEventListener(s,a,!1)}function yd(t,s,a,l,h){var p=l;if((s&1)===0&&(s&2)===0&&l!==null)e:for(;;){if(l===null)return;var v=l.tag;if(v===3||v===4){var T=l.stateNode.containerInfo;if(T===h)break;if(v===4)for(v=l.return;v!==null;){var N=v.tag;if((N===3||N===4)&&v.stateNode.containerInfo===h)return;v=v.return}for(;T!==null;){if(v=or(T),v===null)return;if(N=v.tag,N===5||N===6||N===26||N===27){l=p=v;continue e}T=T.parentNode}}l=l.return}cm(function(){var L=p,G=Mu(a),W=[];e:{var V=Bm.get(t);if(V!==void 0){var H=dl,ce=t;switch(t){case"keypress":if(ul(a)===0)break e;case"keydown":case"keyup":H=ww;break;case"focusin":ce="focus",H=Vu;break;case"focusout":ce="blur",H=Vu;break;case"beforeblur":case"afterblur":H=Vu;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":H=dm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":H=cw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":H=xw;break;case Dm:case Mm:case Um:H=dw;break;case zm:H=Ew;break;case"scroll":case"scrollend":H=ow;break;case"wheel":H=Nw;break;case"copy":case"cut":case"paste":H=pw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":H=pm;break;case"toggle":case"beforetoggle":H=kw}var _e=(s&4)!==0,Fe=!_e&&(t==="scroll"||t==="scrollend"),B=_e?V!==null?V+"Capture":null:V;_e=[];for(var j=L,q;j!==null;){var Y=j;if(q=Y.stateNode,Y=Y.tag,Y!==5&&Y!==26&&Y!==27||q===null||B===null||(Y=Na(j,B),Y!=null&&_e.push(oo(j,Y,q))),Fe)break;j=j.return}0<_e.length&&(V=new H(V,ce,null,a,G),W.push({event:V,listeners:_e}))}}if((s&7)===0){e:{if(V=t==="mouseover"||t==="pointerover",H=t==="mouseout"||t==="pointerout",V&&a!==Du&&(ce=a.relatedTarget||a.fromElement)&&(or(ce)||ce[ar]))break e;if((H||V)&&(V=G.window===G?G:(V=G.ownerDocument)?V.defaultView||V.parentWindow:window,H?(ce=a.relatedTarget||a.toElement,H=L,ce=ce?or(ce):null,ce!==null&&(Fe=c(ce),_e=ce.tag,ce!==Fe||_e!==5&&_e!==27&&_e!==6)&&(ce=null)):(H=null,ce=L),H!==ce)){if(_e=dm,Y="onMouseLeave",B="onMouseEnter",j="mouse",(t==="pointerout"||t==="pointerover")&&(_e=pm,Y="onPointerLeave",B="onPointerEnter",j="pointer"),Fe=H==null?V:Ca(H),q=ce==null?V:Ca(ce),V=new _e(Y,j+"leave",H,a,G),V.target=Fe,V.relatedTarget=q,Y=null,or(G)===L&&(_e=new _e(B,j+"enter",ce,a,G),_e.target=q,_e.relatedTarget=Fe,Y=_e),Fe=Y,H&&ce)t:{for(_e=O1,B=H,j=ce,q=0,Y=B;Y;Y=_e(Y))q++;Y=0;for(var me=j;me;me=_e(me))Y++;for(;0<q-Y;)B=_e(B),q--;for(;0<Y-q;)j=_e(j),Y--;for(;q--;){if(B===j||j!==null&&B===j.alternate){_e=B;break t}B=_e(B),j=_e(j)}_e=null}else _e=null;H!==null&&r_(W,V,H,_e,!1),ce!==null&&Fe!==null&&r_(W,Fe,ce,_e,!0)}}e:{if(V=L?Ca(L):window,H=V.nodeName&&V.nodeName.toLowerCase(),H==="select"||H==="input"&&V.type==="file")var Ue=Sm;else if(bm(V))if(Tm)Ue=Vw;else{Ue=qw;var de=Bw}else H=V.nodeName,!H||H.toLowerCase()!=="input"||V.type!=="checkbox"&&V.type!=="radio"?L&&ju(L.elementType)&&(Ue=Sm):Ue=Lw;if(Ue&&(Ue=Ue(t,L))){wm(W,Ue,a,G);break e}de&&de(t,V,L),t==="focusout"&&L&&V.type==="number"&&L.memoizedProps.value!=null&&Ru(V,"number",V.value)}switch(de=L?Ca(L):window,t){case"focusin":(bm(de)||de.contentEditable==="true")&&(gr=de,Fu=L,za=null);break;case"focusout":za=Fu=gr=null;break;case"mousedown":Yu=!0;break;case"contextmenu":case"mouseup":case"dragend":Yu=!1,Rm(W,a,G);break;case"selectionchange":if(Pw)break;case"keydown":case"keyup":Rm(W,a,G)}var Ee;if(Pu)e:{switch(t){case"compositionstart":var Re="onCompositionStart";break e;case"compositionend":Re="onCompositionEnd";break e;case"compositionupdate":Re="onCompositionUpdate";break e}Re=void 0}else mr?_m(t,a)&&(Re="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(Re="onCompositionStart");Re&&(mm&&a.locale!=="ko"&&(mr||Re!=="onCompositionStart"?Re==="onCompositionEnd"&&mr&&(Ee=um()):($s=G,Bu="value"in $s?$s.value:$s.textContent,mr=!0)),de=nc(L,Re),0<de.length&&(Re=new fm(Re,t,null,a,G),W.push({event:Re,listeners:de}),Ee?Re.data=Ee:(Ee=vm(a),Ee!==null&&(Re.data=Ee)))),(Ee=jw?Dw(t,a):Mw(t,a))&&(Re=nc(L,"onBeforeInput"),0<Re.length&&(de=new fm("onBeforeInput","beforeinput",null,a,G),W.push({event:de,listeners:Re}),de.data=Ee)),A1(W,t,L,a,G)}s_(W,s)})}function oo(t,s,a){return{instance:t,listener:s,currentTarget:a}}function nc(t,s){for(var a=s+"Capture",l=[];t!==null;){var h=t,p=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||p===null||(h=Na(t,a),h!=null&&l.unshift(oo(t,h,p)),h=Na(t,s),h!=null&&l.push(oo(t,h,p))),t.tag===3)return l;t=t.return}return[]}function O1(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function r_(t,s,a,l,h){for(var p=s._reactName,v=[];a!==null&&a!==l;){var T=a,N=T.alternate,L=T.stateNode;if(T=T.tag,N!==null&&N===l)break;T!==5&&T!==26&&T!==27||L===null||(N=L,h?(L=Na(a,p),L!=null&&v.unshift(oo(a,L,N))):h||(L=Na(a,p),L!=null&&v.push(oo(a,L,N)))),a=a.return}v.length!==0&&t.push({event:s,listeners:v})}var k1=/\r\n?/g,R1=/\u0000|\uFFFD/g;function a_(t){return(typeof t=="string"?t:""+t).replace(k1,`
`).replace(R1,"")}function o_(t,s){return s=a_(s),a_(t)===s}function Ge(t,s,a,l,h,p){switch(a){case"children":typeof l=="string"?s==="body"||s==="textarea"&&l===""||dr(t,l):(typeof l=="number"||typeof l=="bigint")&&s!=="body"&&dr(t,""+l);break;case"className":al(t,"class",l);break;case"tabIndex":al(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":al(t,a,l);break;case"style":om(t,l,p);break;case"data":if(s!=="object"){al(t,"data",l);break}case"src":case"href":if(l===""&&(s!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=ll(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(a==="formAction"?(s!=="input"&&Ge(t,s,"name",h.name,h,null),Ge(t,s,"formEncType",h.formEncType,h,null),Ge(t,s,"formMethod",h.formMethod,h,null),Ge(t,s,"formTarget",h.formTarget,h,null)):(Ge(t,s,"encType",h.encType,h,null),Ge(t,s,"method",h.method,h,null),Ge(t,s,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=ll(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=gs);break;case"onScroll":l!=null&&Oe("scroll",t);break;case"onScrollEnd":l!=null&&Oe("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(i(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=ll(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":Oe("beforetoggle",t),Oe("toggle",t),rl(t,"popover",l);break;case"xlinkActuate":ms(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":ms(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":ms(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":ms(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":ms(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":ms(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":ms(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":ms(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":ms(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":rl(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=rw.get(a)||a,rl(t,a,l))}}function _d(t,s,a,l,h,p){switch(a){case"style":om(t,l,p);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(i(60));t.innerHTML=a}}break;case"children":typeof l=="string"?dr(t,l):(typeof l=="number"||typeof l=="bigint")&&dr(t,""+l);break;case"onScroll":l!=null&&Oe("scroll",t);break;case"onScrollEnd":l!=null&&Oe("scrollend",t);break;case"onClick":l!=null&&(t.onclick=gs);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Qp.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),s=a.slice(2,h?a.length-7:void 0),p=t[Wt]||null,p=p!=null?p[a]:null,typeof p=="function"&&t.removeEventListener(s,p,h),typeof l=="function")){typeof p!="function"&&p!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(s,l,h);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):rl(t,a,l)}}}function zt(t,s,a){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Oe("error",t),Oe("load",t);var l=!1,h=!1,p;for(p in a)if(a.hasOwnProperty(p)){var v=a[p];if(v!=null)switch(p){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:Ge(t,s,p,v,a,null)}}h&&Ge(t,s,"srcSet",a.srcSet,a,null),l&&Ge(t,s,"src",a.src,a,null);return;case"input":Oe("invalid",t);var T=p=v=h=null,N=null,L=null;for(l in a)if(a.hasOwnProperty(l)){var G=a[l];if(G!=null)switch(l){case"name":h=G;break;case"type":v=G;break;case"checked":N=G;break;case"defaultChecked":L=G;break;case"value":p=G;break;case"defaultValue":T=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(i(137,s));break;default:Ge(t,s,l,G,a,null)}}sm(t,p,T,N,L,v,h,!1);return;case"select":Oe("invalid",t),l=v=p=null;for(h in a)if(a.hasOwnProperty(h)&&(T=a[h],T!=null))switch(h){case"value":p=T;break;case"defaultValue":v=T;break;case"multiple":l=T;default:Ge(t,s,h,T,a,null)}s=p,a=v,t.multiple=!!l,s!=null?hr(t,!!l,s,!1):a!=null&&hr(t,!!l,a,!0);return;case"textarea":Oe("invalid",t),p=h=l=null;for(v in a)if(a.hasOwnProperty(v)&&(T=a[v],T!=null))switch(v){case"value":l=T;break;case"defaultValue":h=T;break;case"children":p=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(i(91));break;default:Ge(t,s,v,T,a,null)}rm(t,l,h,p);return;case"option":for(N in a)a.hasOwnProperty(N)&&(l=a[N],l!=null)&&(N==="selected"?t.selected=l&&typeof l!="function"&&typeof l!="symbol":Ge(t,s,N,l,a,null));return;case"dialog":Oe("beforetoggle",t),Oe("toggle",t),Oe("cancel",t),Oe("close",t);break;case"iframe":case"object":Oe("load",t);break;case"video":case"audio":for(l=0;l<ao.length;l++)Oe(ao[l],t);break;case"image":Oe("error",t),Oe("load",t);break;case"details":Oe("toggle",t);break;case"embed":case"source":case"link":Oe("error",t),Oe("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(L in a)if(a.hasOwnProperty(L)&&(l=a[L],l!=null))switch(L){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:Ge(t,s,L,l,a,null)}return;default:if(ju(s)){for(G in a)a.hasOwnProperty(G)&&(l=a[G],l!==void 0&&_d(t,s,G,l,a,void 0));return}}for(T in a)a.hasOwnProperty(T)&&(l=a[T],l!=null&&Ge(t,s,T,l,a,null))}function j1(t,s,a,l){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,p=null,v=null,T=null,N=null,L=null,G=null;for(H in a){var W=a[H];if(a.hasOwnProperty(H)&&W!=null)switch(H){case"checked":break;case"value":break;case"defaultValue":N=W;default:l.hasOwnProperty(H)||Ge(t,s,H,null,l,W)}}for(var V in l){var H=l[V];if(W=a[V],l.hasOwnProperty(V)&&(H!=null||W!=null))switch(V){case"type":p=H;break;case"name":h=H;break;case"checked":L=H;break;case"defaultChecked":G=H;break;case"value":v=H;break;case"defaultValue":T=H;break;case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(i(137,s));break;default:H!==W&&Ge(t,s,V,H,l,W)}}ku(t,v,T,N,L,G,p,h);return;case"select":H=v=T=V=null;for(p in a)if(N=a[p],a.hasOwnProperty(p)&&N!=null)switch(p){case"value":break;case"multiple":H=N;default:l.hasOwnProperty(p)||Ge(t,s,p,null,l,N)}for(h in l)if(p=l[h],N=a[h],l.hasOwnProperty(h)&&(p!=null||N!=null))switch(h){case"value":V=p;break;case"defaultValue":T=p;break;case"multiple":v=p;default:p!==N&&Ge(t,s,h,p,l,N)}s=T,a=v,l=H,V!=null?hr(t,!!a,V,!1):!!l!=!!a&&(s!=null?hr(t,!!a,s,!0):hr(t,!!a,a?[]:"",!1));return;case"textarea":H=V=null;for(T in a)if(h=a[T],a.hasOwnProperty(T)&&h!=null&&!l.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:Ge(t,s,T,null,l,h)}for(v in l)if(h=l[v],p=a[v],l.hasOwnProperty(v)&&(h!=null||p!=null))switch(v){case"value":V=h;break;case"defaultValue":H=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(i(91));break;default:h!==p&&Ge(t,s,v,h,l,p)}im(t,V,H);return;case"option":for(var ce in a)V=a[ce],a.hasOwnProperty(ce)&&V!=null&&!l.hasOwnProperty(ce)&&(ce==="selected"?t.selected=!1:Ge(t,s,ce,null,l,V));for(N in l)V=l[N],H=a[N],l.hasOwnProperty(N)&&V!==H&&(V!=null||H!=null)&&(N==="selected"?t.selected=V&&typeof V!="function"&&typeof V!="symbol":Ge(t,s,N,V,l,H));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var _e in a)V=a[_e],a.hasOwnProperty(_e)&&V!=null&&!l.hasOwnProperty(_e)&&Ge(t,s,_e,null,l,V);for(L in l)if(V=l[L],H=a[L],l.hasOwnProperty(L)&&V!==H&&(V!=null||H!=null))switch(L){case"children":case"dangerouslySetInnerHTML":if(V!=null)throw Error(i(137,s));break;default:Ge(t,s,L,V,l,H)}return;default:if(ju(s)){for(var Fe in a)V=a[Fe],a.hasOwnProperty(Fe)&&V!==void 0&&!l.hasOwnProperty(Fe)&&_d(t,s,Fe,void 0,l,V);for(G in l)V=l[G],H=a[G],!l.hasOwnProperty(G)||V===H||V===void 0&&H===void 0||_d(t,s,G,V,l,H);return}}for(var B in a)V=a[B],a.hasOwnProperty(B)&&V!=null&&!l.hasOwnProperty(B)&&Ge(t,s,B,null,l,V);for(W in l)V=l[W],H=a[W],!l.hasOwnProperty(W)||V===H||V==null&&H==null||Ge(t,s,W,V,l,H)}function l_(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function D1(){if(typeof performance.getEntriesByType=="function"){for(var t=0,s=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var h=a[l],p=h.transferSize,v=h.initiatorType,T=h.duration;if(p&&T&&l_(v)){for(v=0,T=h.responseEnd,l+=1;l<a.length;l++){var N=a[l],L=N.startTime;if(L>T)break;var G=N.transferSize,W=N.initiatorType;G&&l_(W)&&(N=N.responseEnd,v+=G*(N<T?1:(T-L)/(N-L)))}if(--l,s+=8*(p+v)/(h.duration/1e3),t++,10<t)break}}if(0<t)return s/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var vd=null,bd=null;function sc(t){return t.nodeType===9?t:t.ownerDocument}function c_(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function u_(t,s){if(t===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&s==="foreignObject"?0:t}function wd(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Sd=null;function M1(){var t=window.event;return t&&t.type==="popstate"?t===Sd?!1:(Sd=t,!0):(Sd=null,!1)}var h_=typeof setTimeout=="function"?setTimeout:void 0,U1=typeof clearTimeout=="function"?clearTimeout:void 0,d_=typeof Promise=="function"?Promise:void 0,z1=typeof queueMicrotask=="function"?queueMicrotask:typeof d_<"u"?function(t){return d_.resolve(null).then(t).catch(B1)}:h_;function B1(t){setTimeout(function(){throw t})}function oi(t){return t==="head"}function f_(t,s){var a=s,l=0;do{var h=a.nextSibling;if(t.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"||a==="/&"){if(l===0){t.removeChild(h),Hr(s);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")lo(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,lo(a);for(var p=a.firstChild;p;){var v=p.nextSibling,T=p.nodeName;p[Ea]||T==="SCRIPT"||T==="STYLE"||T==="LINK"&&p.rel.toLowerCase()==="stylesheet"||a.removeChild(p),p=v}}else a==="body"&&lo(t.ownerDocument.body);a=h}while(a);Hr(s)}function p_(t,s){var a=t;t=0;do{var l=a.nextSibling;if(a.nodeType===1?s?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(s?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=l}while(a)}function Td(t){var s=t.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var a=s;switch(s=s.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Td(a),Nu(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function q1(t,s,a,l){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==s.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[Ea])switch(s){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(p=t.getAttribute("rel"),p==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(p!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(p=t.getAttribute("src"),(p!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&p&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(s==="input"&&t.type==="hidden"){var p=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===p)return t}else return t;if(t=Nn(t.nextSibling),t===null)break}return null}function L1(t,s,a){if(s==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=Nn(t.nextSibling),t===null))return null;return t}function m_(t,s){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!s||(t=Nn(t.nextSibling),t===null))return null;return t}function xd(t){return t.data==="$?"||t.data==="$~"}function Ad(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function V1(t,s){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=s;else if(t.data!=="$?"||a.readyState!=="loading")s();else{var l=function(){s(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function Nn(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return t}var Ed=null;function g_(t){t=t.nextSibling;for(var s=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(s===0)return Nn(t.nextSibling);s--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||s++}t=t.nextSibling}return null}function y_(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(s===0)return t;s--}else a!=="/$"&&a!=="/&"||s++}t=t.previousSibling}return null}function __(t,s,a){switch(s=sc(a),t){case"html":if(t=s.documentElement,!t)throw Error(i(452));return t;case"head":if(t=s.head,!t)throw Error(i(453));return t;case"body":if(t=s.body,!t)throw Error(i(454));return t;default:throw Error(i(451))}}function lo(t){for(var s=t.attributes;s.length;)t.removeAttributeNode(s[0]);Nu(t)}var On=new Map,v_=new Set;function ic(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var js=$.d;$.d={f:I1,r:P1,D:H1,C:$1,L:G1,m:F1,X:W1,S:Y1,M:X1};function I1(){var t=js.f(),s=Xl();return t||s}function P1(t){var s=lr(t);s!==null&&s.tag===5&&s.type==="form"?zg(s):js.r(t)}var Vr=typeof document>"u"?null:document;function b_(t,s,a){var l=Vr;if(l&&typeof s=="string"&&s){var h=wn(s);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),v_.has(h)||(v_.add(h),t={rel:t,crossOrigin:a,href:s},l.querySelector(h)===null&&(s=l.createElement("link"),zt(s,"link",t),Nt(s),l.head.appendChild(s)))}}function H1(t){js.D(t),b_("dns-prefetch",t,null)}function $1(t,s){js.C(t,s),b_("preconnect",t,s)}function G1(t,s,a){js.L(t,s,a);var l=Vr;if(l&&t&&s){var h='link[rel="preload"][as="'+wn(s)+'"]';s==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+wn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+wn(a.imageSizes)+'"]')):h+='[href="'+wn(t)+'"]';var p=h;switch(s){case"style":p=Ir(t);break;case"script":p=Pr(t)}On.has(p)||(t=_({rel:"preload",href:s==="image"&&a&&a.imageSrcSet?void 0:t,as:s},a),On.set(p,t),l.querySelector(h)!==null||s==="style"&&l.querySelector(co(p))||s==="script"&&l.querySelector(uo(p))||(s=l.createElement("link"),zt(s,"link",t),Nt(s),l.head.appendChild(s)))}}function F1(t,s){js.m(t,s);var a=Vr;if(a&&t){var l=s&&typeof s.as=="string"?s.as:"script",h='link[rel="modulepreload"][as="'+wn(l)+'"][href="'+wn(t)+'"]',p=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=Pr(t)}if(!On.has(p)&&(t=_({rel:"modulepreload",href:t},s),On.set(p,t),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(uo(p)))return}l=a.createElement("link"),zt(l,"link",t),Nt(l),a.head.appendChild(l)}}}function Y1(t,s,a){js.S(t,s,a);var l=Vr;if(l&&t){var h=cr(l).hoistableStyles,p=Ir(t);s=s||"default";var v=h.get(p);if(!v){var T={loading:0,preload:null};if(v=l.querySelector(co(p)))T.loading=5;else{t=_({rel:"stylesheet",href:t,"data-precedence":s},a),(a=On.get(p))&&Cd(t,a);var N=v=l.createElement("link");Nt(N),zt(N,"link",t),N._p=new Promise(function(L,G){N.onload=L,N.onerror=G}),N.addEventListener("load",function(){T.loading|=1}),N.addEventListener("error",function(){T.loading|=2}),T.loading|=4,rc(v,s,l)}v={type:"stylesheet",instance:v,count:1,state:T},h.set(p,v)}}}function W1(t,s){js.X(t,s);var a=Vr;if(a&&t){var l=cr(a).hoistableScripts,h=Pr(t),p=l.get(h);p||(p=a.querySelector(uo(h)),p||(t=_({src:t,async:!0},s),(s=On.get(h))&&Nd(t,s),p=a.createElement("script"),Nt(p),zt(p,"link",t),a.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},l.set(h,p))}}function X1(t,s){js.M(t,s);var a=Vr;if(a&&t){var l=cr(a).hoistableScripts,h=Pr(t),p=l.get(h);p||(p=a.querySelector(uo(h)),p||(t=_({src:t,async:!0,type:"module"},s),(s=On.get(h))&&Nd(t,s),p=a.createElement("script"),Nt(p),zt(p,"link",t),a.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},l.set(h,p))}}function w_(t,s,a,l){var h=(h=he.current)?ic(h):null;if(!h)throw Error(i(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(s=Ir(a.href),a=cr(h).hoistableStyles,l=a.get(s),l||(l={type:"style",instance:null,count:0,state:null},a.set(s,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=Ir(a.href);var p=cr(h).hoistableStyles,v=p.get(t);if(v||(h=h.ownerDocument||h,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(t,v),(p=h.querySelector(co(t)))&&!p._p&&(v.instance=p,v.state.loading=5),On.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},On.set(t,a),p||K1(h,t,a,v.state))),s&&l===null)throw Error(i(528,""));return v}if(s&&l!==null)throw Error(i(529,""));return null;case"script":return s=a.async,a=a.src,typeof a=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Pr(a),a=cr(h).hoistableScripts,l=a.get(s),l||(l={type:"script",instance:null,count:0,state:null},a.set(s,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,t))}}function Ir(t){return'href="'+wn(t)+'"'}function co(t){return'link[rel="stylesheet"]['+t+"]"}function S_(t){return _({},t,{"data-precedence":t.precedence,precedence:null})}function K1(t,s,a,l){t.querySelector('link[rel="preload"][as="style"]['+s+"]")?l.loading=1:(s=t.createElement("link"),l.preload=s,s.addEventListener("load",function(){return l.loading|=1}),s.addEventListener("error",function(){return l.loading|=2}),zt(s,"link",a),Nt(s),t.head.appendChild(s))}function Pr(t){return'[src="'+wn(t)+'"]'}function uo(t){return"script[async]"+t}function T_(t,s,a){if(s.count++,s.instance===null)switch(s.type){case"style":var l=t.querySelector('style[data-href~="'+wn(a.href)+'"]');if(l)return s.instance=l,Nt(l),l;var h=_({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),Nt(l),zt(l,"style",h),rc(l,a.precedence,t),s.instance=l;case"stylesheet":h=Ir(a.href);var p=t.querySelector(co(h));if(p)return s.state.loading|=4,s.instance=p,Nt(p),p;l=S_(a),(h=On.get(h))&&Cd(l,h),p=(t.ownerDocument||t).createElement("link"),Nt(p);var v=p;return v._p=new Promise(function(T,N){v.onload=T,v.onerror=N}),zt(p,"link",l),s.state.loading|=4,rc(p,a.precedence,t),s.instance=p;case"script":return p=Pr(a.src),(h=t.querySelector(uo(p)))?(s.instance=h,Nt(h),h):(l=a,(h=On.get(p))&&(l=_({},a),Nd(l,h)),t=t.ownerDocument||t,h=t.createElement("script"),Nt(h),zt(h,"link",l),t.head.appendChild(h),s.instance=h);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(l=s.instance,s.state.loading|=4,rc(l,a.precedence,t));return s.instance}function rc(t,s,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,p=h,v=0;v<l.length;v++){var T=l[v];if(T.dataset.precedence===s)p=T;else if(p!==h)break}p?p.parentNode.insertBefore(t,p.nextSibling):(s=a.nodeType===9?a.head:a,s.insertBefore(t,s.firstChild))}function Cd(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.title==null&&(t.title=s.title)}function Nd(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.integrity==null&&(t.integrity=s.integrity)}var ac=null;function x_(t,s,a){if(ac===null){var l=new Map,h=ac=new Map;h.set(a,l)}else h=ac,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var p=a[h];if(!(p[Ea]||p[jt]||t==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var v=p.getAttribute(s)||"";v=t+v;var T=l.get(v);T?T.push(p):l.set(v,[p])}}return l}function A_(t,s,a){t=t.ownerDocument||t,t.head.insertBefore(a,s==="title"?t.querySelector("head > title"):null)}function Z1(t,s,a){if(a===1||s.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;return s.rel==="stylesheet"?(t=s.disabled,typeof s.precedence=="string"&&t==null):!0;case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function E_(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function Q1(t,s,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var h=Ir(l.href),p=s.querySelector(co(h));if(p){s=p._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(t.count++,t=oc.bind(t),s.then(t,t)),a.state.loading|=4,a.instance=p,Nt(p);return}p=s.ownerDocument||s,l=S_(l),(h=On.get(h))&&Cd(l,h),p=p.createElement("link"),Nt(p);var v=p;v._p=new Promise(function(T,N){v.onload=T,v.onerror=N}),zt(p,"link",l),a.instance=p}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,s),(s=a.state.preload)&&(a.state.loading&3)===0&&(t.count++,a=oc.bind(t),s.addEventListener("load",a),s.addEventListener("error",a))}}var Od=0;function J1(t,s){return t.stylesheets&&t.count===0&&cc(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var l=setTimeout(function(){if(t.stylesheets&&cc(t,t.stylesheets),t.unsuspend){var p=t.unsuspend;t.unsuspend=null,p()}},6e4+s);0<t.imgBytes&&Od===0&&(Od=62500*D1());var h=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&cc(t,t.stylesheets),t.unsuspend)){var p=t.unsuspend;t.unsuspend=null,p()}},(t.imgBytes>Od?50:800)+s);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(h)}}:null}function oc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)cc(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var lc=null;function cc(t,s){t.stylesheets=null,t.unsuspend!==null&&(t.count++,lc=new Map,s.forEach(eS,t),lc=null,oc.call(t))}function eS(t,s){if(!(s.state.loading&4)){var a=lc.get(t);if(a)var l=a.get(null);else{a=new Map,lc.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<h.length;p++){var v=h[p];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),l=v)}l&&a.set(null,l)}h=s.instance,v=h.getAttribute("data-precedence"),p=a.get(v)||l,p===l&&a.set(null,h),a.set(v,h),this.count++,l=oc.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),p?p.parentNode.insertBefore(h,p.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),s.state.loading|=4}}var ho={$$typeof:O,Provider:null,Consumer:null,_currentValue:J,_currentValue2:J,_threadCount:0};function tS(t,s,a,l,h,p,v,T,N){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=xu(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xu(0),this.hiddenUpdates=xu(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=p,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=N,this.incompleteTransitions=new Map}function C_(t,s,a,l,h,p,v,T,N,L,G,W){return t=new tS(t,s,a,v,N,L,G,W,T),s=1,p===!0&&(s|=24),p=cn(3,null,null,s),t.current=p,p.stateNode=t,s=lh(),s.refCount++,t.pooledCache=s,s.refCount++,p.memoizedState={element:l,isDehydrated:a,cache:s},dh(p),t}function N_(t){return t?(t=vr,t):vr}function O_(t,s,a,l,h,p){h=N_(h),l.context===null?l.context=h:l.pendingContext=h,l=Ks(s),l.payload={element:a},p=p===void 0?null:p,p!==null&&(l.callback=p),a=Zs(t,l,s),a!==null&&(en(a,t,s),Ha(a,t,s))}function k_(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<s?a:s}}function kd(t,s){k_(t,s),(t=t.alternate)&&k_(t,s)}function R_(t){if(t.tag===13||t.tag===31){var s=ki(t,67108864);s!==null&&en(s,t,67108864),kd(t,67108864)}}function j_(t){if(t.tag===13||t.tag===31){var s=pn();s=Au(s);var a=ki(t,s);a!==null&&en(a,t,s),kd(t,s)}}var uc=!0;function nS(t,s,a,l){var h=U.T;U.T=null;var p=$.p;try{$.p=2,Rd(t,s,a,l)}finally{$.p=p,U.T=h}}function sS(t,s,a,l){var h=U.T;U.T=null;var p=$.p;try{$.p=8,Rd(t,s,a,l)}finally{$.p=p,U.T=h}}function Rd(t,s,a,l){if(uc){var h=jd(l);if(h===null)yd(t,s,l,hc,a),M_(t,l);else if(rS(h,t,s,a,l))l.stopPropagation();else if(M_(t,l),s&4&&-1<iS.indexOf(t)){for(;h!==null;){var p=lr(h);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var v=Ai(p.pendingLanes);if(v!==0){var T=p;for(T.pendingLanes|=2,T.entangledLanes|=2;v;){var N=1<<31-on(v);T.entanglements[1]|=N,v&=~N}is(p),(Be&6)===0&&(Yl=Rt()+500,ro(0))}}break;case 31:case 13:T=ki(p,2),T!==null&&en(T,p,2),Xl(),kd(p,2)}if(p=jd(l),p===null&&yd(t,s,l,hc,a),p===h)break;h=p}h!==null&&l.stopPropagation()}else yd(t,s,l,null,a)}}function jd(t){return t=Mu(t),Dd(t)}var hc=null;function Dd(t){if(hc=null,t=or(t),t!==null){var s=c(t);if(s===null)t=null;else{var a=s.tag;if(a===13){if(t=u(s),t!==null)return t;t=null}else if(a===31){if(t=d(s),t!==null)return t;t=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null)}}return hc=t,null}function D_(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Tu()){case Jo:return 2;case Pp:return 8;case el:case $b:return 32;case Hp:return 268435456;default:return 32}default:return 32}}var Md=!1,li=null,ci=null,ui=null,fo=new Map,po=new Map,hi=[],iS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function M_(t,s){switch(t){case"focusin":case"focusout":li=null;break;case"dragenter":case"dragleave":ci=null;break;case"mouseover":case"mouseout":ui=null;break;case"pointerover":case"pointerout":fo.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":po.delete(s.pointerId)}}function mo(t,s,a,l,h,p){return t===null||t.nativeEvent!==p?(t={blockedOn:s,domEventName:a,eventSystemFlags:l,nativeEvent:p,targetContainers:[h]},s!==null&&(s=lr(s),s!==null&&R_(s)),t):(t.eventSystemFlags|=l,s=t.targetContainers,h!==null&&s.indexOf(h)===-1&&s.push(h),t)}function rS(t,s,a,l,h){switch(s){case"focusin":return li=mo(li,t,s,a,l,h),!0;case"dragenter":return ci=mo(ci,t,s,a,l,h),!0;case"mouseover":return ui=mo(ui,t,s,a,l,h),!0;case"pointerover":var p=h.pointerId;return fo.set(p,mo(fo.get(p)||null,t,s,a,l,h)),!0;case"gotpointercapture":return p=h.pointerId,po.set(p,mo(po.get(p)||null,t,s,a,l,h)),!0}return!1}function U_(t){var s=or(t.target);if(s!==null){var a=c(s);if(a!==null){if(s=a.tag,s===13){if(s=u(a),s!==null){t.blockedOn=s,Xp(t.priority,function(){j_(a)});return}}else if(s===31){if(s=d(a),s!==null){t.blockedOn=s,Xp(t.priority,function(){j_(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function dc(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var a=jd(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);Du=l,a.target.dispatchEvent(l),Du=null}else return s=lr(a),s!==null&&R_(s),t.blockedOn=a,!1;s.shift()}return!0}function z_(t,s,a){dc(t)&&a.delete(s)}function aS(){Md=!1,li!==null&&dc(li)&&(li=null),ci!==null&&dc(ci)&&(ci=null),ui!==null&&dc(ui)&&(ui=null),fo.forEach(z_),po.forEach(z_)}function fc(t,s){t.blockedOn===s&&(t.blockedOn=null,Md||(Md=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,aS)))}var pc=null;function B_(t){pc!==t&&(pc=t,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){pc===t&&(pc=null);for(var s=0;s<t.length;s+=3){var a=t[s],l=t[s+1],h=t[s+2];if(typeof l!="function"){if(Dd(l||a)===null)continue;break}var p=lr(a);p!==null&&(t.splice(s,3),s-=3,jh(p,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function Hr(t){function s(N){return fc(N,t)}li!==null&&fc(li,t),ci!==null&&fc(ci,t),ui!==null&&fc(ui,t),fo.forEach(s),po.forEach(s);for(var a=0;a<hi.length;a++){var l=hi[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<hi.length&&(a=hi[0],a.blockedOn===null);)U_(a),a.blockedOn===null&&hi.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],p=a[l+1],v=h[Wt]||null;if(typeof p=="function")v||B_(a);else if(v){var T=null;if(p&&p.hasAttribute("formAction")){if(h=p,v=p[Wt]||null)T=v.formAction;else if(Dd(h)!==null)continue}else T=v.action;typeof T=="function"?a[l+1]=T:(a.splice(l,3),l-=3),B_(a)}}}function q_(){function t(p){p.canIntercept&&p.info==="react-transition"&&p.intercept({handler:function(){return new Promise(function(v){return h=v})},focusReset:"manual",scroll:"manual"})}function s(){h!==null&&(h(),h=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var p=navigation.currentEntry;p&&p.url!=null&&navigation.navigate(p.url,{state:p.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,h=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),h!==null&&(h(),h=null)}}}function Ud(t){this._internalRoot=t}mc.prototype.render=Ud.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(i(409));var a=s.current,l=pn();O_(a,l,t,s,null,null)},mc.prototype.unmount=Ud.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;O_(t.current,2,null,t,null,null),Xl(),s[ar]=null}};function mc(t){this._internalRoot=t}mc.prototype.unstable_scheduleHydration=function(t){if(t){var s=Wp();t={blockedOn:null,target:t,priority:s};for(var a=0;a<hi.length&&s!==0&&s<hi[a].priority;a++);hi.splice(a,0,t),a===0&&U_(t)}};var L_=e.version;if(L_!=="19.2.3")throw Error(i(527,L_,"19.2.3"));$.findDOMNode=function(t){var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(i(188)):(t=Object.keys(t).join(","),Error(i(268,t)));return t=m(s),t=t!==null?y(t):null,t=t===null?null:t.stateNode,t};var oS={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:U,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var gc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!gc.isDisabled&&gc.supportsFiber)try{Ta=gc.inject(oS),an=gc}catch{}}return yo.createRoot=function(t,s){if(!o(t))throw Error(i(299));var a=!1,l="",h=Fg,p=Yg,v=Wg;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(l=s.identifierPrefix),s.onUncaughtError!==void 0&&(h=s.onUncaughtError),s.onCaughtError!==void 0&&(p=s.onCaughtError),s.onRecoverableError!==void 0&&(v=s.onRecoverableError)),s=C_(t,1,!1,null,null,a,l,null,h,p,v,q_),t[ar]=s.current,gd(t),new Ud(s)},yo.hydrateRoot=function(t,s,a){if(!o(t))throw Error(i(299));var l=!1,h="",p=Fg,v=Yg,T=Wg,N=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(p=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError),a.formState!==void 0&&(N=a.formState)),s=C_(t,1,!0,s,a??null,l,h,N,p,v,T,q_),s.context=N_(null),a=s.current,l=pn(),l=Au(l),h=Ks(l),h.callback=null,Zs(a,h,l),a=l,s.current.lanes=a,Aa(s,a),is(s),t[ar]=s.current,gd(t),new mc(s)},yo.version="19.2.3",yo}var X_;function vS(){if(X_)return qd.exports;X_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),qd.exports=_S(),qd.exports}var bS=vS();const Xv=(...r)=>r.filter((e,n,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===n).join(" ").trim();const wS=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();const SS=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,i)=>i?i.toUpperCase():n.toLowerCase());const K_=r=>{const e=SS(r);return e.charAt(0).toUpperCase()+e.slice(1)};var TS={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const xS=r=>{for(const e in r)if(e.startsWith("aria-")||e==="role"||e==="title")return!0;return!1};const AS=Z.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:o="",children:c,iconNode:u,...d},f)=>Z.createElement("svg",{ref:f,...TS,width:e,height:e,stroke:r,strokeWidth:i?Number(n)*24/Number(e):n,className:Xv("lucide",o),...!c&&!xS(d)&&{"aria-hidden":"true"},...d},[...u.map(([m,y])=>Z.createElement(m,y)),...Array.isArray(c)?c:[c]]));const we=(r,e)=>{const n=Z.forwardRef(({className:i,...o},c)=>Z.createElement(AS,{ref:c,iconNode:e,className:Xv(`lucide-${wS(K_(r))}`,`lucide-${r}`,i),...o}));return n.displayName=K_(r),n};const ES=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],CS=we("activity",ES);const NS=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],OS=we("bell",NS);const kS=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],RS=we("check",kS);const jS=[["path",{d:"M10.88 21.94 15.46 14",key:"xkve6t"}],["path",{d:"M21.17 8H12",key:"19dcdn"}],["path",{d:"M3.95 6.06 8.54 14",key:"g8jz9m"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}]],DS=we("chromium",jS);const MS=[["path",{d:"M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z",key:"kmsa83"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],US=we("circle-play",MS);const zS=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Kv=we("clock",zS);const BS=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],qS=we("copy",BS);const LS=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],Mf=we("crown",LS);const VS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],IS=we("disc",VS);const PS=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],HS=we("eye-off",PS);const $S=[["path",{d:"M4 6.835V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.706.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2h-.343",key:"1vfytu"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M2 19a2 2 0 0 1 4 0v1a2 2 0 0 1-4 0v-4a6 6 0 0 1 12 0v4a2 2 0 0 1-4 0v-1a2 2 0 0 1 4 0",key:"1etmh7"}]],GS=we("file-headphone",$S);const FS=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],Z_=we("folder",FS);const YS=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],WS=we("gift",YS);const XS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],KS=we("globe",XS);const ZS=[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]],QS=we("headphones",ZS);const JS=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],Uf=we("heart",JS);const eT=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],tT=we("house",eT);const nT=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],sT=we("loader-circle",nT);const iT=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],zf=we("lock",iT);const rT=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Zv=we("mail",rT);const aT=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],Qv=we("message-square",aT);const oT=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],Jv=we("mic",oT);const lT=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],cT=we("moon",lT);const uT=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],Bo=we("music",uT);const hT=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],e0=we("play",hT);const dT=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],fT=we("plus",dT);const pT=[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]],mT=we("power",pT);const gT=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],yT=we("refresh-cw",gT);const _T=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],t0=we("search",_T);const vT=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Bf=we("send",vT);const bT=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],wT=we("settings",bT);const ST=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],TT=we("share-2",ST);const xT=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],AT=we("shopping-bag",xT);const ET=[["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M12 21v-9",key:"17s77i"}],["path",{d:"M12 8V3",key:"13r4qs"}],["path",{d:"M17 16h4",key:"h1uq16"}],["path",{d:"M19 12V3",key:"o1uvq1"}],["path",{d:"M19 21v-5",key:"qua636"}],["path",{d:"M3 14h4",key:"bcjad9"}],["path",{d:"M5 10V3",key:"cb8scm"}],["path",{d:"M5 21v-7",key:"1w1uti"}]],CT=we("sliders-vertical",ET);const NT=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],OT=we("sparkles",NT);const kT=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],RT=we("square",kT);const jT=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],qo=we("star",jT);const DT=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],MT=we("sun",DT);const UT=[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]],zT=we("swords",UT);const BT=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],qT=we("trending-up",BT);const LT=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],VT=we("triangle-alert",LT);const IT=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],rf=we("trophy",IT);const PT=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],HT=we("user-plus",PT);const $T=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],n0=we("user",$T);const GT=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],s0=we("users",GT);const FT=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],YT=we("volume-2",FT);const WT=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],XT=we("x",WT);const KT=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],qf=we("zap",KT),Pd={tracks:[{id:1,title:"Cybernetic Soul",artist:"Alex Vibe",type:"track"},{id:2,title:"Obsidian Pulse",artist:"Alex Vibe",type:"track"},{id:3,title:"Neon Dreams",artist:"DJ Vortex",type:"track"}],users:[{id:1,name:"Alex Vibe",type:"user"},{id:2,name:"DJ Vortex",type:"user"},{id:3,name:"DrillKing",type:"user"}],forums:[{id:1,title:"Best DAW for 2026?",category:"Production",type:"forum"},{id:2,title:"Collab on a drill track",category:"Collaboration",type:"forum"}]},ZT=({isOpen:r,onClose:e})=>{const[n,i]=Z.useState(""),[o,c]=Z.useState([]),u=Z.useRef(null);Z.useEffect(()=>{r&&u.current&&u.current.focus()},[r]),Z.useEffect(()=>{if(!n.trim()){c([]);return}const f=n.toLowerCase(),m=[...Pd.tracks.filter(y=>y.title.toLowerCase().includes(f)||y.artist.toLowerCase().includes(f)),...Pd.users.filter(y=>y.name.toLowerCase().includes(f)),...Pd.forums.filter(y=>y.title.toLowerCase().includes(f))];c(m.slice(0,8))},[n]);const d=f=>{f.key==="Escape"&&e()};return r?g.jsx("div",{className:"search-overlay",onClick:e,children:g.jsxs("div",{className:"search-modal glass",onClick:f=>f.stopPropagation(),children:[g.jsxs("div",{className:"search-header",children:[g.jsx(t0,{size:20,className:"search-icon"}),g.jsx("input",{ref:u,type:"text",placeholder:"Search tracks, users, forums...",value:n,onChange:f=>i(f.target.value),onKeyDown:d,className:"search-input"}),g.jsx("button",{className:"close-btn",onClick:e,children:g.jsx(XT,{size:20})})]}),o.length>0&&g.jsx("div",{className:"search-results",children:o.map((f,m)=>g.jsxs("div",{className:"search-result-item",children:[g.jsx("div",{className:"result-type-badge",children:f.type}),g.jsxs("div",{className:"result-content",children:[f.type==="track"&&g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"result-title",children:f.title}),g.jsx("div",{className:"result-subtitle",children:f.artist})]}),f.type==="user"&&g.jsx("div",{className:"result-title",children:f.name}),f.type==="forum"&&g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"result-title",children:f.title}),g.jsx("div",{className:"result-subtitle",children:f.category})]})]})]},`${f.type}-${f.id}`))}),n&&o.length===0&&g.jsxs("div",{className:"no-results",children:['No results found for "',n,'"']}),g.jsx("div",{className:"search-footer",children:g.jsxs("span",{className:"shortcut-hint",children:[g.jsx("kbd",{children:"ESC"})," to close"]})})]})}):null};function Zc(r,e){var n={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&e.indexOf(i)<0&&(n[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(r);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(r,i[o])&&(n[i[o]]=r[i[o]]);return n}function Kn(r,e,n,i){var o=arguments.length,c=o<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(r,e,n,i);else for(var d=r.length-1;d>=0;d--)(u=r[d])&&(c=(o<3?u(c):o>3?u(e,n,c):u(e,n))||c);return o>3&&c&&Object.defineProperty(e,n,c),c}function at(r,e,n,i){function o(c){return c instanceof n?c:new n(function(u){u(c)})}return new(n||(n=Promise))(function(c,u){function d(y){try{m(i.next(y))}catch(_){u(_)}}function f(y){try{m(i.throw(y))}catch(_){u(_)}}function m(y){y.done?c(y.value):o(y.value).then(d,f)}m((i=i.apply(r,e||[])).next())})}const QT=r=>r?(...e)=>r(...e):(...e)=>fetch(...e);class Lf extends Error{constructor(e,n="FunctionsError",i){super(e),this.name=n,this.context=i}}class JT extends Lf{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Q_ extends Lf{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class J_ extends Lf{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var af;(function(r){r.Any="any",r.ApNortheast1="ap-northeast-1",r.ApNortheast2="ap-northeast-2",r.ApSouth1="ap-south-1",r.ApSoutheast1="ap-southeast-1",r.ApSoutheast2="ap-southeast-2",r.CaCentral1="ca-central-1",r.EuCentral1="eu-central-1",r.EuWest1="eu-west-1",r.EuWest2="eu-west-2",r.EuWest3="eu-west-3",r.SaEast1="sa-east-1",r.UsEast1="us-east-1",r.UsWest1="us-west-1",r.UsWest2="us-west-2"})(af||(af={}));class ex{constructor(e,{headers:n={},customFetch:i,region:o=af.Any}={}){this.url=e,this.headers=n,this.region=o,this.fetch=QT(i)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return at(this,arguments,void 0,function*(n,i={}){var o;let c,u;try{const{headers:d,method:f,body:m,signal:y,timeout:_}=i;let b={},{region:S}=i;S||(S=this.region);const w=new URL(`${this.url}/${n}`);S&&S!=="any"&&(b["x-region"]=S,w.searchParams.set("forceFunctionRegion",S));let x;m&&(d&&!Object.prototype.hasOwnProperty.call(d,"Content-Type")||!d)?typeof Blob<"u"&&m instanceof Blob||m instanceof ArrayBuffer?(b["Content-Type"]="application/octet-stream",x=m):typeof m=="string"?(b["Content-Type"]="text/plain",x=m):typeof FormData<"u"&&m instanceof FormData?x=m:(b["Content-Type"]="application/json",x=JSON.stringify(m)):m&&typeof m!="string"&&!(typeof Blob<"u"&&m instanceof Blob)&&!(m instanceof ArrayBuffer)&&!(typeof FormData<"u"&&m instanceof FormData)?x=JSON.stringify(m):x=m;let A=y;_&&(u=new AbortController,c=setTimeout(()=>u.abort(),_),y?(A=u.signal,y.addEventListener("abort",()=>u.abort())):A=u.signal);const E=yield this.fetch(w.toString(),{method:f||"POST",headers:Object.assign(Object.assign(Object.assign({},b),this.headers),d),body:x,signal:A}).catch(k=>{throw new JT(k)}),D=E.headers.get("x-relay-error");if(D&&D==="true")throw new Q_(E);if(!E.ok)throw new J_(E);let O=((o=E.headers.get("Content-Type"))!==null&&o!==void 0?o:"text/plain").split(";")[0].trim(),I;return O==="application/json"?I=yield E.json():O==="application/octet-stream"||O==="application/pdf"?I=yield E.blob():O==="text/event-stream"?I=E:O==="multipart/form-data"?I=yield E.formData():I=yield E.text(),{data:I,error:null,response:E}}catch(d){return{data:null,error:d,response:d instanceof J_||d instanceof Q_?d.context:void 0}}finally{c&&clearTimeout(c)}})}}var tx=class extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}},nx=class{constructor(r){var e,n;this.shouldThrowOnError=!1,this.method=r.method,this.url=r.url,this.headers=new Headers(r.headers),this.schema=r.schema,this.body=r.body,this.shouldThrowOnError=(e=r.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=r.signal,this.isMaybeSingle=(n=r.isMaybeSingle)!==null&&n!==void 0?n:!1,r.fetch?this.fetch=r.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(r,e){return this.headers=new Headers(this.headers),this.headers.set(r,e),this}then(r,e){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const i=this.fetch;let o=i(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async c=>{let u=null,d=null,f=null,m=c.status,y=c.statusText;if(c.ok){var _,b;if(n.method!=="HEAD"){var S;const E=await c.text();E===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((S=n.headers.get("Accept"))===null||S===void 0)&&S.includes("application/vnd.pgrst.plan+text"))?d=E:d=JSON.parse(E))}const x=(_=n.headers.get("Prefer"))===null||_===void 0?void 0:_.match(/count=(exact|planned|estimated)/),A=(b=c.headers.get("content-range"))===null||b===void 0?void 0:b.split("/");x&&A&&A.length>1&&(f=parseInt(A[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(d)&&(d.length>1?(u={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,f=null,m=406,y="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{var w;const x=await c.text();try{u=JSON.parse(x),Array.isArray(u)&&c.status===404&&(d=[],u=null,m=200,y="OK")}catch{c.status===404&&x===""?(m=204,y="No Content"):u={message:x}}if(u&&n.isMaybeSingle&&(!(u==null||(w=u.details)===null||w===void 0)&&w.includes("0 rows"))&&(u=null,m=200,y="OK"),u&&n.shouldThrowOnError)throw new tx(u)}return{error:u,data:d,count:f,status:m,statusText:y}});return this.shouldThrowOnError||(o=o.catch(c=>{var u;let d="";const f=c?.cause;if(f){var m,y,_,b;const w=(m=f?.message)!==null&&m!==void 0?m:"",x=(y=f?.code)!==null&&y!==void 0?y:"";d=`${(_=c?.name)!==null&&_!==void 0?_:"FetchError"}: ${c?.message}`,d+=`

Caused by: ${(b=f?.name)!==null&&b!==void 0?b:"Error"}: ${w}`,x&&(d+=` (${x})`),f?.stack&&(d+=`
${f.stack}`)}else{var S;d=(S=c?.stack)!==null&&S!==void 0?S:""}return{error:{message:`${(u=c?.name)!==null&&u!==void 0?u:"FetchError"}: ${c?.message}`,details:d,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),o.then(r,e)}returns(){return this}overrideTypes(){return this}},sx=class extends nx{select(r){let e=!1;const n=(r??"*").split("").map(i=>/\s/.test(i)&&!e?"":(i==='"'&&(e=!e),i)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(r,{ascending:e=!0,nullsFirst:n,foreignTable:i,referencedTable:o=i}={}){const c=o?`${o}.order`:"order",u=this.url.searchParams.get(c);return this.url.searchParams.set(c,`${u?`${u},`:""}${r}.${e?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(r,{foreignTable:e,referencedTable:n=e}={}){const i=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${r}`),this}range(r,e,{foreignTable:n,referencedTable:i=n}={}){const o=typeof i>"u"?"offset":`${i}.offset`,c=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(o,`${r}`),this.url.searchParams.set(c,`${e-r+1}`),this}abortSignal(r){return this.signal=r,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:r=!1,verbose:e=!1,settings:n=!1,buffers:i=!1,wal:o=!1,format:c="text"}={}){var u;const d=[r?"analyze":null,e?"verbose":null,n?"settings":null,i?"buffers":null,o?"wal":null].filter(Boolean).join("|"),f=(u=this.headers.get("Accept"))!==null&&u!==void 0?u:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${c}; for="${f}"; options=${d};`),c==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(r){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${r}`),this}};const ev=new RegExp("[,()]");var Qr=class extends sx{eq(r,e){return this.url.searchParams.append(r,`eq.${e}`),this}neq(r,e){return this.url.searchParams.append(r,`neq.${e}`),this}gt(r,e){return this.url.searchParams.append(r,`gt.${e}`),this}gte(r,e){return this.url.searchParams.append(r,`gte.${e}`),this}lt(r,e){return this.url.searchParams.append(r,`lt.${e}`),this}lte(r,e){return this.url.searchParams.append(r,`lte.${e}`),this}like(r,e){return this.url.searchParams.append(r,`like.${e}`),this}likeAllOf(r,e){return this.url.searchParams.append(r,`like(all).{${e.join(",")}}`),this}likeAnyOf(r,e){return this.url.searchParams.append(r,`like(any).{${e.join(",")}}`),this}ilike(r,e){return this.url.searchParams.append(r,`ilike.${e}`),this}ilikeAllOf(r,e){return this.url.searchParams.append(r,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(r,e){return this.url.searchParams.append(r,`ilike(any).{${e.join(",")}}`),this}regexMatch(r,e){return this.url.searchParams.append(r,`match.${e}`),this}regexIMatch(r,e){return this.url.searchParams.append(r,`imatch.${e}`),this}is(r,e){return this.url.searchParams.append(r,`is.${e}`),this}isDistinct(r,e){return this.url.searchParams.append(r,`isdistinct.${e}`),this}in(r,e){const n=Array.from(new Set(e)).map(i=>typeof i=="string"&&ev.test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(r,`in.(${n})`),this}notIn(r,e){const n=Array.from(new Set(e)).map(i=>typeof i=="string"&&ev.test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(r,`not.in.(${n})`),this}contains(r,e){return typeof e=="string"?this.url.searchParams.append(r,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(r,`cs.{${e.join(",")}}`):this.url.searchParams.append(r,`cs.${JSON.stringify(e)}`),this}containedBy(r,e){return typeof e=="string"?this.url.searchParams.append(r,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(r,`cd.{${e.join(",")}}`):this.url.searchParams.append(r,`cd.${JSON.stringify(e)}`),this}rangeGt(r,e){return this.url.searchParams.append(r,`sr.${e}`),this}rangeGte(r,e){return this.url.searchParams.append(r,`nxl.${e}`),this}rangeLt(r,e){return this.url.searchParams.append(r,`sl.${e}`),this}rangeLte(r,e){return this.url.searchParams.append(r,`nxr.${e}`),this}rangeAdjacent(r,e){return this.url.searchParams.append(r,`adj.${e}`),this}overlaps(r,e){return typeof e=="string"?this.url.searchParams.append(r,`ov.${e}`):this.url.searchParams.append(r,`ov.{${e.join(",")}}`),this}textSearch(r,e,{config:n,type:i}={}){let o="";i==="plain"?o="pl":i==="phrase"?o="ph":i==="websearch"&&(o="w");const c=n===void 0?"":`(${n})`;return this.url.searchParams.append(r,`${o}fts${c}.${e}`),this}match(r){return Object.entries(r).forEach(([e,n])=>{this.url.searchParams.append(e,`eq.${n}`)}),this}not(r,e,n){return this.url.searchParams.append(r,`not.${e}.${n}`),this}or(r,{foreignTable:e,referencedTable:n=e}={}){const i=n?`${n}.or`:"or";return this.url.searchParams.append(i,`(${r})`),this}filter(r,e,n){return this.url.searchParams.append(r,`${e}.${n}`),this}},ix=class{constructor(r,{headers:e={},schema:n,fetch:i}){this.url=r,this.headers=new Headers(e),this.schema=n,this.fetch=i}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(r,e){const{head:n=!1,count:i}=e??{},o=n?"HEAD":"GET";let c=!1;const u=(r??"*").split("").map(m=>/\s/.test(m)&&!c?"":(m==='"'&&(c=!c),m)).join(""),{url:d,headers:f}=this.cloneRequestState();return d.searchParams.set("select",u),i&&f.append("Prefer",`count=${i}`),new Qr({method:o,url:d,headers:f,schema:this.schema,fetch:this.fetch})}insert(r,{count:e,defaultToNull:n=!0}={}){var i;const o="POST",{url:c,headers:u}=this.cloneRequestState();if(e&&u.append("Prefer",`count=${e}`),n||u.append("Prefer","missing=default"),Array.isArray(r)){const d=r.reduce((f,m)=>f.concat(Object.keys(m)),[]);if(d.length>0){const f=[...new Set(d)].map(m=>`"${m}"`);c.searchParams.set("columns",f.join(","))}}return new Qr({method:o,url:c,headers:u,schema:this.schema,body:r,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}upsert(r,{onConflict:e,ignoreDuplicates:n=!1,count:i,defaultToNull:o=!0}={}){var c;const u="POST",{url:d,headers:f}=this.cloneRequestState();if(f.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),e!==void 0&&d.searchParams.set("on_conflict",e),i&&f.append("Prefer",`count=${i}`),o||f.append("Prefer","missing=default"),Array.isArray(r)){const m=r.reduce((y,_)=>y.concat(Object.keys(_)),[]);if(m.length>0){const y=[...new Set(m)].map(_=>`"${_}"`);d.searchParams.set("columns",y.join(","))}}return new Qr({method:u,url:d,headers:f,schema:this.schema,body:r,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}update(r,{count:e}={}){var n;const i="PATCH",{url:o,headers:c}=this.cloneRequestState();return e&&c.append("Prefer",`count=${e}`),new Qr({method:i,url:o,headers:c,schema:this.schema,body:r,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:r}={}){var e;const n="DELETE",{url:i,headers:o}=this.cloneRequestState();return r&&o.append("Prefer",`count=${r}`),new Qr({method:n,url:i,headers:o,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch})}},rx=class i0{constructor(e,{headers:n={},schema:i,fetch:o}={}){this.url=e,this.headers=new Headers(n),this.schemaName=i,this.fetch=o}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new ix(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new i0(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:i=!1,get:o=!1,count:c}={}){var u;let d;const f=new URL(`${this.url}/rpc/${e}`);let m;const y=S=>S!==null&&typeof S=="object"&&(!Array.isArray(S)||S.some(y)),_=i&&Object.values(n).some(y);_?(d="POST",m=n):i||o?(d=i?"HEAD":"GET",Object.entries(n).filter(([S,w])=>w!==void 0).map(([S,w])=>[S,Array.isArray(w)?`{${w.join(",")}}`:`${w}`]).forEach(([S,w])=>{f.searchParams.append(S,w)})):(d="POST",m=n);const b=new Headers(this.headers);return _?b.set("Prefer",c?`count=${c},return=minimal`:"return=minimal"):c&&b.set("Prefer",`count=${c}`),new Qr({method:d,url:f,headers:b,schema:this.schemaName,body:m,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}};class ax{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const n=globalThis.process;if(n){const i=n.versions;if(i&&i.node){const o=i.node,c=parseInt(o.replace(/^v/,"").split(".")[0]);return c>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${c} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${c} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const i=this.getWebSocketConstructor();return new i(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const ox="2.91.1",lx=`realtime-js/${ox}`,cx="1.0.0",r0="2.0.0",tv=r0,of=1e4,ux=1e3,hx=100;var pi;(function(r){r[r.connecting=0]="connecting",r[r.open=1]="open",r[r.closing=2]="closing",r[r.closed=3]="closed"})(pi||(pi={}));var Et;(function(r){r.closed="closed",r.errored="errored",r.joined="joined",r.joining="joining",r.leaving="leaving"})(Et||(Et={}));var Hn;(function(r){r.close="phx_close",r.error="phx_error",r.join="phx_join",r.reply="phx_reply",r.leave="phx_leave",r.access_token="access_token"})(Hn||(Hn={}));var lf;(function(r){r.websocket="websocket"})(lf||(lf={}));var Yi;(function(r){r.Connecting="connecting",r.Open="open",r.Closing="closing",r.Closed="closed"})(Yi||(Yi={}));class dx{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,n){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(e));let i=[e.join_ref,e.ref,e.topic,e.event,e.payload];return n(JSON.stringify(i))}_binaryEncodeUserBroadcastPush(e){var n;return this._isArrayBuffer((n=e.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var n,i;const o=(i=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&i!==void 0?i:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,o)}_encodeJsonUserBroadcastPush(e){var n,i;const o=(i=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&i!==void 0?i:{},u=new TextEncoder().encode(JSON.stringify(o)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,u)}_encodeUserBroadcastPush(e,n,i){var o,c;const u=e.topic,d=(o=e.ref)!==null&&o!==void 0?o:"",f=(c=e.join_ref)!==null&&c!==void 0?c:"",m=e.payload.event,y=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},_=Object.keys(y).length===0?"":JSON.stringify(y);if(f.length>255)throw new Error(`joinRef length ${f.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`ref length ${d.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`topic length ${u.length} exceeds maximum of 255`);if(m.length>255)throw new Error(`userEvent length ${m.length} exceeds maximum of 255`);if(_.length>255)throw new Error(`metadata length ${_.length} exceeds maximum of 255`);const b=this.USER_BROADCAST_PUSH_META_LENGTH+f.length+d.length+u.length+m.length+_.length,S=new ArrayBuffer(this.HEADER_LENGTH+b);let w=new DataView(S),x=0;w.setUint8(x++,this.KINDS.userBroadcastPush),w.setUint8(x++,f.length),w.setUint8(x++,d.length),w.setUint8(x++,u.length),w.setUint8(x++,m.length),w.setUint8(x++,_.length),w.setUint8(x++,n),Array.from(f,E=>w.setUint8(x++,E.charCodeAt(0))),Array.from(d,E=>w.setUint8(x++,E.charCodeAt(0))),Array.from(u,E=>w.setUint8(x++,E.charCodeAt(0))),Array.from(m,E=>w.setUint8(x++,E.charCodeAt(0))),Array.from(_,E=>w.setUint8(x++,E.charCodeAt(0)));var A=new Uint8Array(S.byteLength+i.byteLength);return A.set(new Uint8Array(S),0),A.set(new Uint8Array(i),S.byteLength),A.buffer}decode(e,n){if(this._isArrayBuffer(e)){let i=this._binaryDecode(e);return n(i)}if(typeof e=="string"){const i=JSON.parse(e),[o,c,u,d,f]=i;return n({join_ref:o,ref:c,topic:u,event:d,payload:f})}return n({})}_binaryDecode(e){const n=new DataView(e),i=n.getUint8(0),o=new TextDecoder;if(i===this.KINDS.userBroadcast)return this._decodeUserBroadcast(e,n,o)}_decodeUserBroadcast(e,n,i){const o=n.getUint8(1),c=n.getUint8(2),u=n.getUint8(3),d=n.getUint8(4);let f=this.HEADER_LENGTH+4;const m=i.decode(e.slice(f,f+o));f=f+o;const y=i.decode(e.slice(f,f+c));f=f+c;const _=i.decode(e.slice(f,f+u));f=f+u;const b=e.slice(f,e.byteLength),S=d===this.JSON_ENCODING?JSON.parse(i.decode(b)):b,w={type:this.BROADCAST_EVENT,event:y,payload:S};return u>0&&(w.meta=JSON.parse(_)),{join_ref:null,ref:null,topic:m,event:this.BROADCAST_EVENT,payload:w}}_isArrayBuffer(e){var n;return e instanceof ArrayBuffer||((n=e?.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(e,n){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([i])=>n.includes(i)))}}class a0{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Je;(function(r){r.abstime="abstime",r.bool="bool",r.date="date",r.daterange="daterange",r.float4="float4",r.float8="float8",r.int2="int2",r.int4="int4",r.int4range="int4range",r.int8="int8",r.int8range="int8range",r.json="json",r.jsonb="jsonb",r.money="money",r.numeric="numeric",r.oid="oid",r.reltime="reltime",r.text="text",r.time="time",r.timestamp="timestamp",r.timestamptz="timestamptz",r.timetz="timetz",r.tsrange="tsrange",r.tstzrange="tstzrange"})(Je||(Je={}));const nv=(r,e,n={})=>{var i;const o=(i=n.skipTypes)!==null&&i!==void 0?i:[];return e?Object.keys(e).reduce((c,u)=>(c[u]=fx(u,r,e,o),c),{}):{}},fx=(r,e,n,i)=>{const o=e.find(d=>d.name===r),c=o?.type,u=n[r];return c&&!i.includes(c)?o0(c,u):cf(u)},o0=(r,e)=>{if(r.charAt(0)==="_"){const n=r.slice(1,r.length);return yx(e,n)}switch(r){case Je.bool:return px(e);case Je.float4:case Je.float8:case Je.int2:case Je.int4:case Je.int8:case Je.numeric:case Je.oid:return mx(e);case Je.json:case Je.jsonb:return gx(e);case Je.timestamp:return _x(e);case Je.abstime:case Je.date:case Je.daterange:case Je.int4range:case Je.int8range:case Je.money:case Je.reltime:case Je.text:case Je.time:case Je.timestamptz:case Je.timetz:case Je.tsrange:case Je.tstzrange:return cf(e);default:return cf(e)}},cf=r=>r,px=r=>{switch(r){case"t":return!0;case"f":return!1;default:return r}},mx=r=>{if(typeof r=="string"){const e=parseFloat(r);if(!Number.isNaN(e))return e}return r},gx=r=>{if(typeof r=="string")try{return JSON.parse(r)}catch{return r}return r},yx=(r,e)=>{if(typeof r!="string")return r;const n=r.length-1,i=r[n];if(r[0]==="{"&&i==="}"){let c;const u=r.slice(1,n);try{c=JSON.parse("["+u+"]")}catch{c=u?u.split(","):[]}return c.map(d=>o0(e,d))}return r},_x=r=>typeof r=="string"?r.replace(" ","T"):r,l0=r=>{const e=new URL(r);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Hd{constructor(e,n,i={},o=of){this.channel=e,this.event=n,this.payload=i,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var i;return this._hasReceived(e)&&n((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(i=>i.status===e).forEach(i=>i.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var sv;(function(r){r.SYNC="sync",r.JOIN="join",r.LEAVE="leave"})(sv||(sv={}));class So{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=n?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},o=>{const{onJoin:c,onLeave:u,onSync:d}=this.caller;this.joinRef=this.channel._joinRef(),this.state=So.syncState(this.state,o,c,u),this.pendingDiffs.forEach(f=>{this.state=So.syncDiff(this.state,f,c,u)}),this.pendingDiffs=[],d()}),this.channel._on(i.diff,{},o=>{const{onJoin:c,onLeave:u,onSync:d}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=So.syncDiff(this.state,o,c,u),d())}),this.onJoin((o,c,u)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:c,newPresences:u})}),this.onLeave((o,c,u)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:c,leftPresences:u})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,i,o){const c=this.cloneDeep(e),u=this.transformState(n),d={},f={};return this.map(c,(m,y)=>{u[m]||(f[m]=y)}),this.map(u,(m,y)=>{const _=c[m];if(_){const b=y.map(A=>A.presence_ref),S=_.map(A=>A.presence_ref),w=y.filter(A=>S.indexOf(A.presence_ref)<0),x=_.filter(A=>b.indexOf(A.presence_ref)<0);w.length>0&&(d[m]=w),x.length>0&&(f[m]=x)}else d[m]=y}),this.syncDiff(c,{joins:d,leaves:f},i,o)}static syncDiff(e,n,i,o){const{joins:c,leaves:u}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return i||(i=()=>{}),o||(o=()=>{}),this.map(c,(d,f)=>{var m;const y=(m=e[d])!==null&&m!==void 0?m:[];if(e[d]=this.cloneDeep(f),y.length>0){const _=e[d].map(S=>S.presence_ref),b=y.filter(S=>_.indexOf(S.presence_ref)<0);e[d].unshift(...b)}i(d,y,f)}),this.map(u,(d,f)=>{let m=e[d];if(!m)return;const y=f.map(_=>_.presence_ref);m=m.filter(_=>y.indexOf(_.presence_ref)<0),e[d]=m,o(d,m,f),m.length===0&&delete e[d]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(i=>n(i,e[i]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,i)=>{const o=e[i];return"metas"in o?n[i]=o.metas.map(c=>(c.presence_ref=c.phx_ref,delete c.phx_ref,delete c.phx_ref_prev,c)):n[i]=o,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var iv;(function(r){r.ALL="*",r.INSERT="INSERT",r.UPDATE="UPDATE",r.DELETE="DELETE"})(iv||(iv={}));var To;(function(r){r.BROADCAST="broadcast",r.PRESENCE="presence",r.POSTGRES_CHANGES="postgres_changes",r.SYSTEM="system"})(To||(To={}));var Ms;(function(r){r.SUBSCRIBED="SUBSCRIBED",r.TIMED_OUT="TIMED_OUT",r.CLOSED="CLOSED",r.CHANNEL_ERROR="CHANNEL_ERROR"})(Ms||(Ms={}));class na{constructor(e,n={config:{}},i){var o,c;if(this.topic=e,this.params=n,this.socket=i,this.bindings={},this.state=Et.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Hd(this,Hn.join,this.params,this.timeout),this.rejoinTimer=new a0(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Et.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(u=>u.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Et.closed,this.socket._remove(this)}),this._onError(u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=Et.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Et.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=Et.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Hn.reply,{},(u,d)=>{this._trigger(this._replyEventName(d),u)}),this.presence=new So(this),this.broadcastEndpointURL=l0(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((c=(o=this.params.config)===null||o===void 0?void 0:o.broadcast)===null||c===void 0)&&c.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var i,o,c;if(this.socket.isConnected()||this.socket.connect(),this.state==Et.closed){const{config:{broadcast:u,presence:d,private:f}}=this.params,m=(o=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(S=>S.filter))!==null&&o!==void 0?o:[],y=!!this.bindings[To.PRESENCE]&&this.bindings[To.PRESENCE].length>0||((c=this.params.config.presence)===null||c===void 0?void 0:c.enabled)===!0,_={},b={broadcast:u,presence:Object.assign(Object.assign({},d),{enabled:y}),postgres_changes:m,private:f};this.socket.accessTokenValue&&(_.access_token=this.socket.accessTokenValue),this._onError(S=>e?.(Ms.CHANNEL_ERROR,S)),this._onClose(()=>e?.(Ms.CLOSED)),this.updateJoinPayload(Object.assign({config:b},_)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:S})=>{var w;if(this.socket._isManualToken()||this.socket.setAuth(),S===void 0){e?.(Ms.SUBSCRIBED);return}else{const x=this.bindings.postgres_changes,A=(w=x?.length)!==null&&w!==void 0?w:0,E=[];for(let D=0;D<A;D++){const O=x[D],{filter:{event:I,schema:k,table:R,filter:M}}=O,z=S&&S[D];if(z&&z.event===I&&na.isFilterValueEqual(z.schema,k)&&na.isFilterValueEqual(z.table,R)&&na.isFilterValueEqual(z.filter,M))E.push(Object.assign(Object.assign({},O),{id:z.id}));else{this.unsubscribe(),this.state=Et.errored,e?.(Ms.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=E,e&&e(Ms.SUBSCRIBED);return}}).receive("error",S=>{this.state=Et.errored,e?.(Ms.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(S).join(", ")||"error")))}).receive("timeout",()=>{e?.(Ms.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,i){return this.state===Et.joined&&e===To.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,n,i)}async httpSend(e,n,i={}){var o;if(n==null)return Promise.reject("Payload is required for httpSend()");const c={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(c.Authorization=`Bearer ${this.socket.accessTokenValue}`);const u={method:"POST",headers:c,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},d=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(o=i.timeout)!==null&&o!==void 0?o:this.timeout);if(d.status===202)return{success:!0};let f=d.statusText;try{const m=await d.json();f=m.error||m.message||f}catch{}return Promise.reject(new Error(f))}async send(e,n={}){var i,o;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:c,payload:u}=e,d={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(d.Authorization=`Bearer ${this.socket.accessTokenValue}`);const f={method:"POST",headers:d,body:JSON.stringify({messages:[{topic:this.subTopic,event:c,payload:u,private:this.private}]})};try{const m=await this._fetchWithTimeout(this.broadcastEndpointURL,f,(i=n.timeout)!==null&&i!==void 0?i:this.timeout);return await((o=m.body)===null||o===void 0?void 0:o.cancel()),m.ok?"ok":"error"}catch(m){return m.name==="AbortError"?"timed out":"error"}}else return new Promise(c=>{var u,d,f;const m=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((f=(d=(u=this.params)===null||u===void 0?void 0:u.config)===null||d===void 0?void 0:d.broadcast)===null||f===void 0)&&f.ack)&&c("ok"),m.receive("ok",()=>c("ok")),m.receive("error",()=>c("error")),m.receive("timeout",()=>c("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Et.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Hn.close,"leave",this._joinRef())};this.joinPush.destroy();let i=null;return new Promise(o=>{i=new Hd(this,Hn.leave,{},e),i.receive("ok",()=>{n(),o("ok")}).receive("timeout",()=>{n(),o("timed out")}).receive("error",()=>{o("error")}),i.send(),this._canPush()||i.trigger("ok",{})}).finally(()=>{i?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Et.closed,this.bindings={}}async _fetchWithTimeout(e,n,i){const o=new AbortController,c=setTimeout(()=>o.abort(),i),u=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:o.signal}));return clearTimeout(c),u}_push(e,n,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new Hd(this,e,n,i);return this._canPush()?o.send():this._addToPushBuffer(o),o}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>hx){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,i){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,i){var o,c;const u=e.toLocaleLowerCase(),{close:d,error:f,leave:m,join:y}=Hn;if(i&&[d,f,m,y].indexOf(u)>=0&&i!==this._joinRef())return;let b=this._onMessage(u,n,i);if(n&&!b)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(u)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(S=>{var w,x,A;return((w=S.filter)===null||w===void 0?void 0:w.event)==="*"||((A=(x=S.filter)===null||x===void 0?void 0:x.event)===null||A===void 0?void 0:A.toLocaleLowerCase())===u}).map(S=>S.callback(b,i)):(c=this.bindings[u])===null||c===void 0||c.filter(S=>{var w,x,A,E,D,O,I,k;if(["broadcast","presence","postgres_changes"].includes(u))if("id"in S){const R=S.id,M=(w=S.filter)===null||w===void 0?void 0:w.event;return R&&((x=n.ids)===null||x===void 0?void 0:x.includes(R))&&(M==="*"||M?.toLocaleLowerCase()===((A=n.data)===null||A===void 0?void 0:A.type.toLocaleLowerCase()))&&(!(!((E=S.filter)===null||E===void 0)&&E.table)||S.filter.table===((D=n.data)===null||D===void 0?void 0:D.table))}else{const R=(I=(O=S?.filter)===null||O===void 0?void 0:O.event)===null||I===void 0?void 0:I.toLocaleLowerCase();return R==="*"||R===((k=n?.event)===null||k===void 0?void 0:k.toLocaleLowerCase())}else return S.type.toLocaleLowerCase()===u}).map(S=>{if(typeof b=="object"&&"ids"in b){const w=b.data,{schema:x,table:A,commit_timestamp:E,type:D,errors:O}=w;b=Object.assign(Object.assign({},{schema:x,table:A,commit_timestamp:E,eventType:D,new:{},old:{},errors:O}),this._getPayloadRecords(w))}S.callback(b,i)})}_isClosed(){return this.state===Et.closed}_isJoined(){return this.state===Et.joined}_isJoining(){return this.state===Et.joining}_isLeaving(){return this.state===Et.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,i){const o=e.toLocaleLowerCase(),c={type:o,filter:n,callback:i};return this.bindings[o]?this.bindings[o].push(c):this.bindings[o]=[c],this}_off(e,n){const i=e.toLocaleLowerCase();return this.bindings[i]&&(this.bindings[i]=this.bindings[i].filter(o=>{var c;return!(((c=o.type)===null||c===void 0?void 0:c.toLocaleLowerCase())===i&&na.isEqual(o.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const i in e)if(e[i]!==n[i])return!1;return!0}static isFilterValueEqual(e,n){return(e??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Hn.close,{},e)}_onError(e){this._on(Hn.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Et.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=nv(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=nv(e.columns,e.old_record)),n}}const $d=()=>{},yc={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},vx=[1e3,2e3,5e3,1e4],bx=1e4,wx=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Sx{constructor(e,n){var i;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=of,this.transport=null,this.heartbeatIntervalMs=yc.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=$d,this.ref=0,this.reconnectTimer=null,this.vsn=tv,this.logger=$d,this.conn=null,this.sendBuffer=[],this.serializer=new dx,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=o=>o?(...c)=>o(...c):(...c)=>fetch(...c),!(!((i=n?.params)===null||i===void 0)&&i.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${lf.websocket}`,this.httpEndpoint=l0(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=ax.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const i=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(i),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,i){this.logger(e,n,i)}connectionState(){switch(this.conn&&this.conn.readyState){case pi.connecting:return Yi.Connecting;case pi.open:return Yi.Open;case pi.closing:return Yi.Closing;default:return Yi.Closed}}isConnected(){return this.connectionState()===Yi.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const i=`realtime:${e}`,o=this.getChannels().find(c=>c.topic===i);if(o)return o;{const c=new na(`realtime:${e}`,n,this);return this.channels.push(c),c}}push(e){const{topic:n,event:i,payload:o,ref:c}=e,u=()=>{this.encode(e,d=>{var f;(f=this.conn)===null||f===void 0||f.send(d)})};this.log("push",`${n} ${i} (${c})`,o),this.isConnected()?u():this.sendBuffer.push(u)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(ux,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},yc.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(i=>i.topic===e&&(i._isJoined()||i._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply"&&n.ref&&n.ref===this.pendingHeartbeatRef){const m=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error",m)}catch(y){this.log("error","error in heartbeat callback",y)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:i,event:o,payload:c,ref:u}=n,d=u?`(${u})`:"",f=c.status||"";this.log("receive",`${f} ${i} ${o} ${d}`.trim(),c),this.channels.filter(m=>m._isMember(i)).forEach(m=>m._trigger(o,c,u)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===pi.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===pi.open||this.conn.readyState===pi.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Hn.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const i=e.match(/\?/)?"&":"?",o=new URLSearchParams(n);return`${e}${i}${o}`}_workerObjectUrl(e){let n;if(e)n=e;else{const i=new Blob([wx],{type:"application/javascript"});n=URL.createObjectURL(i)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n,i=!1;if(e)n=e,i=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(o){this.log("error","Error fetching access token from callback",o),n=this.accessTokenValue}else n=this.accessTokenValue;i?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(o=>{const c={access_token:n,version:lx};n&&o.updateJoinPayload(c),o.joinedOnce&&o._isJoined()&&o._push(Hn.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(i=>{try{i(n)}catch(o){this.log("error",`error in ${e} callback`,o)}})}catch(i){this.log("error",`error triggering ${e} callbacks`,i)}}_setupReconnectionTimer(){this.reconnectTimer=new a0(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},yc.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,i,o,c,u,d,f,m,y,_,b,S;switch(this.transport=(n=e?.transport)!==null&&n!==void 0?n:null,this.timeout=(i=e?.timeout)!==null&&i!==void 0?i:of,this.heartbeatIntervalMs=(o=e?.heartbeatIntervalMs)!==null&&o!==void 0?o:yc.HEARTBEAT_INTERVAL,this.worker=(c=e?.worker)!==null&&c!==void 0?c:!1,this.accessToken=(u=e?.accessToken)!==null&&u!==void 0?u:null,this.heartbeatCallback=(d=e?.heartbeatCallback)!==null&&d!==void 0?d:$d,this.vsn=(f=e?.vsn)!==null&&f!==void 0?f:tv,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(m=e?.reconnectAfterMs)!==null&&m!==void 0?m:(w=>vx[w-1]||bx),this.vsn){case cx:this.encode=(y=e?.encode)!==null&&y!==void 0?y:((w,x)=>x(JSON.stringify(w))),this.decode=(_=e?.decode)!==null&&_!==void 0?_:((w,x)=>x(JSON.parse(w)));break;case r0:this.encode=(b=e?.encode)!==null&&b!==void 0?b:this.serializer.encode.bind(this.serializer),this.decode=(S=e?.decode)!==null&&S!==void 0?S:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}}var No=class extends Error{constructor(r,e){super(r),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&e.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function Tx(r,e,n){const i=new URL(e,r);if(n)for(const[o,c]of Object.entries(n))c!==void 0&&i.searchParams.set(o,c);return i.toString()}async function xx(r){return!r||r.type==="none"?{}:r.type==="bearer"?{Authorization:`Bearer ${r.token}`}:r.type==="header"?{[r.name]:r.value}:r.type==="custom"?await r.getHeaders():{}}function Ax(r){const e=r.fetchImpl??globalThis.fetch;return{async request({method:n,path:i,query:o,body:c,headers:u}){const d=Tx(r.baseUrl,i,o),f=await xx(r.auth),m=await e(d,{method:n,headers:{...c?{"Content-Type":"application/json"}:{},...f,...u},body:c?JSON.stringify(c):void 0}),y=await m.text(),_=(m.headers.get("content-type")||"").includes("application/json"),b=_&&y?JSON.parse(y):y;if(!m.ok){const S=_?b:void 0,w=S?.error;throw new No(w?.message??`Request failed with status ${m.status}`,{status:m.status,icebergType:w?.type,icebergCode:w?.code,details:S})}return{status:m.status,headers:m.headers,data:b}}}}function _c(r){return r.join("")}var Ex=class{constructor(r,e=""){this.client=r,this.prefix=e}async listNamespaces(r){const e=r?{parent:_c(r.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(i=>({namespace:i}))}async createNamespace(r,e){const n={namespace:r.namespace,properties:e?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(r){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${_c(r.namespace)}`})}async loadNamespaceMetadata(r){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${_c(r.namespace)}`})).data.properties}}async namespaceExists(r){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${_c(r.namespace)}`}),!0}catch(e){if(e instanceof No&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(r,e){try{return await this.createNamespace(r,e)}catch(n){if(n instanceof No&&n.status===409)return;throw n}}};function $r(r){return r.join("")}var Cx=class{constructor(r,e="",n){this.client=r,this.prefix=e,this.accessDelegation=n}async listTables(r){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${$r(r.namespace)}/tables`})).data.identifiers}async createTable(r,e){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${$r(r.namespace)}/tables`,body:e,headers:n})).data.metadata}async updateTable(r,e){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${$r(r.namespace)}/tables/${r.name}`,body:e});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(r,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${$r(r.namespace)}/tables/${r.name}`,query:{purgeRequested:String(e?.purge??!1)}})}async loadTable(r){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${$r(r.namespace)}/tables/${r.name}`,headers:e})).data.metadata}async tableExists(r){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${$r(r.namespace)}/tables/${r.name}`,headers:e}),!0}catch(n){if(n instanceof No&&n.status===404)return!1;throw n}}async createTableIfNotExists(r,e){try{return await this.createTable(r,e)}catch(n){if(n instanceof No&&n.status===409)return await this.loadTable({namespace:r.namespace,name:e.name});throw n}}},Nx=class{constructor(r){let e="v1";r.catalogName&&(e+=`/${r.catalogName}`);const n=r.baseUrl.endsWith("/")?r.baseUrl:`${r.baseUrl}/`;this.client=Ax({baseUrl:n,auth:r.auth,fetchImpl:r.fetch}),this.accessDelegation=r.accessDelegation?.join(","),this.namespaceOps=new Ex(this.client,e),this.tableOps=new Cx(this.client,e,this.accessDelegation)}async listNamespaces(r){return this.namespaceOps.listNamespaces(r)}async createNamespace(r,e){return this.namespaceOps.createNamespace(r,e)}async dropNamespace(r){await this.namespaceOps.dropNamespace(r)}async loadNamespaceMetadata(r){return this.namespaceOps.loadNamespaceMetadata(r)}async listTables(r){return this.tableOps.listTables(r)}async createTable(r,e){return this.tableOps.createTable(r,e)}async updateTable(r,e){return this.tableOps.updateTable(r,e)}async dropTable(r,e){await this.tableOps.dropTable(r,e)}async loadTable(r){return this.tableOps.loadTable(r)}async namespaceExists(r){return this.namespaceOps.namespaceExists(r)}async tableExists(r){return this.tableOps.tableExists(r)}async createNamespaceIfNotExists(r,e){return this.namespaceOps.createNamespaceIfNotExists(r,e)}async createTableIfNotExists(r,e){return this.tableOps.createTableIfNotExists(r,e)}},Qc=class extends Error{constructor(r){super(r),this.__isStorageError=!0,this.name="StorageError"}};function lt(r){return typeof r=="object"&&r!==null&&"__isStorageError"in r}var Ox=class extends Qc{constructor(r,e,n){super(r),this.name="StorageApiError",this.status=e,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},uf=class extends Qc{constructor(r,e){super(r),this.name="StorageUnknownError",this.originalError=e}};const Vf=r=>r?(...e)=>r(...e):(...e)=>fetch(...e),kx=()=>Response,hf=r=>{if(Array.isArray(r))return r.map(n=>hf(n));if(typeof r=="function"||r!==Object(r))return r;const e={};return Object.entries(r).forEach(([n,i])=>{const o=n.replace(/([-_][a-z])/gi,c=>c.toUpperCase().replace(/[-_]/g,""));e[o]=hf(i)}),e},Rx=r=>{if(typeof r!="object"||r===null)return!1;const e=Object.getPrototypeOf(r);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)},jx=r=>!r||typeof r!="string"||r.length===0||r.length>100||r.trim()!==r||r.includes("/")||r.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(r);function Oo(r){"@babel/helpers - typeof";return Oo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oo(r)}function Dx(r,e){if(Oo(r)!="object"||!r)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var i=n.call(r,e);if(Oo(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function Mx(r){var e=Dx(r,"string");return Oo(e)=="symbol"?e:e+""}function Ux(r,e,n){return(e=Mx(e))in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function rv(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),n.push.apply(n,i)}return n}function be(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?rv(Object(n),!0).forEach(function(i){Ux(r,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):rv(Object(n)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(n,i))})}return r}const Gd=r=>{var e;return r.msg||r.message||r.error_description||(typeof r.error=="string"?r.error:(e=r.error)===null||e===void 0?void 0:e.message)||JSON.stringify(r)},zx=async(r,e,n)=>{r instanceof await kx()&&!n?.noResolveJson?r.json().then(i=>{const o=r.status||500,c=i?.statusCode||o+"";e(new Ox(Gd(i),o,c))}).catch(i=>{e(new uf(Gd(i),i))}):e(new uf(Gd(r),r))},Bx=(r,e,n,i)=>{const o={method:r,headers:e?.headers||{}};return r==="GET"||!i?o:(Rx(i)?(o.headers=be({"Content-Type":"application/json"},e?.headers),o.body=JSON.stringify(i)):o.body=i,e?.duplex&&(o.duplex=e.duplex),be(be({},o),n))};async function Lo(r,e,n,i,o,c){return new Promise((u,d)=>{r(n,Bx(e,i,o,c)).then(f=>{if(!f.ok)throw f;return i?.noResolveJson?f:f.json()}).then(f=>u(f)).catch(f=>zx(f,d,i))})}async function ko(r,e,n,i){return Lo(r,"GET",e,n,i)}async function Pn(r,e,n,i,o){return Lo(r,"POST",e,i,o,n)}async function df(r,e,n,i,o){return Lo(r,"PUT",e,i,o,n)}async function qx(r,e,n,i){return Lo(r,"HEAD",e,be(be({},n),{},{noResolveJson:!0}),i)}async function If(r,e,n,i,o){return Lo(r,"DELETE",e,i,o,n)}var Lx=class{constructor(r,e){this.downloadFn=r,this.shouldThrowOnError=e}then(r,e){return this.execute().then(r,e)}async execute(){var r=this;try{return{data:(await r.downloadFn()).body,error:null}}catch(e){if(r.shouldThrowOnError)throw e;if(lt(e))return{data:null,error:e};throw e}}};let c0;c0=Symbol.toStringTag;var Vx=class{constructor(r,e){this.downloadFn=r,this.shouldThrowOnError=e,this[c0]="BlobDownloadBuilder",this.promise=null}asStream(){return new Lx(this.downloadFn,this.shouldThrowOnError)}then(r,e){return this.getPromise().then(r,e)}catch(r){return this.getPromise().catch(r)}finally(r){return this.getPromise().finally(r)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var r=this;try{return{data:await(await r.downloadFn()).blob(),error:null}}catch(e){if(r.shouldThrowOnError)throw e;if(lt(e))return{data:null,error:e};throw e}}};const Ix={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},av={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var Px=class{constructor(r,e={},n,i){this.shouldThrowOnError=!1,this.url=r,this.headers=e,this.bucketId=n,this.fetch=Vf(i)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(r,e,n,i){var o=this;try{let c;const u=be(be({},av),i);let d=be(be({},o.headers),r==="POST"&&{"x-upsert":String(u.upsert)});const f=u.metadata;typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),f&&c.append("metadata",o.encodeMetadata(f)),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.has("cacheControl")||c.append("cacheControl",u.cacheControl),f&&!c.has("metadata")&&c.append("metadata",o.encodeMetadata(f))):(c=n,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType,f&&(d["x-metadata"]=o.toBase64(o.encodeMetadata(f))),(typeof ReadableStream<"u"&&c instanceof ReadableStream||c&&typeof c=="object"&&"pipe"in c&&typeof c.pipe=="function")&&!u.duplex&&(u.duplex="half")),i?.headers&&(d=be(be({},d),i.headers));const m=o._removeEmptyFolders(e),y=o._getFinalPath(m),_=await(r=="PUT"?df:Pn)(o.fetch,`${o.url}/object/${y}`,c,be({headers:d},u?.duplex?{duplex:u.duplex}:{}));return{data:{path:m,id:_.Id,fullPath:_.Key},error:null}}catch(c){if(o.shouldThrowOnError)throw c;if(lt(c))return{data:null,error:c};throw c}}async upload(r,e,n){return this.uploadOrUpdate("POST",r,e,n)}async uploadToSignedUrl(r,e,n,i){var o=this;const c=o._removeEmptyFolders(r),u=o._getFinalPath(c),d=new URL(o.url+`/object/upload/sign/${u}`);d.searchParams.set("token",e);try{let f;const m=be({upsert:av.upsert},i),y=be(be({},o.headers),{"x-upsert":String(m.upsert)});return typeof Blob<"u"&&n instanceof Blob?(f=new FormData,f.append("cacheControl",m.cacheControl),f.append("",n)):typeof FormData<"u"&&n instanceof FormData?(f=n,f.append("cacheControl",m.cacheControl)):(f=n,y["cache-control"]=`max-age=${m.cacheControl}`,y["content-type"]=m.contentType),{data:{path:c,fullPath:(await df(o.fetch,d.toString(),f,{headers:y})).Key},error:null}}catch(f){if(o.shouldThrowOnError)throw f;if(lt(f))return{data:null,error:f};throw f}}async createSignedUploadUrl(r,e){var n=this;try{let i=n._getFinalPath(r);const o=be({},n.headers);e?.upsert&&(o["x-upsert"]="true");const c=await Pn(n.fetch,`${n.url}/object/upload/sign/${i}`,{},{headers:o}),u=new URL(n.url+c.url),d=u.searchParams.get("token");if(!d)throw new Qc("No token returned by API");return{data:{signedUrl:u.toString(),path:r,token:d},error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(lt(i))return{data:null,error:i};throw i}}async update(r,e,n){return this.uploadOrUpdate("PUT",r,e,n)}async move(r,e,n){var i=this;try{return{data:await Pn(i.fetch,`${i.url}/object/move`,{bucketId:i.bucketId,sourceKey:r,destinationKey:e,destinationBucket:n?.destinationBucket},{headers:i.headers}),error:null}}catch(o){if(i.shouldThrowOnError)throw o;if(lt(o))return{data:null,error:o};throw o}}async copy(r,e,n){var i=this;try{return{data:{path:(await Pn(i.fetch,`${i.url}/object/copy`,{bucketId:i.bucketId,sourceKey:r,destinationKey:e,destinationBucket:n?.destinationBucket},{headers:i.headers})).Key},error:null}}catch(o){if(i.shouldThrowOnError)throw o;if(lt(o))return{data:null,error:o};throw o}}async createSignedUrl(r,e,n){var i=this;try{let o=i._getFinalPath(r),c=await Pn(i.fetch,`${i.url}/object/sign/${o}`,be({expiresIn:e},n?.transform?{transform:n.transform}:{}),{headers:i.headers});const u=n?.download?`&download=${n.download===!0?"":n.download}`:"";return c={signedUrl:encodeURI(`${i.url}${c.signedURL}${u}`)},{data:c,error:null}}catch(o){if(i.shouldThrowOnError)throw o;if(lt(o))return{data:null,error:o};throw o}}async createSignedUrls(r,e,n){var i=this;try{const o=await Pn(i.fetch,`${i.url}/object/sign/${i.bucketId}`,{expiresIn:e,paths:r},{headers:i.headers}),c=n?.download?`&download=${n.download===!0?"":n.download}`:"";return{data:o.map(u=>be(be({},u),{},{signedUrl:u.signedURL?encodeURI(`${i.url}${u.signedURL}${c}`):null})),error:null}}catch(o){if(i.shouldThrowOnError)throw o;if(lt(o))return{data:null,error:o};throw o}}download(r,e){const n=typeof e?.transform<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString(e?.transform||{}),o=i?`?${i}`:"",c=this._getFinalPath(r),u=()=>ko(this.fetch,`${this.url}/${n}/${c}${o}`,{headers:this.headers,noResolveJson:!0});return new Vx(u,this.shouldThrowOnError)}async info(r){var e=this;const n=e._getFinalPath(r);try{return{data:hf(await ko(e.fetch,`${e.url}/object/info/${n}`,{headers:e.headers})),error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(lt(i))return{data:null,error:i};throw i}}async exists(r){var e=this;const n=e._getFinalPath(r);try{return await qx(e.fetch,`${e.url}/object/${n}`,{headers:e.headers}),{data:!0,error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(lt(i)&&i instanceof uf){const o=i.originalError;if([400,404].includes(o?.status))return{data:!1,error:i}}throw i}}getPublicUrl(r,e){const n=this._getFinalPath(r),i=[],o=e?.download?`download=${e.download===!0?"":e.download}`:"";o!==""&&i.push(o);const c=typeof e?.transform<"u"?"render/image":"object",u=this.transformOptsToQueryString(e?.transform||{});u!==""&&i.push(u);let d=i.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${c}/public/${n}${d}`)}}}async remove(r){var e=this;try{return{data:await If(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:r},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(lt(n))return{data:null,error:n};throw n}}async list(r,e,n){var i=this;try{const o=be(be(be({},Ix),e),{},{prefix:r||""});return{data:await Pn(i.fetch,`${i.url}/object/list/${i.bucketId}`,o,{headers:i.headers},n),error:null}}catch(o){if(i.shouldThrowOnError)throw o;if(lt(o))return{data:null,error:o};throw o}}async listV2(r,e){var n=this;try{const i=be({},r);return{data:await Pn(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,i,{headers:n.headers},e),error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(lt(i))return{data:null,error:i};throw i}}encodeMetadata(r){return JSON.stringify(r)}toBase64(r){return typeof Buffer<"u"?Buffer.from(r).toString("base64"):btoa(r)}_getFinalPath(r){return`${this.bucketId}/${r.replace(/^\/+/,"")}`}_removeEmptyFolders(r){return r.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(r){const e=[];return r.width&&e.push(`width=${r.width}`),r.height&&e.push(`height=${r.height}`),r.resize&&e.push(`resize=${r.resize}`),r.format&&e.push(`format=${r.format}`),r.quality&&e.push(`quality=${r.quality}`),e.join("&")}};const u0="2.91.1",h0={"X-Client-Info":`storage-js/${u0}`};var Hx=class{constructor(r,e={},n,i){this.shouldThrowOnError=!1;const o=new URL(r);i?.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href.replace(/\/$/,""),this.headers=be(be({},h0),e),this.fetch=Vf(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(r){var e=this;try{const n=e.listBucketOptionsToQueryString(r);return{data:await ko(e.fetch,`${e.url}/bucket${n}`,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(lt(n))return{data:null,error:n};throw n}}async getBucket(r){var e=this;try{return{data:await ko(e.fetch,`${e.url}/bucket/${r}`,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(lt(n))return{data:null,error:n};throw n}}async createBucket(r,e={public:!1}){var n=this;try{return{data:await Pn(n.fetch,`${n.url}/bucket`,{id:r,name:r,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}),error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(lt(i))return{data:null,error:i};throw i}}async updateBucket(r,e){var n=this;try{return{data:await df(n.fetch,`${n.url}/bucket/${r}`,{id:r,name:r,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}),error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(lt(i))return{data:null,error:i};throw i}}async emptyBucket(r){var e=this;try{return{data:await Pn(e.fetch,`${e.url}/bucket/${r}/empty`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(lt(n))return{data:null,error:n};throw n}}async deleteBucket(r){var e=this;try{return{data:await If(e.fetch,`${e.url}/bucket/${r}`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(lt(n))return{data:null,error:n};throw n}}listBucketOptionsToQueryString(r){const e={};return r&&("limit"in r&&(e.limit=String(r.limit)),"offset"in r&&(e.offset=String(r.offset)),r.search&&(e.search=r.search),r.sortColumn&&(e.sortColumn=r.sortColumn),r.sortOrder&&(e.sortOrder=r.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},$x=class{constructor(r,e={},n){this.shouldThrowOnError=!1,this.url=r.replace(/\/$/,""),this.headers=be(be({},h0),e),this.fetch=Vf(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(r){var e=this;try{return{data:await Pn(e.fetch,`${e.url}/bucket`,{name:r},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(lt(n))return{data:null,error:n};throw n}}async listBuckets(r){var e=this;try{const n=new URLSearchParams;r?.limit!==void 0&&n.set("limit",r.limit.toString()),r?.offset!==void 0&&n.set("offset",r.offset.toString()),r?.sortColumn&&n.set("sortColumn",r.sortColumn),r?.sortOrder&&n.set("sortOrder",r.sortOrder),r?.search&&n.set("search",r.search);const i=n.toString(),o=i?`${e.url}/bucket?${i}`:`${e.url}/bucket`;return{data:await ko(e.fetch,o,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(lt(n))return{data:null,error:n};throw n}}async deleteBucket(r){var e=this;try{return{data:await If(e.fetch,`${e.url}/bucket/${r}`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(lt(n))return{data:null,error:n};throw n}}from(r){var e=this;if(!jx(r))throw new Qc("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new Nx({baseUrl:this.url,catalogName:r,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),i=this.shouldThrowOnError;return new Proxy(n,{get(o,c){const u=o[c];return typeof u!="function"?u:async(...d)=>{try{return{data:await u.apply(o,d),error:null}}catch(f){if(i)throw f;return{data:null,error:f}}}}})}};const Pf={"X-Client-Info":`storage-js/${u0}`,"Content-Type":"application/json"};var d0=class extends Error{constructor(r){super(r),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function yn(r){return typeof r=="object"&&r!==null&&"__isStorageVectorsError"in r}var Fd=class extends d0{constructor(r,e,n){super(r),this.name="StorageVectorsApiError",this.status=e,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Gx=class extends d0{constructor(r,e){super(r),this.name="StorageVectorsUnknownError",this.originalError=e}};const Hf=r=>r?(...e)=>r(...e):(...e)=>fetch(...e),Fx=r=>{if(typeof r!="object"||r===null)return!1;const e=Object.getPrototypeOf(r);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)},ov=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),Yx=async(r,e,n)=>{if(r&&typeof r=="object"&&"status"in r&&"ok"in r&&typeof r.status=="number"&&!n?.noResolveJson){const i=r.status||500,o=r;if(typeof o.json=="function")o.json().then(c=>{const u=c?.statusCode||c?.code||i+"";e(new Fd(ov(c),i,u))}).catch(()=>{const c=i+"";e(new Fd(o.statusText||`HTTP ${i} error`,i,c))});else{const c=i+"";e(new Fd(o.statusText||`HTTP ${i} error`,i,c))}}else e(new Gx(ov(r),r))},Wx=(r,e,n,i)=>{const o={method:r,headers:e?.headers||{}};return i?(Fx(i)?(o.headers=be({"Content-Type":"application/json"},e?.headers),o.body=JSON.stringify(i)):o.body=i,be(be({},o),n)):o};async function Xx(r,e,n,i,o,c){return new Promise((u,d)=>{r(n,Wx(e,i,o,c)).then(f=>{if(!f.ok)throw f;if(i?.noResolveJson)return f;const m=f.headers.get("content-type");return!m||!m.includes("application/json")?{}:f.json()}).then(f=>u(f)).catch(f=>Yx(f,d,i))})}async function _n(r,e,n,i,o){return Xx(r,"POST",e,i,o,n)}var Kx=class{constructor(r,e={},n){this.shouldThrowOnError=!1,this.url=r.replace(/\/$/,""),this.headers=be(be({},Pf),e),this.fetch=Hf(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(r){var e=this;try{return{data:await _n(e.fetch,`${e.url}/CreateIndex`,r,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(yn(n))return{data:null,error:n};throw n}}async getIndex(r,e){var n=this;try{return{data:await _n(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:r,indexName:e},{headers:n.headers}),error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(yn(i))return{data:null,error:i};throw i}}async listIndexes(r){var e=this;try{return{data:await _n(e.fetch,`${e.url}/ListIndexes`,r,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(yn(n))return{data:null,error:n};throw n}}async deleteIndex(r,e){var n=this;try{return{data:await _n(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:r,indexName:e},{headers:n.headers})||{},error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(yn(i))return{data:null,error:i};throw i}}},Zx=class{constructor(r,e={},n){this.shouldThrowOnError=!1,this.url=r.replace(/\/$/,""),this.headers=be(be({},Pf),e),this.fetch=Hf(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(r){var e=this;try{if(r.vectors.length<1||r.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await _n(e.fetch,`${e.url}/PutVectors`,r,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(yn(n))return{data:null,error:n};throw n}}async getVectors(r){var e=this;try{return{data:await _n(e.fetch,`${e.url}/GetVectors`,r,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(yn(n))return{data:null,error:n};throw n}}async listVectors(r){var e=this;try{if(r.segmentCount!==void 0){if(r.segmentCount<1||r.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(r.segmentIndex!==void 0&&(r.segmentIndex<0||r.segmentIndex>=r.segmentCount))throw new Error(`segmentIndex must be between 0 and ${r.segmentCount-1}`)}return{data:await _n(e.fetch,`${e.url}/ListVectors`,r,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(yn(n))return{data:null,error:n};throw n}}async queryVectors(r){var e=this;try{return{data:await _n(e.fetch,`${e.url}/QueryVectors`,r,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(yn(n))return{data:null,error:n};throw n}}async deleteVectors(r){var e=this;try{if(r.keys.length<1||r.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await _n(e.fetch,`${e.url}/DeleteVectors`,r,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(yn(n))return{data:null,error:n};throw n}}},Qx=class{constructor(r,e={},n){this.shouldThrowOnError=!1,this.url=r.replace(/\/$/,""),this.headers=be(be({},Pf),e),this.fetch=Hf(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(r){var e=this;try{return{data:await _n(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:r},{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(yn(n))return{data:null,error:n};throw n}}async getBucket(r){var e=this;try{return{data:await _n(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:r},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(yn(n))return{data:null,error:n};throw n}}async listBuckets(r={}){var e=this;try{return{data:await _n(e.fetch,`${e.url}/ListVectorBuckets`,r,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(yn(n))return{data:null,error:n};throw n}}async deleteBucket(r){var e=this;try{return{data:await _n(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:r},{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(yn(n))return{data:null,error:n};throw n}}},Jx=class extends Qx{constructor(r,e={}){super(r,e.headers||{},e.fetch)}from(r){return new eA(this.url,this.headers,r,this.fetch)}async createBucket(r){var e=()=>super.createBucket,n=this;return e().call(n,r)}async getBucket(r){var e=()=>super.getBucket,n=this;return e().call(n,r)}async listBuckets(r={}){var e=()=>super.listBuckets,n=this;return e().call(n,r)}async deleteBucket(r){var e=()=>super.deleteBucket,n=this;return e().call(n,r)}},eA=class extends Kx{constructor(r,e,n,i){super(r,e,i),this.vectorBucketName=n}async createIndex(r){var e=()=>super.createIndex,n=this;return e().call(n,be(be({},r),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(r={}){var e=()=>super.listIndexes,n=this;return e().call(n,be(be({},r),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(r){var e=()=>super.getIndex,n=this;return e().call(n,n.vectorBucketName,r)}async deleteIndex(r){var e=()=>super.deleteIndex,n=this;return e().call(n,n.vectorBucketName,r)}index(r){return new tA(this.url,this.headers,this.vectorBucketName,r,this.fetch)}},tA=class extends Zx{constructor(r,e,n,i,o){super(r,e,o),this.vectorBucketName=n,this.indexName=i}async putVectors(r){var e=()=>super.putVectors,n=this;return e().call(n,be(be({},r),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(r){var e=()=>super.getVectors,n=this;return e().call(n,be(be({},r),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(r={}){var e=()=>super.listVectors,n=this;return e().call(n,be(be({},r),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(r){var e=()=>super.queryVectors,n=this;return e().call(n,be(be({},r),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(r){var e=()=>super.deleteVectors,n=this;return e().call(n,be(be({},r),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},nA=class extends Hx{constructor(r,e={},n,i){super(r,e,n,i)}from(r){return new Px(this.url,this.headers,r,this.fetch)}get vectors(){return new Jx(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new $x(this.url+"/iceberg",this.headers,this.fetch)}};const f0="2.91.1",Jr=30*1e3,ff=3,Yd=ff*Jr,sA="http://localhost:9999",iA="supabase.auth.token",rA={"X-Client-Info":`gotrue-js/${f0}`},pf="X-Supabase-Api-Version",p0={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},aA=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,oA=600*1e3;class Ro extends Error{constructor(e,n,i){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=i}}function fe(r){return typeof r=="object"&&r!==null&&"__isAuthError"in r}class lA extends Ro{constructor(e,n,i){super(e,n,i),this.name="AuthApiError",this.status=n,this.code=i}}function cA(r){return fe(r)&&r.name==="AuthApiError"}class Wi extends Ro{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class qs extends Ro{constructor(e,n,i,o){super(e,i,o),this.name=n,this.status=i}}class mn extends qs{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function uA(r){return fe(r)&&r.name==="AuthSessionMissingError"}class Gr extends qs{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class vc extends qs{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class bc extends qs{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function hA(r){return fe(r)&&r.name==="AuthImplicitGrantRedirectError"}class lv extends qs{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class dA extends qs{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class mf extends qs{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function Wd(r){return fe(r)&&r.name==="AuthRetryableFetchError"}class cv extends qs{constructor(e,n,i){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=i}}class gf extends qs{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const jc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),uv=` 	
\r=`.split(""),fA=(()=>{const r=new Array(128);for(let e=0;e<r.length;e+=1)r[e]=-1;for(let e=0;e<uv.length;e+=1)r[uv[e].charCodeAt(0)]=-2;for(let e=0;e<jc.length;e+=1)r[jc[e].charCodeAt(0)]=e;return r})();function hv(r,e,n){if(r!==null)for(e.queue=e.queue<<8|r,e.queuedBits+=8;e.queuedBits>=6;){const i=e.queue>>e.queuedBits-6&63;n(jc[i]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const i=e.queue>>e.queuedBits-6&63;n(jc[i]),e.queuedBits-=6}}function m0(r,e,n){const i=fA[r];if(i>-1)for(e.queue=e.queue<<6|i,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(r)}"`)}}function dv(r){const e=[],n=u=>{e.push(String.fromCodePoint(u))},i={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},c=u=>{gA(u,i,n)};for(let u=0;u<r.length;u+=1)m0(r.charCodeAt(u),o,c);return e.join("")}function pA(r,e){if(r<=127){e(r);return}else if(r<=2047){e(192|r>>6),e(128|r&63);return}else if(r<=65535){e(224|r>>12),e(128|r>>6&63),e(128|r&63);return}else if(r<=1114111){e(240|r>>18),e(128|r>>12&63),e(128|r>>6&63),e(128|r&63);return}throw new Error(`Unrecognized Unicode codepoint: ${r.toString(16)}`)}function mA(r,e){for(let n=0;n<r.length;n+=1){let i=r.charCodeAt(n);if(i>55295&&i<=56319){const o=(i-55296)*1024&65535;i=(r.charCodeAt(n+1)-56320&65535|o)+65536,n+=1}pA(i,e)}}function gA(r,e,n){if(e.utf8seq===0){if(r<=127){n(r);return}for(let i=1;i<6;i+=1)if((r>>7-i&1)===0){e.utf8seq=i;break}if(e.utf8seq===2)e.codepoint=r&31;else if(e.utf8seq===3)e.codepoint=r&15;else if(e.utf8seq===4)e.codepoint=r&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(r<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|r&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function aa(r){const e=[],n={queue:0,queuedBits:0},i=o=>{e.push(o)};for(let o=0;o<r.length;o+=1)m0(r.charCodeAt(o),n,i);return new Uint8Array(e)}function yA(r){const e=[];return mA(r,n=>e.push(n)),new Uint8Array(e)}function Xi(r){const e=[],n={queue:0,queuedBits:0},i=o=>{e.push(o)};return r.forEach(o=>hv(o,n,i)),hv(null,n,i),e.join("")}function _A(r){return Math.round(Date.now()/1e3)+r}function vA(){return Symbol("auth-callback")}const qt=()=>typeof window<"u"&&typeof document<"u",Hi={tested:!1,writable:!1},g0=()=>{if(!qt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Hi.tested)return Hi.writable;const r=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(r,r),globalThis.localStorage.removeItem(r),Hi.tested=!0,Hi.writable=!0}catch{Hi.tested=!0,Hi.writable=!1}return Hi.writable};function bA(r){const e={},n=new URL(r);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((o,c)=>{e[c]=o})}catch{}return n.searchParams.forEach((i,o)=>{e[o]=i}),e}const y0=r=>r?(...e)=>r(...e):(...e)=>fetch(...e),wA=r=>typeof r=="object"&&r!==null&&"status"in r&&"ok"in r&&"json"in r&&typeof r.json=="function",ea=async(r,e,n)=>{await r.setItem(e,JSON.stringify(n))},$i=async(r,e)=>{const n=await r.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Bt=async(r,e)=>{await r.removeItem(e)};class Jc{constructor(){this.promise=new Jc.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}Jc.promiseConstructor=Promise;function Xd(r){const e=r.split(".");if(e.length!==3)throw new gf("Invalid JWT structure");for(let i=0;i<e.length;i++)if(!aA.test(e[i]))throw new gf("JWT not in base64url format");return{header:JSON.parse(dv(e[0])),payload:JSON.parse(dv(e[1])),signature:aa(e[2]),raw:{header:e[0],payload:e[1]}}}async function SA(r){return await new Promise(e=>{setTimeout(()=>e(null),r)})}function TA(r,e){return new Promise((i,o)=>{(async()=>{for(let c=0;c<1/0;c++)try{const u=await r(c);if(!e(c,null,u)){i(u);return}}catch(u){if(!e(c,u)){o(u);return}}})()})}function xA(r){return("0"+r.toString(16)).substr(-2)}function AA(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=n.length;let o="";for(let c=0;c<56;c++)o+=n.charAt(Math.floor(Math.random()*i));return o}return crypto.getRandomValues(e),Array.from(e,xA).join("")}async function EA(r){const n=new TextEncoder().encode(r),i=await crypto.subtle.digest("SHA-256",n),o=new Uint8Array(i);return Array.from(o).map(c=>String.fromCharCode(c)).join("")}async function CA(r){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),r;const n=await EA(r);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Fr(r,e,n=!1){const i=AA();let o=i;n&&(o+="/PASSWORD_RECOVERY"),await ea(r,`${e}-code-verifier`,o);const c=await CA(i);return[c,i===c?"plain":"s256"]}const NA=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function OA(r){const e=r.headers.get(pf);if(!e||!e.match(NA))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function kA(r){if(!r)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(r<=e)throw new Error("JWT has expired")}function RA(r){switch(r){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const jA=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Yr(r){if(!jA.test(r))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Kd(){const r={};return new Proxy(r,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function DA(r,e){return new Proxy(r,{get:(n,i,o)=>{if(i==="__isInsecureUserWarningProxy")return!0;if(typeof i=="symbol"){const c=i.toString();if(c==="Symbol(Symbol.toPrimitive)"||c==="Symbol(Symbol.toStringTag)"||c==="Symbol(util.inspect.custom)"||c==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,i,o)}return!e.value&&typeof i=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(n,i,o)}})}function fv(r){return JSON.parse(JSON.stringify(r))}const Fi=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),MA=[502,503,504];async function pv(r){var e;if(!wA(r))throw new mf(Fi(r),0);if(MA.includes(r.status))throw new mf(Fi(r),r.status);let n;try{n=await r.json()}catch(c){throw new Wi(Fi(c),c)}let i;const o=OA(r);if(o&&o.getTime()>=p0["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?i=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(i=n.error_code),i){if(i==="weak_password")throw new cv(Fi(n),r.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(i==="session_not_found")throw new mn}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((c,u)=>c&&typeof u=="string",!0))throw new cv(Fi(n),r.status,n.weak_password.reasons);throw new lA(Fi(n),r.status||500,i)}const UA=(r,e,n,i)=>{const o={method:r,headers:e?.headers||{}};return r==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),o.body=JSON.stringify(i),Object.assign(Object.assign({},o),n))};async function ve(r,e,n,i){var o;const c=Object.assign({},i?.headers);c[pf]||(c[pf]=p0["2024-01-01"].name),i?.jwt&&(c.Authorization=`Bearer ${i.jwt}`);const u=(o=i?.query)!==null&&o!==void 0?o:{};i?.redirectTo&&(u.redirect_to=i.redirectTo);const d=Object.keys(u).length?"?"+new URLSearchParams(u).toString():"",f=await zA(r,e,n+d,{headers:c,noResolveJson:i?.noResolveJson},{},i?.body);return i?.xform?i?.xform(f):{data:Object.assign({},f),error:null}}async function zA(r,e,n,i,o,c){const u=UA(e,i,o,c);let d;try{d=await r(n,Object.assign({},u))}catch(f){throw console.error(f),new mf(Fi(f),0)}if(d.ok||await pv(d),i?.noResolveJson)return d;try{return await d.json()}catch(f){await pv(f)}}function In(r){var e;let n=null;LA(r)&&(n=Object.assign({},r),r.expires_at||(n.expires_at=_A(r.expires_in)));const i=(e=r.user)!==null&&e!==void 0?e:r;return{data:{session:n,user:i},error:null}}function mv(r){const e=In(r);return!e.error&&r.weak_password&&typeof r.weak_password=="object"&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.message&&typeof r.weak_password.message=="string"&&r.weak_password.reasons.reduce((n,i)=>n&&typeof i=="string",!0)&&(e.data.weak_password=r.weak_password),e}function gi(r){var e;return{data:{user:(e=r.user)!==null&&e!==void 0?e:r},error:null}}function BA(r){return{data:r,error:null}}function qA(r){const{action_link:e,email_otp:n,hashed_token:i,redirect_to:o,verification_type:c}=r,u=Zc(r,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),d={action_link:e,email_otp:n,hashed_token:i,redirect_to:o,verification_type:c},f=Object.assign({},u);return{data:{properties:d,user:f},error:null}}function gv(r){return r}function LA(r){return r.access_token&&r.refresh_token&&r.expires_in}const Zd=["global","local","others"];class VA{constructor({url:e="",headers:n={},fetch:i}){this.url=e,this.headers=n,this.fetch=y0(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=Zd[0]){if(Zd.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Zd.join(", ")}`);try{return await ve(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(i){if(fe(i))return{data:null,error:i};throw i}}async inviteUserByEmail(e,n={}){try{return await ve(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:gi})}catch(i){if(fe(i))return{data:{user:null},error:i};throw i}}async generateLink(e){try{const{options:n}=e,i=Zc(e,["options"]),o=Object.assign(Object.assign({},i),n);return"newEmail"in i&&(o.new_email=i?.newEmail,delete o.newEmail),await ve(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:qA,redirectTo:n?.redirectTo})}catch(n){if(fe(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await ve(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:gi})}catch(n){if(fe(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,i,o,c,u,d,f;try{const m={nextPage:null,lastPage:0,total:0},y=await ve(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(n=e?.page)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:"",per_page:(c=(o=e?.perPage)===null||o===void 0?void 0:o.toString())!==null&&c!==void 0?c:""},xform:gv});if(y.error)throw y.error;const _=await y.json(),b=(u=y.headers.get("x-total-count"))!==null&&u!==void 0?u:0,S=(f=(d=y.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&f!==void 0?f:[];return S.length>0&&(S.forEach(w=>{const x=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),A=JSON.parse(w.split(";")[1].split("=")[1]);m[`${A}Page`]=x}),m.total=parseInt(b)),{data:Object.assign(Object.assign({},_),m),error:null}}catch(m){if(fe(m))return{data:{users:[]},error:m};throw m}}async getUserById(e){Yr(e);try{return await ve(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:gi})}catch(n){if(fe(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){Yr(e);try{return await ve(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:gi})}catch(i){if(fe(i))return{data:{user:null},error:i};throw i}}async deleteUser(e,n=!1){Yr(e);try{return await ve(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:gi})}catch(i){if(fe(i))return{data:{user:null},error:i};throw i}}async _listFactors(e){Yr(e.userId);try{const{data:n,error:i}=await ve(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:n,error:i}}catch(n){if(fe(n))return{data:null,error:n};throw n}}async _deleteFactor(e){Yr(e.userId),Yr(e.id);try{return{data:await ve(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(fe(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,i,o,c,u,d,f;try{const m={nextPage:null,lastPage:0,total:0},y=await ve(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(n=e?.page)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:"",per_page:(c=(o=e?.perPage)===null||o===void 0?void 0:o.toString())!==null&&c!==void 0?c:""},xform:gv});if(y.error)throw y.error;const _=await y.json(),b=(u=y.headers.get("x-total-count"))!==null&&u!==void 0?u:0,S=(f=(d=y.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&f!==void 0?f:[];return S.length>0&&(S.forEach(w=>{const x=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),A=JSON.parse(w.split(";")[1].split("=")[1]);m[`${A}Page`]=x}),m.total=parseInt(b)),{data:Object.assign(Object.assign({},_),m),error:null}}catch(m){if(fe(m))return{data:{clients:[]},error:m};throw m}}async _createOAuthClient(e){try{return await ve(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(fe(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await ve(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(fe(n))return{data:null,error:n};throw n}}async _updateOAuthClient(e,n){try{return await ve(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:n,headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(fe(i))return{data:null,error:i};throw i}}async _deleteOAuthClient(e){try{return await ve(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(fe(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await ve(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(fe(n))return{data:null,error:n};throw n}}}function yv(r={}){return{getItem:e=>r[e]||null,setItem:(e,n)=>{r[e]=n},removeItem:e=>{delete r[e]}}}const Wr={debug:!!(globalThis&&g0()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class _0 extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class IA extends _0{}async function PA(r,e,n){Wr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",r,e);const i=new globalThis.AbortController;return e>0&&setTimeout(()=>{i.abort(),Wr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",r)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(r,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async o=>{if(o){Wr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",r,o.name);try{return await n()}finally{Wr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",r,o.name)}}else{if(e===0)throw Wr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",r),new IA(`Acquiring an exclusive Navigator LockManager lock "${r}" immediately failed`);if(Wr.debug)try{const c=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(c,null,"  "))}catch(c){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",c)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function HA(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function v0(r){if(!/^0x[a-fA-F0-9]{40}$/.test(r))throw new Error(`@supabase/auth-js: Address "${r}" is invalid.`);return r.toLowerCase()}function $A(r){return parseInt(r,16)}function GA(r){const e=new TextEncoder().encode(r);return"0x"+Array.from(e,i=>i.toString(16).padStart(2,"0")).join("")}function FA(r){var e;const{chainId:n,domain:i,expirationTime:o,issuedAt:c=new Date,nonce:u,notBefore:d,requestId:f,resources:m,scheme:y,uri:_,version:b}=r;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!i)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(u&&u.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${u}`);if(!_)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(b!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${b}`);if(!((e=r.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${r.statement}`)}const S=v0(r.address),w=y?`${y}://${i}`:i,x=r.statement?`${r.statement}
`:"",A=`${w} wants you to sign in with your Ethereum account:
${S}

${x}`;let E=`URI: ${_}
Version: ${b}
Chain ID: ${n}${u?`
Nonce: ${u}`:""}
Issued At: ${c.toISOString()}`;if(o&&(E+=`
Expiration Time: ${o.toISOString()}`),d&&(E+=`
Not Before: ${d.toISOString()}`),f&&(E+=`
Request ID: ${f}`),m){let D=`
Resources:`;for(const O of m){if(!O||typeof O!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${O}`);D+=`
- ${O}`}E+=D}return`${A}
${E}`}class Tt extends Error{constructor({message:e,code:n,cause:i,name:o}){var c;super(e,{cause:i}),this.__isWebAuthnError=!0,this.name=(c=o??(i instanceof Error?i.name:void 0))!==null&&c!==void 0?c:"Unknown Error",this.code=n}}class Dc extends Tt{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function YA({error:r,options:e}){var n,i,o;const{publicKey:c}=e;if(!c)throw Error("options was missing required publicKey property");if(r.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Tt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:r})}else if(r.name==="ConstraintError"){if(((n=c.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new Tt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:r});if(e.mediation==="conditional"&&((i=c.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new Tt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:r});if(((o=c.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new Tt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:r})}else{if(r.name==="InvalidStateError")return new Tt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:r});if(r.name==="NotAllowedError")return new Tt({message:r.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r});if(r.name==="NotSupportedError")return c.pubKeyCredParams.filter(d=>d.type==="public-key").length===0?new Tt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:r}):new Tt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:r});if(r.name==="SecurityError"){const u=window.location.hostname;if(b0(u)){if(c.rp.id!==u)return new Tt({message:`The RP ID "${c.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:r})}else return new Tt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:r})}else if(r.name==="TypeError"){if(c.user.id.byteLength<1||c.user.id.byteLength>64)return new Tt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:r})}else if(r.name==="UnknownError")return new Tt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:r})}return new Tt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r})}function WA({error:r,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(r.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Tt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:r})}else{if(r.name==="NotAllowedError")return new Tt({message:r.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r});if(r.name==="SecurityError"){const i=window.location.hostname;if(b0(i)){if(n.rpId!==i)return new Tt({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:r})}else return new Tt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:r})}else if(r.name==="UnknownError")return new Tt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:r})}return new Tt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r})}class XA{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const KA=new XA;function ZA(r){if(!r)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(r);const{challenge:e,user:n,excludeCredentials:i}=r,o=Zc(r,["challenge","user","excludeCredentials"]),c=aa(e).buffer,u=Object.assign(Object.assign({},n),{id:aa(n.id).buffer}),d=Object.assign(Object.assign({},o),{challenge:c,user:u});if(i&&i.length>0){d.excludeCredentials=new Array(i.length);for(let f=0;f<i.length;f++){const m=i[f];d.excludeCredentials[f]=Object.assign(Object.assign({},m),{id:aa(m.id).buffer,type:m.type||"public-key",transports:m.transports})}}return d}function QA(r){if(!r)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(r);const{challenge:e,allowCredentials:n}=r,i=Zc(r,["challenge","allowCredentials"]),o=aa(e).buffer,c=Object.assign(Object.assign({},i),{challenge:o});if(n&&n.length>0){c.allowCredentials=new Array(n.length);for(let u=0;u<n.length;u++){const d=n[u];c.allowCredentials[u]=Object.assign(Object.assign({},d),{id:aa(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return c}function JA(r){var e;if("toJSON"in r&&typeof r.toJSON=="function")return r.toJSON();const n=r;return{id:r.id,rawId:r.id,response:{attestationObject:Xi(new Uint8Array(r.response.attestationObject)),clientDataJSON:Xi(new Uint8Array(r.response.clientDataJSON))},type:"public-key",clientExtensionResults:r.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function eE(r){var e;if("toJSON"in r&&typeof r.toJSON=="function")return r.toJSON();const n=r,i=r.getClientExtensionResults(),o=r.response;return{id:r.id,rawId:r.id,response:{authenticatorData:Xi(new Uint8Array(o.authenticatorData)),clientDataJSON:Xi(new Uint8Array(o.clientDataJSON)),signature:Xi(new Uint8Array(o.signature)),userHandle:o.userHandle?Xi(new Uint8Array(o.userHandle)):void 0},type:"public-key",clientExtensionResults:i,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function b0(r){return r==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(r)}function _v(){var r,e;return!!(qt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((r=navigator?.credentials)===null||r===void 0?void 0:r.create)=="function"&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.get)=="function")}async function tE(r){try{const e=await navigator.credentials.create(r);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Dc("Browser returned unexpected credential type",e)}:{data:null,error:new Dc("Empty credential response",e)}}catch(e){return{data:null,error:YA({error:e,options:r})}}}async function nE(r){try{const e=await navigator.credentials.get(r);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Dc("Browser returned unexpected credential type",e)}:{data:null,error:new Dc("Empty credential response",e)}}catch(e){return{data:null,error:WA({error:e,options:r})}}}const sE={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},iE={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Mc(...r){const e=o=>o!==null&&typeof o=="object"&&!Array.isArray(o),n=o=>o instanceof ArrayBuffer||ArrayBuffer.isView(o),i={};for(const o of r)if(o)for(const c in o){const u=o[c];if(u!==void 0)if(Array.isArray(u))i[c]=u;else if(n(u))i[c]=u;else if(e(u)){const d=i[c];e(d)?i[c]=Mc(d,u):i[c]=Mc(u)}else i[c]=u}return i}function rE(r,e){return Mc(sE,r,e||{})}function aE(r,e){return Mc(iE,r,e||{})}class oE{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:i,signal:o},c){try{const{data:u,error:d}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!u)return{data:null,error:d};const f=o??KA.createNewAbortSignal();if(u.webauthn.type==="create"){const{user:m}=u.webauthn.credential_options.publicKey;m.name||(m.name=`${m.id}:${i}`),m.displayName||(m.displayName=m.name)}switch(u.webauthn.type){case"create":{const m=rE(u.webauthn.credential_options.publicKey,c?.create),{data:y,error:_}=await tE({publicKey:m,signal:f});return y?{data:{factorId:e,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:y}},error:null}:{data:null,error:_}}case"request":{const m=aE(u.webauthn.credential_options.publicKey,c?.request),{data:y,error:_}=await nE(Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:m,signal:f}));return y?{data:{factorId:e,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:y}},error:null}:{data:null,error:_}}}}catch(u){return fe(u)?{data:null,error:u}:{data:null,error:new Wi("Unexpected error in challenge",u)}}}async _verify({challengeId:e,factorId:n,webauthn:i}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:i})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:o}={}},c){if(!n)return{data:null,error:new Ro("rpId is required for WebAuthn authentication")};try{if(!_v())return{data:null,error:new Wi("Browser does not support WebAuthn",null)};const{data:u,error:d}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:i},signal:o},{request:c});if(!u)return{data:null,error:d};const{webauthn:f}=u;return this._verify({factorId:e,challengeId:u.challengeId,webauthn:{type:f.type,rpId:n,rpOrigins:i,credential_response:f.credential_response}})}catch(u){return fe(u)?{data:null,error:u}:{data:null,error:new Wi("Unexpected error in authenticate",u)}}}async _register({friendlyName:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:o}={}},c){if(!n)return{data:null,error:new Ro("rpId is required for WebAuthn registration")};try{if(!_v())return{data:null,error:new Wi("Browser does not support WebAuthn",null)};const{data:u,error:d}=await this._enroll({friendlyName:e});if(!u)return await this.client.mfa.listFactors().then(y=>{var _;return(_=y.data)===null||_===void 0?void 0:_.all.find(b=>b.factor_type==="webauthn"&&b.friendly_name===e&&b.status!=="unverified")}).then(y=>y?this.client.mfa.unenroll({factorId:y?.id}):void 0),{data:null,error:d};const{data:f,error:m}=await this._challenge({factorId:u.id,friendlyName:u.friendly_name,webauthn:{rpId:n,rpOrigins:i},signal:o},{create:c});return f?this._verify({factorId:u.id,challengeId:f.challengeId,webauthn:{rpId:n,rpOrigins:i,type:f.webauthn.type,credential_response:f.webauthn.credential_response}}):{data:null,error:m}}catch(u){return fe(u)?{data:null,error:u}:{data:null,error:new Wi("Unexpected error in register",u)}}}}HA();const lE={url:sA,storageKey:iA,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:rA,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function vv(r,e,n){return await n()}const Xr={};class jo{get jwks(){var e,n;return(n=(e=Xr[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){Xr[this.storageKey]=Object.assign(Object.assign({},Xr[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=Xr[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Xr[this.storageKey]=Object.assign(Object.assign({},Xr[this.storageKey]),{cachedAt:e})}constructor(e){var n,i,o;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const c=Object.assign(Object.assign({},lE),e);if(this.storageKey=c.storageKey,this.instanceID=(n=jo.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,jo.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!c.debug,typeof c.debug=="function"&&(this.logger=c.debug),this.instanceID>0&&qt()){const u=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(u),this.logDebugMessages&&console.trace(u)}if(this.persistSession=c.persistSession,this.autoRefreshToken=c.autoRefreshToken,this.admin=new VA({url:c.url,headers:c.headers,fetch:c.fetch}),this.url=c.url,this.headers=c.headers,this.fetch=y0(c.fetch),this.lock=c.lock||vv,this.detectSessionInUrl=c.detectSessionInUrl,this.flowType=c.flowType,this.hasCustomAuthorizationHeader=c.hasCustomAuthorizationHeader,this.throwOnError=c.throwOnError,this.lockAcquireTimeout=c.lockAcquireTimeout,c.lock?this.lock=c.lock:this.persistSession&&qt()&&(!((i=globalThis?.navigator)===null||i===void 0)&&i.locks)?this.lock=PA:this.lock=vv,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new oE(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(c.storage?this.storage=c.storage:g0()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=yv(this.memoryStorage)),c.userStorage&&(this.userStorage=c.userStorage)):(this.memoryStorage={},this.storage=yv(this.memoryStorage)),qt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(u){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",u)}(o=this.broadcastChannel)===null||o===void 0||o.addEventListener("message",async u=>{this._debug("received broadcast notification from other tab or client",u),await this._notifyAllSubscribers(u.data.event,u.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${f0}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let n={},i="none";if(qt()&&(n=bA(window.location.href),this._isImplicitGrantCallback(n)?i="implicit":await this._isPKCECallback(n)&&(i="pkce")),qt()&&this.detectSessionInUrl&&i!=="none"){const{data:o,error:c}=await this._getSessionFromURL(n,i);if(c){if(this._debug("#_initialize()","error detecting session from URL",c),hA(c)){const f=(e=c.details)===null||e===void 0?void 0:e.code;if(f==="identity_already_exists"||f==="identity_not_found"||f==="single_identity_not_deletable")return{error:c}}return{error:c}}const{session:u,redirectType:d}=o;return this._debug("#_initialize()","detected session in URL",u,"redirect type",d),await this._saveSession(u),setTimeout(async()=>{d==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",u):await this._notifyAllSubscribers("SIGNED_IN",u)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return fe(n)?this._returnResult({error:n}):this._returnResult({error:new Wi("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,i,o;try{const c=await ve(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(n=e?.options)===null||n===void 0?void 0:n.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(o=e?.options)===null||o===void 0?void 0:o.captchaToken}},xform:In}),{data:u,error:d}=c;if(d||!u)return this._returnResult({data:{user:null,session:null},error:d});const f=u.session,m=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",f)),this._returnResult({data:{user:m,session:f},error:null})}catch(c){if(fe(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async signUp(e){var n,i,o;try{let c;if("email"in e){const{email:y,password:_,options:b}=e;let S=null,w=null;this.flowType==="pkce"&&([S,w]=await Fr(this.storage,this.storageKey)),c=await ve(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:b?.emailRedirectTo,body:{email:y,password:_,data:(n=b?.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:b?.captchaToken},code_challenge:S,code_challenge_method:w},xform:In})}else if("phone"in e){const{phone:y,password:_,options:b}=e;c=await ve(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:y,password:_,data:(i=b?.data)!==null&&i!==void 0?i:{},channel:(o=b?.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:b?.captchaToken}},xform:In})}else throw new vc("You must provide either an email or phone number and a password");const{data:u,error:d}=c;if(d||!u)return await Bt(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:d});const f=u.session,m=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",f)),this._returnResult({data:{user:m,session:f},error:null})}catch(c){if(await Bt(this.storage,`${this.storageKey}-code-verifier`),fe(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async signInWithPassword(e){try{let n;if("email"in e){const{email:c,password:u,options:d}=e;n=await ve(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:c,password:u,gotrue_meta_security:{captcha_token:d?.captchaToken}},xform:mv})}else if("phone"in e){const{phone:c,password:u,options:d}=e;n=await ve(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:c,password:u,gotrue_meta_security:{captcha_token:d?.captchaToken}},xform:mv})}else throw new vc("You must provide either an email or phone number and a password");const{data:i,error:o}=n;if(o)return this._returnResult({data:{user:null,session:null},error:o});if(!i||!i.session||!i.user){const c=new Gr;return this._returnResult({data:{user:null,session:null},error:c})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:o})}catch(n){if(fe(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(e){var n,i,o,c;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(i=e.options)===null||i===void 0?void 0:i.scopes,queryParams:(o=e.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(c=e.options)===null||c===void 0?void 0:c.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,i,o,c,u,d,f,m,y,_,b;let S,w;if("message"in e)S=e.message,w=e.signature;else{const{chain:x,wallet:A,statement:E,options:D}=e;let O;if(qt())if(typeof A=="object")O=A;else{const X=window;if("ethereum"in X&&typeof X.ethereum=="object"&&"request"in X.ethereum&&typeof X.ethereum.request=="function")O=X.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof A!="object"||!D?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");O=A}const I=new URL((n=D?.url)!==null&&n!==void 0?n:window.location.href),k=await O.request({method:"eth_requestAccounts"}).then(X=>X).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!k||k.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const R=v0(k[0]);let M=(i=D?.signInWithEthereum)===null||i===void 0?void 0:i.chainId;if(!M){const X=await O.request({method:"eth_chainId"});M=$A(X)}const z={domain:I.host,address:R,statement:E,uri:I.href,version:"1",chainId:M,nonce:(o=D?.signInWithEthereum)===null||o===void 0?void 0:o.nonce,issuedAt:(u=(c=D?.signInWithEthereum)===null||c===void 0?void 0:c.issuedAt)!==null&&u!==void 0?u:new Date,expirationTime:(d=D?.signInWithEthereum)===null||d===void 0?void 0:d.expirationTime,notBefore:(f=D?.signInWithEthereum)===null||f===void 0?void 0:f.notBefore,requestId:(m=D?.signInWithEthereum)===null||m===void 0?void 0:m.requestId,resources:(y=D?.signInWithEthereum)===null||y===void 0?void 0:y.resources};S=FA(z),w=await O.request({method:"personal_sign",params:[GA(S),R]})}try{const{data:x,error:A}=await ve(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:S,signature:w},!((_=e.options)===null||_===void 0)&&_.captchaToken?{gotrue_meta_security:{captcha_token:(b=e.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:In});if(A)throw A;if(!x||!x.session||!x.user){const E=new Gr;return this._returnResult({data:{user:null,session:null},error:E})}return x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),this._returnResult({data:Object.assign({},x),error:A})}catch(x){if(fe(x))return this._returnResult({data:{user:null,session:null},error:x});throw x}}async signInWithSolana(e){var n,i,o,c,u,d,f,m,y,_,b,S;let w,x;if("message"in e)w=e.message,x=e.signature;else{const{chain:A,wallet:E,statement:D,options:O}=e;let I;if(qt())if(typeof E=="object")I=E;else{const R=window;if("solana"in R&&typeof R.solana=="object"&&("signIn"in R.solana&&typeof R.solana.signIn=="function"||"signMessage"in R.solana&&typeof R.solana.signMessage=="function"))I=R.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof E!="object"||!O?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");I=E}const k=new URL((n=O?.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in I&&I.signIn){const R=await I.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},O?.signInWithSolana),{version:"1",domain:k.host,uri:k.href}),D?{statement:D}:null));let M;if(Array.isArray(R)&&R[0]&&typeof R[0]=="object")M=R[0];else if(R&&typeof R=="object"&&"signedMessage"in R&&"signature"in R)M=R;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in M&&"signature"in M&&(typeof M.signedMessage=="string"||M.signedMessage instanceof Uint8Array)&&M.signature instanceof Uint8Array)w=typeof M.signedMessage=="string"?M.signedMessage:new TextDecoder().decode(M.signedMessage),x=M.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in I)||typeof I.signMessage!="function"||!("publicKey"in I)||typeof I!="object"||!I.publicKey||!("toBase58"in I.publicKey)||typeof I.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");w=[`${k.host} wants you to sign in with your Solana account:`,I.publicKey.toBase58(),...D?["",D,""]:[""],"Version: 1",`URI: ${k.href}`,`Issued At: ${(o=(i=O?.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((c=O?.signInWithSolana)===null||c===void 0)&&c.notBefore?[`Not Before: ${O.signInWithSolana.notBefore}`]:[],...!((u=O?.signInWithSolana)===null||u===void 0)&&u.expirationTime?[`Expiration Time: ${O.signInWithSolana.expirationTime}`]:[],...!((d=O?.signInWithSolana)===null||d===void 0)&&d.chainId?[`Chain ID: ${O.signInWithSolana.chainId}`]:[],...!((f=O?.signInWithSolana)===null||f===void 0)&&f.nonce?[`Nonce: ${O.signInWithSolana.nonce}`]:[],...!((m=O?.signInWithSolana)===null||m===void 0)&&m.requestId?[`Request ID: ${O.signInWithSolana.requestId}`]:[],...!((_=(y=O?.signInWithSolana)===null||y===void 0?void 0:y.resources)===null||_===void 0)&&_.length?["Resources",...O.signInWithSolana.resources.map(M=>`- ${M}`)]:[]].join(`
`);const R=await I.signMessage(new TextEncoder().encode(w),"utf8");if(!R||!(R instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");x=R}}try{const{data:A,error:E}=await ve(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:w,signature:Xi(x)},!((b=e.options)===null||b===void 0)&&b.captchaToken?{gotrue_meta_security:{captcha_token:(S=e.options)===null||S===void 0?void 0:S.captchaToken}}:null),xform:In});if(E)throw E;if(!A||!A.session||!A.user){const D=new Gr;return this._returnResult({data:{user:null,session:null},error:D})}return A.session&&(await this._saveSession(A.session),await this._notifyAllSubscribers("SIGNED_IN",A.session)),this._returnResult({data:Object.assign({},A),error:E})}catch(A){if(fe(A))return this._returnResult({data:{user:null,session:null},error:A});throw A}}async _exchangeCodeForSession(e){const n=await $i(this.storage,`${this.storageKey}-code-verifier`),[i,o]=(n??"").split("/");try{if(!i&&this.flowType==="pkce")throw new dA;const{data:c,error:u}=await ve(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:i},xform:In});if(await Bt(this.storage,`${this.storageKey}-code-verifier`),u)throw u;if(!c||!c.session||!c.user){const d=new Gr;return this._returnResult({data:{user:null,session:null,redirectType:null},error:d})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:Object.assign(Object.assign({},c),{redirectType:o??null}),error:u})}catch(c){if(await Bt(this.storage,`${this.storageKey}-code-verifier`),fe(c))return this._returnResult({data:{user:null,session:null,redirectType:null},error:c});throw c}}async signInWithIdToken(e){try{const{options:n,provider:i,token:o,access_token:c,nonce:u}=e,d=await ve(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:o,access_token:c,nonce:u,gotrue_meta_security:{captcha_token:n?.captchaToken}},xform:In}),{data:f,error:m}=d;if(m)return this._returnResult({data:{user:null,session:null},error:m});if(!f||!f.session||!f.user){const y=new Gr;return this._returnResult({data:{user:null,session:null},error:y})}return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",f.session)),this._returnResult({data:f,error:m})}catch(n){if(fe(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(e){var n,i,o,c,u;try{if("email"in e){const{email:d,options:f}=e;let m=null,y=null;this.flowType==="pkce"&&([m,y]=await Fr(this.storage,this.storageKey));const{error:_}=await ve(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:d,data:(n=f?.data)!==null&&n!==void 0?n:{},create_user:(i=f?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:f?.captchaToken},code_challenge:m,code_challenge_method:y},redirectTo:f?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:_})}if("phone"in e){const{phone:d,options:f}=e,{data:m,error:y}=await ve(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:d,data:(o=f?.data)!==null&&o!==void 0?o:{},create_user:(c=f?.shouldCreateUser)!==null&&c!==void 0?c:!0,gotrue_meta_security:{captcha_token:f?.captchaToken},channel:(u=f?.channel)!==null&&u!==void 0?u:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:m?.message_id},error:y})}throw new vc("You must provide either an email or phone number.")}catch(d){if(await Bt(this.storage,`${this.storageKey}-code-verifier`),fe(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}}async verifyOtp(e){var n,i;try{let o,c;"options"in e&&(o=(n=e.options)===null||n===void 0?void 0:n.redirectTo,c=(i=e.options)===null||i===void 0?void 0:i.captchaToken);const{data:u,error:d}=await ve(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:c}}),redirectTo:o,xform:In});if(d)throw d;if(!u)throw new Error("An error occurred on token verification.");const f=u.session,m=u.user;return f?.access_token&&(await this._saveSession(f),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",f)),this._returnResult({data:{user:m,session:f},error:null})}catch(o){if(fe(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithSSO(e){var n,i,o,c,u;try{let d=null,f=null;this.flowType==="pkce"&&([d,f]=await Fr(this.storage,this.storageKey));const m=await ve(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(i=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&i!==void 0?i:void 0}),!((o=e?.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:d,code_challenge_method:f}),headers:this.headers,xform:BA});return!((c=m.data)===null||c===void 0)&&c.url&&qt()&&!(!((u=e.options)===null||u===void 0)&&u.skipBrowserRedirect)&&window.location.assign(m.data.url),this._returnResult(m)}catch(d){if(await Bt(this.storage,`${this.storageKey}-code-verifier`),fe(d))return this._returnResult({data:null,error:d});throw d}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:i}=e;if(i)throw i;if(!n)throw new mn;const{error:o}=await ve(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:o})})}catch(e){if(fe(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:i,type:o,options:c}=e,{error:u}=await ve(this.fetch,"POST",n,{headers:this.headers,body:{email:i,type:o,gotrue_meta_security:{captcha_token:c?.captchaToken}},redirectTo:c?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:u})}else if("phone"in e){const{phone:i,type:o,options:c}=e,{data:u,error:d}=await ve(this.fetch,"POST",n,{headers:this.headers,body:{phone:i,type:o,gotrue_meta_security:{captcha_token:c?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:u?.message_id},error:d})}throw new vc("You must provide either an email or phone number and a type")}catch(n){if(fe(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await i,await n()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=n();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await $i(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const i=e.expires_at?e.expires_at*1e3-Date.now()<Yd:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",e.expires_at),!i){if(this.userStorage){const u=await $i(this.userStorage,this.storageKey+"-user");u?.user?e.user=u.user:e.user=Kd()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const u={value:this.suppressGetSessionWarning};e.user=DA(e.user,u),u.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:o,error:c}=await this._callRefreshToken(e.refresh_token);return c?this._returnResult({data:{session:null},error:c}):this._returnResult({data:{session:o},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const n=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(e){try{return e?await ve(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:gi}):await this._useSession(async n=>{var i,o,c;const{data:u,error:d}=n;if(d)throw d;return!(!((i=u.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new mn}:await ve(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(c=(o=u.session)===null||o===void 0?void 0:o.access_token)!==null&&c!==void 0?c:void 0,xform:gi})})}catch(n){if(fe(n))return uA(n)&&(await this._removeSession(),await Bt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async i=>{const{data:o,error:c}=i;if(c)throw c;if(!o.session)throw new mn;const u=o.session;let d=null,f=null;this.flowType==="pkce"&&e.email!=null&&([d,f]=await Fr(this.storage,this.storageKey));const{data:m,error:y}=await ve(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:d,code_challenge_method:f}),jwt:u.access_token,xform:gi});if(y)throw y;return u.user=m.user,await this._saveSession(u),await this._notifyAllSubscribers("USER_UPDATED",u),this._returnResult({data:{user:u.user},error:null})})}catch(i){if(await Bt(this.storage,`${this.storageKey}-code-verifier`),fe(i))return this._returnResult({data:{user:null},error:i});throw i}}async setSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new mn;const n=Date.now()/1e3;let i=n,o=!0,c=null;const{payload:u}=Xd(e.access_token);if(u.exp&&(i=u.exp,o=i<=n),o){const{data:d,error:f}=await this._callRefreshToken(e.refresh_token);if(f)return this._returnResult({data:{user:null,session:null},error:f});if(!d)return{data:{user:null,session:null},error:null};c=d}else{const{data:d,error:f}=await this._getUser(e.access_token);if(f)throw f;c={access_token:e.access_token,refresh_token:e.refresh_token,user:d.user,token_type:"bearer",expires_in:i-n,expires_at:i},await this._saveSession(c),await this._notifyAllSubscribers("SIGNED_IN",c)}return this._returnResult({data:{user:c.user,session:c},error:null})}catch(n){if(fe(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var i;if(!e){const{data:u,error:d}=n;if(d)throw d;e=(i=u.session)!==null&&i!==void 0?i:void 0}if(!e?.refresh_token)throw new mn;const{data:o,error:c}=await this._callRefreshToken(e.refresh_token);return c?this._returnResult({data:{user:null,session:null},error:c}):o?this._returnResult({data:{user:o.user,session:o},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(fe(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(e,n){try{if(!qt())throw new bc("No browser detected.");if(e.error||e.error_description||e.error_code)throw new bc(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new lv("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new bc("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new lv("No code detected.");const{data:D,error:O}=await this._exchangeCodeForSession(e.code);if(O)throw O;const I=new URL(window.location.href);return I.searchParams.delete("code"),window.history.replaceState(window.history.state,"",I.toString()),{data:{session:D.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:o,access_token:c,refresh_token:u,expires_in:d,expires_at:f,token_type:m}=e;if(!c||!d||!u||!m)throw new bc("No session defined in URL");const y=Math.round(Date.now()/1e3),_=parseInt(d);let b=y+_;f&&(b=parseInt(f));const S=b-y;S*1e3<=Jr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${S}s, should have been closer to ${_}s`);const w=b-_;y-w>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",w,b,y):y-w<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",w,b,y);const{data:x,error:A}=await this._getUser(c);if(A)throw A;const E={provider_token:i,provider_refresh_token:o,access_token:c,expires_in:_,expires_at:b,refresh_token:u,token_type:m,user:x.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:E,redirectType:e.type},error:null})}catch(i){if(fe(i))return this._returnResult({data:{session:null,redirectType:null},error:i});throw i}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await $i(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var i;const{data:o,error:c}=n;if(c)return this._returnResult({error:c});const u=(i=o.session)===null||i===void 0?void 0:i.access_token;if(u){const{error:d}=await this.admin.signOut(u,e);if(d&&!(cA(d)&&(d.status===404||d.status===401||d.status===403)))return this._returnResult({error:d})}return e!=="others"&&(await this._removeSession(),await Bt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const n=vA(),i={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,i),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:i}}}async _emitInitialSession(e){return await this._useSession(async n=>{var i,o;try{const{data:{session:c},error:u}=n;if(u)throw u;await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",c)),this._debug("INITIAL_SESSION","callback id",e,"session",c)}catch(c){await((o=this.stateChangeEmitters.get(e))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",c),console.error(c)}})}async resetPasswordForEmail(e,n={}){let i=null,o=null;this.flowType==="pkce"&&([i,o]=await Fr(this.storage,this.storageKey,!0));try{return await ve(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:i,code_challenge_method:o,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(c){if(await Bt(this.storage,`${this.storageKey}-code-verifier`),fe(c))return this._returnResult({data:null,error:c});throw c}}async getUserIdentities(){var e;try{const{data:n,error:i}=await this.getUser();if(i)throw i;return this._returnResult({data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(n){if(fe(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:i,error:o}=await this._useSession(async c=>{var u,d,f,m,y;const{data:_,error:b}=c;if(b)throw b;const S=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(u=e.options)===null||u===void 0?void 0:u.redirectTo,scopes:(d=e.options)===null||d===void 0?void 0:d.scopes,queryParams:(f=e.options)===null||f===void 0?void 0:f.queryParams,skipBrowserRedirect:!0});return await ve(this.fetch,"GET",S,{headers:this.headers,jwt:(y=(m=_.session)===null||m===void 0?void 0:m.access_token)!==null&&y!==void 0?y:void 0})});if(o)throw o;return qt()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(i?.url),this._returnResult({data:{provider:e.provider,url:i?.url},error:null})}catch(i){if(fe(i))return this._returnResult({data:{provider:e.provider,url:null},error:i});throw i}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var i;try{const{error:o,data:{session:c}}=n;if(o)throw o;const{options:u,provider:d,token:f,access_token:m,nonce:y}=e,_=await ve(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(i=c?.access_token)!==null&&i!==void 0?i:void 0,body:{provider:d,id_token:f,access_token:m,nonce:y,link_identity:!0,gotrue_meta_security:{captcha_token:u?.captchaToken}},xform:In}),{data:b,error:S}=_;return S?this._returnResult({data:{user:null,session:null},error:S}):!b||!b.session||!b.user?this._returnResult({data:{user:null,session:null},error:new Gr}):(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("USER_UPDATED",b.session)),this._returnResult({data:b,error:S}))}catch(o){if(await Bt(this.storage,`${this.storageKey}-code-verifier`),fe(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var i,o;const{data:c,error:u}=n;if(u)throw u;return await ve(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(o=(i=c.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0})})}catch(n){if(fe(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const i=Date.now();return await TA(async o=>(o>0&&await SA(200*Math.pow(2,o-1)),this._debug(n,"refreshing attempt",o),await ve(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:In})),(o,c)=>{const u=200*Math.pow(2,o);return c&&Wd(c)&&Date.now()+u-i<Jr})}catch(i){if(this._debug(n,"error",i),fe(i))return this._returnResult({data:{session:null,user:null},error:i});throw i}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const i=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",i),qt()&&!n.skipBrowserRedirect&&window.location.assign(i),{data:{provider:e,url:i},error:null}}async _recoverAndRefresh(){var e,n;const i="#_recoverAndRefresh()";this._debug(i,"begin");try{const o=await $i(this.storage,this.storageKey);if(o&&this.userStorage){let u=await $i(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!u&&(u={user:o.user},await ea(this.userStorage,this.storageKey+"-user",u)),o.user=(e=u?.user)!==null&&e!==void 0?e:Kd()}else if(o&&!o.user&&!o.user){const u=await $i(this.storage,this.storageKey+"-user");u&&u?.user?(o.user=u.user,await Bt(this.storage,this.storageKey+"-user"),await ea(this.storage,this.storageKey,o)):o.user=Kd()}if(this._debug(i,"session from storage",o),!this._isValidSession(o)){this._debug(i,"session is not valid"),o!==null&&await this._removeSession();return}const c=((n=o.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Yd;if(this._debug(i,`session has${c?"":" not"} expired with margin of ${Yd}s`),c){if(this.autoRefreshToken&&o.refresh_token){const{error:u}=await this._callRefreshToken(o.refresh_token);u&&(console.error(u),Wd(u)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",u),await this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{const{data:u,error:d}=await this._getUser(o.access_token);!d&&u?.user?(o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(u){console.error("Error getting user data:",u),this._debug(i,"error getting user data, skipping SIGNED_IN notification",u)}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(i,"error",o),console.error(o);return}finally{this._debug(i,"end")}}async _callRefreshToken(e){var n,i;if(!e)throw new mn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new Jc;const{data:c,error:u}=await this._refreshAccessToken(e);if(u)throw u;if(!c.session)throw new mn;await this._saveSession(c.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",c.session);const d={data:c.session,error:null};return this.refreshingDeferred.resolve(d),d}catch(c){if(this._debug(o,"error",c),fe(c)){const u={data:null,error:c};return Wd(c)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(u),u}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(c),c}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(e,n,i=!0){const o=`#_notifyAllSubscribers(${e})`;this._debug(o,"begin",n,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:e,session:n});const c=[],u=Array.from(this.stateChangeEmitters.values()).map(async d=>{try{await d.callback(e,n)}catch(f){c.push(f)}});if(await Promise.all(u),c.length>0){for(let d=0;d<c.length;d+=1)console.error(c[d]);throw c[0]}}finally{this._debug(o,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Bt(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},e),i=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&n.user&&await ea(this.userStorage,this.storageKey+"-user",{user:n.user});const o=Object.assign({},n);delete o.user;const c=fv(o);await ea(this.storage,this.storageKey,c)}else{const o=fv(n);await ea(this.storage,this.storageKey,o)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Bt(this.storage,this.storageKey),await Bt(this.storage,this.storageKey+"-code-verifier"),await Bt(this.storage,this.storageKey+"-user"),this.userStorage&&await Bt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&qt()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Jr);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e);const n=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e);const n=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,n&&clearTimeout(n)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:i}}=n;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((i.expires_at*1e3-e)/Jr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${Jr}ms, refresh threshold is ${ff} ticks`),o<=ff&&await this._callRefreshToken(i.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof _0)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!qt()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,i){const o=[`provider=${encodeURIComponent(n)}`];if(i?.redirectTo&&o.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i?.scopes&&o.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[c,u]=await Fr(this.storage,this.storageKey),d=new URLSearchParams({code_challenge:`${encodeURIComponent(c)}`,code_challenge_method:`${encodeURIComponent(u)}`});o.push(d.toString())}if(i?.queryParams){const c=new URLSearchParams(i.queryParams);o.push(c.toString())}return i?.skipBrowserRedirect&&o.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${e}?${o.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var i;const{data:o,error:c}=n;return c?this._returnResult({data:null,error:c}):await ve(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token})})}catch(n){if(fe(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(e){try{return await this._useSession(async n=>{var i,o;const{data:c,error:u}=n;if(u)return this._returnResult({data:null,error:u});const d=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:f,error:m}=await ve(this.fetch,"POST",`${this.url}/factors`,{body:d,headers:this.headers,jwt:(i=c?.session)===null||i===void 0?void 0:i.access_token});return m?this._returnResult({data:null,error:m}):(e.factorType==="totp"&&f.type==="totp"&&(!((o=f?.totp)===null||o===void 0)&&o.qr_code)&&(f.totp.qr_code=`data:image/svg+xml;utf-8,${f.totp.qr_code}`),this._returnResult({data:f,error:null}))})}catch(n){if(fe(n))return this._returnResult({data:null,error:n});throw n}}async _verify(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var i;const{data:o,error:c}=n;if(c)return this._returnResult({data:null,error:c});const u=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?JA(e.webauthn.credential_response):eE(e.webauthn.credential_response)})}:{code:e.code}),{data:d,error:f}=await ve(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:u,headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token});return f?this._returnResult({data:null,error:f}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+d.expires_in},d)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",d),this._returnResult({data:d,error:f}))})}catch(n){if(fe(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var i;const{data:o,error:c}=n;if(c)return this._returnResult({data:null,error:c});const u=await ve(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token});if(u.error)return u;const{data:d}=u;if(d.type!=="webauthn")return{data:d,error:null};switch(d.webauthn.type){case"create":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:ZA(d.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:QA(d.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(fe(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(e){const{data:n,error:i}=await this._challenge({factorId:e.factorId});return i?this._returnResult({data:null,error:i}):await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:i}=await this.getUser();if(i)return{data:null,error:i};const o={all:[],phone:[],totp:[],webauthn:[]};for(const c of(e=n?.factors)!==null&&e!==void 0?e:[])o.all.push(c),c.status==="verified"&&o[c.factor_type].push(c);return{data:o,error:null}}async _getAuthenticatorAssuranceLevel(){var e,n;const{data:{session:i},error:o}=await this.getSession();if(o)return this._returnResult({data:null,error:o});if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:c}=Xd(i.access_token);let u=null;c.aal&&(u=c.aal);let d=u;((n=(e=i.user.factors)===null||e===void 0?void 0:e.filter(y=>y.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(d="aal2");const m=c.amr||[];return{data:{currentLevel:u,nextLevel:d,currentAuthenticationMethods:m},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async n=>{const{data:{session:i},error:o}=n;return o?this._returnResult({data:null,error:o}):i?await ve(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:i.access_token,xform:c=>({data:c,error:null})}):this._returnResult({data:null,error:new mn})})}catch(n){if(fe(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(e,n){try{return await this._useSession(async i=>{const{data:{session:o},error:c}=i;if(c)return this._returnResult({data:null,error:c});if(!o)return this._returnResult({data:null,error:new mn});const u=await ve(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"approve"},xform:d=>({data:d,error:null})});return u.data&&u.data.redirect_url&&qt()&&!n?.skipBrowserRedirect&&window.location.assign(u.data.redirect_url),u})}catch(i){if(fe(i))return this._returnResult({data:null,error:i});throw i}}async _denyAuthorization(e,n){try{return await this._useSession(async i=>{const{data:{session:o},error:c}=i;if(c)return this._returnResult({data:null,error:c});if(!o)return this._returnResult({data:null,error:new mn});const u=await ve(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"deny"},xform:d=>({data:d,error:null})});return u.data&&u.data.redirect_url&&qt()&&!n?.skipBrowserRedirect&&window.location.assign(u.data.redirect_url),u})}catch(i){if(fe(i))return this._returnResult({data:null,error:i});throw i}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:n},error:i}=e;return i?this._returnResult({data:null,error:i}):n?await ve(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new mn})})}catch(e){if(fe(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async n=>{const{data:{session:i},error:o}=n;return o?this._returnResult({data:null,error:o}):i?(await ve(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:i.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new mn})})}catch(n){if(fe(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(e,n={keys:[]}){let i=n.keys.find(d=>d.kid===e);if(i)return i;const o=Date.now();if(i=this.jwks.keys.find(d=>d.kid===e),i&&this.jwks_cached_at+oA>o)return i;const{data:c,error:u}=await ve(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(u)throw u;return!c.keys||c.keys.length===0||(this.jwks=c,this.jwks_cached_at=o,i=c.keys.find(d=>d.kid===e),!i)?null:i}async getClaims(e,n={}){try{let i=e;if(!i){const{data:S,error:w}=await this.getSession();if(w||!S.session)return this._returnResult({data:null,error:w});i=S.session.access_token}const{header:o,payload:c,signature:u,raw:{header:d,payload:f}}=Xd(i);n?.allowExpired||kA(c.exp);const m=!o.alg||o.alg.startsWith("HS")||!o.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(o.kid,n?.keys?{keys:n.keys}:n?.jwks);if(!m){const{error:S}=await this.getUser(i);if(S)throw S;return{data:{claims:c,header:o,signature:u},error:null}}const y=RA(o.alg),_=await crypto.subtle.importKey("jwk",m,y,!0,["verify"]);if(!await crypto.subtle.verify(y,_,u,yA(`${d}.${f}`)))throw new gf("Invalid JWT signature");return{data:{claims:c,header:o,signature:u},error:null}}catch(i){if(fe(i))return this._returnResult({data:null,error:i});throw i}}}jo.nextInstanceID={};const cE=jo,uE="2.91.1";let bo="";typeof Deno<"u"?bo="deno":typeof document<"u"?bo="web":typeof navigator<"u"&&navigator.product==="ReactNative"?bo="react-native":bo="node";const hE={"X-Client-Info":`supabase-js-${bo}/${uE}`},dE={headers:hE},fE={schema:"public"},pE={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},mE={};function Do(r){"@babel/helpers - typeof";return Do=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Do(r)}function gE(r,e){if(Do(r)!="object"||!r)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var i=n.call(r,e);if(Do(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function yE(r){var e=gE(r,"string");return Do(e)=="symbol"?e:e+""}function _E(r,e,n){return(e=yE(e))in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function bv(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),n.push.apply(n,i)}return n}function ht(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?bv(Object(n),!0).forEach(function(i){_E(r,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):bv(Object(n)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(n,i))})}return r}const vE=r=>r?(...e)=>r(...e):(...e)=>fetch(...e),bE=()=>Headers,wE=(r,e,n)=>{const i=vE(n),o=bE();return async(c,u)=>{var d;const f=(d=await e())!==null&&d!==void 0?d:r;let m=new o(u?.headers);return m.has("apikey")||m.set("apikey",r),m.has("Authorization")||m.set("Authorization",`Bearer ${f}`),i(c,ht(ht({},u),{},{headers:m}))}};function SE(r){return r.endsWith("/")?r:r+"/"}function TE(r,e){var n,i;const{db:o,auth:c,realtime:u,global:d}=r,{db:f,auth:m,realtime:y,global:_}=e,b={db:ht(ht({},f),o),auth:ht(ht({},m),c),realtime:ht(ht({},y),u),storage:{},global:ht(ht(ht({},_),d),{},{headers:ht(ht({},(n=_?.headers)!==null&&n!==void 0?n:{}),(i=d?.headers)!==null&&i!==void 0?i:{})}),accessToken:async()=>""};return r.accessToken?b.accessToken=r.accessToken:delete b.accessToken,b}function xE(r){const e=r?.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(SE(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var AE=class extends cE{constructor(r){super(r)}},EE=class{constructor(r,e,n){var i,o;this.supabaseUrl=r,this.supabaseKey=e;const c=xE(r);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const u=`sb-${c.hostname.split(".")[0]}-auth-token`,d={db:fE,realtime:mE,auth:ht(ht({},pE),{},{storageKey:u}),global:dE},f=TE(n??{},d);if(this.storageKey=(i=f.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(o=f.global.headers)!==null&&o!==void 0?o:{},f.accessToken)this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(y,_)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(_)} is not possible`)}});else{var m;this.auth=this._initSupabaseAuthClient((m=f.auth)!==null&&m!==void 0?m:{},this.headers,f.global.fetch)}this.fetch=wE(e,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(ht({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(y=>this.realtime.setAuth(y)).catch(y=>console.warn("Failed to set initial Realtime auth token:",y)),this.rest=new rx(new URL("rest/v1",c).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),this.storage=new nA(this.storageUrl.href,this.headers,this.fetch,n?.storage),f.accessToken||this._listenForAuthEvents()}get functions(){return new ex(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(r){return this.rest.from(r)}schema(r){return this.rest.schema(r)}rpc(r,e={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(r,e,n)}channel(r,e={config:{}}){return this.realtime.channel(r,e)}getChannels(){return this.realtime.getChannels()}removeChannel(r){return this.realtime.removeChannel(r)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var r=this,e,n;if(r.accessToken)return await r.accessToken();const{data:i}=await r.auth.getSession();return(e=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&e!==void 0?e:r.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:r,persistSession:e,detectSessionInUrl:n,storage:i,userStorage:o,storageKey:c,flowType:u,lock:d,debug:f,throwOnError:m},y,_){const b={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new AE({url:this.authUrl.href,headers:ht(ht({},b),y),storageKey:c,autoRefreshToken:r,persistSession:e,detectSessionInUrl:n,storage:i,userStorage:o,flowType:u,lock:d,debug:f,throwOnError:m,fetch:_,hasCustomAuthorizationHeader:Object.keys(this.headers).some(S=>S.toLowerCase()==="authorization")})}_initRealtimeClient(r){return new Sx(this.realtimeUrl.href,ht(ht({},r),{},{params:ht(ht({},{apikey:this.supabaseKey}),r?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,e)=>{this._handleTokenChanged(r,"CLIENT",e?.access_token)})}_handleTokenChanged(r,e,n){(r==="TOKEN_REFRESHED"||r==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):r==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const w0=(r,e,n)=>new EE(r,e,n);function CE(){if(typeof window<"u")return!1;const r=globalThis.process;if(!r)return!1;const e=r.version;if(e==null)return!1;const n=e.match(/^v(\d+)\./);return n?parseInt(n[1],10)<=18:!1}CE()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const NE="https://nqoebdqpifquzmyefbjo.supabase.co",OE="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5xb2ViZHFwaWZxdXpteWVmYmpvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjkzNzkyOTEsImV4cCI6MjA4NDk1NTI5MX0.EjhqigLHVDSmDLvLvNtWzexfnBl-5iSXIfSjMq1KqzQ",qn=w0(NE,OE),S0=Z.createContext(),kE=({children:r})=>{const[e,n]=Z.useState(null),[i,o]=Z.useState(null),[c,u]=Z.useState(!0);Z.useEffect(()=>{let b=null;return(async()=>{try{if(qn){const{data:w,error:x}=await qn.auth.getSession();if(x)throw x;o(w.session),n(w.session?.user||null);const{data:A}=qn.auth.onAuthStateChange((E,D)=>{o(D),n(D?.user||null)});b=A.subscription}else{const w=localStorage.getItem("vibe_mock_user");if(w)try{n(JSON.parse(w))}catch(x){console.error("Failed to parse stored user",x)}}}catch(w){console.warn("Auth initialization failed (using mock fallbacks):",w)}finally{u(!1)}})(),()=>{b&&b.unsubscribe()}},[]);const d=async()=>{try{if(qn){const{error:b}=await qn.auth.signInWithOAuth({provider:"google"});if(b)throw b}else throw new Error("Supabase not configured")}catch(b){console.warn("Google Login failed (likely disabled in Supabase):",b.message),_("google_user",{username:"Google User"})}},f=async(b,S)=>{try{if(qn){const{error:w}=await qn.auth.signInWithPassword({email:b,password:S});if(w)throw w}else _(b)}catch(w){if(console.warn("Login failed (attempting mock fallback):",w.message),b.includes("guest")||w.message.includes("configured"))_(b,{username:"Guest Vibe"});else throw w}},m=async(b,S,w)=>{try{if(qn){const{error:x}=await qn.auth.signUp({email:b,password:S,options:{data:w}});if(x)throw x}else throw new Error("Supabase not configured")}catch(x){console.warn("Registration failed (using Mock):",x.message),_(b,w)}},y=async()=>{qn?await qn.auth.signOut():(localStorage.removeItem("vibe_mock_user"),n(null))},_=(b,S={})=>{const w={id:b||"alex_vibe",email:b.includes("@")?b:`${b}@vibe.music`,user_metadata:{username:S.username||b.split("@")[0],...S}};localStorage.setItem("vibe_mock_user",JSON.stringify(w)),n(w)};return g.jsx(S0.Provider,{value:{user:e,login:f,register:m,logout:y,loginGoogle:d,loading:c},children:!c&&r})},us=()=>Z.useContext(S0),RE="https://nqoebdqpifquzmyefbjo.supabase.co",jE="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5xb2ViZHFwaWZxdXpteWVmYmpvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjkzNzkyOTEsImV4cCI6MjA4NDk1NTI5MX0.EjhqigLHVDSmDLvLvNtWzexfnBl-5iSXIfSjMq1KqzQ",_o=w0(RE,jE),T0=Z.createContext(),DE=()=>{const r=Z.useContext(T0);if(!r)throw new Error("useNotification must be used within NotificationProvider");return r},ME=({children:r})=>{const[e,n]=Z.useState([]),{user:i}=us(),o=d=>{switch(d){case"POINTS":return"success";case"alert":return"error";default:return"info"}},c=Z.useCallback((d,f="info")=>{const m=Date.now();n(y=>[...y,{id:m,message:d,type:f}]),setTimeout(()=>{n(y=>y.filter(_=>_.id!==m))},5e3)},[]),u=Z.useCallback(d=>{n(f=>f.filter(m=>m.id!==d))},[]);return Z.useEffect(()=>{if(!i||!_o)return;let d=null;return(async()=>{try{const{data:m,error:y}=await _o.from("notifications").select("*").eq("user_id",i.id).order("created_at",{ascending:!1}).limit(5);d=_o.channel("public:notifications").on("postgres_changes",{event:"INSERT",schema:"public",table:"notifications",filter:`user_id=eq.${i.id}`},_=>{const b=_.new;c(b.message,o(b.type))}).subscribe()}catch(m){console.error("Notification setup failed:",m)}})(),()=>{d&&_o&&_o.removeChannel(d)}},[i,c]),g.jsxs(T0.Provider,{value:{addNotification:c},children:[r,g.jsx("div",{className:"notification-container",children:e.map(d=>g.jsxs("div",{className:`notification-toast ${d.type} animate-slide-in`,onClick:()=>u(d.id),children:[g.jsxs("span",{className:"toast-icon",children:[d.type==="success"&&"",d.type==="error"&&"",d.type==="info"&&""]}),g.jsx("span",{className:"toast-message",children:d.message})]},d.id))})]})},UE=({activePage:r,user:e,onSearchClick:n})=>{const{logout:i}=us();return g.jsxs("div",{className:"h-16 border-b border-[var(--glass-border)] flex items-center justify-between px-6 bg-[var(--bg-deep)]/80 backdrop-blur-md sticky top-0 z-40",children:[g.jsx("div",{className:"flex items-center gap-4",children:g.jsx("h2",{className:"text-xl capitalize text-white",children:r.replace("-"," ")})}),g.jsx("div",{className:"flex-1 max-w-xl mx-8 relative group cursor-pointer",onClick:n,children:g.jsxs("div",{className:"w-full bg-[var(--bg-panel)] border border-[var(--glass-border)] rounded-full py-2 px-4 flex items-center text-[var(--text-muted)] group-hover:border-[var(--primary)] transition-colors",children:[g.jsx(t0,{size:16,className:"mr-3"}),g.jsx("span",{className:"text-sm",children:"Search tracks, artists, vibes... (Cmd+K)"})]})}),g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsxs("button",{className:"relative p-2 text-[var(--text-muted)] hover:text-white transition-colors",children:[g.jsx(OS,{size:20}),0>0]}),g.jsx("div",{className:"h-8 w-[1px] bg-[var(--glass-border)] mx-2"}),g.jsx("div",{className:"flex items-center gap-3",children:g.jsxs("div",{className:"text-right hidden md:block",children:[g.jsxs("div",{className:"flex flex-col items-end mr-3",children:[g.jsx("span",{className:"font-bold text-white text-sm",children:e?.username||e?.name}),g.jsxs("div",{className:"flex gap-3 text-xs",children:[g.jsxs("span",{className:"text-gray-400 flex items-center gap-1",title:"Silver Vibes (Common)",children:[" ",e?.silverCoins||0]}),g.jsxs("span",{className:"text-yellow-400 flex items-center gap-1 font-bold",title:"Golden Vibez (Premium)",children:[" ",e?.goldenCoins||0]})]})]}),g.jsx("div",{className:"w-9 h-9 rounded-full bg-gradient-to-tr from-[var(--primary)] to-purple-500 flex items-center justify-center text-white font-bold text-sm shadow-lg shadow-blue-500/20",children:e?.avatar_url?g.jsx("img",{src:e.avatar_url,alt:"Profile",className:"w-full h-full rounded-full object-cover"}):(e?.username?.[0]||"U").toUpperCase()})]})})]})]})},zE=()=>{const[r,e]=Z.useState(()=>{const i=localStorage.getItem("vibe-theme");return i||(window.matchMedia("(prefers-color-scheme: light)").matches?"light":"dark")});return Z.useEffect(()=>{document.documentElement.setAttribute("data-theme",r),localStorage.setItem("vibe-theme",r)},[r]),{theme:r,toggleTheme:()=>{e(i=>i==="dark"?"light":"dark")}}},BE=({activePage:r,setActivePage:e})=>{const n=[{name:"Home",icon:g.jsx(tT,{size:24}),id:"home"},{name:"Explore",icon:g.jsx(KS,{size:24}),id:"explore"},{name:"Community",icon:g.jsx(s0,{size:24}),id:"community"},{name:"Forum",icon:g.jsx(Qv,{size:24}),id:"forum"},{name:"Profile",icon:g.jsx(n0,{size:24}),id:"profile"},{name:"Shop",icon:g.jsx(AT,{size:24}),id:"shop"},{name:"Premium",icon:g.jsx(Mf,{size:24}),id:"premium"},{name:"Vinyl Goal",icon:g.jsx(rf,{size:24}),id:"road-to-vinyl"},{name:"Library",icon:g.jsx(Bo,{size:24}),id:"library"}],{theme:i,toggleTheme:o}=zE();return g.jsxs("div",{className:"sidebar-container glass",children:[g.jsx("div",{className:"logo",children:g.jsx("span",{className:"vibe-text",children:"VIBE"})}),g.jsx("nav",{className:"nav-menu",children:n.map(c=>g.jsxs("div",{className:`nav-item ${r===(c.id||c.name.toLowerCase())?"active":""}`,onClick:()=>e(c.id||c.name.toLowerCase()),children:[g.jsx("span",{className:"icon",children:c.icon}),g.jsx("span",{className:"label",children:c.name})]},c.id))}),g.jsxs("div",{className:"sidebar-footer",children:[g.jsxs("div",{className:"switches-container",children:[g.jsx("button",{className:"theme-toggle",onClick:o,title:"Toggle Theme",children:i==="dark"?g.jsx(MT,{size:20}):g.jsx(cT,{size:20})}),g.jsx("input",{type:"checkbox",className:"togglesw",defaultChecked:!1,onChange:()=>window.location.href="http://localhost:5174",title:"Switch to Polish"})]}),g.jsxs("div",{className:"user-profile",children:[g.jsx("div",{className:"avatar"}),g.jsx("span",{children:"User Profile"})]})]})]})},qE=()=>g.jsx("div",{className:"waveform",children:[...Array(40)].map((r,e)=>g.jsx("div",{className:"wave-bar",style:{height:`${Math.random()*100}%`}},e))}),LE=({onRate:r})=>g.jsx("div",{className:"rating-input",children:[1,2,3,4,5].map(e=>g.jsx("span",{onClick:()=>r(e),className:"star",children:""},e))}),VE=({track:r,onRate:e})=>{const[n,i]=Z.useState(!1),o=c=>{i(!0),e&&e(10)};return g.jsxs("div",{className:"track-card glass animate-fade",children:[g.jsxs("div",{className:"track-main",children:[g.jsxs("div",{className:"track-header",children:[g.jsx("div",{className:"track-art-small"}),g.jsxs("div",{className:"track-info",children:[g.jsx("h3",{children:r.title}),g.jsx("p",{children:r.artist})]})]}),g.jsx(qE,{})]}),g.jsxs("div",{className:"track-footer",children:[g.jsxs("div",{className:"stats",children:[g.jsx("div",{className:"rating-area",children:n?g.jsx("span",{className:"rated",children:"Voted (Silver)"}):g.jsx(LE,{onRate:o})}),g.jsx("div",{className:"gold-action",title:"Send Golden Vibez",children:g.jsx("button",{className:"gold-btn animate-pulse",onClick:()=>{const c=prompt("How many Golden Coins to send? (1-500)");c&&c>0&&alert(`Sent ${c} Golden Vibez to ${r.artist}!`)},children:" Give Gold"})}),g.jsxs("div",{className:"like-action",children:[g.jsx(Uf,{size:18,className:"icon-action"}),g.jsxs("span",{className:"likes",children:[r.likes,"K"]})]})]}),g.jsxs("button",{className:"premium-button small",children:[g.jsx(e0,{size:16,fill:"currentColor"})," Play"]})]})]})},IE=({onRate:r})=>{const e=[{id:1,title:"Cybernetic Soul",artist:"EON",likes:34},{id:2,title:"Neon Dreamz",artist:"AVA",likes:21},{id:3,title:"Obsidian Pulse",artist:"Vortex",likes:15},{id:4,title:"Quantum Rhythm",artist:"Flux",likes:42},{id:5,title:"Void Echoes",artist:"Nullptr",likes:28}];return g.jsxs("div",{className:"feed-container",children:[g.jsxs("div",{className:"feed-header",children:[g.jsx("h1",{children:"Feed"}),g.jsxs("div",{className:"feed-tabs",children:[g.jsx("span",{className:"active",children:"For You"}),g.jsx("span",{children:"Following"})]})]}),g.jsx("div",{className:"track-list",children:e.map(n=>g.jsx(VE,{track:n,onRate:r},n.id))})]})},PE=({currentTrack:r})=>{const[e,n]=Z.useState(!1);return r?g.jsxs("div",{className:"player-container glass",children:[g.jsxs("div",{className:"track-display",children:[g.jsx("div",{className:"track-art"}),g.jsxs("div",{className:"track-meta",children:[g.jsx("p",{className:"now-playing",children:"Now Playing"}),g.jsx("h4",{children:r.title}),g.jsx("p",{className:"artist",children:r.artist})]})]}),g.jsxs("div",{className:"player-controls",children:[g.jsx("button",{className:"control-btn","aria-label":"previous",children:g.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"white",children:g.jsx("path",{d:"M6 18V6h2v12H6zm3.5-6L18 6v12l-8.5-6z"})})}),g.jsx("button",{className:"play-btn","aria-label":"play",onClick:()=>n(!e),children:e?g.jsx("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"white",children:g.jsx("path",{d:"M6 19h4V5H6v14zm8-14v14h4V5h-4z"})}):g.jsx("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"white",children:g.jsx("path",{d:"M8 5v14l11-7z"})})}),g.jsx("button",{className:"control-btn","aria-label":"next",children:g.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"white",children:g.jsx("path",{d:"M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z"})})})]}),g.jsx("div",{className:"progress-container",children:g.jsx("div",{className:"progress-bar",children:g.jsx("div",{className:"progress-fill"})})})]}):null},HE=({user:r})=>{if(!r)return null;const e=5e4,n=Math.min(r.vibePoints/e*100,100);return g.jsxs("div",{className:"profile-container animate-fade",children:[g.jsxs("div",{className:"profile-header glass",children:[g.jsx("div",{className:"profile-avatar-large"}),g.jsxs("div",{className:"profile-info",children:[g.jsx("h1",{children:r.name}),g.jsxs("p",{className:"handle",children:["@",r.id||"alex_vibe"]}),g.jsxs("div",{className:"badges",children:[g.jsx("span",{className:"badge",children:"PRODUCER"}),g.jsx("span",{className:"badge",children:"VERIFIED"})]})]}),g.jsx("button",{className:"settings-btn",children:g.jsx(wT,{size:20})})]}),g.jsxs("div",{className:"stats-grid",children:[g.jsxs("div",{className:"stat-card glass",children:[g.jsx("div",{className:"stat-icon",children:g.jsx(qo,{className:"accent-red",size:24})}),g.jsx("div",{className:"stat-value",children:r.vibePoints.toLocaleString()}),g.jsx("div",{className:"stat-label",children:"Vibe Points"})]}),g.jsxs("div",{className:"stat-card glass",children:[g.jsx("div",{className:"stat-icon",children:g.jsx(IS,{className:"accent-cyan",size:24})}),g.jsx("div",{className:"stat-value",children:r.tracks.length}),g.jsx("div",{className:"stat-label",children:"Tracks"})]}),g.jsxs("div",{className:"stat-card glass",children:[g.jsx("div",{className:"stat-icon",children:g.jsx(s0,{size:24})}),g.jsx("div",{className:"stat-value",children:"12.5k"}),g.jsx("div",{className:"stat-label",children:"Fans"})]})]}),g.jsxs("div",{className:"vinyl-goal-card glass",children:[g.jsxs("div",{className:"vinyl-header",children:[g.jsx("h3",{children:"Vinyl Goal "}),g.jsxs("span",{children:[r.vibePoints.toLocaleString()," / ",e.toLocaleString()," Points"]})]}),g.jsx("div",{className:"progress-container",children:g.jsx("div",{className:"progress-track","data-testid":"vinyl-progress",children:g.jsx("div",{className:"progress-fill",style:{width:`${Math.min(n,100)}%`}})})}),g.jsx("p",{className:"goal-desc",children:n>=100?"Congratulations! You've earned a Vinyl Release! ":`Earn ${(r.vinylThreshold-r.vibePoints).toLocaleString()} more points to get your music pressed on Vinyl.`})]}),g.jsxs("div",{className:"profile-utility-grid",children:[g.jsxs("div",{className:"referral-section glass",children:[g.jsx("h3",{children:"Your Referral Link"}),g.jsx("p",{children:"Bring 10 friends to earn 2,000 points!"}),g.jsxs("div",{className:"link-copy",children:[g.jsx("code",{children:r.referralLink}),g.jsx("button",{className:"premium-button",children:"Copy"})]})]}),g.jsxs("div",{className:"points-info glass",children:[g.jsx("h3",{children:"Ways to Earn"}),g.jsxs("ul",{children:[g.jsxs("li",{children:[g.jsx("strong",{children:"Rate Tracks:"})," +5 per rate"]}),g.jsxs("li",{children:[g.jsx("strong",{children:"Upload Music:"})," +50 per track"]}),g.jsxs("li",{children:[g.jsx("strong",{children:"Refer Friend:"})," +200 per sign-up"]})]})]})]}),g.jsxs("div",{className:"my-tracks",children:[g.jsx("h2",{children:"My Releases"}),g.jsx("div",{className:"track-grid",children:r.tracks.map(i=>g.jsxs("div",{className:"mini-track-card glass",children:[g.jsx("div",{className:"mini-art"}),g.jsxs("div",{className:"mini-info",children:[g.jsx("h4",{children:i.title}),g.jsxs("div",{className:"rating",children:[" ",i.rating]})]})]},i.id))})]})]})},$E=({onUpgrade:r})=>{const[e,n]=Z.useState("monthly"),i=[{name:"Listener",price:"Free",icon:g.jsx(qo,{size:24}),features:["Ad-supported listening","Standard Audio Quality","Follow 5 Artists"],cta:"Current Plan",active:!0},{name:"Listener Pro",price:e==="monthly"?"$2.00":"$20.00",period:e==="monthly"?"/mo":"/yr",icon:g.jsx(QS,{size:24}),color:"blue",features:["Ad-Free Listening","Promote 1 Own Album","Join Rankings","High Quality Audio"],cta:"Upgrade"},{name:"Beginner / Supporter",price:e==="monthly"?"$4.00":"$40.00",period:e==="monthly"?"/mo":"/yr",icon:g.jsx(Uf,{size:24}),color:"purple",features:["Ad-Free Experience","Upload 5 Tracks","Basic Analytics","Support the Platform","Supporter Badge"],cta:"Start Creating"},{name:"Pro Artist",price:e==="monthly"?"$9.99":"$99.99",period:e==="monthly"?"/mo":"/yr",icon:g.jsx(qf,{size:24}),color:"cyan",features:["Unlimited Uploads","Hi-Res Audio (FLAC)","Advanced Analytics","Verification Badge","Keep 100% Royalties"],cta:"Go Pro",highlight:!0},{name:"Label",price:e==="monthly"?"$49.99":"$499.99",period:e==="monthly"?"/mo":"/yr",icon:g.jsx(Mf,{size:24}),color:"gold",features:["Manage 5 Artists","Priority Support","Trend Forecasting","Legal Aid Access","API Access"],cta:"Contact Sales"}];return g.jsxs("div",{className:"premium-container animate-fade",children:[g.jsxs("div",{className:"premium-header",children:[g.jsx("h1",{children:"Upgrade Your Career"}),g.jsx("p",{children:"Tools for serious artists. Cancel anytime."}),g.jsxs("div",{className:"billing-toggle",children:[g.jsx("span",{className:e==="monthly"?"active":"",onClick:()=>n("monthly"),children:"Monthly"}),g.jsx("span",{className:e==="yearly"?"active":"",onClick:()=>n("yearly"),children:"Yearly (-20%)"})]})]}),g.jsx("div",{className:"tier-grid",children:i.map((o,c)=>g.jsxs("div",{className:`tier-card glass ${o.highlight?"highlight":""}`,children:[o.highlight&&g.jsx("div",{className:"badge-pop",children:"MOST POPULAR"}),g.jsx("div",{className:`tier-icon ${o.color||""}`,children:o.icon}),g.jsx("h3",{children:o.name}),g.jsxs("div",{className:"price-block",children:[g.jsx("span",{className:"price",children:o.price}),g.jsx("span",{className:"period",children:o.period})]}),g.jsx("ul",{className:"features",children:o.features.map((u,d)=>g.jsxs("li",{children:[g.jsx(RS,{size:16,className:"check-icon"})," ",u]},d))}),g.jsx("button",{className:`tier-btn ${o.highlight?"glow":"outline"}`,disabled:o.active,onClick:()=>!o.active&&r(o.name),children:o.cta})]},c))})]})},GE=({fetchLeaderboard:r})=>{const[e,n]=Z.useState([]);return Z.useEffect(()=>{r&&r().then(i=>n(i))},[r]),g.jsxs("div",{className:"community-container animate-fade",children:[g.jsxs("div",{className:"community-header",children:[g.jsx("h1",{children:"Community"}),g.jsx("p",{children:"Connect with other creators and earn Vibe Points to release your record."})]}),g.jsxs("div",{className:"community-grid",children:[g.jsxs("section",{className:"leaderboard glass",children:[g.jsxs("div",{className:"section-title",children:[g.jsx(rf,{className:"accent-gold",size:24}),g.jsx("h3",{children:"Top Vibes"})]}),g.jsx("div",{className:"leader-list","data-testid":"trending-artists",children:e.length===0?g.jsx("p",{className:"loading-text",children:"Loading Leaderboard..."}):e.map((i,o)=>g.jsxs("div",{className:`leader-item ${o<3?"top-tier":""}`,children:[g.jsxs("span",{className:"rank",children:["#",o+1]}),g.jsxs("div",{className:"leader-info",children:[g.jsx("span",{className:"name",children:i.username}),o===0&&g.jsx("span",{className:"badge",children:" King"}),o===1&&g.jsx("span",{className:"badge",children:" Prince"})]}),g.jsxs("span",{className:"points",children:[i.points," pts"]})]},i.id||i.username))})]}),g.jsxs("section",{className:"rating-rules glass",children:[g.jsxs("div",{className:"section-title",children:[g.jsx(qT,{className:"accent-cyan",size:24}),g.jsx("h3",{children:"How it Works"})]}),g.jsxs("ul",{children:[g.jsxs("li",{children:[g.jsx(Bo,{size:16})," Rate tracks to earn ",g.jsx("strong",{children:"Vibe Points"}),"."]}),g.jsxs("li",{children:[g.jsx(rf,{size:16})," Top 10 users get boosted exposure."]}),g.jsxs("li",{children:[g.jsx("div",{className:"vinyl-icon",children:""})," Reach ",g.jsx("strong",{children:"50,000 Points"})," for Vinyl Release."]})]})]})]})]})},FE=({onNavigate:r})=>{const{data:e,loading:n}=useExpansion();if(n)return g.jsx("div",{className:"loading-state",children:"Initializing Vibe OS..."});if(!e)return g.jsx("div",{className:"error-state",children:"System Offline"});const i=({title:o,icon:c,items:u,color:d})=>g.jsxs("section",{className:"explore-section",children:[g.jsxs("div",{className:"section-header",children:[g.jsx("div",{className:`icon-box ${d}`,children:g.jsx(c,{size:24})}),g.jsx("h2",{children:o})]}),g.jsx("div",{className:"bento-grid",children:u.slice(0,8).map((f,m)=>g.jsxs("div",{className:"bento-card glass hover-glow",onClick:()=>{o==="Game Arena"&&r("game"),f.name==="AI Lyric Assistant"&&r("lyric-assistant"),f.name==="Beat Matcher"&&r("beat-matcher"),f.name==="Chord Wizard"&&r("chord-wizard"),f.name==="Verse Ping Pong"&&r("game"),f.name==="Rap Battle Arena"&&r("rap-battle"),f.name==="Services Hub"&&r("services"),f.name==="Collaboration Station"&&r("collab"),f.name==="Voice FX Lab"&&r("voice-fx")},children:[g.jsxs("div",{className:"card-content",children:[g.jsx("h4",{children:f.name||f.title}),g.jsx("p",{children:f.desc})]}),g.jsx("div",{className:"card-action",children:g.jsx(ArrowRight,{size:16})})]},m))})]});return g.jsxs("div",{className:"explore-container animate-fade",children:[g.jsxs("header",{className:"explore-hero glass",children:[g.jsx("h1",{children:"Vibe Expansion Hub"}),g.jsx("p",{children:"Access adequate tools, monetization channels, and collaborative games."})]}),g.jsxs("div",{className:"explore-content",children:[g.jsx(i,{title:"Pro Tools",icon:Wrench,items:e.tools,color:"cyan"}),g.jsx(i,{title:"Game Arena",icon:Gamepad2,items:e.games,color:"accent-red"}),g.jsx(i,{title:"Marketplace",icon:Briefcase,items:[{name:"Services Hub",desc:"Hire pros for mixing, mastering & beats."},{name:"Collaboration Station",desc:"Share projects & stems."}],color:"accent-gold"}),g.jsx(i,{title:"Expansion Store",icon:DollarSign,items:e.monetization,color:"accent-gold"})]})]})},YE=({onPurchase:r})=>{const e=[{id:1,name:"Supporter",price:"$10",icon:g.jsx(Uf,{size:32,className:"accent-red"}),features:["Free License for MASTER! Suit!","Import 1 Full Album (One Time)"],color:"red"},{id:2,name:"Super Supporter",price:"$20",icon:g.jsx(Bo,{size:32,className:"accent-cyan"}),features:["Everything in Supporter","Import 2 Full Albums"],highlight:!0,color:"cyan"},{id:3,name:"Mega Supporter",price:"$30",icon:g.jsx(qo,{size:32,className:"accent-gold"}),features:["Everything in Supporter","Import 3 Full Albums"],color:"gold"},{id:4,name:"Gargantuan Supporter",price:"$100",icon:g.jsx(Mf,{size:32,className:"accent-purple"}),features:["All Previous Benefits","Top of Charts Placement (1 Week)","Highlighted Profile"],premium:!0,color:"purple"},{id:5,name:"ABSOLUTE SUPPORTER",price:"$1000",icon:g.jsx(WS,{size:40,className:"rainbow-text"}),features:["10 Albums on Main Page","Music Video Gen Tools Access","Own Music Video Channel","5x Custom T-Shirts (By Us)","10x Custom Posters (By Us)"],absolute:!0,color:"rainbow"}];return g.jsxs("div",{className:"shop-container animate-fade",children:[g.jsxs("div",{className:"shop-header",children:[g.jsx("h1",{children:"Support Our Work"}),g.jsx("p",{children:"One-time contributions to fuel the platform and your career. No subscriptions."})]}),g.jsx("div",{className:"package-grid support-grid",children:e.map(n=>g.jsxs("div",{className:`package-card glass ${n.highlight?"highlight":""} ${n.premium?"premium":""} ${n.absolute?"absolute-tier":""}`,children:[n.premium&&g.jsx("div",{className:"badge",children:"LEGEND"}),n.absolute&&g.jsx("div",{className:"badge absolute-badge",children:"GODLIKE"}),g.jsx("div",{className:"tier-icon-wrapper",children:n.icon}),g.jsx("h3",{children:n.name}),g.jsx("div",{className:"price-tag",children:n.price}),g.jsx("div",{className:"pay-type",children:"one-time"}),g.jsx("ul",{className:"support-features",children:n.features.map((i,o)=>g.jsx("li",{children:i},o))}),g.jsxs("button",{className:`support-btn ${n.color}`,onClick:()=>r(n.price),children:["Support ",n.price]})]},n.id))})]})},WE=({onSwitchToLogin:r})=>{const[e,n]=Z.useState(""),[i,o]=Z.useState(""),[c,u]=Z.useState(""),[d,f]=Z.useState(!1),{register:m}=us(),{addNotification:y}=DE(),_=async b=>{b.preventDefault(),f(!0);try{if(i.length<6)throw new Error("Password must be at least 6 characters long");if(!c.trim())throw new Error("Username is required");await m(e,i,{username:c}),y("Registration successful! Welcome to VibeMusic.","success")}catch(S){console.error(S),y(S.message||"Registration failed","error")}finally{f(!1)}};return g.jsx("div",{className:"register-container",children:g.jsxs("div",{className:"register-card glass",children:[g.jsxs("div",{className:"register-header",children:[g.jsx("h2",{children:"Join VibeMusic"}),g.jsx("p",{className:"text-muted",children:"Create your sonic identity."})]}),g.jsxs("form",{onSubmit:_,children:[g.jsxs("div",{className:"input-group",children:[g.jsx("label",{children:"Username"}),g.jsx(n0,{size:18}),g.jsx("input",{type:"text",placeholder:"dj_vibe",value:c,onChange:b=>u(b.target.value),required:!0})]}),g.jsxs("div",{className:"input-group",children:[g.jsx("label",{children:"Email"}),g.jsx(Zv,{size:18}),g.jsx("input",{type:"email",placeholder:"you@example.com",value:e,onChange:b=>n(b.target.value),required:!0})]}),g.jsxs("div",{className:"input-group",children:[g.jsx("label",{children:"Password"}),g.jsx(zf,{size:18}),g.jsx("input",{type:"password",placeholder:"",value:i,onChange:b=>o(b.target.value),required:!0})]}),g.jsx("button",{type:"submit",disabled:d,className:"register-btn",children:d?"Creating Account...":g.jsxs(g.Fragment,{children:[g.jsx(HT,{size:20}),"Sign Up"]})})]}),g.jsxs("div",{className:"switch-mode",children:["Already have an account?",g.jsx("button",{onClick:r,children:"Log in"})]})]})})},XE=()=>{const{login:r,loginGoogle:e}=us(),[n,i]=Z.useState(!1),[o,c]=Z.useState(""),[u,d]=Z.useState(""),[f,m]=Z.useState(!1),y=async _=>{_.preventDefault(),m(!0);try{await r(o,u)}catch(b){console.error("Login failed:",b)}finally{m(!1)}};return n?g.jsx(WE,{onSwitchToLogin:()=>i(!1)}):g.jsx("div",{className:"login-container",children:g.jsxs("div",{className:"login-card glass",children:[g.jsxs("div",{className:"login-header",children:[g.jsx("div",{className:"logo-pulse",children:g.jsx(Bo,{size:40,className:"accent-cyan"})}),g.jsx("h1",{children:"Welcome Back"}),g.jsx("p",{children:"Your studio awaits."})]}),g.jsxs("form",{onSubmit:y,children:[g.jsxs("div",{className:"input-group",children:[g.jsx(Zv,{size:18,className:"input-icon"}),g.jsx("input",{type:"email",placeholder:"Email",value:o,onChange:_=>c(_.target.value),required:!0})]}),g.jsxs("div",{className:"input-group",children:[g.jsx(zf,{size:18,className:"input-icon"}),g.jsx("input",{type:"password",placeholder:"Password",value:u,onChange:_=>d(_.target.value),required:!0})]}),g.jsx("button",{type:"submit",className:"primary-btn glow",disabled:f,children:f?"Signing In...":"Sign In"})]}),g.jsx("div",{className:"divider",children:g.jsx("span",{children:"OR"})}),g.jsxs("button",{onClick:e,className:"google-btn",children:[g.jsx(DS,{size:18}),g.jsx("span",{children:"Continue with Google"})]}),g.jsx("button",{onClick:()=>r("guest@vibe.music","guest123"),className:"guest-btn",children:"Continue as Guest"}),g.jsxs("p",{className:"switch-mode",children:["Don't have an account?",g.jsx("span",{onClick:()=>i(!0),children:"Sign Up"})]})]})})},as=Object.create(null);as.open="0";as.close="1";as.ping="2";as.pong="3";as.message="4";as.upgrade="5";as.noop="6";const Cc=Object.create(null);Object.keys(as).forEach(r=>{Cc[as[r]]=r});const yf={type:"error",data:"parser error"},x0=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",A0=typeof ArrayBuffer=="function",E0=r=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(r):r&&r.buffer instanceof ArrayBuffer,$f=({type:r,data:e},n,i)=>x0&&e instanceof Blob?n?i(e):wv(e,i):A0&&(e instanceof ArrayBuffer||E0(e))?n?i(e):wv(new Blob([e]),i):i(as[r]+(e||"")),wv=(r,e)=>{const n=new FileReader;return n.onload=function(){const i=n.result.split(",")[1];e("b"+(i||""))},n.readAsDataURL(r)};function Sv(r){return r instanceof Uint8Array?r:r instanceof ArrayBuffer?new Uint8Array(r):new Uint8Array(r.buffer,r.byteOffset,r.byteLength)}let Qd;function KE(r,e){if(x0&&r.data instanceof Blob)return r.data.arrayBuffer().then(Sv).then(e);if(A0&&(r.data instanceof ArrayBuffer||E0(r.data)))return e(Sv(r.data));$f(r,!1,n=>{Qd||(Qd=new TextEncoder),e(Qd.encode(n))})}const Tv="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",wo=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let r=0;r<Tv.length;r++)wo[Tv.charCodeAt(r)]=r;const ZE=r=>{let e=r.length*.75,n=r.length,i,o=0,c,u,d,f;r[r.length-1]==="="&&(e--,r[r.length-2]==="="&&e--);const m=new ArrayBuffer(e),y=new Uint8Array(m);for(i=0;i<n;i+=4)c=wo[r.charCodeAt(i)],u=wo[r.charCodeAt(i+1)],d=wo[r.charCodeAt(i+2)],f=wo[r.charCodeAt(i+3)],y[o++]=c<<2|u>>4,y[o++]=(u&15)<<4|d>>2,y[o++]=(d&3)<<6|f&63;return m},QE=typeof ArrayBuffer=="function",Gf=(r,e)=>{if(typeof r!="string")return{type:"message",data:C0(r,e)};const n=r.charAt(0);return n==="b"?{type:"message",data:JE(r.substring(1),e)}:Cc[n]?r.length>1?{type:Cc[n],data:r.substring(1)}:{type:Cc[n]}:yf},JE=(r,e)=>{if(QE){const n=ZE(r);return C0(n,e)}else return{base64:!0,data:r}},C0=(r,e)=>e==="blob"?r instanceof Blob?r:new Blob([r]):r instanceof ArrayBuffer?r:r.buffer,N0="",eC=(r,e)=>{const n=r.length,i=new Array(n);let o=0;r.forEach((c,u)=>{$f(c,!1,d=>{i[u]=d,++o===n&&e(i.join(N0))})})},tC=(r,e)=>{const n=r.split(N0),i=[];for(let o=0;o<n.length;o++){const c=Gf(n[o],e);if(i.push(c),c.type==="error")break}return i};function nC(){return new TransformStream({transform(r,e){KE(r,n=>{const i=n.length;let o;if(i<126)o=new Uint8Array(1),new DataView(o.buffer).setUint8(0,i);else if(i<65536){o=new Uint8Array(3);const c=new DataView(o.buffer);c.setUint8(0,126),c.setUint16(1,i)}else{o=new Uint8Array(9);const c=new DataView(o.buffer);c.setUint8(0,127),c.setBigUint64(1,BigInt(i))}r.data&&typeof r.data!="string"&&(o[0]|=128),e.enqueue(o),e.enqueue(n)})}})}let Jd;function wc(r){return r.reduce((e,n)=>e+n.length,0)}function Sc(r,e){if(r[0].length===e)return r.shift();const n=new Uint8Array(e);let i=0;for(let o=0;o<e;o++)n[o]=r[0][i++],i===r[0].length&&(r.shift(),i=0);return r.length&&i<r[0].length&&(r[0]=r[0].slice(i)),n}function sC(r,e){Jd||(Jd=new TextDecoder);const n=[];let i=0,o=-1,c=!1;return new TransformStream({transform(u,d){for(n.push(u);;){if(i===0){if(wc(n)<1)break;const f=Sc(n,1);c=(f[0]&128)===128,o=f[0]&127,o<126?i=3:o===126?i=1:i=2}else if(i===1){if(wc(n)<2)break;const f=Sc(n,2);o=new DataView(f.buffer,f.byteOffset,f.length).getUint16(0),i=3}else if(i===2){if(wc(n)<8)break;const f=Sc(n,8),m=new DataView(f.buffer,f.byteOffset,f.length),y=m.getUint32(0);if(y>Math.pow(2,21)-1){d.enqueue(yf);break}o=y*Math.pow(2,32)+m.getUint32(4),i=3}else{if(wc(n)<o)break;const f=Sc(n,o);d.enqueue(Gf(c?f:Jd.decode(f),e)),i=0}if(o===0||o>r){d.enqueue(yf);break}}}})}const O0=4;function xt(r){if(r)return iC(r)}function iC(r){for(var e in xt.prototype)r[e]=xt.prototype[e];return r}xt.prototype.on=xt.prototype.addEventListener=function(r,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+r]=this._callbacks["$"+r]||[]).push(e),this};xt.prototype.once=function(r,e){function n(){this.off(r,n),e.apply(this,arguments)}return n.fn=e,this.on(r,n),this};xt.prototype.off=xt.prototype.removeListener=xt.prototype.removeAllListeners=xt.prototype.removeEventListener=function(r,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+r];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+r],this;for(var i,o=0;o<n.length;o++)if(i=n[o],i===e||i.fn===e){n.splice(o,1);break}return n.length===0&&delete this._callbacks["$"+r],this};xt.prototype.emit=function(r){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+r],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(n){n=n.slice(0);for(var i=0,o=n.length;i<o;++i)n[i].apply(this,e)}return this};xt.prototype.emitReserved=xt.prototype.emit;xt.prototype.listeners=function(r){return this._callbacks=this._callbacks||{},this._callbacks["$"+r]||[]};xt.prototype.hasListeners=function(r){return!!this.listeners(r).length};const eu=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,n)=>n(e,0),kn=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),rC="arraybuffer";function k0(r,...e){return e.reduce((n,i)=>(r.hasOwnProperty(i)&&(n[i]=r[i]),n),{})}const aC=kn.setTimeout,oC=kn.clearTimeout;function tu(r,e){e.useNativeTimers?(r.setTimeoutFn=aC.bind(kn),r.clearTimeoutFn=oC.bind(kn)):(r.setTimeoutFn=kn.setTimeout.bind(kn),r.clearTimeoutFn=kn.clearTimeout.bind(kn))}const lC=1.33;function cC(r){return typeof r=="string"?uC(r):Math.ceil((r.byteLength||r.size)*lC)}function uC(r){let e=0,n=0;for(let i=0,o=r.length;i<o;i++)e=r.charCodeAt(i),e<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(i++,n+=4);return n}function R0(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function hC(r){let e="";for(let n in r)r.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(r[n]));return e}function dC(r){let e={},n=r.split("&");for(let i=0,o=n.length;i<o;i++){let c=n[i].split("=");e[decodeURIComponent(c[0])]=decodeURIComponent(c[1])}return e}class fC extends Error{constructor(e,n,i){super(e),this.description=n,this.context=i,this.type="TransportError"}}class Ff extends xt{constructor(e){super(),this.writable=!1,tu(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,n,i){return super.emitReserved("error",new fC(e,n,i)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const n=Gf(e,this.socket.binaryType);this.onPacket(n)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,n={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(this.opts.port)!==443||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const n=hC(e);return n.length?"?"+n:""}}class pC extends Ff{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const n=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let i=0;this._polling&&(i++,this.once("pollComplete",function(){--i||n()})),this.writable||(i++,this.once("drain",function(){--i||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const n=i=>{if(this.readyState==="opening"&&i.type==="open"&&this.onOpen(),i.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(i)};tC(e,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,eC(e,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=R0()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(e,n)}}let j0=!1;try{j0=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const mC=j0;function gC(){}class yC extends pC{constructor(e){if(super(e),typeof location<"u"){const n=location.protocol==="https:";let i=location.port;i||(i=n?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||i!==e.port}}doWrite(e,n){const i=this.request({method:"POST",data:e});i.on("success",n),i.on("error",(o,c)=>{this.onError("xhr post error",o,c)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(n,i)=>{this.onError("xhr poll error",n,i)}),this.pollXhr=e}}class rs extends xt{constructor(e,n,i){super(),this.createRequest=e,tu(this,i),this._opts=i,this._method=i.method||"GET",this._uri=n,this._data=i.data!==void 0?i.data:null,this._create()}_create(){var e;const n=k0(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const i=this._xhr=this.createRequest(n);try{i.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){i.setDisableHeaderCheck&&i.setDisableHeaderCheck(!0);for(let o in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(o)&&i.setRequestHeader(o,this._opts.extraHeaders[o])}}catch{}if(this._method==="POST")try{i.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{i.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(i),"withCredentials"in i&&(i.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(i.timeout=this._opts.requestTimeout),i.onreadystatechange=()=>{var o;i.readyState===3&&((o=this._opts.cookieJar)===null||o===void 0||o.parseCookies(i.getResponseHeader("set-cookie"))),i.readyState===4&&(i.status===200||i.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof i.status=="number"?i.status:0)},0))},i.send(this._data)}catch(o){this.setTimeoutFn(()=>{this._onError(o)},0);return}typeof document<"u"&&(this._index=rs.requestsCount++,rs.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=gC,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete rs.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}rs.requestsCount=0;rs.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",xv);else if(typeof addEventListener=="function"){const r="onpagehide"in kn?"pagehide":"unload";addEventListener(r,xv,!1)}}function xv(){for(let r in rs.requests)rs.requests.hasOwnProperty(r)&&rs.requests[r].abort()}const _C=(function(){const r=D0({xdomain:!1});return r&&r.responseType!==null})();class vC extends yC{constructor(e){super(e);const n=e&&e.forceBase64;this.supportsBinary=_C&&!n}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new rs(D0,this.uri(),e)}}function D0(r){const e=r.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||mC))return new XMLHttpRequest}catch{}if(!e)try{return new kn[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const M0=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class bC extends Ff{get name(){return"websocket"}doOpen(){const e=this.uri(),n=this.opts.protocols,i=M0?{}:k0(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(i.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,n,i)}catch(o){return this.emitReserved("error",o)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const i=e[n],o=n===e.length-1;$f(i,this.supportsBinary,c=>{try{this.doWrite(i,c)}catch{}o&&eu(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=R0()),this.supportsBinary||(n.b64=1),this.createUri(e,n)}}const ef=kn.WebSocket||kn.MozWebSocket;class wC extends bC{createSocket(e,n,i){return M0?new ef(e,n,i):n?new ef(e,n):new ef(e)}doWrite(e,n){this.ws.send(n)}}class SC extends Ff{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const n=sC(Number.MAX_SAFE_INTEGER,this.socket.binaryType),i=e.readable.pipeThrough(n).getReader(),o=nC();o.readable.pipeTo(e.writable),this._writer=o.writable.getWriter();const c=()=>{i.read().then(({done:d,value:f})=>{d||(this.onPacket(f),c())}).catch(d=>{})};c();const u={type:"open"};this.query.sid&&(u.data=`{"sid":"${this.query.sid}"}`),this._writer.write(u).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const i=e[n],o=n===e.length-1;this._writer.write(i).then(()=>{o&&eu(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const TC={websocket:wC,webtransport:SC,polling:vC},xC=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,AC=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function _f(r){if(r.length>8e3)throw"URI too long";const e=r,n=r.indexOf("["),i=r.indexOf("]");n!=-1&&i!=-1&&(r=r.substring(0,n)+r.substring(n,i).replace(/:/g,";")+r.substring(i,r.length));let o=xC.exec(r||""),c={},u=14;for(;u--;)c[AC[u]]=o[u]||"";return n!=-1&&i!=-1&&(c.source=e,c.host=c.host.substring(1,c.host.length-1).replace(/;/g,":"),c.authority=c.authority.replace("[","").replace("]","").replace(/;/g,":"),c.ipv6uri=!0),c.pathNames=EC(c,c.path),c.queryKey=CC(c,c.query),c}function EC(r,e){const n=/\/{2,9}/g,i=e.replace(n,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&i.splice(0,1),e.slice(-1)=="/"&&i.splice(i.length-1,1),i}function CC(r,e){const n={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(i,o,c){o&&(n[o]=c)}),n}const vf=typeof addEventListener=="function"&&typeof removeEventListener=="function",Nc=[];vf&&addEventListener("offline",()=>{Nc.forEach(r=>r())},!1);class yi extends xt{constructor(e,n){if(super(),this.binaryType=rC,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(n=e,e=null),e){const i=_f(e);n.hostname=i.host,n.secure=i.protocol==="https"||i.protocol==="wss",n.port=i.port,i.query&&(n.query=i.query)}else n.host&&(n.hostname=_f(n.host).host);tu(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(i=>{const o=i.prototype.name;this.transports.push(o),this._transportsByName[o]=i}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=dC(this.opts.query)),vf&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Nc.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const n=Object.assign({},this.opts.query);n.EIO=O0,n.transport=e,this.id&&(n.sid=this.id);const i=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](i)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&yi.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(e);n.open(),this.setTransport(n)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",yi.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=e.data,this._onError(n);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let i=0;i<this.writeBuffer.length;i++){const o=this.writeBuffer[i].data;if(o&&(n+=cC(o)),i>0&&n>this._maxPayload)return this.writeBuffer.slice(0,i);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,eu(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,n,i){return this._sendPacket("message",e,n,i),this}send(e,n,i){return this._sendPacket("message",e,n,i),this}_sendPacket(e,n,i,o){if(typeof n=="function"&&(o=n,n=void 0),typeof i=="function"&&(o=i,i=null),this.readyState==="closing"||this.readyState==="closed")return;i=i||{},i.compress=i.compress!==!1;const c={type:e,data:n,options:i};this.emitReserved("packetCreate",c),this.writeBuffer.push(c),o&&this.once("flush",o),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),e()},i=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?i():e()}):this.upgrading?i():e()),this}_onError(e){if(yi.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),vf&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const i=Nc.indexOf(this._offlineEventListener);i!==-1&&Nc.splice(i,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,n),this.writeBuffer=[],this._prevBufferLen=0}}}yi.protocol=O0;class NC extends yi{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let n=this.createTransport(e),i=!1;yi.priorWebsocketSuccess=!1;const o=()=>{i||(n.send([{type:"ping",data:"probe"}]),n.once("packet",_=>{if(!i)if(_.type==="pong"&&_.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;yi.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{i||this.readyState!=="closed"&&(y(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const b=new Error("probe error");b.transport=n.name,this.emitReserved("upgradeError",b)}}))};function c(){i||(i=!0,y(),n.close(),n=null)}const u=_=>{const b=new Error("probe error: "+_);b.transport=n.name,c(),this.emitReserved("upgradeError",b)};function d(){u("transport closed")}function f(){u("socket closed")}function m(_){n&&_.name!==n.name&&c()}const y=()=>{n.removeListener("open",o),n.removeListener("error",u),n.removeListener("close",d),this.off("close",f),this.off("upgrading",m)};n.once("open",o),n.once("error",u),n.once("close",d),this.once("close",f),this.once("upgrading",m),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{i||n.open()},200):n.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const n=[];for(let i=0;i<e.length;i++)~this.transports.indexOf(e[i])&&n.push(e[i]);return n}}let OC=class extends NC{constructor(e,n={}){const i=typeof e=="object"?e:n;(!i.transports||i.transports&&typeof i.transports[0]=="string")&&(i.transports=(i.transports||["polling","websocket","webtransport"]).map(o=>TC[o]).filter(o=>!!o)),super(e,i)}};function kC(r,e="",n){let i=r;n=n||typeof location<"u"&&location,r==null&&(r=n.protocol+"//"+n.host),typeof r=="string"&&(r.charAt(0)==="/"&&(r.charAt(1)==="/"?r=n.protocol+r:r=n.host+r),/^(https?|wss?):\/\//.test(r)||(typeof n<"u"?r=n.protocol+"//"+r:r="https://"+r),i=_f(r)),i.port||(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/";const c=i.host.indexOf(":")!==-1?"["+i.host+"]":i.host;return i.id=i.protocol+"://"+c+":"+i.port+e,i.href=i.protocol+"://"+c+(n&&n.port===i.port?"":":"+i.port),i}const RC=typeof ArrayBuffer=="function",jC=r=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(r):r.buffer instanceof ArrayBuffer,U0=Object.prototype.toString,DC=typeof Blob=="function"||typeof Blob<"u"&&U0.call(Blob)==="[object BlobConstructor]",MC=typeof File=="function"||typeof File<"u"&&U0.call(File)==="[object FileConstructor]";function Yf(r){return RC&&(r instanceof ArrayBuffer||jC(r))||DC&&r instanceof Blob||MC&&r instanceof File}function Oc(r,e){if(!r||typeof r!="object")return!1;if(Array.isArray(r)){for(let n=0,i=r.length;n<i;n++)if(Oc(r[n]))return!0;return!1}if(Yf(r))return!0;if(r.toJSON&&typeof r.toJSON=="function"&&arguments.length===1)return Oc(r.toJSON(),!0);for(const n in r)if(Object.prototype.hasOwnProperty.call(r,n)&&Oc(r[n]))return!0;return!1}function UC(r){const e=[],n=r.data,i=r;return i.data=bf(n,e),i.attachments=e.length,{packet:i,buffers:e}}function bf(r,e){if(!r)return r;if(Yf(r)){const n={_placeholder:!0,num:e.length};return e.push(r),n}else if(Array.isArray(r)){const n=new Array(r.length);for(let i=0;i<r.length;i++)n[i]=bf(r[i],e);return n}else if(typeof r=="object"&&!(r instanceof Date)){const n={};for(const i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=bf(r[i],e));return n}return r}function zC(r,e){return r.data=wf(r.data,e),delete r.attachments,r}function wf(r,e){if(!r)return r;if(r&&r._placeholder===!0){if(typeof r.num=="number"&&r.num>=0&&r.num<e.length)return e[r.num];throw new Error("illegal attachments")}else if(Array.isArray(r))for(let n=0;n<r.length;n++)r[n]=wf(r[n],e);else if(typeof r=="object")for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&(r[n]=wf(r[n],e));return r}const BC=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"];var Me;(function(r){r[r.CONNECT=0]="CONNECT",r[r.DISCONNECT=1]="DISCONNECT",r[r.EVENT=2]="EVENT",r[r.ACK=3]="ACK",r[r.CONNECT_ERROR=4]="CONNECT_ERROR",r[r.BINARY_EVENT=5]="BINARY_EVENT",r[r.BINARY_ACK=6]="BINARY_ACK"})(Me||(Me={}));class qC{constructor(e){this.replacer=e}encode(e){return(e.type===Me.EVENT||e.type===Me.ACK)&&Oc(e)?this.encodeAsBinary({type:e.type===Me.EVENT?Me.BINARY_EVENT:Me.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let n=""+e.type;return(e.type===Me.BINARY_EVENT||e.type===Me.BINARY_ACK)&&(n+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(n+=e.nsp+","),e.id!=null&&(n+=e.id),e.data!=null&&(n+=JSON.stringify(e.data,this.replacer)),n}encodeAsBinary(e){const n=UC(e),i=this.encodeAsString(n.packet),o=n.buffers;return o.unshift(i),o}}class Wf extends xt{constructor(e){super(),this.reviver=e}add(e){let n;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(e);const i=n.type===Me.BINARY_EVENT;i||n.type===Me.BINARY_ACK?(n.type=i?Me.EVENT:Me.ACK,this.reconstructor=new LC(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(Yf(e)||e.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(e),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let n=0;const i={type:Number(e.charAt(0))};if(Me[i.type]===void 0)throw new Error("unknown packet type "+i.type);if(i.type===Me.BINARY_EVENT||i.type===Me.BINARY_ACK){const c=n+1;for(;e.charAt(++n)!=="-"&&n!=e.length;);const u=e.substring(c,n);if(u!=Number(u)||e.charAt(n)!=="-")throw new Error("Illegal attachments");i.attachments=Number(u)}if(e.charAt(n+1)==="/"){const c=n+1;for(;++n&&!(e.charAt(n)===","||n===e.length););i.nsp=e.substring(c,n)}else i.nsp="/";const o=e.charAt(n+1);if(o!==""&&Number(o)==o){const c=n+1;for(;++n;){const u=e.charAt(n);if(u==null||Number(u)!=u){--n;break}if(n===e.length)break}i.id=Number(e.substring(c,n+1))}if(e.charAt(++n)){const c=this.tryParse(e.substr(n));if(Wf.isPayloadValid(i.type,c))i.data=c;else throw new Error("invalid payload")}return i}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,n){switch(e){case Me.CONNECT:return Av(n);case Me.DISCONNECT:return n===void 0;case Me.CONNECT_ERROR:return typeof n=="string"||Av(n);case Me.EVENT:case Me.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&BC.indexOf(n[0])===-1);case Me.ACK:case Me.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class LC{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const n=zC(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function Av(r){return Object.prototype.toString.call(r)==="[object Object]"}const VC=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Wf,Encoder:qC,get PacketType(){return Me}},Symbol.toStringTag,{value:"Module"}));function $n(r,e,n){return r.on(e,n),function(){r.off(e,n)}}const IC=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class z0 extends xt{constructor(e,n,i){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=n,i&&i.auth&&(this.auth=i.auth),this._opts=Object.assign({},i),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[$n(e,"open",this.onopen.bind(this)),$n(e,"packet",this.onpacket.bind(this)),$n(e,"error",this.onerror.bind(this)),$n(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...n){var i,o,c;if(IC.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(n.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const u={type:Me.EVENT,data:n};if(u.options={},u.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const y=this.ids++,_=n.pop();this._registerAckCallback(y,_),u.id=y}const d=(o=(i=this.io.engine)===null||i===void 0?void 0:i.transport)===null||o===void 0?void 0:o.writable,f=this.connected&&!(!((c=this.io.engine)===null||c===void 0)&&c._hasPingExpired());return this.flags.volatile&&!d||(f?(this.notifyOutgoingListeners(u),this.packet(u)):this.sendBuffer.push(u)),this.flags={},this}_registerAckCallback(e,n){var i;const o=(i=this.flags.timeout)!==null&&i!==void 0?i:this._opts.ackTimeout;if(o===void 0){this.acks[e]=n;return}const c=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let d=0;d<this.sendBuffer.length;d++)this.sendBuffer[d].id===e&&this.sendBuffer.splice(d,1);n.call(this,new Error("operation has timed out"))},o),u=(...d)=>{this.io.clearTimeoutFn(c),n.apply(this,d)};u.withError=!0,this.acks[e]=u}emitWithAck(e,...n){return new Promise((i,o)=>{const c=(u,d)=>u?o(u):i(d);c.withError=!0,n.push(c),this.emit(e,...n)})}_addToQueue(e){let n;typeof e[e.length-1]=="function"&&(n=e.pop());const i={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((o,...c)=>(this._queue[0],o!==null?i.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(o)):(this._queue.shift(),n&&n(null,...c)),i.pending=!1,this._drainQueue())),this._queue.push(i),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!e||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:Me.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(i=>String(i.id)===e)){const i=this.acks[e];delete this.acks[e],i.withError&&i.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case Me.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Me.EVENT:case Me.BINARY_EVENT:this.onevent(e);break;case Me.ACK:case Me.BINARY_ACK:this.onack(e);break;case Me.DISCONNECT:this.ondisconnect();break;case Me.CONNECT_ERROR:this.destroy();const i=new Error(e.data.message);i.data=e.data.data,this.emitReserved("connect_error",i);break}}onevent(e){const n=e.data||[];e.id!=null&&n.push(this.ack(e.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const i of n)i.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const n=this;let i=!1;return function(...o){i||(i=!0,n.packet({type:Me.ACK,id:e,data:o}))}}onack(e){const n=this.acks[e.id];typeof n=="function"&&(delete this.acks[e.id],n.withError&&e.data.unshift(null),n.apply(this,e.data))}onconnect(e,n){this.id=e,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this._drainQueue(!0),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Me.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const n=this._anyListeners;for(let i=0;i<n.length;i++)if(e===n[i])return n.splice(i,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const n=this._anyOutgoingListeners;for(let i=0;i<n.length;i++)if(e===n[i])return n.splice(i,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const i of n)i.apply(this,e.data)}}}function ya(r){r=r||{},this.ms=r.min||100,this.max=r.max||1e4,this.factor=r.factor||2,this.jitter=r.jitter>0&&r.jitter<=1?r.jitter:0,this.attempts=0}ya.prototype.duration=function(){var r=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*r);r=(Math.floor(e*10)&1)==0?r-n:r+n}return Math.min(r,this.max)|0};ya.prototype.reset=function(){this.attempts=0};ya.prototype.setMin=function(r){this.ms=r};ya.prototype.setMax=function(r){this.max=r};ya.prototype.setJitter=function(r){this.jitter=r};class Sf extends xt{constructor(e,n){var i;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(n=e,e=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,tu(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((i=n.randomizationFactor)!==null&&i!==void 0?i:.5),this.backoff=new ya({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=e;const o=n.parser||VC;this.encoder=new o.Encoder,this.decoder=new o.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var n;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(n=this.backoff)===null||n===void 0||n.setMin(e),this)}randomizationFactor(e){var n;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(n=this.backoff)===null||n===void 0||n.setJitter(e),this)}reconnectionDelayMax(e){var n;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(n=this.backoff)===null||n===void 0||n.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new OC(this.uri,this.opts);const n=this.engine,i=this;this._readyState="opening",this.skipReconnect=!1;const o=$n(n,"open",function(){i.onopen(),e&&e()}),c=d=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",d),e?e(d):this.maybeReconnectOnOpen()},u=$n(n,"error",c);if(this._timeout!==!1){const d=this._timeout,f=this.setTimeoutFn(()=>{o(),c(new Error("timeout")),n.close()},d);this.opts.autoUnref&&f.unref(),this.subs.push(()=>{this.clearTimeoutFn(f)})}return this.subs.push(o),this.subs.push(u),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push($n(e,"ping",this.onping.bind(this)),$n(e,"data",this.ondata.bind(this)),$n(e,"error",this.onerror.bind(this)),$n(e,"close",this.onclose.bind(this)),$n(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(n){this.onclose("parse error",n)}}ondecoded(e){eu(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,n){let i=this.nsps[e];return i?this._autoConnect&&!i.active&&i.connect():(i=new z0(this,e,n),this.nsps[e]=i),i}_destroy(e){const n=Object.keys(this.nsps);for(const i of n)if(this.nsps[i].active)return;this._close()}_packet(e){const n=this.encoder.encode(e);for(let i=0;i<n.length;i++)this.engine.write(n[i],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,n){var i;this.cleanup(),(i=this.engine)===null||i===void 0||i.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const i=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(o=>{o?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",o)):e.onreconnect()}))},n);this.opts.autoUnref&&i.unref(),this.subs.push(()=>{this.clearTimeoutFn(i)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const vo={};function xo(r,e){typeof r=="object"&&(e=r,r=void 0),e=e||{};const n=kC(r,e.path||"/socket.io"),i=n.source,o=n.id,c=n.path,u=vo[o]&&c in vo[o].nsps,d=e.forceNew||e["force new connection"]||e.multiplex===!1||u;let f;return d?f=new Sf(i,e):(vo[o]||(vo[o]=new Sf(i,e)),f=vo[o]),n.query&&!e.query&&(e.query=n.queryKey),f.socket(n.path,e)}Object.assign(xo,{Manager:Sf,Socket:z0,io:xo,connect:xo});let Ln;const PC=()=>{const{user:r}=us(),[e,n]=Z.useState(""),[i,o]=Z.useState(!1),[c,u]=Z.useState(null),[d,f]=Z.useState("");Z.useEffect(()=>(Ln||(Ln=xo("http://localhost:5000")),Ln.on("connect",()=>console.log("Socket connected")),Ln.on("disconnect",()=>console.log("Socket disconnected")),Ln.on("game_update",_=>{u(_)}),()=>{Ln.off("connect"),Ln.off("game_update"),Ln.disconnect(),Ln=null}),[]);const m=()=>{e&&(Ln.emit("join_game",{roomId:e,username:r?r.name:"Guest"}),o(!0))},y=_=>{_.preventDefault(),d&&(Ln.emit("send_line",{roomId:e,line:d,username:r?r.name:"Guest"}),f(""))};return i?g.jsxs("div",{className:"game-arena animate-fade",children:[g.jsxs("div",{className:"game-header",children:[g.jsxs("h2",{children:["Room: ",e]}),g.jsx("div",{className:"players",children:c?.players.map((_,b)=>g.jsx("div",{className:"player-badge",children:_.username},b))})]}),g.jsxs("div",{className:"rhyme-feed glass",children:[c?.lines.length===0&&g.jsx("div",{className:"empty-state",children:"Waiting for the first bar..."}),c?.lines.map((_,b)=>g.jsxs("div",{className:`rhyme-bubble ${_.username===r?.name?"mine":"opponent"}`,children:[g.jsx("span",{className:"rhyme-author",children:_.username}),g.jsx("p",{children:_.text})]},b))]}),g.jsxs("form",{className:"rhyme-input",onSubmit:y,children:[g.jsx("input",{type:"text",value:d,onChange:_=>f(_.target.value),placeholder:"Drop a bar...",autoFocus:!0}),g.jsx("button",{type:"submit",children:g.jsx(Bf,{size:20})})]})]}):g.jsxs("div",{className:"game-lobby glass animate-fade",children:[g.jsxs("h1",{children:[g.jsx(Jv,{className:"accent-gold"})," Verse Ping Pong "]}),g.jsx("p",{children:"Create or join a room to start battling."}),g.jsxs("div",{className:"lobby-controls",children:[g.jsx("input",{type:"text",placeholder:"Enter Room Code (e.g. RAP1)",value:e,onChange:_=>n(_.target.value)}),g.jsx("button",{onClick:m,className:"premium-button",children:"Enter Arena"})]})]})},Ev="http://localhost:5000/api",HC=()=>{const{user:r}=us(),[e,n]=Z.useState([]),[i,o]=Z.useState("all"),[c,u]=Z.useState(!1),[d,f]=Z.useState(!1),[m,y]=Z.useState("");Z.useEffect(()=>{_()},[i]);const _=async()=>{const x=await(await fetch(`${Ev}/forum/threads?category=${i}`)).json();n(x)},b=w=>{w==="18+"&&!c?window.confirm("Content Warning: This section contains mature themes regarding industry nightlife, legal disputes, and uncensored feedback. Are you over 18?")&&(u(!0),o(w)):o(w)},S=async w=>{w.preventDefault();const x={title:m,category:i==="all"?"Production":i,author:r?r.name:"Guest",isNSFW:i==="18+"};await fetch(`${Ev}/forum/create`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(x)}),y(""),f(!1),_()};return g.jsxs("div",{className:"forum-container animate-fade",children:[g.jsxs("div",{className:"forum-sidebar",children:[g.jsx("h3",{children:"Vibe Forums"}),g.jsxs("ul",{children:[g.jsx("li",{className:i==="all"?"active":"",onClick:()=>b("all"),children:"All Discussions"}),g.jsx("li",{className:i==="Production"?"active":"",onClick:()=>b("Production"),children:"Production"}),g.jsx("li",{className:i==="Business"?"active":"",onClick:()=>b("Business"),children:"Business"}),g.jsxs("li",{className:`nsfw-link ${i==="18+"?"active":""}`,onClick:()=>b("18+"),children:[g.jsx(HS,{size:16})," After Dark (18+)"]})]}),g.jsx("button",{className:"create-btn",onClick:()=>f(!d),children:"Start Thread"})]}),g.jsxs("div",{className:"forum-content",children:[i==="18+"&&g.jsxs("div",{className:"nsfw-banner",children:[g.jsx(VT,{size:20}),"You are viewing the After Dark section. Moderation is limited."]}),d&&g.jsxs("div",{className:"create-thread glass",children:[g.jsx("input",{type:"text",placeholder:"Thread Title...",value:m,onChange:w=>y(w.target.value)}),g.jsx("button",{onClick:S,children:g.jsx(Bf,{size:16})})]}),g.jsx("div",{className:"thread-list",children:e.map(w=>g.jsxs("div",{className:"thread-item glass hover-glow",children:[g.jsxs("div",{className:"thread-main",children:[g.jsxs("h4",{children:[w.title," ",w.isNSFW&&g.jsx("span",{className:"nsfw-tag",children:"18+"})]}),g.jsxs("span",{className:"thread-meta",children:["Posted by ",w.author,"  ",w.category]})]}),g.jsxs("div",{className:"thread-stats",children:[g.jsx(Qv,{size:16})," ",w.replies]})]},w.id))})]})]})},$C=()=>{const[r,e]=Z.useState(""),[n,i]=Z.useState("rhyme"),[o,c]=Z.useState([]),[u,d]=Z.useState(!1),f=async()=>{if(r){d(!0);try{const y=await(await fetch("http://localhost:5000/api/tools/lyrics",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:n,keyword:r})})).json();c(y.results)}catch(m){console.error(m)}d(!1)}};return g.jsxs("div",{className:"lyric-container animate-fade",children:[g.jsxs("div",{className:"tool-header",children:[g.jsx("div",{className:"icon-wrapper",children:g.jsx(OT,{size:32,className:"accent-cyan"})}),g.jsx("h1",{children:"AI Lyric Assistant"}),g.jsx("p",{children:"Break writer's block with neural rhymes and deep metaphors."})]}),g.jsxs("div",{className:"tool-interface glass",children:[g.jsxs("div",{className:"input-area",children:[g.jsx("input",{type:"text",placeholder:"Enter a word (e.g. 'Love', 'Time')...",value:r,onChange:m=>e(m.target.value),onKeyDown:m=>m.key==="Enter"&&f()}),g.jsxs("div",{className:"mode-toggle",children:[g.jsx("button",{className:n==="rhyme"?"active":"",onClick:()=>i("rhyme"),children:"Rhymes"}),g.jsx("button",{className:n==="metaphor"?"active":"",onClick:()=>i("metaphor"),children:"Metaphors"})]}),g.jsx("button",{className:"generate-btn",onClick:f,disabled:u,children:u?g.jsx(yT,{className:"spin"}):"Inspire Me"})]}),g.jsx("div",{className:"results-area",children:o.length>0?g.jsx("div",{className:"tags-cloud",children:o.map((m,y)=>g.jsxs("span",{className:"result-tag animate-pop",onClick:()=>navigator.clipboard.writeText(m),children:[m,g.jsx(qS,{size:12,className:"copy-icon"})]},y))}):g.jsxs("div",{className:"empty-state",children:[g.jsx(Jv,{size:48}),g.jsx("span",{children:"Enter a keyword to start generating."})]})})]})]})},Gi=new(window.AudioContext||window.webkitAudioContext),GC=()=>{const[r,e]=Z.useState(120),[n,i]=Z.useState(!1),[o,c]=Z.useState([]),u=Z.useRef(0),d=Z.useRef(null),f=25,m=.1,y=w=>{const x=Gi.createOscillator(),A=Gi.createGain();x.frequency.value=1e3,x.type="square",A.gain.setValueAtTime(.1,w),A.gain.exponentialRampToValueAtTime(.001,w+.05),x.connect(A),A.connect(Gi.destination),x.start(w),x.stop(w+.1);const E=document.getElementById("metronome-visual");E&&(E.style.transform="scale(1.2)",E.style.boxShadow="0 0 50px #00f2ff",setTimeout(()=>{E.style.transform="scale(1)",E.style.boxShadow="0 0 20px rgba(0,242,255,0.2)"},50))},_=()=>{for(;u.current<Gi.currentTime+m;){y(u.current);const w=60/r;u.current+=w}d.current=window.setTimeout(_,f)},b=()=>{n?(window.clearTimeout(d.current),i(!1)):(Gi.state==="suspended"&&Gi.resume(),u.current=Gi.currentTime+.05,_(),i(!0))},S=()=>{const w=Date.now(),x=[...o,w].filter(A=>w-A<2e3);if(x.length>1){const A=[];for(let O=1;O<x.length;O++)A.push(x[O]-x[O-1]);const E=A.reduce((O,I)=>O+I)/A.length,D=Math.round(6e4/E);D>30&&D<300&&e(D)}c(x)};return Z.useEffect(()=>()=>window.clearTimeout(d.current),[]),g.jsxs("div",{className:"metronome-container animate-fade",children:[g.jsxs("div",{className:"metronome-card glass",children:[g.jsxs("div",{className:"display-section",children:[g.jsx("div",{id:"metronome-visual",className:"visual-pulse",children:g.jsx(CS,{size:48})}),g.jsxs("h1",{className:"bpm-display",children:[r," ",g.jsx("span",{className:"label",children:"BPM"})]})]}),g.jsxs("div",{className:"controls-section",children:[g.jsx("input",{type:"range",min:"40",max:"240",value:r,onChange:w=>e(Number(w.target.value)),className:"bpm-slider"}),g.jsxs("div",{className:"action-buttons",children:[g.jsx("button",{className:"tap-btn",onClick:S,children:"TAP TEMPO"}),g.jsx("button",{className:`play-btn ${n?"active":""}`,onClick:b,children:n?g.jsx(RT,{size:24,fill:"currentColor"}):g.jsx(e0,{size:24,fill:"currentColor"})})]}),g.jsx("div",{className:"presets",children:[90,120,140,174].map(w=>g.jsx("button",{className:"preset-btn",onClick:()=>e(w),children:w},w))})]})]}),g.jsxs("div",{className:"tool-info",children:[g.jsx(qf,{className:"accent-gold"}),g.jsx("p",{children:"Pro Tip: Use Tap Tempo to discover the BPM of samples."})]})]})},FC=()=>{const[r,e]=Z.useState("C"),[n,i]=Z.useState("Major"),[o,c]=Z.useState([]),[u,d]=Z.useState(-1);new(window.AudioContext||window.webkitAudioContext);const f=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],m={Major:[0,2,4,5,7,9,11],Minor:[0,2,3,5,7,8,10],Dorian:[0,2,3,5,7,9,10],Lydian:[0,2,4,6,7,9,11]},y={"Pop Hit":[1,5,6,4],"Sad Ballad":[6,4,1,5],"Jazz Vibe":[2,5,1,6],"Dark Trap":[1,6,3,7]},_=(w,x)=>f[(w+x)%12],b=w=>{const x=f.indexOf(r),A=m[n]||m.Major,D=(y[w]||y["Pop Hit"]).map(O=>{const I=A[O-1],k=_(x,I);let R="";return n==="Major"?([2,3,6].includes(O)&&(R="m"),O===7&&(R="dim")):[1,4,5].includes(O)&&(R="m"),{name:k+R,degree:O}});c(D)},S=(w,x)=>{d(x),setTimeout(()=>d(-1),500)};return g.jsxs("div",{className:"chord-container animate-fade",children:[g.jsxs("div",{className:"wizard-header",children:[g.jsx("div",{className:"icon-box gold",children:g.jsx(Bo,{size:32})}),g.jsx("h1",{children:"Chord Wizard"}),g.jsx("p",{children:"Generate hit progressions instantly."})]}),g.jsxs("div",{className:"wizard-controls glass",children:[g.jsxs("div",{className:"control-group",children:[g.jsx("label",{children:"Key"}),g.jsx("select",{value:r,onChange:w=>e(w.target.value),children:f.map(w=>g.jsx("option",{value:w,children:w},w))})]}),g.jsxs("div",{className:"control-group",children:[g.jsx("label",{children:"Scale"}),g.jsx("select",{value:n,onChange:w=>i(w.target.value),children:Object.keys(m).map(w=>g.jsx("option",{value:w,children:w},w))})]}),g.jsx("div",{className:"mood-grid",children:Object.keys(y).map(w=>g.jsxs("button",{className:"mood-btn",onClick:()=>b(w),children:[g.jsx(YC,{})," ",w]},w))})]}),o.length>0&&g.jsx("div",{className:"progression-display",children:o.map((w,x)=>g.jsxs("div",{className:`chord-card glass ${u===x?"playing":""}`,onClick:()=>S(w,x),children:[g.jsx("span",{className:"degree",children:"I II III IV V VI VII".split(" ")[w.degree-1]}),g.jsx("h2",{children:w.name}),g.jsx(US,{size:24,className:"play-icon"})]},x))})]})},YC=()=>g.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:g.jsx("path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"})}),Xf="/assets/bronze_badge-DR3iFe8J.jpg";let Vn;const WC=()=>{const{user:r}=us(),[e,n]=Z.useState("IDLE"),[i,o]=Z.useState(null),[c,u]=Z.useState(null),[d,f]=Z.useState(""),[m,y]=Z.useState(30);Z.useEffect(()=>(Vn||(Vn=xo("http://localhost:5000")),Vn.on("connect",()=>console.log("Arena Connected")),Vn.on("game_start",({roomId:S,players:w})=>{o(S),u({players:w,lines:[],turn:0}),n("BATTLE")}),Vn.on("game_update",S=>{u(S)}),()=>{Vn.off("game_start"),Vn.off("game_update"),Vn.disconnect(),Vn=null}),[]);const _=()=>{n("QUEUE"),Vn.emit("join_queue",{username:r?r.name:"MC Guest"})},b=S=>{S.preventDefault(),d&&(Vn.emit("send_line",{roomId:i,line:d,username:r?r.name:"MC Guest"}),f(""))};return e==="IDLE"?g.jsx("div",{className:"arena-lobby animate-fade",children:g.jsxs("div",{className:"arena-hero",children:[g.jsx(zT,{size:64,className:"accent-red"}),g.jsx("h1",{children:"Ranked Battle Arena"}),g.jsx("p",{children:"Compete against other MCs in real-time. Win to climb the ladder."}),g.jsx("button",{className:"battle-btn",onClick:_,children:"FIND MATCH"}),g.jsxs("div",{className:"rank-display",children:[g.jsx("img",{src:Xf,alt:"Rank",className:"rank-icon",style:{width:"60px",borderRadius:"50%",marginTop:"1rem"}}),g.jsx("div",{style:{marginTop:"0.5rem",fontWeight:"bold"},children:"Rank: Bronze II"})]})]})}):e==="QUEUE"?g.jsxs("div",{className:"arena-queue animate-fade",children:[g.jsx(sT,{size:64,className:"spin accent-gold"}),g.jsx("h2",{children:"Searching for Opponent..."}),g.jsx("p",{children:"Sharpening rhymes..."})]}):g.jsxs("div",{className:"arena-battle animate-fade",children:[g.jsxs("div",{className:"battle-header",children:[g.jsxs("div",{className:"player p1",children:[g.jsx("span",{className:"name",children:c?.players[0].username}),g.jsx("span",{className:"score",children:"0 PTS"})]}),g.jsxs("div",{className:"vs-timer",children:[g.jsx(Kv,{size:20}),g.jsxs("span",{children:[m,"s"]})]}),g.jsxs("div",{className:"player p2",children:[g.jsx("span",{className:"name",children:c?.players[1].username}),g.jsx("span",{className:"score",children:"0 PTS"})]})]}),g.jsx("div",{className:"battle-feed glass",children:c?.lines.map((S,w)=>g.jsxs("div",{className:`battle-bubble ${S.username===(r?.name||"MC Guest")?"mine":"opponent"}`,children:[g.jsx("div",{className:"bubble-meta",children:S.username}),g.jsx("div",{className:"bubble-text",children:S.text})]},w))}),g.jsxs("form",{className:"battle-input",onSubmit:b,children:[g.jsx("input",{type:"text",value:d,onChange:S=>f(S.target.value),placeholder:"Spit fire...",autoFocus:!0}),g.jsx("button",{type:"submit",children:g.jsx(Bf,{size:24})})]})]})},Kf=r=>{const[e,n]=Z.useState({...r,silverCoins:r.vibePoints||850,goldenCoins:r.goldenCoins||5}),[i,o]=Z.useState(!1),[c,u]=Z.useState(null),d=Z.useCallback(async(b,S="MANUAL")=>{n(w=>({...w,silverCoins:(w.silverCoins||0)+b}))},[e.id]),f=Z.useCallback(async(b,S)=>{if(e.goldenCoins<b)throw new Error("Not enough Golden Coins!");return n(w=>({...w,goldenCoins:w.goldenCoins-b})),console.log(`Sent ${b} Gold to ${S}`),!0},[e.goldenCoins]),m=Z.useCallback(async b=>{n(S=>({...S,goldenCoins:S.goldenCoins+b}))},[]),y=async()=>[],_=async b=>"Upgraded";return{user:e,silverCoins:e.silverCoins,goldenCoins:e.goldenCoins,addSilver:d,sendGold:f,buyGold:m,addPoints:d,getLeaderboard:y,upgradeTier:_,loading:i,error:c}},tf="/assets/mixer2-CZL7L4y3.png",XC="/assets/pads-DQsr9hQU.jpg",KC="/assets/microphone-CB7jnYfn.png",ZC="/assets/vibe_portal1_mixer-CtZR0y7N.jpeg",QC=()=>{const{user:r}=us(),{points:e,refreshPoints:n}=Kf(),[i,o]=Z.useState([]),[c,u]=Z.useState("All"),[d,f]=Z.useState(null);Z.useEffect(()=>{fetch("http://localhost:5000/api/services").then(b=>b.json()).then(b=>o(b))},[]);const m=async b=>{if(!r)return alert("Login required");if(e<b.price)return alert("Not enough Vibe Points!");if(window.confirm(`Confirm booking: ${b.title} for ${b.price} VP?`)){f(b.id);try{const w=await(await fetch("http://localhost:5000/api/services/book",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({serviceId:b.id,userId:r.id})})).json();w.success?(alert(w.message),n()):alert(w.error)}catch{alert("Booking failed")}f(null)}},y=b=>({s1:tf,s2:XC,s3:ZC,s4:KC,s5:tf})[b]||tf,_=c==="All"?i:i.filter(b=>b.category===c);return g.jsxs("div",{className:"services-container animate-fade",children:[g.jsxs("div",{className:"hub-header",children:[g.jsx("h1",{children:"Services Hub"}),g.jsx("p",{children:"Hire top-tier talent or license exclusive assets."}),g.jsxs("div",{className:"balance-tag",children:["Your Balance: ",e," VP"]})]}),g.jsx("div",{className:"hub-filters",children:["All","Engineering","Production","Creative","Business"].map(b=>g.jsx("button",{className:c===b?"active":"",onClick:()=>u(b),children:b},b))}),g.jsx("div",{className:"services-grid",children:_.map(b=>g.jsxs("div",{className:"service-card glass",children:[g.jsx("div",{className:"card-image-wrapper",children:g.jsx("img",{src:y(b.id),alt:b.title,className:"service-image"})}),g.jsxs("div",{className:"card-info",children:[g.jsx("h3",{children:b.title}),g.jsxs("span",{className:"provider",children:["by ",b.provider]}),g.jsxs("div",{className:"rating",children:[g.jsx(qo,{size:12,fill:"#ffd700",color:"#ffd700"})," 5.0 (Mock)"]})]}),g.jsxs("div",{className:"card-action",children:[g.jsxs("div",{className:"price",children:[b.price," VP"]}),g.jsx("button",{onClick:()=>m(b),disabled:d===b.id,className:"book-btn",children:d===b.id?"Processing...":"Book Now"})]})]},b.id))})]})},JC=()=>{const{user:r}=us(),[e,n]=Z.useState([]);Z.useEffect(()=>{r&&fetch(`http://localhost:5000/api/collab/projects?userId=${r.id}`).then(c=>c.json()).then(c=>n(c))},[r]);const i=async()=>{const c=prompt("Project Name:");if(!c)return;const u=prompt("Type (Logic Pro, Ableton, Stems):","Logic Pro"),d={name:c,owner:r.name,type:u,size:"0 MB",collaborators:[],id:Date.now()},m=await(await fetch("http://localhost:5000/api/collab/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)})).json();n([m,...e])},o=c=>c.includes("WAV")||c.includes("Stems")?g.jsx(GS,{size:32,color:"#00f2ff"}):g.jsx(Z_,{size:32,color:"#ffd700"});return g.jsxs("div",{className:"collab-container animate-fade",children:[g.jsxs("div",{className:"collab-header",children:[g.jsxs("div",{className:"header-left",children:[g.jsx("h1",{children:"Collaboration Station"}),g.jsx("p",{children:"Cloud workspace for your stems and project files."})]}),g.jsxs("button",{className:"new-project-btn",onClick:i,children:[g.jsx(fT,{size:20})," New Project"]})]}),g.jsx("div",{className:"projects-grid",children:e.length>0?e.map(c=>g.jsxs("div",{className:"project-card glass hover-glow",children:[g.jsxs("div",{className:"card-top",children:[o(c.type),g.jsx("button",{className:"share-btn",title:"Share",children:g.jsx(TT,{size:16})})]}),g.jsxs("div",{className:"card-info",children:[g.jsx("h3",{children:c.name}),g.jsx("span",{className:"type-tag",children:c.type}),g.jsxs("div",{className:"meta",children:[g.jsx("span",{children:c.size}),g.jsxs("span",{children:[g.jsx(Kv,{size:12})," ",c.updated]})]})]}),c.collaborators.length>0&&g.jsx("div",{className:"collab-avatars",children:c.collaborators.map((u,d)=>g.jsx("div",{className:"avatar-mini",title:u,children:u[0]},d))})]},c.id)):g.jsxs("div",{className:"empty-projects",children:[g.jsx(Z_,{size:64,style:{opacity:.3}}),g.jsx("p",{children:"No projects found. Start a new one!"})]})})]})},B0="15.1.22",Cv=(r,e,n)=>({endTime:e,insertTime:n,type:"exponentialRampToValue",value:r}),Nv=(r,e,n)=>({endTime:e,insertTime:n,type:"linearRampToValue",value:r}),Tf=(r,e)=>({startTime:e,type:"setValue",value:r}),q0=(r,e,n)=>({duration:n,startTime:e,type:"setValueCurve",values:r}),L0=(r,e,{startTime:n,target:i,timeConstant:o})=>i+(e-i)*Math.exp((n-r)/o),sa=r=>r.type==="exponentialRampToValue",Uc=r=>r.type==="linearRampToValue",mi=r=>sa(r)||Uc(r),Zf=r=>r.type==="setValue",Us=r=>r.type==="setValueCurve",zc=(r,e,n,i)=>{const o=r[e];return o===void 0?i:mi(o)||Zf(o)?o.value:Us(o)?o.values[o.values.length-1]:L0(n,zc(r,e-1,o.startTime,i),o)},Ov=(r,e,n,i,o)=>n===void 0?[i.insertTime,o]:mi(n)?[n.endTime,n.value]:Zf(n)?[n.startTime,n.value]:Us(n)?[n.startTime+n.duration,n.values[n.values.length-1]]:[n.startTime,zc(r,e-1,n.startTime,o)],xf=r=>r.type==="cancelAndHold",Af=r=>r.type==="cancelScheduledValues",fi=r=>xf(r)||Af(r)?r.cancelTime:sa(r)||Uc(r)?r.endTime:r.startTime,kv=(r,e,n,{endTime:i,value:o})=>n===o?o:0<n&&0<o||n<0&&o<0?n*(o/n)**((r-e)/(i-e)):0,Rv=(r,e,n,{endTime:i,value:o})=>n+(r-e)/(i-e)*(o-n),e2=(r,e)=>{const n=Math.floor(e),i=Math.ceil(e);return n===i?r[n]:(1-(e-n))*r[n]+(1-(i-e))*r[i]},t2=(r,{duration:e,startTime:n,values:i})=>{const o=(r-n)/e*(i.length-1);return e2(i,o)},Tc=r=>r.type==="setTarget";class n2{constructor(e){this._automationEvents=[],this._currenTime=0,this._defaultValue=e}[Symbol.iterator](){return this._automationEvents[Symbol.iterator]()}add(e){const n=fi(e);if(xf(e)||Af(e)){const i=this._automationEvents.findIndex(c=>Af(e)&&Us(c)?c.startTime+c.duration>=n:fi(c)>=n),o=this._automationEvents[i];if(i!==-1&&(this._automationEvents=this._automationEvents.slice(0,i)),xf(e)){const c=this._automationEvents[this._automationEvents.length-1];if(o!==void 0&&mi(o)){if(c!==void 0&&Tc(c))throw new Error("The internal list is malformed.");const u=c===void 0?o.insertTime:Us(c)?c.startTime+c.duration:fi(c),d=c===void 0?this._defaultValue:Us(c)?c.values[c.values.length-1]:c.value,f=sa(o)?kv(n,u,d,o):Rv(n,u,d,o),m=sa(o)?Cv(f,n,this._currenTime):Nv(f,n,this._currenTime);this._automationEvents.push(m)}if(c!==void 0&&Tc(c)&&this._automationEvents.push(Tf(this.getValue(n),n)),c!==void 0&&Us(c)&&c.startTime+c.duration>n){const u=n-c.startTime,d=(c.values.length-1)/c.duration,f=Math.max(2,1+Math.ceil(u*d)),m=u/(f-1)*d,y=c.values.slice(0,f);if(m<1)for(let _=1;_<f;_+=1){const b=m*_%1;y[_]=c.values[_-1]*(1-b)+c.values[_]*b}this._automationEvents[this._automationEvents.length-1]=q0(y,c.startTime,u)}}}else{const i=this._automationEvents.findIndex(u=>fi(u)>n),o=i===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[i-1];if(o!==void 0&&Us(o)&&fi(o)+o.duration>n)return!1;const c=sa(e)?Cv(e.value,e.endTime,this._currenTime):Uc(e)?Nv(e.value,n,this._currenTime):e;if(i===-1)this._automationEvents.push(c);else{if(Us(e)&&n+e.duration>fi(this._automationEvents[i]))return!1;this._automationEvents.splice(i,0,c)}}return!0}flush(e){const n=this._automationEvents.findIndex(i=>fi(i)>e);if(n>1){const i=this._automationEvents.slice(n-1),o=i[0];Tc(o)&&i.unshift(Tf(zc(this._automationEvents,n-2,o.startTime,this._defaultValue),o.startTime)),this._automationEvents=i}}getValue(e){if(this._automationEvents.length===0)return this._defaultValue;const n=this._automationEvents.findIndex(u=>fi(u)>e),i=this._automationEvents[n],o=(n===-1?this._automationEvents.length:n)-1,c=this._automationEvents[o];if(c!==void 0&&Tc(c)&&(i===void 0||!mi(i)||i.insertTime>e))return L0(e,zc(this._automationEvents,o-1,c.startTime,this._defaultValue),c);if(c!==void 0&&Zf(c)&&(i===void 0||!mi(i)))return c.value;if(c!==void 0&&Us(c)&&(i===void 0||!mi(i)||c.startTime+c.duration>e))return e<c.startTime+c.duration?t2(e,c):c.values[c.values.length-1];if(c!==void 0&&mi(c)&&(i===void 0||!mi(i)))return c.value;if(i!==void 0&&sa(i)){const[u,d]=Ov(this._automationEvents,o,c,i,this._defaultValue);return kv(e,u,d,i)}if(i!==void 0&&Uc(i)){const[u,d]=Ov(this._automationEvents,o,c,i,this._defaultValue);return Rv(e,u,d,i)}return this._defaultValue}}const s2=r=>({cancelTime:r,type:"cancelAndHold"}),i2=r=>({cancelTime:r,type:"cancelScheduledValues"}),r2=(r,e)=>({endTime:e,type:"exponentialRampToValue",value:r}),a2=(r,e)=>({endTime:e,type:"linearRampToValue",value:r}),o2=(r,e,n)=>({startTime:e,target:r,timeConstant:n,type:"setTarget"}),l2=()=>new DOMException("","AbortError"),c2=r=>(e,n,[i,o,c],u)=>{r(e[o],[n,i,c],d=>d[0]===n&&d[1]===i,u)},u2=r=>(e,n,i)=>{const o=[];for(let c=0;c<i.numberOfInputs;c+=1)o.push(new Set);r.set(e,{activeInputs:o,outputs:new Set,passiveInputs:new WeakMap,renderer:n})},h2=r=>(e,n)=>{r.set(e,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:n})},ua=new WeakSet,V0=new WeakMap,Qf=new WeakMap,I0=new WeakMap,Jf=new WeakMap,nu=new WeakMap,P0=new WeakMap,Ef=new WeakMap,Cf=new WeakMap,Nf=new WeakMap,H0={construct(){return H0}},d2=r=>{try{const e=new Proxy(r,H0);new e}catch{return!1}return!0},jv=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,Dv=(r,e)=>{const n=[];let i=r.replace(/^[\s]+/,""),o=i.match(jv);for(;o!==null;){const c=o[1].slice(1,-1),u=o[0].replace(/([\s]+)?;?$/,"").replace(c,new URL(c,e).toString());n.push(u),i=i.slice(o[0].length).replace(/^[\s]+/,""),o=i.match(jv)}return[n.join(";"),i]},Mv=r=>{if(r!==void 0&&!Array.isArray(r))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},Uv=r=>{if(!d2(r))throw new TypeError("The given value for processorCtor should be a constructor.");if(r.prototype===null||typeof r.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},f2=(r,e,n,i,o,c,u,d,f,m,y,_,b)=>{let S=0;return(w,x,A={credentials:"omit"})=>{const E=y.get(w);if(E!==void 0&&E.has(x))return Promise.resolve();const D=m.get(w);if(D!==void 0){const k=D.get(x);if(k!==void 0)return k}const O=c(w),I=O.audioWorklet===void 0?o(x).then(([k,R])=>{const[M,z]=Dv(k,R),X=`${M};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${z}
})})(window,'_AWGS')`;return n(X)}).then(()=>{const k=b._AWGS.pop();if(k===void 0)throw new SyntaxError;i(O.currentTime,O.sampleRate,()=>k(class{},void 0,(R,M)=>{if(R.trim()==="")throw e();const z=Cf.get(O);if(z!==void 0){if(z.has(R))throw e();Uv(M),Mv(M.parameterDescriptors),z.set(R,M)}else Uv(M),Mv(M.parameterDescriptors),Cf.set(O,new Map([[R,M]]))},O.sampleRate,void 0,void 0))}):Promise.all([o(x),Promise.resolve(r(_,_))]).then(([[k,R],M])=>{const z=S+1;S=z;const[X,Q]=Dv(k,R),te=`${X};((AudioWorkletProcessor,registerProcessor)=>{${Q}
})(${M?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${M?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${M?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${z}',class extends AudioWorkletProcessor{process(){return !1}})`,ue=new Blob([te],{type:"application/javascript; charset=utf-8"}),U=URL.createObjectURL(ue);return O.audioWorklet.addModule(U,A).then(()=>{if(d(O))return O;const $=u(O);return $.audioWorklet.addModule(U,A).then(()=>$)}).then($=>{if(f===null)throw new SyntaxError;try{new f($,`__sac${z}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(U))});return D===void 0?m.set(w,new Map([[x,I]])):D.set(x,I),I.then(()=>{const k=y.get(w);k===void 0?y.set(w,new Set([x])):k.add(x)}).finally(()=>{const k=m.get(w);k!==void 0&&k.delete(x)}),I}},Xn=(r,e)=>{const n=r.get(e);if(n===void 0)throw new Error("A value with the given key could not be found.");return n},su=(r,e)=>{const n=Array.from(r).filter(e);if(n.length>1)throw Error("More than one element was found.");if(n.length===0)throw Error("No element was found.");const[i]=n;return r.delete(i),i},$0=(r,e,n,i)=>{const o=Xn(r,e),c=su(o,u=>u[0]===n&&u[1]===i);return o.size===0&&r.delete(e),c},Vo=r=>Xn(P0,r),ha=r=>{if(ua.has(r))throw new Error("The AudioNode is already stored.");ua.add(r),Vo(r).forEach(e=>e(!0))},G0=r=>"port"in r,Io=r=>{if(!ua.has(r))throw new Error("The AudioNode is not stored.");ua.delete(r),Vo(r).forEach(e=>e(!1))},Of=(r,e)=>{!G0(r)&&e.every(n=>n.size===0)&&Io(r)},p2=(r,e,n,i,o,c,u,d,f,m,y,_,b)=>{const S=new WeakMap;return(w,x,A,E,D)=>{const{activeInputs:O,passiveInputs:I}=c(x),{outputs:k}=c(w),R=d(w),M=z=>{const X=f(x),Q=f(w);if(z){const K=$0(I,w,A,E);r(O,w,K,!1),!D&&!_(w)&&n(Q,X,A,E),b(x)&&ha(x)}else{const K=i(O,w,A,E);e(I,E,K,!1),!D&&!_(w)&&o(Q,X,A,E);const F=u(x);if(F===0)y(x)&&Of(x,O);else{const re=S.get(x);re!==void 0&&clearTimeout(re),S.set(x,setTimeout(()=>{y(x)&&Of(x,O)},F*1e3))}}};return m(k,[x,A,E],z=>z[0]===x&&z[1]===A&&z[2]===E,!0)?(R.add(M),y(w)?r(O,w,[A,E,M],!0):e(I,E,[w,A,M],!0),!0):!1}},m2=r=>(e,n,[i,o,c],u)=>{const d=e.get(i);d===void 0?e.set(i,new Set([[o,n,c]])):r(d,[o,n,c],f=>f[0]===o&&f[1]===n,u)},g2=r=>(e,n)=>{const i=r(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});n.connect(i).connect(e.destination);const o=()=>{n.removeEventListener("ended",o),n.disconnect(i),i.disconnect()};n.addEventListener("ended",o)},y2=r=>(e,n)=>{r(e).add(n)},_2={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},v2=(r,e,n,i,o,c)=>class extends r{constructor(d,f){const m=o(d),y={..._2,...f},_=i(m,y),b=c(m)?e():null;super(d,!1,_,b),this._nativeAnalyserNode=_}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(d){this._nativeAnalyserNode.fftSize=d}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(d){const f=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=d,!(d>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=f,n()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(d){const f=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=d,!(this._nativeAnalyserNode.maxDecibels>d))throw this._nativeAnalyserNode.minDecibels=f,n()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(d){this._nativeAnalyserNode.smoothingTimeConstant=d}getByteFrequencyData(d){this._nativeAnalyserNode.getByteFrequencyData(d)}getByteTimeDomainData(d){this._nativeAnalyserNode.getByteTimeDomainData(d)}getFloatFrequencyData(d){this._nativeAnalyserNode.getFloatFrequencyData(d)}getFloatTimeDomainData(d){this._nativeAnalyserNode.getFloatTimeDomainData(d)}},Pt=(r,e)=>r.context===e,b2=(r,e,n)=>()=>{const i=new WeakMap,o=async(c,u)=>{let d=e(c);if(!Pt(d,u)){const m={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,fftSize:d.fftSize,maxDecibels:d.maxDecibels,minDecibels:d.minDecibels,smoothingTimeConstant:d.smoothingTimeConstant};d=r(u,m)}return i.set(u,d),await n(c,u,d),d};return{render(c,u){const d=i.get(u);return d!==void 0?Promise.resolve(d):o(c,u)}}},Bc=r=>{try{r.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},hs=()=>new DOMException("","IndexSizeError"),ep=r=>{r.getChannelData=(e=>n=>{try{return e.call(r,n)}catch(i){throw i.code===12?hs():i}})(r.getChannelData)},w2={numberOfChannels:1},S2=(r,e,n,i,o,c,u,d)=>{let f=null;return class F0{constructor(y){if(o===null)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:_,numberOfChannels:b,sampleRate:S}={...w2,...y};f===null&&(f=new o(1,1,44100));const w=i!==null&&e(c,c)?new i({length:_,numberOfChannels:b,sampleRate:S}):f.createBuffer(b,_,S);if(w.numberOfChannels===0)throw n();return typeof w.copyFromChannel!="function"?(u(w),ep(w)):e(Bc,()=>Bc(w))||d(w),r.add(w),w}static[Symbol.hasInstance](y){return y!==null&&typeof y=="object"&&Object.getPrototypeOf(y)===F0.prototype||r.has(y)}}},tn=-34028234663852886e22,$t=-tn,zs=r=>ua.has(r),T2={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},x2=(r,e,n,i,o,c,u,d)=>class extends r{constructor(m,y){const _=c(m),b={...T2,...y},S=o(_,b),w=u(_),x=w?e():null;super(m,!1,S,x),this._audioBufferSourceNodeRenderer=x,this._isBufferNullified=!1,this._isBufferSet=b.buffer!==null,this._nativeAudioBufferSourceNode=S,this._onended=null,this._playbackRate=n(this,w,S.playbackRate,$t,tn)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(m){if(this._nativeAudioBufferSourceNode.buffer=m,m!==null){if(this._isBufferSet)throw i();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(m){this._nativeAudioBufferSourceNode.loop=m}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(m){this._nativeAudioBufferSourceNode.loopEnd=m}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(m){this._nativeAudioBufferSourceNode.loopStart=m}get onended(){return this._onended}set onended(m){const y=typeof m=="function"?d(this,m):null;this._nativeAudioBufferSourceNode.onended=y;const _=this._nativeAudioBufferSourceNode.onended;this._onended=_!==null&&_===y?m:_}get playbackRate(){return this._playbackRate}start(m=0,y=0,_){if(this._nativeAudioBufferSourceNode.start(m,y,_),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=_===void 0?[m,y]:[m,y,_]),this.context.state!=="closed"){ha(this);const b=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",b),zs(this)&&Io(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",b)}}stop(m=0){this._nativeAudioBufferSourceNode.stop(m),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=m)}},A2=(r,e,n,i,o)=>()=>{const c=new WeakMap;let u=null,d=null;const f=async(m,y)=>{let _=n(m);const b=Pt(_,y);if(!b){const S={buffer:_.buffer,channelCount:_.channelCount,channelCountMode:_.channelCountMode,channelInterpretation:_.channelInterpretation,loop:_.loop,loopEnd:_.loopEnd,loopStart:_.loopStart,playbackRate:_.playbackRate.value};_=e(y,S),u!==null&&_.start(...u),d!==null&&_.stop(d)}return c.set(y,_),b?await r(y,m.playbackRate,_.playbackRate):await i(y,m.playbackRate,_.playbackRate),await o(m,y,_),_};return{set start(m){u=m},set stop(m){d=m},render(m,y){const _=c.get(y);return _!==void 0?Promise.resolve(_):f(m,y)}}},E2=r=>"playbackRate"in r,C2=r=>"frequency"in r&&"gain"in r,N2=r=>"offset"in r,O2=r=>!("frequency"in r)&&"gain"in r,k2=r=>"detune"in r&&"frequency"in r&&!("gain"in r),R2=r=>"pan"in r,Gt=r=>Xn(V0,r),Po=r=>Xn(I0,r),kf=(r,e)=>{const{activeInputs:n}=Gt(r);n.forEach(o=>o.forEach(([c])=>{e.includes(r)||kf(c,[...e,r])}));const i=E2(r)?[r.playbackRate]:G0(r)?Array.from(r.parameters.values()):C2(r)?[r.Q,r.detune,r.frequency,r.gain]:N2(r)?[r.offset]:O2(r)?[r.gain]:k2(r)?[r.detune,r.frequency]:R2(r)?[r.pan]:[];for(const o of i){const c=Po(o);c!==void 0&&c.activeInputs.forEach(([u])=>kf(u,e))}zs(r)&&Io(r)},Y0=r=>{kf(r.destination,[])},j2=r=>r===void 0||typeof r=="number"||typeof r=="string"&&(r==="balanced"||r==="interactive"||r==="playback"),D2=(r,e,n,i,o,c,u,d,f)=>class extends r{constructor(y={}){if(f===null)throw new Error("Missing the native AudioContext constructor.");let _;try{_=new f(y)}catch(w){throw w.code===12&&w.message==="sampleRate is not in range"?n():w}if(_===null)throw i();if(!j2(y.latencyHint))throw new TypeError(`The provided value '${y.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(y.sampleRate!==void 0&&_.sampleRate!==y.sampleRate)throw n();super(_,2);const{latencyHint:b}=y,{sampleRate:S}=_;if(this._baseLatency=typeof _.baseLatency=="number"?_.baseLatency:b==="balanced"?512/S:b==="interactive"||b===void 0?256/S:b==="playback"?1024/S:Math.max(2,Math.min(128,Math.round(b*S/128)))*128/S,this._nativeAudioContext=_,f.name==="webkitAudioContext"?(this._nativeGainNode=_.createGain(),this._nativeOscillatorNode=_.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(_.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,_.state==="running"){this._state="suspended";const w=()=>{this._state==="suspended"&&(this._state=null),_.removeEventListener("statechange",w)};_.addEventListener("statechange",w)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw e()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),Y0(this)}))}createMediaElementSource(y){return new o(this,{mediaElement:y})}createMediaStreamDestination(){return new c(this)}createMediaStreamSource(y){return new u(this,{mediaStream:y})}createMediaStreamTrackSource(y){return new d(this,{mediaStreamTrack:y})}resume(){return this._state==="suspended"?new Promise((y,_)=>{const b=()=>{this._nativeAudioContext.removeEventListener("statechange",b),this._nativeAudioContext.state==="running"?y():this.resume().then(y,_)};this._nativeAudioContext.addEventListener("statechange",b)}):this._nativeAudioContext.resume().catch(y=>{throw y===void 0||y.code===15?e():y})}suspend(){return this._nativeAudioContext.suspend().catch(y=>{throw y===void 0?e():y})}},M2=(r,e,n,i,o,c,u,d)=>class extends r{constructor(m,y){const _=c(m),b=u(_),S=o(_,y,b),w=b?e(d):null;super(m,!1,S,w),this._isNodeOfNativeOfflineAudioContext=b,this._nativeAudioDestinationNode=S}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(m){if(this._isNodeOfNativeOfflineAudioContext)throw i();if(m>this._nativeAudioDestinationNode.maxChannelCount)throw n();this._nativeAudioDestinationNode.channelCount=m}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(m){if(this._isNodeOfNativeOfflineAudioContext)throw i();this._nativeAudioDestinationNode.channelCountMode=m}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}},U2=r=>{const e=new WeakMap,n=async(i,o)=>{const c=o.destination;return e.set(o,c),await r(i,o,c),c};return{render(i,o){const c=e.get(o);return c!==void 0?Promise.resolve(c):n(i,o)}}},z2=(r,e,n,i,o,c,u,d)=>(f,m)=>{const y=m.listener,_=()=>{const k=new Float32Array(1),R=e(m,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),M=u(m);let z=!1,X=[0,0,-1,0,1,0],Q=[0,0,0];const K=()=>{if(z)return;z=!0;const ue=i(m,256,9,0);ue.onaudioprocess=({inputBuffer:U})=>{const $=[c(U,k,0),c(U,k,1),c(U,k,2),c(U,k,3),c(U,k,4),c(U,k,5)];$.some((ne,oe)=>ne!==X[oe])&&(y.setOrientation(...$),X=$);const J=[c(U,k,6),c(U,k,7),c(U,k,8)];J.some((ne,oe)=>ne!==Q[oe])&&(y.setPosition(...J),Q=J)},R.connect(ue)},F=ue=>U=>{U!==X[ue]&&(X[ue]=U,y.setOrientation(...X))},re=ue=>U=>{U!==Q[ue]&&(Q[ue]=U,y.setPosition(...Q))},te=(ue,U,$)=>{const J=n(m,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:U});J.connect(R,0,ue),J.start(),Object.defineProperty(J.offset,"defaultValue",{get(){return U}});const ne=r({context:f},M,J.offset,$t,tn);return d(ne,"value",oe=>()=>oe.call(ne),oe=>C=>{try{oe.call(ne,C)}catch(P){if(P.code!==9)throw P}K(),M&&$(C)}),ne.cancelAndHoldAtTime=(oe=>M?()=>{throw o()}:(...C)=>{const P=oe.apply(ne,C);return K(),P})(ne.cancelAndHoldAtTime),ne.cancelScheduledValues=(oe=>M?()=>{throw o()}:(...C)=>{const P=oe.apply(ne,C);return K(),P})(ne.cancelScheduledValues),ne.exponentialRampToValueAtTime=(oe=>M?()=>{throw o()}:(...C)=>{const P=oe.apply(ne,C);return K(),P})(ne.exponentialRampToValueAtTime),ne.linearRampToValueAtTime=(oe=>M?()=>{throw o()}:(...C)=>{const P=oe.apply(ne,C);return K(),P})(ne.linearRampToValueAtTime),ne.setTargetAtTime=(oe=>M?()=>{throw o()}:(...C)=>{const P=oe.apply(ne,C);return K(),P})(ne.setTargetAtTime),ne.setValueAtTime=(oe=>M?()=>{throw o()}:(...C)=>{const P=oe.apply(ne,C);return K(),P})(ne.setValueAtTime),ne.setValueCurveAtTime=(oe=>M?()=>{throw o()}:(...C)=>{const P=oe.apply(ne,C);return K(),P})(ne.setValueCurveAtTime),ne};return{forwardX:te(0,0,F(0)),forwardY:te(1,0,F(1)),forwardZ:te(2,-1,F(2)),positionX:te(6,0,re(0)),positionY:te(7,0,re(1)),positionZ:te(8,0,re(2)),upX:te(3,0,F(3)),upY:te(4,1,F(4)),upZ:te(5,0,F(5))}},{forwardX:b,forwardY:S,forwardZ:w,positionX:x,positionY:A,positionZ:E,upX:D,upY:O,upZ:I}=y.forwardX===void 0?_():y;return{get forwardX(){return b},get forwardY(){return S},get forwardZ(){return w},get positionX(){return x},get positionY(){return A},get positionZ(){return E},get upX(){return D},get upY(){return O},get upZ(){return I}}},qc=r=>"context"in r,Ho=r=>qc(r[0]),tr=(r,e,n,i)=>{for(const o of r)if(n(o)){if(i)return!1;throw Error("The set contains at least one similar element.")}return r.add(e),!0},zv=(r,e,[n,i],o)=>{tr(r,[e,n,i],c=>c[0]===e&&c[1]===n,o)},Bv=(r,[e,n,i],o)=>{const c=r.get(e);c===void 0?r.set(e,new Set([[n,i]])):tr(c,[n,i],u=>u[0]===n,o)},_a=r=>"inputs"in r,Lc=(r,e,n,i)=>{if(_a(e)){const o=e.inputs[i];return r.connect(o,n,0),[o,n,0]}return r.connect(e,n,i),[e,n,i]},W0=(r,e,n)=>{for(const i of r)if(i[0]===e&&i[1]===n)return r.delete(i),i;return null},B2=(r,e,n)=>su(r,i=>i[0]===e&&i[1]===n),X0=(r,e)=>{if(!Vo(r).delete(e))throw new Error("Missing the expected event listener.")},K0=(r,e,n)=>{const i=Xn(r,e),o=su(i,c=>c[0]===n);return i.size===0&&r.delete(e),o},Vc=(r,e,n,i)=>{_a(e)?r.disconnect(e.inputs[i],n,0):r.disconnect(e,n,i)},st=r=>Xn(Qf,r),Mo=r=>Xn(Jf,r),Qi=r=>Ef.has(r),kc=r=>!ua.has(r),qv=(r,e)=>new Promise(n=>{if(e!==null)n(!0);else{const i=r.createScriptProcessor(256,1,1),o=r.createGain(),c=r.createBuffer(1,2,44100),u=c.getChannelData(0);u[0]=1,u[1]=1;const d=r.createBufferSource();d.buffer=c,d.loop=!0,d.connect(i).connect(r.destination),d.connect(o),d.disconnect(o),i.onaudioprocess=f=>{const m=f.inputBuffer.getChannelData(0);Array.prototype.some.call(m,y=>y===1)?n(!0):n(!1),d.stop(),i.onaudioprocess=null,d.disconnect(i),i.disconnect(r.destination)},d.start()}}),nf=(r,e)=>{const n=new Map;for(const i of r)for(const o of i){const c=n.get(o);n.set(o,c===void 0?1:c+1)}n.forEach((i,o)=>e(o,i))},Ic=r=>"context"in r,q2=r=>{const e=new Map;r.connect=(n=>(i,o=0,c=0)=>{const u=Ic(i)?n(i,o,c):n(i,o),d=e.get(i);return d===void 0?e.set(i,[{input:c,output:o}]):d.every(f=>f.input!==c||f.output!==o)&&d.push({input:c,output:o}),u})(r.connect.bind(r)),r.disconnect=(n=>(i,o,c)=>{if(n.apply(r),i===void 0)e.clear();else if(typeof i=="number")for(const[u,d]of e){const f=d.filter(m=>m.output!==i);f.length===0?e.delete(u):e.set(u,f)}else if(e.has(i))if(o===void 0)e.delete(i);else{const u=e.get(i);if(u!==void 0){const d=u.filter(f=>f.output!==o&&(f.input!==c||c===void 0));d.length===0?e.delete(i):e.set(i,d)}}for(const[u,d]of e)d.forEach(f=>{Ic(u)?r.connect(u,f.output,f.input):r.connect(u,f.output)})})(r.disconnect)},L2=(r,e,n,i)=>{const{activeInputs:o,passiveInputs:c}=Po(e),{outputs:u}=Gt(r),d=Vo(r),f=m=>{const y=st(r),_=Mo(e);if(m){const b=K0(c,r,n);zv(o,r,b,!1),!i&&!Qi(r)&&y.connect(_,n)}else{const b=B2(o,r,n);Bv(c,b,!1),!i&&!Qi(r)&&y.disconnect(_,n)}};return tr(u,[e,n],m=>m[0]===e&&m[1]===n,!0)?(d.add(f),zs(r)?zv(o,r,[n,f],!0):Bv(c,[r,n,f],!0),!0):!1},V2=(r,e,n,i)=>{const{activeInputs:o,passiveInputs:c}=Gt(e),u=W0(o[i],r,n);return u===null?[$0(c,r,n,i)[2],!1]:[u[2],!0]},I2=(r,e,n)=>{const{activeInputs:i,passiveInputs:o}=Po(e),c=W0(i,r,n);return c===null?[K0(o,r,n)[1],!1]:[c[2],!0]},tp=(r,e,n,i,o)=>{const[c,u]=V2(r,n,i,o);if(c!==null&&(X0(r,c),u&&!e&&!Qi(r)&&Vc(st(r),st(n),i,o)),zs(n)){const{activeInputs:d}=Gt(n);Of(n,d)}},np=(r,e,n,i)=>{const[o,c]=I2(r,n,i);o!==null&&(X0(r,o),c&&!e&&!Qi(r)&&st(r).disconnect(Mo(n),i))},P2=(r,e)=>{const n=Gt(r),i=[];for(const o of n.outputs)Ho(o)?tp(r,e,...o):np(r,e,...o),i.push(o[0]);return n.outputs.clear(),i},H2=(r,e,n)=>{const i=Gt(r),o=[];for(const c of i.outputs)c[1]===n&&(Ho(c)?tp(r,e,...c):np(r,e,...c),o.push(c[0]),i.outputs.delete(c));return o},$2=(r,e,n,i,o)=>{const c=Gt(r);return Array.from(c.outputs).filter(u=>u[0]===n&&(i===void 0||u[1]===i)&&(o===void 0||u[2]===o)).map(u=>(Ho(u)?tp(r,e,...u):np(r,e,...u),c.outputs.delete(u),u[0]))},G2=(r,e,n,i,o,c,u,d,f,m,y,_,b,S,w,x)=>class extends m{constructor(E,D,O,I){super(O),this._context=E,this._nativeAudioNode=O;const k=y(E);_(k)&&n(qv,()=>qv(k,x))!==!0&&q2(O),Qf.set(this,O),P0.set(this,new Set),E.state!=="closed"&&D&&ha(this),r(this,I,O)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(E){this._nativeAudioNode.channelCount=E}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(E){this._nativeAudioNode.channelCountMode=E}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(E){this._nativeAudioNode.channelInterpretation=E}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(E,D=0,O=0){if(D<0||D>=this._nativeAudioNode.numberOfOutputs)throw o();const I=y(this._context),k=w(I);if(b(E)||S(E))throw c();if(qc(E)){const z=st(E);try{const Q=Lc(this._nativeAudioNode,z,D,O),K=kc(this);(k||K)&&this._nativeAudioNode.disconnect(...Q),this.context.state!=="closed"&&!K&&kc(E)&&ha(E)}catch(Q){throw Q.code===12?c():Q}if(e(this,E,D,O,k)){const Q=f([this],E);nf(Q,i(k))}return E}const R=Mo(E);if(R.name==="playbackRate"&&R.maxValue===1024)throw u();try{this._nativeAudioNode.connect(R,D),(k||kc(this))&&this._nativeAudioNode.disconnect(R,D)}catch(z){throw z.code===12?c():z}if(L2(this,E,D,k)){const z=f([this],E);nf(z,i(k))}}disconnect(E,D,O){let I;const k=y(this._context),R=w(k);if(E===void 0)I=P2(this,R);else if(typeof E=="number"){if(E<0||E>=this.numberOfOutputs)throw o();I=H2(this,R,E)}else{if(D!==void 0&&(D<0||D>=this.numberOfOutputs)||qc(E)&&O!==void 0&&(O<0||O>=E.numberOfInputs))throw o();if(I=$2(this,R,E,D,O),I.length===0)throw c()}for(const M of I){const z=f([this],M);nf(z,d)}}},F2=(r,e,n,i,o,c,u,d,f,m,y,_,b)=>(S,w,x,A=null,E=null)=>{const D=x.value,O=new n2(D),I=w?i(O):null,k={get defaultValue(){return D},get maxValue(){return A===null?x.maxValue:A},get minValue(){return E===null?x.minValue:E},get value(){return x.value},set value(R){x.value=R,k.setValueAtTime(R,S.context.currentTime)},cancelAndHoldAtTime(R){if(typeof x.cancelAndHoldAtTime=="function")I===null&&O.flush(S.context.currentTime),O.add(o(R)),x.cancelAndHoldAtTime(R);else{const M=Array.from(O).pop();I===null&&O.flush(S.context.currentTime),O.add(o(R));const z=Array.from(O).pop();x.cancelScheduledValues(R),M!==z&&z!==void 0&&(z.type==="exponentialRampToValue"?x.exponentialRampToValueAtTime(z.value,z.endTime):z.type==="linearRampToValue"?x.linearRampToValueAtTime(z.value,z.endTime):z.type==="setValue"?x.setValueAtTime(z.value,z.startTime):z.type==="setValueCurve"&&x.setValueCurveAtTime(z.values,z.startTime,z.duration))}return k},cancelScheduledValues(R){return I===null&&O.flush(S.context.currentTime),O.add(c(R)),x.cancelScheduledValues(R),k},exponentialRampToValueAtTime(R,M){if(R===0)throw new RangeError;if(!Number.isFinite(M)||M<0)throw new RangeError;const z=S.context.currentTime;return I===null&&O.flush(z),Array.from(O).length===0&&(O.add(m(D,z)),x.setValueAtTime(D,z)),O.add(u(R,M)),x.exponentialRampToValueAtTime(R,M),k},linearRampToValueAtTime(R,M){const z=S.context.currentTime;return I===null&&O.flush(z),Array.from(O).length===0&&(O.add(m(D,z)),x.setValueAtTime(D,z)),O.add(d(R,M)),x.linearRampToValueAtTime(R,M),k},setTargetAtTime(R,M,z){return I===null&&O.flush(S.context.currentTime),O.add(f(R,M,z)),x.setTargetAtTime(R,M,z),k},setValueAtTime(R,M){return I===null&&O.flush(S.context.currentTime),O.add(m(R,M)),x.setValueAtTime(R,M),k},setValueCurveAtTime(R,M,z){const X=R instanceof Float32Array?R:new Float32Array(R);if(_!==null&&_.name==="webkitAudioContext"){const Q=M+z,K=S.context.sampleRate,F=Math.ceil(M*K),re=Math.floor(Q*K),te=re-F,ue=new Float32Array(te);for(let $=0;$<te;$+=1){const J=(X.length-1)/z*((F+$)/K-M),ne=Math.floor(J),oe=Math.ceil(J);ue[$]=ne===oe?X[ne]:(1-(J-ne))*X[ne]+(1-(oe-J))*X[oe]}I===null&&O.flush(S.context.currentTime),O.add(y(ue,M,z)),x.setValueCurveAtTime(ue,M,z);const U=re/K;U<Q&&b(k,ue[ue.length-1],U),b(k,X[X.length-1],Q)}else I===null&&O.flush(S.context.currentTime),O.add(y(X,M,z)),x.setValueCurveAtTime(X,M,z);return k}};return n.set(k,x),e.set(k,S),r(k,I),k},Y2=r=>({replay(e){for(const n of r)if(n.type==="exponentialRampToValue"){const{endTime:i,value:o}=n;e.exponentialRampToValueAtTime(o,i)}else if(n.type==="linearRampToValue"){const{endTime:i,value:o}=n;e.linearRampToValueAtTime(o,i)}else if(n.type==="setTarget"){const{startTime:i,target:o,timeConstant:c}=n;e.setTargetAtTime(o,i,c)}else if(n.type==="setValue"){const{startTime:i,value:o}=n;e.setValueAtTime(o,i)}else if(n.type==="setValueCurve"){const{duration:i,startTime:o,values:c}=n;e.setValueCurveAtTime(c,o,i)}else throw new Error("Can't apply an unknown automation.")}});class Z0{constructor(e){this._map=new Map(e)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(e,n=null){return this._map.forEach((i,o)=>e.call(n,i,o,this))}get(e){return this._map.get(e)}has(e){return this._map.has(e)}keys(){return this._map.keys()}values(){return this._map.values()}}const W2={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}},X2=(r,e,n,i,o,c,u,d,f,m,y,_,b,S)=>class extends e{constructor(x,A,E){var D;const O=d(x),I=f(O),k=y({...W2,...E});b(k);const R=Cf.get(O),M=R?.get(A),z=I||O.state!=="closed"?O:(D=u(O))!==null&&D!==void 0?D:O,X=o(z,I?null:x.baseLatency,m,A,M,k),Q=I?i(A,k,M):null;super(x,!0,X,Q);const K=[];X.parameters.forEach((re,te)=>{const ue=n(this,I,re);K.push([te,ue])}),this._nativeAudioWorkletNode=X,this._onprocessorerror=null,this._parameters=new Z0(K),I&&r(O,this);const{activeInputs:F}=c(this);_(X,F)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(x){const A=typeof x=="function"?S(this,x):null;this._nativeAudioWorkletNode.onprocessorerror=A;const E=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=E!==null&&E===A?x:E}get parameters(){return this._parameters===null?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}};function Pc(r,e,n,i,o){if(typeof r.copyFromChannel=="function")e[n].byteLength===0&&(e[n]=new Float32Array(128)),r.copyFromChannel(e[n],i,o);else{const c=r.getChannelData(i);if(e[n].byteLength===0)e[n]=c.slice(o,o+128);else{const u=new Float32Array(c.buffer,o*Float32Array.BYTES_PER_ELEMENT,128);e[n].set(u)}}}const Q0=(r,e,n,i,o)=>{typeof r.copyToChannel=="function"?e[n].byteLength!==0&&r.copyToChannel(e[n],i,o):e[n].byteLength!==0&&r.getChannelData(i).set(e[n],o)},Hc=(r,e)=>{const n=[];for(let i=0;i<r;i+=1){const o=[],c=typeof e=="number"?e:e[i];for(let u=0;u<c;u+=1)o.push(new Float32Array(128));n.push(o)}return n},K2=(r,e)=>{const n=Xn(Nf,r),i=st(e);return Xn(n,i)},Z2=async(r,e,n,i,o,c,u)=>{const d=e===null?Math.ceil(r.context.length/128)*128:e.length,f=i.channelCount*i.numberOfInputs,m=o.reduce((A,E)=>A+E,0),y=m===0?null:n.createBuffer(m,d,n.sampleRate);if(c===void 0)throw new Error("Missing the processor constructor.");const _=Gt(r),b=await K2(n,r),S=Hc(i.numberOfInputs,i.channelCount),w=Hc(i.numberOfOutputs,o),x=Array.from(r.parameters.keys()).reduce((A,E)=>({...A,[E]:new Float32Array(128)}),{});for(let A=0;A<d;A+=128){if(i.numberOfInputs>0&&e!==null)for(let E=0;E<i.numberOfInputs;E+=1)for(let D=0;D<i.channelCount;D+=1)Pc(e,S[E],D,D,A);c.parameterDescriptors!==void 0&&e!==null&&c.parameterDescriptors.forEach(({name:E},D)=>{Pc(e,x,E,f+D,A)});for(let E=0;E<i.numberOfInputs;E+=1)for(let D=0;D<o[E];D+=1)w[E][D].byteLength===0&&(w[E][D]=new Float32Array(128));try{const E=S.map((O,I)=>_.activeInputs[I].size===0?[]:O),D=u(A/n.sampleRate,n.sampleRate,()=>b.process(E,w,x));if(y!==null)for(let O=0,I=0;O<i.numberOfOutputs;O+=1){for(let k=0;k<o[O];k+=1)Q0(y,w[O],k,I+k,A);I+=o[O]}if(!D)break}catch(E){r.dispatchEvent(new ErrorEvent("processorerror",{colno:E.colno,filename:E.filename,lineno:E.lineno,message:E.message}));break}}return y},Q2=(r,e,n,i,o,c,u,d,f,m,y,_,b,S,w,x)=>(A,E,D)=>{const O=new WeakMap;let I=null;const k=async(R,M)=>{let z=y(R),X=null;const Q=Pt(z,M),K=Array.isArray(E.outputChannelCount)?E.outputChannelCount:Array.from(E.outputChannelCount);if(_===null){const F=K.reduce((U,$)=>U+$,0),re=o(M,{channelCount:Math.max(1,F),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,F)}),te=[];for(let U=0;U<R.numberOfOutputs;U+=1)te.push(i(M,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:K[U]}));const ue=u(M,{channelCount:E.channelCount,channelCountMode:E.channelCountMode,channelInterpretation:E.channelInterpretation,gain:1});ue.connect=e.bind(null,te),ue.disconnect=f.bind(null,te),X=[re,te,ue]}else Q||(z=new _(M,A));if(O.set(M,X===null?z:X[2]),X!==null){if(I===null){if(D===void 0)throw new Error("Missing the processor constructor.");if(b===null)throw new Error("Missing the native OfflineAudioContext constructor.");const $=R.channelCount*R.numberOfInputs,J=D.parameterDescriptors===void 0?0:D.parameterDescriptors.length,ne=$+J;I=Z2(R,ne===0?null:await(async()=>{const C=new b(ne,Math.ceil(R.context.length/128)*128,M.sampleRate),P=[],ee=[];for(let he=0;he<E.numberOfInputs;he+=1)P.push(u(C,{channelCount:E.channelCount,channelCountMode:E.channelCountMode,channelInterpretation:E.channelInterpretation,gain:1})),ee.push(o(C,{channelCount:E.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:E.channelCount}));const ie=await Promise.all(Array.from(R.parameters.values()).map(async he=>{const Se=c(C,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:he.value});return await S(C,he,Se.offset),Se})),se=i(C,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,$+J)});for(let he=0;he<E.numberOfInputs;he+=1){P[he].connect(ee[he]);for(let Se=0;Se<E.channelCount;Se+=1)ee[he].connect(se,Se,he*E.channelCount+Se)}for(const[he,Se]of ie.entries())Se.connect(se,0,$+he),Se.start(0);return se.connect(C.destination),await Promise.all(P.map(he=>w(R,C,he))),x(C)})(),M,E,K,D,m)}const F=await I,re=n(M,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[te,ue,U]=X;F!==null&&(re.buffer=F,re.start(0)),re.connect(te);for(let $=0,J=0;$<R.numberOfOutputs;$+=1){const ne=ue[$];for(let oe=0;oe<K[$];oe+=1)te.connect(ne,J+oe,oe);J+=K[$]}return U}if(Q)for(const[F,re]of R.parameters.entries())await r(M,re,z.parameters.get(F));else for(const[F,re]of R.parameters.entries())await S(M,re,z.parameters.get(F));return await w(R,M,z),z};return{render(R,M){d(M,R);const z=O.get(M);return z!==void 0?Promise.resolve(z):k(R,M)}}},J2=(r,e,n,i,o,c,u,d,f,m,y,_,b,S,w,x,A,E,D,O)=>class extends w{constructor(k,R){super(k,R),this._nativeContext=k,this._audioWorklet=r===void 0?void 0:{addModule:(M,z)=>r(this,M,z)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new e(this)}createBiquadFilter(){return new o(this)}createBuffer(k,R,M){return new n({length:R,numberOfChannels:k,sampleRate:M})}createBufferSource(){return new i(this)}createChannelMerger(k=6){return new c(this,{numberOfInputs:k})}createChannelSplitter(k=6){return new u(this,{numberOfOutputs:k})}createConstantSource(){return new d(this)}createConvolver(){return new f(this)}createDelay(k=1){return new y(this,{maxDelayTime:k})}createDynamicsCompressor(){return new _(this)}createGain(){return new b(this)}createIIRFilter(k,R){return new S(this,{feedback:R,feedforward:k})}createOscillator(){return new x(this)}createPanner(){return new A(this)}createPeriodicWave(k,R,M={disableNormalization:!1}){return new E(this,{...M,imag:R,real:k})}createStereoPanner(){return new D(this)}createWaveShaper(){return new O(this)}decodeAudioData(k,R,M){return m(this._nativeContext,k).then(z=>(typeof R=="function"&&R(z),z),z=>{throw typeof M=="function"&&M(z),z})}},eN={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},tN=(r,e,n,i,o,c,u,d)=>class extends r{constructor(m,y){const _=c(m),b={...eN,...y},S=o(_,b),w=u(_),x=w?n():null;super(m,!1,S,x),this._Q=e(this,w,S.Q,$t,tn),this._detune=e(this,w,S.detune,1200*Math.log2($t),-1200*Math.log2($t)),this._frequency=e(this,w,S.frequency,m.sampleRate/2,0),this._gain=e(this,w,S.gain,40*Math.log10($t),tn),this._nativeBiquadFilterNode=S,d(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(m){this._nativeBiquadFilterNode.type=m}getFrequencyResponse(m,y,_){try{this._nativeBiquadFilterNode.getFrequencyResponse(m,y,_)}catch(b){throw b.code===11?i():b}if(m.length!==y.length||y.length!==_.length)throw i()}},nN=(r,e,n,i,o)=>()=>{const c=new WeakMap,u=async(d,f)=>{let m=n(d);const y=Pt(m,f);if(!y){const _={Q:m.Q.value,channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation,detune:m.detune.value,frequency:m.frequency.value,gain:m.gain.value,type:m.type};m=e(f,_)}return c.set(f,m),y?(await r(f,d.Q,m.Q),await r(f,d.detune,m.detune),await r(f,d.frequency,m.frequency),await r(f,d.gain,m.gain)):(await i(f,d.Q,m.Q),await i(f,d.detune,m.detune),await i(f,d.frequency,m.frequency),await i(f,d.gain,m.gain)),await o(d,f,m),m};return{render(d,f){const m=c.get(f);return m!==void 0?Promise.resolve(m):u(d,f)}}},sN=(r,e)=>(n,i)=>{const o=e.get(n);if(o!==void 0)return o;const c=r.get(n);if(c!==void 0)return c;try{const u=i();return u instanceof Promise?(r.set(n,u),u.catch(()=>!1).then(d=>(r.delete(n),e.set(n,d),d))):(e.set(n,u),u)}catch{return e.set(n,!1),!1}},iN={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},rN=(r,e,n,i,o)=>class extends r{constructor(u,d){const f=i(u),m={...iN,...d},y=n(f,m),_=o(f)?e():null;super(u,!1,y,_)}},aN=(r,e,n)=>()=>{const i=new WeakMap,o=async(c,u)=>{let d=e(c);if(!Pt(d,u)){const m={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,numberOfInputs:d.numberOfInputs};d=r(u,m)}return i.set(u,d),await n(c,u,d),d};return{render(c,u){const d=i.get(u);return d!==void 0?Promise.resolve(d):o(c,u)}}},oN={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},lN=(r,e,n,i,o,c)=>class extends r{constructor(d,f){const m=i(d),y=c({...oN,...f}),_=n(m,y),b=o(m)?e():null;super(d,!1,_,b)}},cN=(r,e,n)=>()=>{const i=new WeakMap,o=async(c,u)=>{let d=e(c);if(!Pt(d,u)){const m={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,numberOfOutputs:d.numberOfOutputs};d=r(u,m)}return i.set(u,d),await n(c,u,d),d};return{render(c,u){const d=i.get(u);return d!==void 0?Promise.resolve(d):o(c,u)}}},uN=r=>(e,n,i)=>r(n,e,i),hN=r=>(e,n,i=0,o=0)=>{const c=e[i];if(c===void 0)throw r();return Ic(n)?c.connect(n,0,o):c.connect(n,0)},dN=r=>(e,n)=>{const i=r(e,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),o=e.createBuffer(1,2,44100);return i.buffer=o,i.loop=!0,i.connect(n),i.start(),()=>{i.stop(),i.disconnect(n)}},fN={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},pN=(r,e,n,i,o,c,u)=>class extends r{constructor(f,m){const y=o(f),_={...fN,...m},b=i(y,_),S=c(y),w=S?n():null;super(f,!1,b,w),this._constantSourceNodeRenderer=w,this._nativeConstantSourceNode=b,this._offset=e(this,S,b.offset,$t,tn),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(f){const m=typeof f=="function"?u(this,f):null;this._nativeConstantSourceNode.onended=m;const y=this._nativeConstantSourceNode.onended;this._onended=y!==null&&y===m?f:y}start(f=0){if(this._nativeConstantSourceNode.start(f),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.start=f),this.context.state!=="closed"){ha(this);const m=()=>{this._nativeConstantSourceNode.removeEventListener("ended",m),zs(this)&&Io(this)};this._nativeConstantSourceNode.addEventListener("ended",m)}}stop(f=0){this._nativeConstantSourceNode.stop(f),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.stop=f)}},mN=(r,e,n,i,o)=>()=>{const c=new WeakMap;let u=null,d=null;const f=async(m,y)=>{let _=n(m);const b=Pt(_,y);if(!b){const S={channelCount:_.channelCount,channelCountMode:_.channelCountMode,channelInterpretation:_.channelInterpretation,offset:_.offset.value};_=e(y,S),u!==null&&_.start(u),d!==null&&_.stop(d)}return c.set(y,_),b?await r(y,m.offset,_.offset):await i(y,m.offset,_.offset),await o(m,y,_),_};return{set start(m){u=m},set stop(m){d=m},render(m,y){const _=c.get(y);return _!==void 0?Promise.resolve(_):f(m,y)}}},gN=r=>e=>(r[0]=e,r[0]),yN={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},_N=(r,e,n,i,o,c)=>class extends r{constructor(d,f){const m=i(d),y={...yN,...f},_=n(m,y),S=o(m)?e():null;super(d,!1,_,S),this._isBufferNullified=!1,this._nativeConvolverNode=_,y.buffer!==null&&c(this,y.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(d){if(this._nativeConvolverNode.buffer=d,d===null&&this._nativeConvolverNode.buffer!==null){const f=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=f.createBuffer(1,1,f.sampleRate),this._isBufferNullified=!0,c(this,0)}else this._isBufferNullified=!1,c(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(d){this._nativeConvolverNode.normalize=d}},vN=(r,e,n)=>()=>{const i=new WeakMap,o=async(c,u)=>{let d=e(c);if(!Pt(d,u)){const m={buffer:d.buffer,channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,disableNormalization:!d.normalize};d=r(u,m)}return i.set(u,d),_a(d)?await n(c,u,d.inputs[0]):await n(c,u,d),d};return{render(c,u){const d=i.get(u);return d!==void 0?Promise.resolve(d):o(c,u)}}},bN=(r,e)=>(n,i,o)=>{if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new e(n,i,o)}catch(c){throw c.name==="SyntaxError"?r():c}},wN=()=>new DOMException("","DataCloneError"),Lv=r=>{const{port1:e,port2:n}=new MessageChannel;return new Promise(i=>{const o=()=>{n.onmessage=null,e.close(),n.close(),i()};n.onmessage=()=>o();try{e.postMessage(r,[r])}catch{}finally{o()}})},SN=(r,e,n,i,o,c,u,d,f,m,y)=>(_,b)=>{const S=u(_)?_:c(_);if(o.has(b)){const w=n();return Promise.reject(w)}try{o.add(b)}catch{}return e(f,()=>f(S))?S.decodeAudioData(b).then(w=>(Lv(b).catch(()=>{}),e(d,()=>d(w))||y(w),r.add(w),w)):new Promise((w,x)=>{const A=async()=>{try{await Lv(b)}catch{}},E=D=>{x(D),A()};try{S.decodeAudioData(b,D=>{typeof D.copyFromChannel!="function"&&(m(D),ep(D)),r.add(D),A().then(()=>w(D))},D=>{E(D===null?i():D)})}catch(D){E(D)}})},TN=(r,e,n,i,o,c,u,d)=>(f,m)=>{const y=e.get(f);if(y===void 0)throw new Error("Missing the expected cycle count.");const _=c(f.context),b=d(_);if(y===m){if(e.delete(f),!b&&u(f)){const S=i(f),{outputs:w}=n(f);for(const x of w)if(Ho(x)){const A=i(x[0]);r(S,A,x[1],x[2])}else{const A=o(x[0]);S.connect(A,x[1])}}}else e.set(f,y-m)},xN={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},AN=(r,e,n,i,o,c,u)=>class extends r{constructor(f,m){const y=o(f),_={...xN,...m},b=i(y,_),S=c(y),w=S?n(_.maxDelayTime):null;super(f,!1,b,w),this._delayTime=e(this,S,b.delayTime),u(this,_.maxDelayTime)}get delayTime(){return this._delayTime}},EN=(r,e,n,i,o)=>c=>{const u=new WeakMap,d=async(f,m)=>{let y=n(f);const _=Pt(y,m);if(!_){const b={channelCount:y.channelCount,channelCountMode:y.channelCountMode,channelInterpretation:y.channelInterpretation,delayTime:y.delayTime.value,maxDelayTime:c};y=e(m,b)}return u.set(m,y),_?await r(m,f.delayTime,y.delayTime):await i(m,f.delayTime,y.delayTime),await o(f,m,y),y};return{render(f,m){const y=u.get(m);return y!==void 0?Promise.resolve(y):d(f,m)}}},CN=r=>(e,n,i,o)=>r(e[o],c=>c[0]===n&&c[1]===i),NN=r=>(e,n)=>{r(e).delete(n)},ON=r=>"delayTime"in r,kN=(r,e,n)=>function i(o,c){const u=qc(c)?c:n(r,c);if(ON(u))return[];if(o[0]===u)return[o];if(o.includes(u))return[];const{outputs:d}=e(u);return Array.from(d).map(f=>i([...o,u],f[0])).reduce((f,m)=>f.concat(m),[])},xc=(r,e,n)=>{const i=e[n];if(i===void 0)throw r();return i},RN=r=>(e,n=void 0,i=void 0,o=0)=>n===void 0?e.forEach(c=>c.disconnect()):typeof n=="number"?xc(r,e,n).disconnect():Ic(n)?i===void 0?e.forEach(c=>c.disconnect(n)):o===void 0?xc(r,e,i).disconnect(n,0):xc(r,e,i).disconnect(n,0,o):i===void 0?e.forEach(c=>c.disconnect(n)):xc(r,e,i).disconnect(n,0),jN={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},DN=(r,e,n,i,o,c,u,d)=>class extends r{constructor(m,y){const _=c(m),b={...jN,...y},S=i(_,b),w=u(_),x=w?n():null;super(m,!1,S,x),this._attack=e(this,w,S.attack),this._knee=e(this,w,S.knee),this._nativeDynamicsCompressorNode=S,this._ratio=e(this,w,S.ratio),this._release=e(this,w,S.release),this._threshold=e(this,w,S.threshold),d(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(m){const y=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=m,m>2)throw this._nativeDynamicsCompressorNode.channelCount=y,o()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(m){const y=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=m,m==="max")throw this._nativeDynamicsCompressorNode.channelCountMode=y,o()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value=="number"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}},MN=(r,e,n,i,o)=>()=>{const c=new WeakMap,u=async(d,f)=>{let m=n(d);const y=Pt(m,f);if(!y){const _={attack:m.attack.value,channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation,knee:m.knee.value,ratio:m.ratio.value,release:m.release.value,threshold:m.threshold.value};m=e(f,_)}return c.set(f,m),y?(await r(f,d.attack,m.attack),await r(f,d.knee,m.knee),await r(f,d.ratio,m.ratio),await r(f,d.release,m.release),await r(f,d.threshold,m.threshold)):(await i(f,d.attack,m.attack),await i(f,d.knee,m.knee),await i(f,d.ratio,m.ratio),await i(f,d.release,m.release),await i(f,d.threshold,m.threshold)),await o(d,f,m),m};return{render(d,f){const m=c.get(f);return m!==void 0?Promise.resolve(m):u(d,f)}}},UN=()=>new DOMException("","EncodingError"),zN=r=>e=>new Promise((n,i)=>{if(r===null){i(new SyntaxError);return}const o=r.document.head;if(o===null)i(new SyntaxError);else{const c=r.document.createElement("script"),u=new Blob([e],{type:"application/javascript"}),d=URL.createObjectURL(u),f=r.onerror,m=()=>{r.onerror=f,URL.revokeObjectURL(d)};r.onerror=(y,_,b,S,w)=>{if(_===d||_===r.location.href&&b===1&&S===1)return m(),i(w),!1;if(f!==null)return f(y,_,b,S,w)},c.onerror=()=>{m(),i(new SyntaxError)},c.onload=()=>{m(),n()},c.src=d,c.type="module",o.appendChild(c)}}),BN=r=>class{constructor(n){this._nativeEventTarget=n,this._listeners=new WeakMap}addEventListener(n,i,o){if(i!==null){let c=this._listeners.get(i);c===void 0&&(c=r(this,i),typeof i=="function"&&this._listeners.set(i,c)),this._nativeEventTarget.addEventListener(n,c,o)}}dispatchEvent(n){return this._nativeEventTarget.dispatchEvent(n)}removeEventListener(n,i,o){const c=i===null?void 0:this._listeners.get(i);this._nativeEventTarget.removeEventListener(n,c===void 0?null:c,o)}},qN=r=>(e,n,i)=>{Object.defineProperties(r,{currentFrame:{configurable:!0,get(){return Math.round(e*n)}},currentTime:{configurable:!0,get(){return e}}});try{return i()}finally{r!==null&&(delete r.currentFrame,delete r.currentTime)}},LN=r=>async e=>{try{const n=await fetch(e);if(n.ok)return[await n.text(),n.url]}catch{}throw r()},VN={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},IN=(r,e,n,i,o,c)=>class extends r{constructor(d,f){const m=o(d),y={...VN,...f},_=i(m,y),b=c(m),S=b?n():null;super(d,!1,_,S),this._gain=e(this,b,_.gain,$t,tn)}get gain(){return this._gain}},PN=(r,e,n,i,o)=>()=>{const c=new WeakMap,u=async(d,f)=>{let m=n(d);const y=Pt(m,f);if(!y){const _={channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation,gain:m.gain.value};m=e(f,_)}return c.set(f,m),y?await r(f,d.gain,m.gain):await i(f,d.gain,m.gain),await o(d,f,m),m};return{render(d,f){const m=c.get(f);return m!==void 0?Promise.resolve(m):u(d,f)}}},HN=(r,e)=>n=>e(r,n),$N=r=>e=>{const n=r(e);if(n.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return n.renderer},GN=r=>e=>{var n;return(n=r.get(e))!==null&&n!==void 0?n:0},FN=r=>e=>{const n=r(e);if(n.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return n.renderer},YN=r=>e=>r.get(e),kt=()=>new DOMException("","InvalidStateError"),WN=r=>e=>{const n=r.get(e);if(n===void 0)throw kt();return n},XN=(r,e)=>n=>{let i=r.get(n);if(i!==void 0)return i;if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");return i=new e(1,1,44100),r.set(n,i),i},KN=r=>e=>{const n=r.get(e);if(n===void 0)throw new Error("The context has no set of AudioWorkletNodes.");return n},iu=()=>new DOMException("","InvalidAccessError"),ZN=r=>{r.getFrequencyResponse=(e=>(n,i,o)=>{if(n.length!==i.length||i.length!==o.length)throw iu();return e.call(r,n,i,o)})(r.getFrequencyResponse)},QN={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},JN=(r,e,n,i,o,c)=>class extends r{constructor(d,f){const m=i(d),y=o(m),_={...QN,...f},b=e(m,y?null:d.baseLatency,_),S=y?n(_.feedback,_.feedforward):null;super(d,!1,b,S),ZN(b),this._nativeIIRFilterNode=b,c(this,1)}getFrequencyResponse(d,f,m){return this._nativeIIRFilterNode.getFrequencyResponse(d,f,m)}},J0=(r,e,n,i,o,c,u,d,f,m,y)=>{const _=m.length;let b=d;for(let S=0;S<_;S+=1){let w=n[0]*m[S];for(let x=1;x<o;x+=1){const A=b-x&f-1;w+=n[x]*c[A],w-=r[x]*u[A]}for(let x=o;x<i;x+=1)w+=n[x]*c[b-x&f-1];for(let x=o;x<e;x+=1)w-=r[x]*u[b-x&f-1];c[b]=m[S],u[b]=w,b=b+1&f-1,y[S]=w}return b},eO=(r,e,n,i)=>{const o=n instanceof Float64Array?n:new Float64Array(n),c=i instanceof Float64Array?i:new Float64Array(i),u=o.length,d=c.length,f=Math.min(u,d);if(o[0]!==1){for(let w=0;w<u;w+=1)c[w]/=o[0];for(let w=1;w<d;w+=1)o[w]/=o[0]}const m=32,y=new Float32Array(m),_=new Float32Array(m),b=e.createBuffer(r.numberOfChannels,r.length,r.sampleRate),S=r.numberOfChannels;for(let w=0;w<S;w+=1){const x=r.getChannelData(w),A=b.getChannelData(w);y.fill(0),_.fill(0),J0(o,u,c,d,f,y,_,0,m,x,A)}return b},tO=(r,e,n,i,o)=>(c,u)=>{const d=new WeakMap;let f=null;const m=async(y,_)=>{let b=null,S=e(y);const w=Pt(S,_);if(_.createIIRFilter===void 0?b=r(_,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):w||(S=_.createIIRFilter(u,c)),d.set(_,b===null?S:b),b!==null){if(f===null){if(n===null)throw new Error("Missing the native OfflineAudioContext constructor.");const A=new n(y.context.destination.channelCount,y.context.length,_.sampleRate);f=(async()=>{await i(y,A,A.destination);const E=await o(A);return eO(E,_,c,u)})()}const x=await f;return b.buffer=x,b.start(0),b}return await i(y,_,S),S};return{render(y,_){const b=d.get(_);return b!==void 0?Promise.resolve(b):m(y,_)}}},nO=(r,e,n,i,o,c)=>u=>(d,f)=>{const m=r.get(d);if(m===void 0){if(!u&&c(d)){const y=i(d),{outputs:_}=n(d);for(const b of _)if(Ho(b)){const S=i(b[0]);e(y,S,b[1],b[2])}else{const S=o(b[0]);y.disconnect(S,b[1])}}r.set(d,f)}else r.set(d,m+f)},sO=(r,e)=>n=>{const i=r.get(n);return e(i)||e(n)},iO=(r,e)=>n=>r.has(n)||e(n),rO=(r,e)=>n=>r.has(n)||e(n),aO=(r,e)=>n=>{const i=r.get(n);return e(i)||e(n)},oO=r=>e=>r!==null&&e instanceof r,lO=r=>e=>r!==null&&typeof r.AudioNode=="function"&&e instanceof r.AudioNode,cO=r=>e=>r!==null&&typeof r.AudioParam=="function"&&e instanceof r.AudioParam,uO=(r,e)=>n=>r(n)||e(n),hO=r=>e=>r!==null&&e instanceof r,dO=r=>r!==null&&r.isSecureContext,fO=(r,e,n,i)=>class extends r{constructor(c,u){const d=n(c),f=e(d,u);if(i(d))throw TypeError();super(c,!0,f,null),this._nativeMediaElementAudioSourceNode=f}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}},pO={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},mO=(r,e,n,i)=>class extends r{constructor(c,u){const d=n(c);if(i(d))throw new TypeError;const f={...pO,...u},m=e(d,f);super(c,!1,m,null),this._nativeMediaStreamAudioDestinationNode=m}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}},gO=(r,e,n,i)=>class extends r{constructor(c,u){const d=n(c),f=e(d,u);if(i(d))throw new TypeError;super(c,!0,f,null),this._nativeMediaStreamAudioSourceNode=f}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}},yO=(r,e,n)=>class extends r{constructor(o,c){const u=n(o),d=e(u,c);super(o,!0,d,null)}},_O=(r,e,n,i,o,c)=>class extends n{constructor(d,f){super(d),this._nativeContext=d,nu.set(this,d),i(d)&&o.set(d,new Set),this._destination=new r(this,f),this._listener=e(this,d),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(d){const f=typeof d=="function"?c(this,d):null;this._nativeContext.onstatechange=f;const m=this._nativeContext.onstatechange;this._onstatechange=m!==null&&m===f?d:m}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}},Uo=r=>{const e=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const n=r.decodeAudioData(e.buffer,()=>{});return n===void 0?!1:(n.catch(()=>{}),!0)}catch{}return!1},vO=(r,e)=>(n,i,o)=>{const c=new Set;return n.connect=(u=>(d,f=0,m=0)=>{const y=c.size===0;if(e(d))return u.call(n,d,f,m),r(c,[d,f,m],_=>_[0]===d&&_[1]===f&&_[2]===m,!0),y&&i(),d;u.call(n,d,f),r(c,[d,f],_=>_[0]===d&&_[1]===f,!0),y&&i()})(n.connect),n.disconnect=(u=>(d,f,m)=>{const y=c.size>0;if(d===void 0)u.apply(n),c.clear();else if(typeof d=="number"){u.call(n,d);for(const b of c)b[1]===d&&c.delete(b)}else{e(d)?u.call(n,d,f,m):u.call(n,d,f);for(const b of c)b[0]===d&&(f===void 0||b[1]===f)&&(m===void 0||b[2]===m)&&c.delete(b)}const _=c.size===0;y&&_&&o()})(n.disconnect),n},rt=(r,e,n)=>{const i=e[n];i!==void 0&&i!==r[n]&&(r[n]=i)},Ct=(r,e)=>{rt(r,e,"channelCount"),rt(r,e,"channelCountMode"),rt(r,e,"channelInterpretation")},Vv=r=>typeof r.getFloatTimeDomainData=="function",bO=r=>{r.getFloatTimeDomainData=e=>{const n=new Uint8Array(e.length);r.getByteTimeDomainData(n);const i=Math.max(n.length,r.fftSize);for(let o=0;o<i;o+=1)e[o]=(n[o]-128)*.0078125;return e}},wO=(r,e)=>(n,i)=>{const o=n.createAnalyser();if(Ct(o,i),!(i.maxDecibels>i.minDecibels))throw e();return rt(o,i,"fftSize"),rt(o,i,"maxDecibels"),rt(o,i,"minDecibels"),rt(o,i,"smoothingTimeConstant"),r(Vv,()=>Vv(o))||bO(o),o},SO=r=>r===null?null:r.hasOwnProperty("AudioBuffer")?r.AudioBuffer:null,dt=(r,e,n)=>{const i=e[n];i!==void 0&&i!==r[n].value&&(r[n].value=i)},TO=r=>{r.start=(e=>{let n=!1;return(i=0,o=0,c)=>{if(n)throw kt();e.call(r,i,o,c),n=!0}})(r.start)},sp=r=>{r.start=(e=>(n=0,i=0,o)=>{if(typeof o=="number"&&o<0||i<0||n<0)throw new RangeError("The parameters can't be negative.");e.call(r,n,i,o)})(r.start)},ip=r=>{r.stop=(e=>(n=0)=>{if(n<0)throw new RangeError("The parameter can't be negative.");e.call(r,n)})(r.stop)},xO=(r,e,n,i,o,c,u,d,f,m,y)=>(_,b)=>{const S=_.createBufferSource();return Ct(S,b),dt(S,b,"playbackRate"),rt(S,b,"buffer"),rt(S,b,"loop"),rt(S,b,"loopEnd"),rt(S,b,"loopStart"),e(n,()=>n(_))||TO(S),e(i,()=>i(_))||f(S),e(o,()=>o(_))||m(S,_),e(c,()=>c(_))||sp(S),e(u,()=>u(_))||y(S,_),e(d,()=>d(_))||ip(S),r(_,S),S},AO=r=>r===null?null:r.hasOwnProperty("AudioContext")?r.AudioContext:r.hasOwnProperty("webkitAudioContext")?r.webkitAudioContext:null,EO=(r,e)=>(n,i,o)=>{const c=n.destination;if(c.channelCount!==i)try{c.channelCount=i}catch{}o&&c.channelCountMode!=="explicit"&&(c.channelCountMode="explicit"),c.maxChannelCount===0&&Object.defineProperty(c,"maxChannelCount",{value:i});const u=r(n,{channelCount:i,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,gain:1});return e(u,"channelCount",d=>()=>d.call(u),d=>f=>{d.call(u,f);try{c.channelCount=f}catch(m){if(f>c.maxChannelCount)throw m}}),e(u,"channelCountMode",d=>()=>d.call(u),d=>f=>{d.call(u,f),c.channelCountMode=f}),e(u,"channelInterpretation",d=>()=>d.call(u),d=>f=>{d.call(u,f),c.channelInterpretation=f}),Object.defineProperty(u,"maxChannelCount",{get:()=>c.maxChannelCount}),u.connect(c),u},CO=r=>r===null?null:r.hasOwnProperty("AudioWorkletNode")?r.AudioWorkletNode:null,NO=r=>{const{port1:e}=new MessageChannel;try{e.postMessage(r)}finally{e.close()}},OO=(r,e,n,i,o)=>(c,u,d,f,m,y)=>{if(d!==null)try{const _=new d(c,f,y),b=new Map;let S=null;if(Object.defineProperties(_,{channelCount:{get:()=>y.channelCount,set:()=>{throw r()}},channelCountMode:{get:()=>"explicit",set:()=>{throw r()}},onprocessorerror:{get:()=>S,set:w=>{typeof S=="function"&&_.removeEventListener("processorerror",S),S=typeof w=="function"?w:null,typeof S=="function"&&_.addEventListener("processorerror",S)}}}),_.addEventListener=(w=>(...x)=>{if(x[0]==="processorerror"){const A=typeof x[1]=="function"?x[1]:typeof x[1]=="object"&&x[1]!==null&&typeof x[1].handleEvent=="function"?x[1].handleEvent:null;if(A!==null){const E=b.get(x[1]);E!==void 0?x[1]=E:(x[1]=D=>{D.type==="error"?(Object.defineProperties(D,{type:{value:"processorerror"}}),A(D)):A(new ErrorEvent(x[0],{...D}))},b.set(A,x[1]))}}return w.call(_,"error",x[1],x[2]),w.call(_,...x)})(_.addEventListener),_.removeEventListener=(w=>(...x)=>{if(x[0]==="processorerror"){const A=b.get(x[1]);A!==void 0&&(b.delete(x[1]),x[1]=A)}return w.call(_,"error",x[1],x[2]),w.call(_,x[0],x[1],x[2])})(_.removeEventListener),y.numberOfOutputs!==0){const w=n(c,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return _.connect(w).connect(c.destination),o(_,()=>w.disconnect(),()=>w.connect(c.destination))}return _}catch(_){throw _.code===11?i():_}if(m===void 0)throw i();return NO(y),e(c,u,m,y)},eb=(r,e)=>r===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(r*e))))),kO=r=>new Promise((e,n)=>{const{port1:i,port2:o}=new MessageChannel;i.onmessage=({data:c})=>{i.close(),o.close(),e(c)},i.onmessageerror=({data:c})=>{i.close(),o.close(),n(c)},o.postMessage(r)}),RO=async(r,e)=>{const n=await kO(e);return new r(n)},jO=(r,e,n,i)=>{let o=Nf.get(r);o===void 0&&(o=new WeakMap,Nf.set(r,o));const c=RO(n,i);return o.set(e,c),c},DO=(r,e,n,i,o,c,u,d,f,m,y,_,b)=>(S,w,x,A)=>{if(A.numberOfInputs===0&&A.numberOfOutputs===0)throw f();const E=Array.isArray(A.outputChannelCount)?A.outputChannelCount:Array.from(A.outputChannelCount);if(E.some(ae=>ae<1))throw f();if(E.length!==A.numberOfOutputs)throw e();if(A.channelCountMode!=="explicit")throw f();const D=A.channelCount*A.numberOfInputs,O=E.reduce((ae,ye)=>ae+ye,0),I=x.parameterDescriptors===void 0?0:x.parameterDescriptors.length;if(D+I>6||O>6)throw f();const k=new MessageChannel,R=[],M=[];for(let ae=0;ae<A.numberOfInputs;ae+=1)R.push(u(S,{channelCount:A.channelCount,channelCountMode:A.channelCountMode,channelInterpretation:A.channelInterpretation,gain:1})),M.push(o(S,{channelCount:A.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:A.channelCount}));const z=[];if(x.parameterDescriptors!==void 0)for(const{defaultValue:ae,maxValue:ye,minValue:pt,name:Ze}of x.parameterDescriptors){const je=c(S,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:A.parameterData[Ze]!==void 0?A.parameterData[Ze]:ae===void 0?0:ae});Object.defineProperties(je.offset,{defaultValue:{get:()=>ae===void 0?0:ae},maxValue:{get:()=>ye===void 0?$t:ye},minValue:{get:()=>pt===void 0?tn:pt}}),z.push(je)}const X=i(S,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,D+I)}),Q=eb(w,S.sampleRate),K=d(S,Q,D+I,Math.max(1,O)),F=o(S,{channelCount:Math.max(1,O),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,O)}),re=[];for(let ae=0;ae<A.numberOfOutputs;ae+=1)re.push(i(S,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:E[ae]}));for(let ae=0;ae<A.numberOfInputs;ae+=1){R[ae].connect(M[ae]);for(let ye=0;ye<A.channelCount;ye+=1)M[ae].connect(X,ye,ae*A.channelCount+ye)}const te=new Z0(x.parameterDescriptors===void 0?[]:x.parameterDescriptors.map(({name:ae},ye)=>{const pt=z[ye];return pt.connect(X,0,D+ye),pt.start(0),[ae,pt.offset]}));X.connect(K);let ue=A.channelInterpretation,U=null;const $=A.numberOfOutputs===0?[K]:re,J={get bufferSize(){return Q},get channelCount(){return A.channelCount},set channelCount(ae){throw n()},get channelCountMode(){return A.channelCountMode},set channelCountMode(ae){throw n()},get channelInterpretation(){return ue},set channelInterpretation(ae){for(const ye of R)ye.channelInterpretation=ae;ue=ae},get context(){return K.context},get inputs(){return R},get numberOfInputs(){return A.numberOfInputs},get numberOfOutputs(){return A.numberOfOutputs},get onprocessorerror(){return U},set onprocessorerror(ae){typeof U=="function"&&J.removeEventListener("processorerror",U),U=typeof ae=="function"?ae:null,typeof U=="function"&&J.addEventListener("processorerror",U)},get parameters(){return te},get port(){return k.port2},addEventListener(...ae){return K.addEventListener(ae[0],ae[1],ae[2])},connect:r.bind(null,$),disconnect:m.bind(null,$),dispatchEvent(...ae){return K.dispatchEvent(ae[0])},removeEventListener(...ae){return K.removeEventListener(ae[0],ae[1],ae[2])}},ne=new Map;k.port1.addEventListener=(ae=>(...ye)=>{if(ye[0]==="message"){const pt=typeof ye[1]=="function"?ye[1]:typeof ye[1]=="object"&&ye[1]!==null&&typeof ye[1].handleEvent=="function"?ye[1].handleEvent:null;if(pt!==null){const Ze=ne.get(ye[1]);Ze!==void 0?ye[1]=Ze:(ye[1]=je=>{y(S.currentTime,S.sampleRate,()=>pt(je))},ne.set(pt,ye[1]))}}return ae.call(k.port1,ye[0],ye[1],ye[2])})(k.port1.addEventListener),k.port1.removeEventListener=(ae=>(...ye)=>{if(ye[0]==="message"){const pt=ne.get(ye[1]);pt!==void 0&&(ne.delete(ye[1]),ye[1]=pt)}return ae.call(k.port1,ye[0],ye[1],ye[2])})(k.port1.removeEventListener);let oe=null;Object.defineProperty(k.port1,"onmessage",{get:()=>oe,set:ae=>{typeof oe=="function"&&k.port1.removeEventListener("message",oe),oe=typeof ae=="function"?ae:null,typeof oe=="function"&&(k.port1.addEventListener("message",oe),k.port1.start())}}),x.prototype.port=k.port1;let C=null;jO(S,J,x,A).then(ae=>C=ae);const ee=Hc(A.numberOfInputs,A.channelCount),ie=Hc(A.numberOfOutputs,E),se=x.parameterDescriptors===void 0?[]:x.parameterDescriptors.reduce((ae,{name:ye})=>({...ae,[ye]:new Float32Array(128)}),{});let he=!0;const Se=()=>{A.numberOfOutputs>0&&K.disconnect(F);for(let ae=0,ye=0;ae<A.numberOfOutputs;ae+=1){const pt=re[ae];for(let Ze=0;Ze<E[ae];Ze+=1)F.disconnect(pt,ye+Ze,Ze);ye+=E[ae]}},le=new Map;K.onaudioprocess=({inputBuffer:ae,outputBuffer:ye})=>{if(C!==null){const pt=_(J);for(let Ze=0;Ze<Q;Ze+=128){for(let je=0;je<A.numberOfInputs;je+=1)for(let Qe=0;Qe<A.channelCount;Qe+=1)Pc(ae,ee[je],Qe,Qe,Ze);x.parameterDescriptors!==void 0&&x.parameterDescriptors.forEach(({name:je},Qe)=>{Pc(ae,se,je,D+Qe,Ze)});for(let je=0;je<A.numberOfInputs;je+=1)for(let Qe=0;Qe<E[je];Qe+=1)ie[je][Qe].byteLength===0&&(ie[je][Qe]=new Float32Array(128));try{const je=ee.map((Vt,es)=>{if(pt[es].size>0)return le.set(es,Q/128),Vt;const Rt=le.get(es);return Rt===void 0?[]:(Vt.every(Tu=>Tu.every(Jo=>Jo===0))&&(Rt===1?le.delete(es):le.set(es,Rt-1)),Vt)});he=y(S.currentTime+Ze/S.sampleRate,S.sampleRate,()=>C.process(je,ie,se));for(let Vt=0,es=0;Vt<A.numberOfOutputs;Vt+=1){for(let xi=0;xi<E[Vt];xi+=1)Q0(ye,ie[Vt],xi,es+xi,Ze);es+=E[Vt]}}catch(je){he=!1,J.dispatchEvent(new ErrorEvent("processorerror",{colno:je.colno,filename:je.filename,lineno:je.lineno,message:je.message}))}if(!he){for(let je=0;je<A.numberOfInputs;je+=1){R[je].disconnect(M[je]);for(let Qe=0;Qe<A.channelCount;Qe+=1)M[Ze].disconnect(X,Qe,je*A.channelCount+Qe)}if(x.parameterDescriptors!==void 0){const je=x.parameterDescriptors.length;for(let Qe=0;Qe<je;Qe+=1){const Vt=z[Qe];Vt.disconnect(X,0,D+Qe),Vt.stop()}}X.disconnect(K),K.onaudioprocess=null,Le?Se():Jn();break}}}};let Le=!1;const rn=u(S,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),Mn=()=>K.connect(rn).connect(S.destination),Jn=()=>{K.disconnect(rn),rn.disconnect()},Qo=()=>{if(he){Jn(),A.numberOfOutputs>0&&K.connect(F);for(let ae=0,ye=0;ae<A.numberOfOutputs;ae+=1){const pt=re[ae];for(let Ze=0;Ze<E[ae];Ze+=1)F.connect(pt,ye+Ze,Ze);ye+=E[ae]}}Le=!0},ps=()=>{he&&(Mn(),Se()),Le=!1};return Mn(),b(J,Qo,ps)},tb=(r,e)=>{const n=r.createBiquadFilter();return Ct(n,e),dt(n,e,"Q"),dt(n,e,"detune"),dt(n,e,"frequency"),dt(n,e,"gain"),rt(n,e,"type"),n},MO=(r,e)=>(n,i)=>{const o=n.createChannelMerger(i.numberOfInputs);return r!==null&&r.name==="webkitAudioContext"&&e(n,o),Ct(o,i),o},UO=r=>{const e=r.numberOfOutputs;Object.defineProperty(r,"channelCount",{get:()=>e,set:n=>{if(n!==e)throw kt()}}),Object.defineProperty(r,"channelCountMode",{get:()=>"explicit",set:n=>{if(n!=="explicit")throw kt()}}),Object.defineProperty(r,"channelInterpretation",{get:()=>"discrete",set:n=>{if(n!=="discrete")throw kt()}})},$o=(r,e)=>{const n=r.createChannelSplitter(e.numberOfOutputs);return Ct(n,e),UO(n),n},zO=(r,e,n,i,o)=>(c,u)=>{if(c.createConstantSource===void 0)return n(c,u);const d=c.createConstantSource();return Ct(d,u),dt(d,u,"offset"),e(i,()=>i(c))||sp(d),e(o,()=>o(c))||ip(d),r(c,d),d},va=(r,e)=>(r.connect=e.connect.bind(e),r.disconnect=e.disconnect.bind(e),r),BO=(r,e,n,i)=>(o,{offset:c,...u})=>{const d=o.createBuffer(1,2,44100),f=e(o,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),m=n(o,{...u,gain:c}),y=d.getChannelData(0);y[0]=1,y[1]=1,f.buffer=d,f.loop=!0;const _={get bufferSize(){},get channelCount(){return m.channelCount},set channelCount(w){m.channelCount=w},get channelCountMode(){return m.channelCountMode},set channelCountMode(w){m.channelCountMode=w},get channelInterpretation(){return m.channelInterpretation},set channelInterpretation(w){m.channelInterpretation=w},get context(){return m.context},get inputs(){return[]},get numberOfInputs(){return f.numberOfInputs},get numberOfOutputs(){return m.numberOfOutputs},get offset(){return m.gain},get onended(){return f.onended},set onended(w){f.onended=w},addEventListener(...w){return f.addEventListener(w[0],w[1],w[2])},dispatchEvent(...w){return f.dispatchEvent(w[0])},removeEventListener(...w){return f.removeEventListener(w[0],w[1],w[2])},start(w=0){f.start.call(f,w)},stop(w=0){f.stop.call(f,w)}},b=()=>f.connect(m),S=()=>f.disconnect(m);return r(o,f),i(va(_,m),b,S)},qO=(r,e)=>(n,i)=>{const o=n.createConvolver();if(Ct(o,i),i.disableNormalization===o.normalize&&(o.normalize=!i.disableNormalization),rt(o,i,"buffer"),i.channelCount>2||(e(o,"channelCount",c=>()=>c.call(o),c=>u=>{if(u>2)throw r();return c.call(o,u)}),i.channelCountMode==="max"))throw r();return e(o,"channelCountMode",c=>()=>c.call(o),c=>u=>{if(u==="max")throw r();return c.call(o,u)}),o},nb=(r,e)=>{const n=r.createDelay(e.maxDelayTime);return Ct(n,e),dt(n,e,"delayTime"),n},LO=r=>(e,n)=>{const i=e.createDynamicsCompressor();if(Ct(i,n),n.channelCount>2||n.channelCountMode==="max")throw r();return dt(i,n,"attack"),dt(i,n,"knee"),dt(i,n,"ratio"),dt(i,n,"release"),dt(i,n,"threshold"),i},sn=(r,e)=>{const n=r.createGain();return Ct(n,e),dt(n,e,"gain"),n},VO=r=>(e,n,i)=>{if(e.createIIRFilter===void 0)return r(e,n,i);const o=e.createIIRFilter(i.feedforward,i.feedback);return Ct(o,i),o};function IO(r,e){const n=e[0]*e[0]+e[1]*e[1];return[(r[0]*e[0]+r[1]*e[1])/n,(r[1]*e[0]-r[0]*e[1])/n]}function PO(r,e){return[r[0]*e[0]-r[1]*e[1],r[0]*e[1]+r[1]*e[0]]}function Iv(r,e){let n=[0,0];for(let i=r.length-1;i>=0;i-=1)n=PO(n,e),n[0]+=r[i];return n}const HO=(r,e,n,i)=>(o,c,{channelCount:u,channelCountMode:d,channelInterpretation:f,feedback:m,feedforward:y})=>{const _=eb(c,o.sampleRate),b=m instanceof Float64Array?m:new Float64Array(m),S=y instanceof Float64Array?y:new Float64Array(y),w=b.length,x=S.length,A=Math.min(w,x);if(w===0||w>20)throw i();if(b[0]===0)throw e();if(x===0||x>20)throw i();if(S[0]===0)throw e();if(b[0]!==1){for(let z=0;z<x;z+=1)S[z]/=b[0];for(let z=1;z<w;z+=1)b[z]/=b[0]}const E=n(o,_,u,u);E.channelCount=u,E.channelCountMode=d,E.channelInterpretation=f;const D=32,O=[],I=[],k=[];for(let z=0;z<u;z+=1){O.push(0);const X=new Float32Array(D),Q=new Float32Array(D);X.fill(0),Q.fill(0),I.push(X),k.push(Q)}E.onaudioprocess=z=>{const X=z.inputBuffer,Q=z.outputBuffer,K=X.numberOfChannels;for(let F=0;F<K;F+=1){const re=X.getChannelData(F),te=Q.getChannelData(F);O[F]=J0(b,w,S,x,A,I[F],k[F],O[F],D,re,te)}};const R=o.sampleRate/2;return va({get bufferSize(){return _},get channelCount(){return E.channelCount},set channelCount(z){E.channelCount=z},get channelCountMode(){return E.channelCountMode},set channelCountMode(z){E.channelCountMode=z},get channelInterpretation(){return E.channelInterpretation},set channelInterpretation(z){E.channelInterpretation=z},get context(){return E.context},get inputs(){return[E]},get numberOfInputs(){return E.numberOfInputs},get numberOfOutputs(){return E.numberOfOutputs},addEventListener(...z){return E.addEventListener(z[0],z[1],z[2])},dispatchEvent(...z){return E.dispatchEvent(z[0])},getFrequencyResponse(z,X,Q){if(z.length!==X.length||X.length!==Q.length)throw r();const K=z.length;for(let F=0;F<K;F+=1){const re=-Math.PI*(z[F]/R),te=[Math.cos(re),Math.sin(re)],ue=Iv(S,te),U=Iv(b,te),$=IO(ue,U);X[F]=Math.sqrt($[0]*$[0]+$[1]*$[1]),Q[F]=Math.atan2($[1],$[0])}},removeEventListener(...z){return E.removeEventListener(z[0],z[1],z[2])}},E)},$O=(r,e)=>r.createMediaElementSource(e.mediaElement),GO=(r,e)=>{const n=r.createMediaStreamDestination();return Ct(n,e),n.numberOfOutputs===1&&Object.defineProperty(n,"numberOfOutputs",{get:()=>0}),n},FO=(r,{mediaStream:e})=>{const n=e.getAudioTracks();n.sort((c,u)=>c.id<u.id?-1:c.id>u.id?1:0);const i=n.slice(0,1),o=r.createMediaStreamSource(new MediaStream(i));return Object.defineProperty(o,"mediaStream",{value:e}),o},YO=(r,e)=>(n,{mediaStreamTrack:i})=>{if(typeof n.createMediaStreamTrackSource=="function")return n.createMediaStreamTrackSource(i);const o=new MediaStream([i]),c=n.createMediaStreamSource(o);if(i.kind!=="audio")throw r();if(e(n))throw new TypeError;return c},WO=r=>r===null?null:r.hasOwnProperty("OfflineAudioContext")?r.OfflineAudioContext:r.hasOwnProperty("webkitOfflineAudioContext")?r.webkitOfflineAudioContext:null,XO=(r,e,n,i,o,c)=>(u,d)=>{const f=u.createOscillator();return Ct(f,d),dt(f,d,"detune"),dt(f,d,"frequency"),d.periodicWave!==void 0?f.setPeriodicWave(d.periodicWave):rt(f,d,"type"),e(n,()=>n(u))||sp(f),e(i,()=>i(u))||c(f,u),e(o,()=>o(u))||ip(f),r(u,f),f},KO=r=>(e,n)=>{const i=e.createPanner();return i.orientationX===void 0?r(e,n):(Ct(i,n),dt(i,n,"orientationX"),dt(i,n,"orientationY"),dt(i,n,"orientationZ"),dt(i,n,"positionX"),dt(i,n,"positionY"),dt(i,n,"positionZ"),rt(i,n,"coneInnerAngle"),rt(i,n,"coneOuterAngle"),rt(i,n,"coneOuterGain"),rt(i,n,"distanceModel"),rt(i,n,"maxDistance"),rt(i,n,"panningModel"),rt(i,n,"refDistance"),rt(i,n,"rolloffFactor"),i)},ZO=(r,e,n,i,o,c,u,d,f,m)=>(y,{coneInnerAngle:_,coneOuterAngle:b,coneOuterGain:S,distanceModel:w,maxDistance:x,orientationX:A,orientationY:E,orientationZ:D,panningModel:O,positionX:I,positionY:k,positionZ:R,refDistance:M,rolloffFactor:z,...X})=>{const Q=y.createPanner();if(X.channelCount>2||X.channelCountMode==="max")throw u();Ct(Q,X);const K={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},F=n(y,{...K,channelInterpretation:"speakers",numberOfInputs:6}),re=i(y,{...X,gain:1}),te=i(y,{...K,gain:1}),ue=i(y,{...K,gain:0}),U=i(y,{...K,gain:0}),$=i(y,{...K,gain:0}),J=i(y,{...K,gain:0}),ne=i(y,{...K,gain:0}),oe=o(y,256,6,1),C=c(y,{...K,curve:new Float32Array([1,1]),oversample:"none"});let P=[A,E,D],ee=[I,k,R];const ie=new Float32Array(1);oe.onaudioprocess=({inputBuffer:le})=>{const Le=[f(le,ie,0),f(le,ie,1),f(le,ie,2)];Le.some((Mn,Jn)=>Mn!==P[Jn])&&(Q.setOrientation(...Le),P=Le);const rn=[f(le,ie,3),f(le,ie,4),f(le,ie,5)];rn.some((Mn,Jn)=>Mn!==ee[Jn])&&(Q.setPosition(...rn),ee=rn)},Object.defineProperty(ue.gain,"defaultValue",{get:()=>0}),Object.defineProperty(U.gain,"defaultValue",{get:()=>0}),Object.defineProperty($.gain,"defaultValue",{get:()=>0}),Object.defineProperty(J.gain,"defaultValue",{get:()=>0}),Object.defineProperty(ne.gain,"defaultValue",{get:()=>0});const se={get bufferSize(){},get channelCount(){return Q.channelCount},set channelCount(le){if(le>2)throw u();re.channelCount=le,Q.channelCount=le},get channelCountMode(){return Q.channelCountMode},set channelCountMode(le){if(le==="max")throw u();re.channelCountMode=le,Q.channelCountMode=le},get channelInterpretation(){return Q.channelInterpretation},set channelInterpretation(le){re.channelInterpretation=le,Q.channelInterpretation=le},get coneInnerAngle(){return Q.coneInnerAngle},set coneInnerAngle(le){Q.coneInnerAngle=le},get coneOuterAngle(){return Q.coneOuterAngle},set coneOuterAngle(le){Q.coneOuterAngle=le},get coneOuterGain(){return Q.coneOuterGain},set coneOuterGain(le){if(le<0||le>1)throw e();Q.coneOuterGain=le},get context(){return Q.context},get distanceModel(){return Q.distanceModel},set distanceModel(le){Q.distanceModel=le},get inputs(){return[re]},get maxDistance(){return Q.maxDistance},set maxDistance(le){if(le<0)throw new RangeError;Q.maxDistance=le},get numberOfInputs(){return Q.numberOfInputs},get numberOfOutputs(){return Q.numberOfOutputs},get orientationX(){return te.gain},get orientationY(){return ue.gain},get orientationZ(){return U.gain},get panningModel(){return Q.panningModel},set panningModel(le){Q.panningModel=le},get positionX(){return $.gain},get positionY(){return J.gain},get positionZ(){return ne.gain},get refDistance(){return Q.refDistance},set refDistance(le){if(le<0)throw new RangeError;Q.refDistance=le},get rolloffFactor(){return Q.rolloffFactor},set rolloffFactor(le){if(le<0)throw new RangeError;Q.rolloffFactor=le},addEventListener(...le){return re.addEventListener(le[0],le[1],le[2])},dispatchEvent(...le){return re.dispatchEvent(le[0])},removeEventListener(...le){return re.removeEventListener(le[0],le[1],le[2])}};_!==se.coneInnerAngle&&(se.coneInnerAngle=_),b!==se.coneOuterAngle&&(se.coneOuterAngle=b),S!==se.coneOuterGain&&(se.coneOuterGain=S),w!==se.distanceModel&&(se.distanceModel=w),x!==se.maxDistance&&(se.maxDistance=x),A!==se.orientationX.value&&(se.orientationX.value=A),E!==se.orientationY.value&&(se.orientationY.value=E),D!==se.orientationZ.value&&(se.orientationZ.value=D),O!==se.panningModel&&(se.panningModel=O),I!==se.positionX.value&&(se.positionX.value=I),k!==se.positionY.value&&(se.positionY.value=k),R!==se.positionZ.value&&(se.positionZ.value=R),M!==se.refDistance&&(se.refDistance=M),z!==se.rolloffFactor&&(se.rolloffFactor=z),(P[0]!==1||P[1]!==0||P[2]!==0)&&Q.setOrientation(...P),(ee[0]!==0||ee[1]!==0||ee[2]!==0)&&Q.setPosition(...ee);const he=()=>{re.connect(Q),r(re,C,0,0),C.connect(te).connect(F,0,0),C.connect(ue).connect(F,0,1),C.connect(U).connect(F,0,2),C.connect($).connect(F,0,3),C.connect(J).connect(F,0,4),C.connect(ne).connect(F,0,5),F.connect(oe).connect(y.destination)},Se=()=>{re.disconnect(Q),d(re,C,0,0),C.disconnect(te),te.disconnect(F),C.disconnect(ue),ue.disconnect(F),C.disconnect(U),U.disconnect(F),C.disconnect($),$.disconnect(F),C.disconnect(J),J.disconnect(F),C.disconnect(ne),ne.disconnect(F),F.disconnect(oe),oe.disconnect(y.destination)};return m(va(se,Q),he,Se)},QO=r=>(e,{disableNormalization:n,imag:i,real:o})=>{const c=i instanceof Float32Array?i:new Float32Array(i),u=o instanceof Float32Array?o:new Float32Array(o),d=e.createPeriodicWave(u,c,{disableNormalization:n});if(Array.from(i).length<2)throw r();return d},Go=(r,e,n,i)=>r.createScriptProcessor(e,n,i),JO=(r,e)=>(n,i)=>{const o=i.channelCountMode;if(o==="clamped-max")throw e();if(n.createStereoPanner===void 0)return r(n,i);const c=n.createStereoPanner();return Ct(c,i),dt(c,i,"pan"),Object.defineProperty(c,"channelCountMode",{get:()=>o,set:u=>{if(u!==o)throw e()}}),c},ek=(r,e,n,i,o,c)=>{const d=new Float32Array([1,1]),f=Math.PI/2,m={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},y={...m,oversample:"none"},_=(w,x,A,E)=>{const D=new Float32Array(16385),O=new Float32Array(16385);for(let X=0;X<16385;X+=1){const Q=X/16384*f;D[X]=Math.cos(Q),O[X]=Math.sin(Q)}const I=n(w,{...m,gain:0}),k=i(w,{...y,curve:D}),R=i(w,{...y,curve:d}),M=n(w,{...m,gain:0}),z=i(w,{...y,curve:O});return{connectGraph(){x.connect(I),x.connect(R.inputs===void 0?R:R.inputs[0]),x.connect(M),R.connect(A),A.connect(k.inputs===void 0?k:k.inputs[0]),A.connect(z.inputs===void 0?z:z.inputs[0]),k.connect(I.gain),z.connect(M.gain),I.connect(E,0,0),M.connect(E,0,1)},disconnectGraph(){x.disconnect(I),x.disconnect(R.inputs===void 0?R:R.inputs[0]),x.disconnect(M),R.disconnect(A),A.disconnect(k.inputs===void 0?k:k.inputs[0]),A.disconnect(z.inputs===void 0?z:z.inputs[0]),k.disconnect(I.gain),z.disconnect(M.gain),I.disconnect(E,0,0),M.disconnect(E,0,1)}}},b=(w,x,A,E)=>{const D=new Float32Array(16385),O=new Float32Array(16385),I=new Float32Array(16385),k=new Float32Array(16385),R=Math.floor(16385/2);for(let $=0;$<16385;$+=1)if($>R){const J=($-R)/(16384-R)*f;D[$]=Math.cos(J),O[$]=Math.sin(J),I[$]=0,k[$]=1}else{const J=$/(16384-R)*f;D[$]=1,O[$]=0,I[$]=Math.cos(J),k[$]=Math.sin(J)}const M=e(w,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),z=n(w,{...m,gain:0}),X=i(w,{...y,curve:D}),Q=n(w,{...m,gain:0}),K=i(w,{...y,curve:O}),F=i(w,{...y,curve:d}),re=n(w,{...m,gain:0}),te=i(w,{...y,curve:I}),ue=n(w,{...m,gain:0}),U=i(w,{...y,curve:k});return{connectGraph(){x.connect(M),x.connect(F.inputs===void 0?F:F.inputs[0]),M.connect(z,0),M.connect(Q,0),M.connect(re,1),M.connect(ue,1),F.connect(A),A.connect(X.inputs===void 0?X:X.inputs[0]),A.connect(K.inputs===void 0?K:K.inputs[0]),A.connect(te.inputs===void 0?te:te.inputs[0]),A.connect(U.inputs===void 0?U:U.inputs[0]),X.connect(z.gain),K.connect(Q.gain),te.connect(re.gain),U.connect(ue.gain),z.connect(E,0,0),re.connect(E,0,0),Q.connect(E,0,1),ue.connect(E,0,1)},disconnectGraph(){x.disconnect(M),x.disconnect(F.inputs===void 0?F:F.inputs[0]),M.disconnect(z,0),M.disconnect(Q,0),M.disconnect(re,1),M.disconnect(ue,1),F.disconnect(A),A.disconnect(X.inputs===void 0?X:X.inputs[0]),A.disconnect(K.inputs===void 0?K:K.inputs[0]),A.disconnect(te.inputs===void 0?te:te.inputs[0]),A.disconnect(U.inputs===void 0?U:U.inputs[0]),X.disconnect(z.gain),K.disconnect(Q.gain),te.disconnect(re.gain),U.disconnect(ue.gain),z.disconnect(E,0,0),re.disconnect(E,0,0),Q.disconnect(E,0,1),ue.disconnect(E,0,1)}}},S=(w,x,A,E,D)=>{if(x===1)return _(w,A,E,D);if(x===2)return b(w,A,E,D);throw o()};return(w,{channelCount:x,channelCountMode:A,pan:E,...D})=>{if(A==="max")throw o();const O=r(w,{...D,channelCount:1,channelCountMode:A,numberOfInputs:2}),I=n(w,{...D,channelCount:x,channelCountMode:A,gain:1}),k=n(w,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:E});let{connectGraph:R,disconnectGraph:M}=S(w,x,I,k,O);Object.defineProperty(k.gain,"defaultValue",{get:()=>0}),Object.defineProperty(k.gain,"maxValue",{get:()=>1}),Object.defineProperty(k.gain,"minValue",{get:()=>-1});const z={get bufferSize(){},get channelCount(){return I.channelCount},set channelCount(F){I.channelCount!==F&&(X&&M(),{connectGraph:R,disconnectGraph:M}=S(w,F,I,k,O),X&&R()),I.channelCount=F},get channelCountMode(){return I.channelCountMode},set channelCountMode(F){if(F==="clamped-max"||F==="max")throw o();I.channelCountMode=F},get channelInterpretation(){return I.channelInterpretation},set channelInterpretation(F){I.channelInterpretation=F},get context(){return I.context},get inputs(){return[I]},get numberOfInputs(){return I.numberOfInputs},get numberOfOutputs(){return I.numberOfOutputs},get pan(){return k.gain},addEventListener(...F){return I.addEventListener(F[0],F[1],F[2])},dispatchEvent(...F){return I.dispatchEvent(F[0])},removeEventListener(...F){return I.removeEventListener(F[0],F[1],F[2])}};let X=!1;const Q=()=>{R(),X=!0},K=()=>{M(),X=!1};return c(va(z,O),Q,K)}},tk=(r,e,n,i,o,c,u)=>(d,f)=>{const m=d.createWaveShaper();if(c!==null&&c.name==="webkitAudioContext"&&d.createGain().gain.automationRate===void 0)return n(d,f);Ct(m,f);const y=f.curve===null||f.curve instanceof Float32Array?f.curve:new Float32Array(f.curve);if(y!==null&&y.length<2)throw e();rt(m,{curve:y},"curve"),rt(m,f,"oversample");let _=null,b=!1;return u(m,"curve",x=>()=>x.call(m),x=>A=>(x.call(m,A),b&&(i(A)&&_===null?_=r(d,m):!i(A)&&_!==null&&(_(),_=null)),A)),o(m,()=>{b=!0,i(m.curve)&&(_=r(d,m))},()=>{b=!1,_!==null&&(_(),_=null)})},nk=(r,e,n,i,o)=>(c,{curve:u,oversample:d,...f})=>{const m=c.createWaveShaper(),y=c.createWaveShaper();Ct(m,f),Ct(y,f);const _=n(c,{...f,gain:1}),b=n(c,{...f,gain:-1}),S=n(c,{...f,gain:1}),w=n(c,{...f,gain:-1});let x=null,A=!1,E=null;const D={get bufferSize(){},get channelCount(){return m.channelCount},set channelCount(k){_.channelCount=k,b.channelCount=k,m.channelCount=k,S.channelCount=k,y.channelCount=k,w.channelCount=k},get channelCountMode(){return m.channelCountMode},set channelCountMode(k){_.channelCountMode=k,b.channelCountMode=k,m.channelCountMode=k,S.channelCountMode=k,y.channelCountMode=k,w.channelCountMode=k},get channelInterpretation(){return m.channelInterpretation},set channelInterpretation(k){_.channelInterpretation=k,b.channelInterpretation=k,m.channelInterpretation=k,S.channelInterpretation=k,y.channelInterpretation=k,w.channelInterpretation=k},get context(){return m.context},get curve(){return E},set curve(k){if(k!==null&&k.length<2)throw e();if(k===null)m.curve=k,y.curve=k;else{const R=k.length,M=new Float32Array(R+2-R%2),z=new Float32Array(R+2-R%2);M[0]=k[0],z[0]=-k[R-1];const X=Math.ceil((R+1)/2),Q=(R+1)/2-1;for(let K=1;K<X;K+=1){const F=K/X*Q,re=Math.floor(F),te=Math.ceil(F);M[K]=re===te?k[re]:(1-(F-re))*k[re]+(1-(te-F))*k[te],z[K]=re===te?-k[R-1-re]:-((1-(F-re))*k[R-1-re])-(1-(te-F))*k[R-1-te]}M[X]=R%2===1?k[X-1]:(k[X-2]+k[X-1])/2,m.curve=M,y.curve=z}E=k,A&&(i(E)&&x===null?x=r(c,_):x!==null&&(x(),x=null))},get inputs(){return[_]},get numberOfInputs(){return m.numberOfInputs},get numberOfOutputs(){return m.numberOfOutputs},get oversample(){return m.oversample},set oversample(k){m.oversample=k,y.oversample=k},addEventListener(...k){return _.addEventListener(k[0],k[1],k[2])},dispatchEvent(...k){return _.dispatchEvent(k[0])},removeEventListener(...k){return _.removeEventListener(k[0],k[1],k[2])}};u!==null&&(D.curve=u instanceof Float32Array?u:new Float32Array(u)),d!==D.oversample&&(D.oversample=d);const O=()=>{_.connect(m).connect(S),_.connect(b).connect(y).connect(w).connect(S),A=!0,i(E)&&(x=r(c,_))},I=()=>{_.disconnect(m),m.disconnect(S),_.disconnect(b),b.disconnect(y),y.disconnect(w),w.disconnect(S),A=!1,x!==null&&(x(),x=null)};return o(va(D,S),O,I)},Yt=()=>new DOMException("","NotSupportedError"),sk={numberOfChannels:1},ik=(r,e,n,i,o)=>class extends r{constructor(u,d,f){let m;if(typeof u=="number"&&d!==void 0&&f!==void 0)m={length:d,numberOfChannels:u,sampleRate:f};else if(typeof u=="object")m=u;else throw new Error("The given parameters are not valid.");const{length:y,numberOfChannels:_,sampleRate:b}={...sk,...m},S=i(_,y,b);e(Uo,()=>Uo(S))||S.addEventListener("statechange",(()=>{let w=0;const x=A=>{this._state==="running"&&(w>0?(S.removeEventListener("statechange",x),A.stopImmediatePropagation(),this._waitForThePromiseToSettle(A)):w+=1)};return x})()),super(S,_),this._length=y,this._nativeOfflineAudioContext=S,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state==="running"?Promise.reject(n()):(this._state="running",o(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,Y0(this)}))}_waitForThePromiseToSettle(u){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(u):setTimeout(()=>this._waitForThePromiseToSettle(u))}},rk={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},ak=(r,e,n,i,o,c,u)=>class extends r{constructor(f,m){const y=o(f),_={...rk,...m},b=n(y,_),S=c(y),w=S?i():null,x=f.sampleRate/2;super(f,!1,b,w),this._detune=e(this,S,b.detune,153600,-153600),this._frequency=e(this,S,b.frequency,x,-x),this._nativeOscillatorNode=b,this._onended=null,this._oscillatorNodeRenderer=w,this._oscillatorNodeRenderer!==null&&_.periodicWave!==void 0&&(this._oscillatorNodeRenderer.periodicWave=_.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(f){const m=typeof f=="function"?u(this,f):null;this._nativeOscillatorNode.onended=m;const y=this._nativeOscillatorNode.onended;this._onended=y!==null&&y===m?f:y}get type(){return this._nativeOscillatorNode.type}set type(f){this._nativeOscillatorNode.type=f,this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(f){this._nativeOscillatorNode.setPeriodicWave(f),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=f)}start(f=0){if(this._nativeOscillatorNode.start(f),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.start=f),this.context.state!=="closed"){ha(this);const m=()=>{this._nativeOscillatorNode.removeEventListener("ended",m),zs(this)&&Io(this)};this._nativeOscillatorNode.addEventListener("ended",m)}}stop(f=0){this._nativeOscillatorNode.stop(f),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.stop=f)}},ok=(r,e,n,i,o)=>()=>{const c=new WeakMap;let u=null,d=null,f=null;const m=async(y,_)=>{let b=n(y);const S=Pt(b,_);if(!S){const w={channelCount:b.channelCount,channelCountMode:b.channelCountMode,channelInterpretation:b.channelInterpretation,detune:b.detune.value,frequency:b.frequency.value,periodicWave:u===null?void 0:u,type:b.type};b=e(_,w),d!==null&&b.start(d),f!==null&&b.stop(f)}return c.set(_,b),S?(await r(_,y.detune,b.detune),await r(_,y.frequency,b.frequency)):(await i(_,y.detune,b.detune),await i(_,y.frequency,b.frequency)),await o(y,_,b),b};return{set periodicWave(y){u=y},set start(y){d=y},set stop(y){f=y},render(y,_){const b=c.get(_);return b!==void 0?Promise.resolve(b):m(y,_)}}},lk={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},ck=(r,e,n,i,o,c,u)=>class extends r{constructor(f,m){const y=o(f),_={...lk,...m},b=n(y,_),S=c(y),w=S?i():null;super(f,!1,b,w),this._nativePannerNode=b,this._orientationX=e(this,S,b.orientationX,$t,tn),this._orientationY=e(this,S,b.orientationY,$t,tn),this._orientationZ=e(this,S,b.orientationZ,$t,tn),this._positionX=e(this,S,b.positionX,$t,tn),this._positionY=e(this,S,b.positionY,$t,tn),this._positionZ=e(this,S,b.positionZ,$t,tn),u(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(f){this._nativePannerNode.coneInnerAngle=f}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(f){this._nativePannerNode.coneOuterAngle=f}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(f){this._nativePannerNode.coneOuterGain=f}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(f){this._nativePannerNode.distanceModel=f}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(f){this._nativePannerNode.maxDistance=f}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(f){this._nativePannerNode.panningModel=f}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(f){this._nativePannerNode.refDistance=f}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(f){this._nativePannerNode.rolloffFactor=f}},uk=(r,e,n,i,o,c,u,d,f,m)=>()=>{const y=new WeakMap;let _=null;const b=async(S,w)=>{let x=null,A=c(S);const E={channelCount:A.channelCount,channelCountMode:A.channelCountMode,channelInterpretation:A.channelInterpretation},D={...E,coneInnerAngle:A.coneInnerAngle,coneOuterAngle:A.coneOuterAngle,coneOuterGain:A.coneOuterGain,distanceModel:A.distanceModel,maxDistance:A.maxDistance,panningModel:A.panningModel,refDistance:A.refDistance,rolloffFactor:A.rolloffFactor},O=Pt(A,w);if("bufferSize"in A)x=i(w,{...E,gain:1});else if(!O){const I={...D,orientationX:A.orientationX.value,orientationY:A.orientationY.value,orientationZ:A.orientationZ.value,positionX:A.positionX.value,positionY:A.positionY.value,positionZ:A.positionZ.value};A=o(w,I)}if(y.set(w,x===null?A:x),x!==null){if(_===null){if(u===null)throw new Error("Missing the native OfflineAudioContext constructor.");const K=new u(6,S.context.length,w.sampleRate),F=e(K,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});F.connect(K.destination),_=(async()=>{const re=await Promise.all([S.orientationX,S.orientationY,S.orientationZ,S.positionX,S.positionY,S.positionZ].map(async(te,ue)=>{const U=n(K,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:ue===0?1:0});return await d(K,te,U.offset),U}));for(let te=0;te<6;te+=1)re[te].connect(F,0,te),re[te].start(0);return m(K)})()}const I=await _,k=i(w,{...E,gain:1});await f(S,w,k);const R=[];for(let K=0;K<I.numberOfChannels;K+=1)R.push(I.getChannelData(K));let M=[R[0][0],R[1][0],R[2][0]],z=[R[3][0],R[4][0],R[5][0]],X=i(w,{...E,gain:1}),Q=o(w,{...D,orientationX:M[0],orientationY:M[1],orientationZ:M[2],positionX:z[0],positionY:z[1],positionZ:z[2]});k.connect(X).connect(Q.inputs[0]),Q.connect(x);for(let K=128;K<I.length;K+=128){const F=[R[0][K],R[1][K],R[2][K]],re=[R[3][K],R[4][K],R[5][K]];if(F.some((te,ue)=>te!==M[ue])||re.some((te,ue)=>te!==z[ue])){M=F,z=re;const te=K/w.sampleRate;X.gain.setValueAtTime(0,te),X=i(w,{...E,gain:0}),Q=o(w,{...D,orientationX:M[0],orientationY:M[1],orientationZ:M[2],positionX:z[0],positionY:z[1],positionZ:z[2]}),X.gain.setValueAtTime(1,te),k.connect(X).connect(Q.inputs[0]),Q.connect(x)}}return x}return O?(await r(w,S.orientationX,A.orientationX),await r(w,S.orientationY,A.orientationY),await r(w,S.orientationZ,A.orientationZ),await r(w,S.positionX,A.positionX),await r(w,S.positionY,A.positionY),await r(w,S.positionZ,A.positionZ)):(await d(w,S.orientationX,A.orientationX),await d(w,S.orientationY,A.orientationY),await d(w,S.orientationZ,A.orientationZ),await d(w,S.positionX,A.positionX),await d(w,S.positionY,A.positionY),await d(w,S.positionZ,A.positionZ)),_a(A)?await f(S,w,A.inputs[0]):await f(S,w,A),A};return{render(S,w){const x=y.get(w);return x!==void 0?Promise.resolve(x):b(S,w)}}},hk={disableNormalization:!1},dk=(r,e,n,i)=>class sb{constructor(c,u){const d=e(c),f=i({...hk,...u}),m=r(d,f);return n.add(m),m}static[Symbol.hasInstance](c){return c!==null&&typeof c=="object"&&Object.getPrototypeOf(c)===sb.prototype||n.has(c)}},fk=(r,e)=>(n,i,o)=>(r(i).replay(o),e(i,n,o)),pk=(r,e,n)=>async(i,o,c)=>{const u=r(i);await Promise.all(u.activeInputs.map((d,f)=>Array.from(d).map(async([m,y])=>{const b=await e(m).render(m,o),S=i.context.destination;!n(m)&&(i!==S||!n(i))&&b.connect(c,y,f)})).reduce((d,f)=>[...d,...f],[]))},mk=(r,e,n)=>async(i,o,c)=>{const u=e(i);await Promise.all(Array.from(u.activeInputs).map(async([d,f])=>{const y=await r(d).render(d,o);n(d)||y.connect(c,f)}))},gk=(r,e,n,i)=>o=>r(Uo,()=>Uo(o))?Promise.resolve(r(i,i)).then(c=>{if(!c){const u=n(o,512,0,1);o.oncomplete=()=>{u.onaudioprocess=null,u.disconnect()},u.onaudioprocess=()=>o.currentTime,u.connect(o.destination)}return o.startRendering()}):new Promise(c=>{const u=e(o,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});o.oncomplete=d=>{u.disconnect(),c(d.renderedBuffer)},u.connect(o.destination),o.startRendering()}),yk=r=>(e,n)=>{r.set(e,n)},_k=r=>(e,n)=>r.set(e,n),vk=(r,e,n,i,o,c,u,d)=>(f,m)=>n(f).render(f,m).then(()=>Promise.all(Array.from(i(m)).map(y=>n(y).render(y,m)))).then(()=>o(m)).then(y=>(typeof y.copyFromChannel!="function"?(u(y),ep(y)):e(c,()=>c(y))||d(y),r.add(y),y)),bk={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},wk=(r,e,n,i,o,c)=>class extends r{constructor(d,f){const m=o(d),y={...bk,...f},_=n(m,y),b=c(m),S=b?i():null;super(d,!1,_,S),this._pan=e(this,b,_.pan)}get pan(){return this._pan}},Sk=(r,e,n,i,o)=>()=>{const c=new WeakMap,u=async(d,f)=>{let m=n(d);const y=Pt(m,f);if(!y){const _={channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation,pan:m.pan.value};m=e(f,_)}return c.set(f,m),y?await r(f,d.pan,m.pan):await i(f,d.pan,m.pan),_a(m)?await o(d,f,m.inputs[0]):await o(d,f,m),m};return{render(d,f){const m=c.get(f);return m!==void 0?Promise.resolve(m):u(d,f)}}},Tk=r=>()=>{if(r===null)return!1;try{new r({length:1,sampleRate:44100})}catch{return!1}return!0},xk=(r,e)=>async()=>{if(r===null)return!0;if(e===null)return!1;const n=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),i=new e(1,128,44100),o=URL.createObjectURL(n);let c=!1,u=!1;try{await i.audioWorklet.addModule(o);const d=new r(i,"a",{numberOfOutputs:0}),f=i.createOscillator();d.port.onmessage=()=>c=!0,d.onprocessorerror=()=>u=!0,f.connect(d),f.start(0),await i.startRendering(),await new Promise(m=>setTimeout(m))}catch{}finally{URL.revokeObjectURL(o)}return c&&!u},Ak=(r,e)=>()=>{if(e===null)return Promise.resolve(!1);const n=new e(1,1,44100),i=r(n,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(o=>{n.oncomplete=()=>{i.disconnect(),o(n.currentTime!==0)},n.startRendering()})},Ek=()=>new DOMException("","UnknownError"),Ck={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},Nk=(r,e,n,i,o,c,u)=>class extends r{constructor(f,m){const y=o(f),_={...Ck,...m},b=n(y,_),w=c(y)?i():null;super(f,!0,b,w),this._isCurveNullified=!1,this._nativeWaveShaperNode=b,u(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(f){if(f===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(f.length<2)throw e();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=f}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(f){this._nativeWaveShaperNode.oversample=f}},Ok=(r,e,n)=>()=>{const i=new WeakMap,o=async(c,u)=>{let d=e(c);if(!Pt(d,u)){const m={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,curve:d.curve,oversample:d.oversample};d=r(u,m)}return i.set(u,d),_a(d)?await n(c,u,d.inputs[0]):await n(c,u,d),d};return{render(c,u){const d=i.get(u);return d!==void 0?Promise.resolve(d):o(c,u)}}},kk=()=>typeof window>"u"?null:window,Rk=(r,e)=>n=>{n.copyFromChannel=(i,o,c=0)=>{const u=r(c),d=r(o);if(d>=n.numberOfChannels)throw e();const f=n.length,m=n.getChannelData(d),y=i.length;for(let _=u<0?-u:0;_+u<f&&_<y;_+=1)i[_]=m[_+u]},n.copyToChannel=(i,o,c=0)=>{const u=r(c),d=r(o);if(d>=n.numberOfChannels)throw e();const f=n.length,m=n.getChannelData(d),y=i.length;for(let _=u<0?-u:0;_+u<f&&_<y;_+=1)m[_+u]=i[_]}},jk=r=>e=>{e.copyFromChannel=(n=>(i,o,c=0)=>{const u=r(c),d=r(o);if(u<e.length)return n.call(e,i,d,u)})(e.copyFromChannel),e.copyToChannel=(n=>(i,o,c=0)=>{const u=r(c),d=r(o);if(u<e.length)return n.call(e,i,d,u)})(e.copyToChannel)},Dk=r=>(e,n)=>{const i=n.createBuffer(1,1,44100);e.buffer===null&&(e.buffer=i),r(e,"buffer",o=>()=>{const c=o.call(e);return c===i?null:c},o=>c=>o.call(e,c===null?i:c))},Mk=(r,e)=>(n,i)=>{i.channelCount=1,i.channelCountMode="explicit",Object.defineProperty(i,"channelCount",{get:()=>1,set:()=>{throw r()}}),Object.defineProperty(i,"channelCountMode",{get:()=>"explicit",set:()=>{throw r()}});const o=n.createBufferSource();e(i,()=>{const d=i.numberOfInputs;for(let f=0;f<d;f+=1)o.connect(i,0,f)},()=>o.disconnect(i))},ib=(r,e,n)=>r.copyFromChannel===void 0?r.getChannelData(n)[0]:(r.copyFromChannel(e,n),e[0]),rb=r=>{if(r===null)return!1;const e=r.length;return e%2!==0?r[Math.floor(e/2)]!==0:r[e/2-1]+r[e/2]!==0},Fo=(r,e,n,i)=>{let o=r;for(;!o.hasOwnProperty(e);)o=Object.getPrototypeOf(o);const{get:c,set:u}=Object.getOwnPropertyDescriptor(o,e);Object.defineProperty(r,e,{get:n(c),set:i(u)})},Uk=r=>({...r,outputChannelCount:r.outputChannelCount!==void 0?r.outputChannelCount:r.numberOfInputs===1&&r.numberOfOutputs===1?[r.channelCount]:Array.from({length:r.numberOfOutputs},()=>1)}),zk=r=>({...r,channelCount:r.numberOfOutputs}),Bk=r=>{const{imag:e,real:n}=r;return e===void 0?n===void 0?{...r,imag:[0,0],real:[0,0]}:{...r,imag:Array.from(n,()=>0),real:n}:n===void 0?{...r,imag:e,real:Array.from(e,()=>0)}:{...r,imag:e,real:n}},ab=(r,e,n)=>{try{r.setValueAtTime(e,n)}catch(i){if(i.code!==9)throw i;ab(r,e,n+1e-7)}},qk=r=>{const e=r.createBufferSource();e.start();try{e.start()}catch{return!0}return!1},Lk=r=>{const e=r.createBufferSource(),n=r.createBuffer(1,1,44100);e.buffer=n;try{e.start(0,1)}catch{return!1}return!0},Vk=r=>{const e=r.createBufferSource();e.start();try{e.stop()}catch{return!1}return!0},rp=r=>{const e=r.createOscillator();try{e.start(-1)}catch(n){return n instanceof RangeError}return!1},ob=r=>{const e=r.createBuffer(1,1,44100),n=r.createBufferSource();n.buffer=e,n.start(),n.stop();try{return n.stop(),!0}catch{return!1}},ap=r=>{const e=r.createOscillator();try{e.stop(-1)}catch(n){return n instanceof RangeError}return!1},Ik=r=>{const{port1:e,port2:n}=new MessageChannel;try{e.postMessage(r)}finally{e.close(),n.close()}},Pk=r=>{r.start=(e=>(n=0,i=0,o)=>{const c=r.buffer,u=c===null?i:Math.min(c.duration,i);c!==null&&u>c.duration-.5/r.context.sampleRate?e.call(r,n,0,0):e.call(r,n,u,o)})(r.start)},lb=(r,e)=>{const n=e.createGain();r.connect(n);const i=(o=>()=>{o.call(r,n),r.removeEventListener("ended",i)})(r.disconnect);r.addEventListener("ended",i),va(r,n),r.stop=(o=>{let c=!1;return(u=0)=>{if(c)try{o.call(r,u)}catch{n.gain.setValueAtTime(0,u)}else o.call(r,u),c=!0}})(r.stop)},ba=(r,e)=>n=>{const i={value:r};return Object.defineProperties(n,{currentTarget:i,target:i}),typeof e=="function"?e.call(r,n):e.handleEvent.call(r,n)},Hk=c2(tr),$k=m2(tr),Gk=CN(su),cb=new WeakMap,Fk=GN(cb),Zn=sN(new Map,new WeakMap),os=kk(),ub=wO(Zn,hs),op=$N(Gt),Lt=pk(Gt,op,Qi),Yk=b2(ub,st,Lt),et=WN(nu),Ls=WO(os),We=hO(Ls),hb=new WeakMap,db=BN(ba),Yo=AO(os),lp=oO(Yo),cp=lO(os),fb=cO(os),zo=CO(os),yt=G2(u2(V0),p2(Hk,$k,Lc,Gk,Vc,Gt,Fk,Vo,st,tr,zs,Qi,kc),Zn,nO(Ef,Vc,Gt,st,Mo,zs),hs,iu,Yt,TN(Lc,Ef,Gt,st,Mo,et,zs,We),kN(hb,Gt,Xn),db,et,lp,cp,fb,We,zo),Wk=v2(yt,Yk,hs,ub,et,We),up=new WeakSet,Pv=SO(os),pb=gN(new Uint32Array(1)),hp=Rk(pb,hs),dp=jk(pb),mb=S2(up,Zn,Yt,Pv,Ls,Tk(Pv),hp,dp),ru=g2(sn),gb=mk(op,Po,Qi),ds=uN(gb),wa=xO(ru,Zn,qk,Lk,Vk,rp,ob,ap,Pk,Dk(Fo),lb),fs=fk(FN(Po),gb),Xk=A2(ds,wa,st,fs,Lt),Qn=F2(h2(I0),hb,Jf,Y2,s2,i2,r2,a2,o2,Tf,q0,Yo,ab),Kk=x2(yt,Xk,Qn,kt,wa,et,We,ba),Zk=M2(yt,U2,hs,kt,EO(sn,Fo),et,We,Lt),Qk=nN(ds,tb,st,fs,Lt),nr=_k(cb),Jk=tN(yt,Qn,Qk,iu,tb,et,We,nr),wi=vO(tr,cp),eR=Mk(kt,wi),Si=MO(Yo,eR),tR=aN(Si,st,Lt),nR=rN(yt,tR,Si,et,We),sR=cN($o,st,Lt),iR=lN(yt,sR,$o,et,We,zk),rR=BO(ru,wa,sn,wi),Sa=zO(ru,Zn,rR,rp,ap),aR=mN(ds,Sa,st,fs,Lt),oR=pN(yt,Qn,aR,Sa,et,We,ba),yb=qO(Yt,Fo),lR=vN(yb,st,Lt),cR=_N(yt,lR,yb,et,We,nr),uR=EN(ds,nb,st,fs,Lt),hR=AN(yt,Qn,uR,nb,et,We,nr),_b=LO(Yt),dR=MN(ds,_b,st,fs,Lt),fR=DN(yt,Qn,dR,_b,Yt,et,We,nr),pR=PN(ds,sn,st,fs,Lt),mR=IN(yt,Qn,pR,sn,et,We),gR=HO(iu,kt,Go,Yt),au=gk(Zn,sn,Go,Ak(sn,Ls)),yR=tO(wa,st,Ls,Lt,au),_R=VO(gR),vR=JN(yt,_R,yR,et,We,nr),bR=z2(Qn,Si,Sa,Go,Yt,ib,We,Fo),vb=new WeakMap,wR=_O(Zk,bR,db,We,vb,ba),bb=XO(ru,Zn,rp,ob,ap,lb),SR=ok(ds,bb,st,fs,Lt),TR=ak(yt,Qn,bb,SR,et,We,ba),wb=dN(wa),xR=nk(wb,kt,sn,rb,wi),ou=tk(wb,kt,xR,rb,wi,Yo,Fo),AR=ZO(Lc,kt,Si,sn,Go,ou,Yt,Vc,ib,wi),Sb=KO(AR),ER=uk(ds,Si,Sa,sn,Sb,st,Ls,fs,Lt,au),CR=ck(yt,Qn,Sb,ER,et,We,nr),NR=QO(hs),OR=dk(NR,et,new WeakSet,Bk),kR=ek(Si,$o,sn,ou,Yt,wi),Tb=JO(kR,Yt),RR=Sk(ds,Tb,st,fs,Lt),jR=wk(yt,Qn,Tb,RR,et,We),DR=Ok(ou,st,Lt),MR=Nk(yt,kt,ou,DR,et,We,nr),xb=dO(os),fp=qN(os),Ab=new WeakMap,UR=XN(Ab,Ls),zR=xb?f2(Zn,Yt,zN(os),fp,LN(l2),et,UR,We,zo,new WeakMap,new WeakMap,xk(zo,Ls),os):void 0,BR=uO(lp,We),qR=SN(up,Zn,wN,UN,new WeakSet,et,BR,Bc,Uo,hp,dp),Eb=J2(zR,Wk,mb,Kk,Jk,nR,iR,oR,cR,qR,hR,fR,mR,vR,wR,TR,CR,OR,jR,MR),LR=fO(yt,$O,et,We),VR=mO(yt,GO,et,We),IR=gO(yt,FO,et,We),PR=YO(kt,We),HR=yO(yt,PR,et),$R=D2(Eb,kt,Yt,Ek,LR,VR,IR,HR,Yo),pp=KN(vb),GR=y2(pp),Cb=hN(hs),FR=NN(pp),Nb=RN(hs),Ob=new WeakMap,YR=HN(Ob,Xn),WR=DO(Cb,hs,kt,Si,$o,Sa,sn,Go,Yt,Nb,fp,YR,wi),XR=OO(kt,WR,sn,Yt,wi),KR=Q2(ds,Cb,wa,Si,$o,Sa,sn,FR,Nb,fp,st,zo,Ls,fs,Lt,au),ZR=YN(Ab),QR=yk(Ob),Hv=xb?X2(GR,yt,Qn,KR,XR,Gt,ZR,et,We,zo,Uk,QR,Ik,ba):void 0,JR=bN(Yt,Ls),ej=vk(up,Zn,op,pp,au,Bc,hp,dp),tj=ik(Eb,Zn,kt,JR,ej),nj=sO(nu,lp),sj=iO(Qf,cp),ij=rO(Jf,fb),rj=aO(nu,We);function jn(r){return r===void 0}function Ce(r){return r!==void 0}function aj(r){return typeof r=="function"}function vi(r){return typeof r=="number"}function Zi(r){return Object.prototype.toString.call(r)==="[object Object]"&&r.constructor===Object}function oj(r){return typeof r=="boolean"}function Wn(r){return Array.isArray(r)}function Bs(r){return typeof r=="string"}function Ac(r){return Bs(r)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(r)}function xe(r,e){if(!r)throw new Error(e)}function vn(r,e,n=1/0){if(!(e<=r&&r<=n))throw new RangeError(`Value must be within [${e}, ${n}], got: ${r}`)}function kb(r){!r.isOffline&&r.state!=="running"&&mp('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let Rb=!1,$v=!1;function Gv(r){Rb=r}function lj(r){jn(r)&&Rb&&!$v&&($v=!0,mp("Events scheduled inside of scheduled callbacks should use the passed in scheduling time. See https://github.com/Tonejs/Tone.js/wiki/Accurate-Timing"))}let jb=console;function cj(...r){jb.log(...r)}function mp(...r){jb.warn(...r)}function uj(r){return new $R(r)}function hj(r,e,n){return new tj(r,e,n)}const gn=typeof self=="object"?self:null,dj=gn&&(gn.hasOwnProperty("AudioContext")||gn.hasOwnProperty("webkitAudioContext"));function fj(r,e,n){return xe(Ce(Hv),"AudioWorkletNode only works in a secure context (https or localhost)"),new(r instanceof gn?.BaseAudioContext?gn?.AudioWorkletNode:Hv)(r,e,n)}class pj{constructor(e,n,i,o){this._callback=e,this._type=n,this._minimumUpdateInterval=Math.max(128/(o||44100),.001),this.updateInterval=i,this._createClock()}_createWorker(){const e=new Blob([`
			// the initial timeout time
			let timeoutTime =  ${(this._updateInterval*1e3).toFixed(1)};
			// onmessage callback
			self.onmessage = function(msg){
				timeoutTime = parseInt(msg.data);
			};
			// the tick function which posts a message
			// and schedules a new tick
			function tick(){
				setTimeout(tick, timeoutTime);
				self.postMessage('tick');
			}
			// call tick initially
			tick();
			`],{type:"text/javascript"}),n=URL.createObjectURL(e),i=new Worker(n);i.onmessage=this._callback.bind(this),this._worker=i}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},this._updateInterval*1e3)}_createClock(){if(this._type==="worker")try{this._createWorker()}catch{this._type="timeout",this._createClock()}else this._type==="timeout"&&this._createTimeout()}_disposeClock(){this._timeout&&clearTimeout(this._timeout),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(e){var n;this._updateInterval=Math.max(e,this._minimumUpdateInterval),this._type==="worker"&&((n=this._worker)===null||n===void 0||n.postMessage(this._updateInterval*1e3))}get type(){return this._type}set type(e){this._disposeClock(),this._type=e,this._createClock()}dispose(){this._disposeClock()}}function Ji(r){return ij(r)}function _i(r){return sj(r)}function Rc(r){return rj(r)}function ta(r){return nj(r)}function mj(r){return r instanceof mb}function gj(r,e){return r==="value"||Ji(e)||_i(e)||mj(e)}function oa(r,...e){if(!e.length)return r;const n=e.shift();if(Zi(r)&&Zi(n))for(const i in n)gj(i,n[i])?r[i]=n[i]:Zi(n[i])?(r[i]||Object.assign(r,{[i]:{}}),oa(r[i],n[i])):Object.assign(r,{[i]:n[i]});return oa(r,...e)}function yj(r,e){return r.length===e.length&&r.every((n,i)=>e[i]===n)}function pe(r,e,n=[],i){const o={},c=Array.from(e);if(Zi(c[0])&&i&&!Reflect.has(c[0],i)&&(Object.keys(c[0]).some(d=>Reflect.has(r,d))||(oa(o,{[i]:c[0]}),n.splice(n.indexOf(i),1),c.shift())),c.length===1&&Zi(c[0]))oa(o,c[0]);else for(let u=0;u<n.length;u++)Ce(c[u])&&(o[n[u]]=c[u]);return oa(r,o)}function _j(r){return r.constructor.getDefaults()}function la(r,e){return jn(r)?e:r}function Fv(r,e){return e.forEach(n=>{Reflect.has(r,n)&&delete r[n]}),r}class Vs{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...e){(this.debug||gn&&this.toString()===gn.TONE_DEBUG_CLASS)&&cj(this,...e)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}Vs.version=B0;const gp=1e-6;function da(r,e){return r>e+gp}function Rf(r,e){return da(r,e)||Gn(r,e)}function $c(r,e){return r+gp<e}function Gn(r,e){return Math.abs(r-e)<gp}function vj(r,e,n){return Math.max(Math.min(r,n),e)}class Dn extends Vs{constructor(){super(),this.name="Timeline",this._timeline=[];const e=pe(Dn.getDefaults(),arguments,["memory"]);this.memory=e.memory,this.increasing=e.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(e){if(xe(Reflect.has(e,"time"),"Timeline: events must have a time attribute"),e.time=e.time.valueOf(),this.increasing&&this.length){const n=this._timeline[this.length-1];xe(Rf(e.time,n.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(e)}else{const n=this._search(e.time);this._timeline.splice(n+1,0,e)}if(this.length>this.memory){const n=this.length-this.memory;this._timeline.splice(0,n)}return this}remove(e){const n=this._timeline.indexOf(e);return n!==-1&&this._timeline.splice(n,1),this}get(e,n="time"){const i=this._search(e,n);return i!==-1?this._timeline[i]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(e,n="time"){const i=this._search(e,n);return i+1<this._timeline.length?this._timeline[i+1]:null}getBefore(e){const n=this._timeline.length;if(n>0&&this._timeline[n-1].time<e)return this._timeline[n-1];const i=this._search(e);return i-1>=0?this._timeline[i-1]:null}cancel(e){if(this._timeline.length>1){let n=this._search(e);if(n>=0)if(Gn(this._timeline[n].time,e)){for(let i=n;i>=0&&Gn(this._timeline[i].time,e);i--)n=i;this._timeline=this._timeline.slice(0,n)}else this._timeline=this._timeline.slice(0,n+1);else this._timeline=[]}else this._timeline.length===1&&Rf(this._timeline[0].time,e)&&(this._timeline=[]);return this}cancelBefore(e){const n=this._search(e);return n>=0&&(this._timeline=this._timeline.slice(n+1)),this}previousEvent(e){const n=this._timeline.indexOf(e);return n>0?this._timeline[n-1]:null}_search(e,n="time"){if(this._timeline.length===0)return-1;let i=0;const o=this._timeline.length;let c=o;if(o>0&&this._timeline[o-1][n]<=e)return o-1;for(;i<c;){let u=Math.floor(i+(c-i)/2);const d=this._timeline[u],f=this._timeline[u+1];if(Gn(d[n],e)){for(let m=u;m<this._timeline.length;m++){const y=this._timeline[m];if(Gn(y[n],e))u=m;else break}return u}else{if($c(d[n],e)&&da(f[n],e))return u;da(d[n],e)?c=u:i=u+1}}return-1}_iterate(e,n=0,i=this._timeline.length-1){this._timeline.slice(n,i+1).forEach(e)}forEach(e){return this._iterate(e),this}forEachBefore(e,n){const i=this._search(e);return i!==-1&&this._iterate(n,0,i),this}forEachAfter(e,n){const i=this._search(e);return this._iterate(n,i+1),this}forEachBetween(e,n,i){let o=this._search(e),c=this._search(n);return o!==-1&&c!==-1?(this._timeline[o].time!==e&&(o+=1),this._timeline[c].time===n&&(c-=1),this._iterate(i,o,c)):o===-1&&this._iterate(i,0,c),this}forEachFrom(e,n){let i=this._search(e);for(;i>=0&&this._timeline[i].time>=e;)i--;return this._iterate(n,i+1),this}forEachAtTime(e,n){const i=this._search(e);if(i!==-1&&Gn(this._timeline[i].time,e)){let o=i;for(let c=i;c>=0&&Gn(this._timeline[c].time,e);c--)o=c;this._iterate(c=>{n(c)},o,i)}return this}dispose(){return super.dispose(),this._timeline=[],this}}const Db=[];function lu(r){Db.push(r)}function bj(r){Db.forEach(e=>e(r))}const Mb=[];function cu(r){Mb.push(r)}function wj(r){Mb.forEach(e=>e(r))}class Wo extends Vs{constructor(){super(...arguments),this.name="Emitter"}on(e,n){return e.split(/\W+/).forEach(o=>{jn(this._events)&&(this._events={}),this._events.hasOwnProperty(o)||(this._events[o]=[]),this._events[o].push(n)}),this}once(e,n){const i=(...o)=>{n(...o),this.off(e,i)};return this.on(e,i),this}off(e,n){return e.split(/\W+/).forEach(o=>{if(jn(this._events)&&(this._events={}),this._events.hasOwnProperty(o))if(jn(n))this._events[o]=[];else{const c=this._events[o];for(let u=c.length-1;u>=0;u--)c[u]===n&&c.splice(u,1)}}),this}emit(e,...n){if(this._events&&this._events.hasOwnProperty(e)){const i=this._events[e].slice(0);for(let o=0,c=i.length;o<c;o++)i[o].apply(this,n)}return this}static mixin(e){["on","once","off","emit"].forEach(n=>{const i=Object.getOwnPropertyDescriptor(Wo.prototype,n);Object.defineProperty(e.prototype,n,i)})}dispose(){return super.dispose(),this._events=void 0,this}}class Ub extends Wo{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}class Xo extends Ub{constructor(){var e,n;super(),this.name="Context",this._constants=new Map,this._timeouts=new Dn,this._timeoutIds=0,this._initialized=!1,this._closeStarted=!1,this.isOffline=!1,this._workletPromise=null;const i=pe(Xo.getDefaults(),arguments,["context"]);i.context?(this._context=i.context,this._latencyHint=((e=arguments[0])===null||e===void 0?void 0:e.latencyHint)||""):(this._context=uj({latencyHint:i.latencyHint}),this._latencyHint=i.latencyHint),this._ticker=new pj(this.emit.bind(this,"tick"),i.clockSource,i.updateInterval,this._context.sampleRate),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this[!((n=arguments[0])===null||n===void 0)&&n.hasOwnProperty("updateInterval")?"_lookAhead":"lookAhead"]=i.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){return this._initialized||(bj(this),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(e,n,i){return this._context.createBuffer(e,n,i)}createChannelMerger(e){return this._context.createChannelMerger(e)}createChannelSplitter(e){return this._context.createChannelSplitter(e)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(e){return this._context.createDelay(e)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(e,n){return this._context.createIIRFilter(e,n)}createPanner(){return this._context.createPanner()}createPeriodicWave(e,n,i){return this._context.createPeriodicWave(e,n,i)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(e){return xe(ta(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(e)}createMediaElementSource(e){return xe(ta(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(e)}createMediaStreamDestination(){return xe(ta(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(e){return this._context.decodeAudioData(e)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(e){xe(!this._initialized,"The listener cannot be set after initialization."),this._listener=e}get transport(){return this.initialize(),this._transport}set transport(e){xe(!this._initialized,"The transport cannot be set after initialization."),this._transport=e}get draw(){return this.initialize(),this._draw}set draw(e){xe(!this._initialized,"Draw cannot be set after initialization."),this._draw=e}get destination(){return this.initialize(),this._destination}set destination(e){xe(!this._initialized,"The destination cannot be set after initialization."),this._destination=e}createAudioWorkletNode(e,n){return fj(this.rawContext,e,n)}addAudioWorkletModule(e){return at(this,void 0,void 0,function*(){xe(Ce(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletPromise||(this._workletPromise=this.rawContext.audioWorklet.addModule(e)),yield this._workletPromise})}workletsAreReady(){return at(this,void 0,void 0,function*(){(yield this._workletPromise)?this._workletPromise:Promise.resolve()})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(e){this._ticker.updateInterval=e}get clockSource(){return this._ticker.type}set clockSource(e){this._ticker.type=e}get lookAhead(){return this._lookAhead}set lookAhead(e){this._lookAhead=e,this.updateInterval=e?e/2:.01}get latencyHint(){return this._latencyHint}get rawContext(){return this._context}now(){return this._context.currentTime+this._lookAhead}immediate(){return this._context.currentTime}resume(){return ta(this._context)?this._context.resume():Promise.resolve()}close(){return at(this,void 0,void 0,function*(){ta(this._context)&&this.state!=="closed"&&!this._closeStarted&&(this._closeStarted=!0,yield this._context.close()),this._initialized&&wj(this)})}getConstant(e){if(this._constants.has(e))return this._constants.get(e);{const n=this._context.createBuffer(1,128,this._context.sampleRate),i=n.getChannelData(0);for(let c=0;c<i.length;c++)i[c]=e;const o=this._context.createBufferSource();return o.channelCount=1,o.channelCountMode="explicit",o.buffer=n,o.loop=!0,o.start(0),this._constants.set(e,o),o}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(e=>this._constants[e].disconnect()),this.close(),this}_timeoutLoop(){const e=this.now();this._timeouts.forEachBefore(e,n=>{n.callback(),this._timeouts.remove(n)})}setTimeout(e,n){this._timeoutIds++;const i=this.now();return this._timeouts.add({callback:e,id:this._timeoutIds,time:i+n}),this._timeoutIds}clearTimeout(e){return this._timeouts.forEach(n=>{n.id===e&&this._timeouts.remove(n)}),this}clearInterval(e){return this.clearTimeout(e)}setInterval(e,n){const i=++this._timeoutIds,o=()=>{const c=this.now();this._timeouts.add({callback:()=>{e(),o()},id:i,time:c+n})};return o(),i}}class Sj extends Ub{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(e,n,i){return{}}createChannelMerger(e){return{}}createChannelSplitter(e){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(e){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(e,n){return{}}createPanner(){return{}}createPeriodicWave(e,n,i){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(e){return{}}createMediaElementSource(e){return{}}createMediaStreamDestination(){return{}}decodeAudioData(e){return Promise.resolve({})}createAudioWorkletNode(e,n){return{}}get rawContext(){return{}}addAudioWorkletModule(e){return at(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(e,n){return 0}clearTimeout(e){return this}setInterval(e,n){return 0}clearInterval(e){return this}getConstant(e){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(e){}get destination(){return{}}set destination(e){}now(){return 0}immediate(){return 0}}function qe(r,e){Wn(e)?e.forEach(n=>qe(r,n)):Object.defineProperty(r,e,{enumerable:!0,writable:!1})}function zb(r,e){Wn(e)?e.forEach(n=>zb(r,n)):Object.defineProperty(r,e,{writable:!0})}const He=()=>{};class Ke extends Vs{constructor(){super(),this.name="ToneAudioBuffer",this.onload=He;const e=pe(Ke.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=e.reverse,this.onload=e.onload,Bs(e.url)?this.load(e.url).catch(e.onerror):e.url&&this.set(e.url)}static getDefaults(){return{onerror:He,onload:He,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:Fn().sampleRate}set(e){return e instanceof Ke?e.loaded?this._buffer=e.get():e.onload=()=>{this.set(e),this.onload(this)}:this._buffer=e,this._reversed&&this._reverse(),this}get(){return this._buffer}load(e){return at(this,void 0,void 0,function*(){const n=Ke.load(e).then(i=>{this.set(i),this.onload(this)});Ke.downloads.push(n);try{yield n}finally{const i=Ke.downloads.indexOf(n);Ke.downloads.splice(i,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(e){const n=Wn(e)&&e[0].length>0,i=n?e.length:1,o=n?e[0].length:e.length,c=Fn(),u=c.createBuffer(i,o,c.sampleRate),d=!n&&i===1?[e]:e;for(let f=0;f<i;f++)u.copyToChannel(d[f],f);return this._buffer=u,this}toMono(e){if(vi(e))this.fromArray(this.toArray(e));else{let n=new Float32Array(this.length);const i=this.numberOfChannels;for(let o=0;o<i;o++){const c=this.toArray(o);for(let u=0;u<c.length;u++)n[u]+=c[u]}n=n.map(o=>o/i),this.fromArray(n)}return this}toArray(e){if(vi(e))return this.getChannelData(e);if(this.numberOfChannels===1)return this.toArray(0);{const n=[];for(let i=0;i<this.numberOfChannels;i++)n[i]=this.getChannelData(i);return n}}getChannelData(e){return this._buffer?this._buffer.getChannelData(e):new Float32Array(0)}slice(e,n=this.duration){xe(this.loaded,"Buffer is not loaded");const i=Math.floor(e*this.sampleRate),o=Math.floor(n*this.sampleRate);xe(i<o,"The start time must be less than the end time");const c=o-i,u=Fn().createBuffer(this.numberOfChannels,c,this.sampleRate);for(let d=0;d<this.numberOfChannels;d++)u.copyToChannel(this.getChannelData(d).subarray(i,o),d);return new Ke(u)}_reverse(){if(this.loaded)for(let e=0;e<this.numberOfChannels;e++)this.getChannelData(e).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(e){this._reversed!==e&&(this._reversed=e,this._reverse())}static fromArray(e){return new Ke().fromArray(e)}static fromUrl(e){return at(this,void 0,void 0,function*(){return yield new Ke().load(e)})}static load(e){return at(this,void 0,void 0,function*(){const n=Ke.baseUrl===""||Ke.baseUrl.endsWith("/")?Ke.baseUrl:Ke.baseUrl+"/",i=yield fetch(n+e);if(!i.ok)throw new Error(`could not load url: ${e}`);const o=yield i.arrayBuffer();return yield Fn().decodeAudioData(o)})}static supportsType(e){const n=e.split("."),i=n[n.length-1];return document.createElement("audio").canPlayType("audio/"+i)!==""}static loaded(){return at(this,void 0,void 0,function*(){for(yield Promise.resolve();Ke.downloads.length;)yield Ke.downloads[0]})}}Ke.baseUrl="";Ke.downloads=[];class uu extends Xo{constructor(){super({clockSource:"offline",context:Rc(arguments[0])?arguments[0]:hj(arguments[0],arguments[1]*arguments[2],arguments[2]),lookAhead:0,updateInterval:Rc(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=Rc(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(e){return at(this,void 0,void 0,function*(){let n=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,n++;const i=Math.floor(this.sampleRate/128);e&&n%i===0&&(yield new Promise(o=>setTimeout(o,1)))}})}render(){return at(this,arguments,void 0,function*(e=!0){yield this.workletsAreReady(),yield this._renderClock(e);const n=yield this._context.startRendering();return new Ke(n)})}close(){return Promise.resolve()}}const Bb=new Sj;let Ki=Bb;function Fn(){return Ki===Bb&&dj&&Tj(new Xo),Ki}function Tj(r,e=!1){e&&Ki.dispose(),ta(r)?Ki=new Xo(r):Rc(r)?Ki=new uu(r):Ki=r}function xj(){return Ki.resume()}if(gn&&!gn.TONE_SILENCE_LOGGING){const e=` * Tone.js v${B0} * `;console.log(`%c${e}`,"background: #000; color: #fff")}function Aj(r){return Math.pow(10,r/20)}function Ej(r){return 20*(Math.log(r)/Math.LN10)}function Gc(r){return Math.pow(2,r/12)}let hu=440;function Cj(){return hu}function Nj(r){hu=r}function jf(r){return Math.round(qb(r))}function qb(r){return 69+12*Math.log2(r/hu)}function Oj(r){return hu*Math.pow(2,(r-69)/12)}class yp extends Vs{constructor(e,n,i){super(),this.defaultUnits="s",this._val=n,this._units=i,this.context=e,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:e=>this._frequencyToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:e=>this._ticksToUnits(parseInt(e,10)),regexp:/^(\d+)i$/i},m:{method:e=>this._beatsToUnits(parseInt(e,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(e,n)=>{const i=parseInt(e,10),o=n==="."?1.5:1;return i===1?this._beatsToUnits(this._getTimeSignature())*o:this._beatsToUnits(4/i)*o},regexp:/^(\d+)n(\.?)$/i},number:{method:e=>this._expressions[this.defaultUnits].method.call(this,e),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:e=>this._secondsToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:e=>parseInt(e,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:e=>{const n=parseInt(e,10);return this._beatsToUnits(8/(Math.floor(n)*3))},regexp:/^(\d+)t$/i},tr:{method:(e,n,i)=>{let o=0;return e&&e!=="0"&&(o+=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),n&&n!=="0"&&(o+=this._beatsToUnits(parseFloat(n))),i&&i!=="0"&&(o+=this._beatsToUnits(parseFloat(i)/4)),o},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof yp&&this.fromType(this._val),jn(this._val))return this._noArg();if(Bs(this._val)&&jn(this._units)){for(const e in this._expressions)if(this._expressions[e].regexp.test(this._val.trim())){this._units=e;break}}else if(Zi(this._val)){let e=0;for(const n in this._val)if(Ce(this._val[n])){const i=this._val[n],o=new this.constructor(this.context,n).valueOf()*i;e+=o}return e}if(Ce(this._units)){const e=this._expressions[this._units],n=this._val.toString().trim().match(e.regexp);return n?e.method.apply(this,n.slice(1)):e.method.call(this,this._val)}else return Bs(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(e){return 1/e}_beatsToUnits(e){return 60/this._getBpm()*e}_secondsToUnits(e){return e}_ticksToUnits(e){return e*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(e){switch(this._units=void 0,this.defaultUnits){case"s":this._val=e.toSeconds();break;case"i":this._val=e.toTicks();break;case"hz":this._val=e.toFrequency();break;case"midi":this._val=e.toMidi();break}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return this.toSeconds()*1e3}}class Yn extends yp{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:e=>this._now()+new this.constructor(this.context,e).valueOf(),regexp:/^\+(.+)/},quantize:{method:e=>{const n=new Yn(this.context,e).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(n))},regexp:/^@(.+)/}})}quantize(e,n=1){const i=new this.constructor(this.context,e).valueOf(),o=this.valueOf(),d=Math.round(o/i)*i-o;return o+d*n}toNotation(){const e=this.toSeconds(),n=["1m"];for(let c=1;c<9;c++){const u=Math.pow(2,c);n.push(u+"n."),n.push(u+"n"),n.push(u+"t")}n.push("0");let i=n[0],o=new Yn(this.context,n[0]).toSeconds();return n.forEach(c=>{const u=new Yn(this.context,c).toSeconds();Math.abs(u-e)<Math.abs(o-e)&&(i=c,o=u)}),i}toBarsBeatsSixteenths(){const e=this._beatsToUnits(1);let n=this.valueOf()/e;n=parseFloat(n.toFixed(4));const i=Math.floor(n/this._getTimeSignature());let o=n%1*4;n=Math.floor(n)%this._getTimeSignature();const c=o.toString();return c.length>3&&(o=parseFloat(parseFloat(c).toFixed(3))),[i,n,o].join(":")}toTicks(){const e=this._beatsToUnits(1);return this.valueOf()/e*this._getPPQ()}toSeconds(){return this.valueOf()}toMidi(){return jf(this.toFrequency())}_now(){return this.context.now()}}class Rn extends Yn{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return Cj()}static set A4(e){Nj(e)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(e){return this.defaultUnits==="midi"?e:Rn.mtof(e)}},note:{regexp:/^([a-g]{1}(?:b|#|##|x|bb|###|#x|x#|bbb)?)(-?[0-9]+)/i,method(e,n){const o=kj[e.toLowerCase()]+(parseInt(n,10)+1)*12;return this.defaultUnits==="midi"?o:Rn.mtof(o)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(e,n,i){let o=1;return e&&e!=="0"&&(o*=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),n&&n!=="0"&&(o*=this._beatsToUnits(parseFloat(n))),i&&i!=="0"&&(o*=this._beatsToUnits(parseFloat(i)/4)),o}}})}transpose(e){return new Rn(this.context,this.valueOf()*Gc(e))}harmonize(e){return e.map(n=>this.transpose(n))}toMidi(){return jf(this.valueOf())}toNote(){const e=this.toFrequency(),n=Math.log2(e/Rn.A4);let i=Math.round(12*n)+57;const o=Math.floor(i/12);return o<0&&(i+=-12*o),Rj[i%12]+o.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const e=this._beatsToUnits(1),n=this.valueOf()/e;return Math.floor(n*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(e){return e}_ticksToUnits(e){return 1/(e*60/(this._getBpm()*this._getPPQ()))}_beatsToUnits(e){return 1/super._beatsToUnits(e)}_secondsToUnits(e){return 1/e}static mtof(e){return Oj(e)}static ftom(e){return jf(e)}}const kj={cbbb:-3,cbb:-2,cb:-1,c:0,"c#":1,cx:2,"c##":2,"c###":3,"cx#":3,"c#x":3,dbbb:-1,dbb:0,db:1,d:2,"d#":3,dx:4,"d##":4,"d###":5,"dx#":5,"d#x":5,ebbb:1,ebb:2,eb:3,e:4,"e#":5,ex:6,"e##":6,"e###":7,"ex#":7,"e#x":7,fbbb:2,fbb:3,fb:4,f:5,"f#":6,fx:7,"f##":7,"f###":8,"fx#":8,"f#x":8,gbbb:4,gbb:5,gb:6,g:7,"g#":8,gx:9,"g##":9,"g###":10,"gx#":10,"g#x":10,abbb:6,abb:7,ab:8,a:9,"a#":10,ax:11,"a##":11,"a###":12,"ax#":12,"a#x":12,bbbb:8,bbb:9,bb:10,b:11,"b#":12,bx:13,"b##":13,"b###":14,"bx#":14,"b#x":14},Rj=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];class Ao extends Yn{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}class nn extends Vs{constructor(){super();const e=pe(nn.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=e.context}static getDefaults(){return{context:Fn()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(e){return lj(e),new Yn(this.context,e).toSeconds()}toFrequency(e){return new Rn(this.context,e).toFrequency()}toTicks(e){return new Ao(this.context,e).toTicks()}_getPartialProperties(e){const n=this.get();return Object.keys(n).forEach(i=>{jn(e[i])&&delete n[i]}),n}get(){const e=_j(this);return Object.keys(e).forEach(n=>{if(Reflect.has(this,n)){const i=this[n];Ce(i)&&Ce(i.value)&&Ce(i.setValueAtTime)?e[n]=i.value:i instanceof nn?e[n]=i._getPartialProperties(e[n]):Wn(i)||vi(i)||Bs(i)||oj(i)?e[n]=i:delete e[n]}}),e}set(e){return Object.keys(e).forEach(n=>{Reflect.has(this,n)&&Ce(this[n])&&(this[n]&&Ce(this[n].value)&&Ce(this[n].setValueAtTime)?this[n].value!==e[n]&&(this[n].value=e[n]):this[n]instanceof nn?this[n].set(e[n]):this[n]=e[n])}),this}}class _p extends Dn{constructor(e="stopped"){super(),this.name="StateTimeline",this._initial=e,this.setStateAtTime(this._initial,0)}getValueAtTime(e){const n=this.get(e);return n!==null?n.state:this._initial}setStateAtTime(e,n,i){return vn(n,0),this.add(Object.assign({},i,{state:e,time:n})),this}getLastState(e,n){const i=this._search(n);for(let o=i;o>=0;o--){const c=this._timeline[o];if(c.state===e)return c}}getNextState(e,n){const i=this._search(n);if(i!==-1)for(let o=i;o<this._timeline.length;o++){const c=this._timeline[o];if(c.state===e)return c}}}class Pe extends nn{constructor(){const e=pe(Pe.getDefaults(),arguments,["param","units","convert"]);for(super(e),this.name="Param",this.overridden=!1,this._minOutput=1e-7,xe(Ce(e.param)&&(Ji(e.param)||e.param instanceof Pe),"param must be an AudioParam");!Ji(e.param);)e.param=e.param._param;this._swappable=Ce(e.swappable)?e.swappable:!1,this._swappable?(this.input=this.context.createGain(),this._param=e.param,this.input.connect(this._param)):this._param=this.input=e.param,this._events=new Dn(1e3),this._initialValue=this._param.defaultValue,this.units=e.units,this.convert=e.convert,this._minValue=e.minValue,this._maxValue=e.maxValue,Ce(e.value)&&e.value!==this._toType(this._initialValue)&&this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(nn.getDefaults(),{convert:!0,units:"number"})}get value(){const e=this.now();return this.getValueAtTime(e)}set value(e){this.cancelScheduledValues(this.now()),this.setValueAtTime(e,this.now())}get minValue(){return Ce(this._minValue)?this._minValue:this.units==="time"||this.units==="frequency"||this.units==="normalRange"||this.units==="positive"||this.units==="transportTime"||this.units==="ticks"||this.units==="bpm"||this.units==="hertz"||this.units==="samples"?0:this.units==="audioRange"?-1:this.units==="decibels"?-1/0:this._param.minValue}get maxValue(){return Ce(this._maxValue)?this._maxValue:this.units==="normalRange"||this.units==="audioRange"?1:this._param.maxValue}_is(e,n){return this.units===n}_assertRange(e){return Ce(this.maxValue)&&Ce(this.minValue)&&vn(e,this._fromType(this.minValue),this._fromType(this.maxValue)),e}_fromType(e){return this.convert&&!this.overridden?this._is(e,"time")?this.toSeconds(e):this._is(e,"decibels")?Aj(e):this._is(e,"frequency")?this.toFrequency(e):e:this.overridden?0:e}_toType(e){return this.convert&&this.units==="decibels"?Ej(e):e}setValueAtTime(e,n){const i=this.toSeconds(n),o=this._fromType(e);return xe(isFinite(o)&&isFinite(i),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(n)}`),this._assertRange(o),this.log(this.units,"setValueAtTime",e,i),this._events.add({time:i,type:"setValueAtTime",value:o}),this._param.setValueAtTime(o,i),this}getValueAtTime(e){const n=Math.max(this.toSeconds(e),0),i=this._events.getAfter(n),o=this._events.get(n);let c=this._initialValue;if(o===null)c=this._initialValue;else if(o.type==="setTargetAtTime"&&(i===null||i.type==="setValueAtTime")){const u=this._events.getBefore(o.time);let d;u===null?d=this._initialValue:d=u.value,o.type==="setTargetAtTime"&&(c=this._exponentialApproach(o.time,d,o.value,o.constant,n))}else if(i===null)c=o.value;else if(i.type==="linearRampToValueAtTime"||i.type==="exponentialRampToValueAtTime"){let u=o.value;if(o.type==="setTargetAtTime"){const d=this._events.getBefore(o.time);d===null?u=this._initialValue:u=d.value}i.type==="linearRampToValueAtTime"?c=this._linearInterpolate(o.time,u,i.time,i.value,n):c=this._exponentialInterpolate(o.time,u,i.time,i.value,n)}else c=o.value;return this._toType(c)}setRampPoint(e){e=this.toSeconds(e);let n=this.getValueAtTime(e);return this.cancelAndHoldAtTime(e),this._fromType(n)===0&&(n=this._toType(this._minOutput)),this.setValueAtTime(n,e),this}linearRampToValueAtTime(e,n){const i=this._fromType(e),o=this.toSeconds(n);return xe(isFinite(i)&&isFinite(o),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(n)}`),this._assertRange(i),this._events.add({time:o,type:"linearRampToValueAtTime",value:i}),this.log(this.units,"linearRampToValueAtTime",e,o),this._param.linearRampToValueAtTime(i,o),this}exponentialRampToValueAtTime(e,n){let i=this._fromType(e);i=Gn(i,0)?this._minOutput:i,this._assertRange(i);const o=this.toSeconds(n);return xe(isFinite(i)&&isFinite(o),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(n)}`),this._events.add({time:o,type:"exponentialRampToValueAtTime",value:i}),this.log(this.units,"exponentialRampToValueAtTime",e,o),this._param.exponentialRampToValueAtTime(i,o),this}exponentialRampTo(e,n,i){return i=this.toSeconds(i),this.setRampPoint(i),this.exponentialRampToValueAtTime(e,i+this.toSeconds(n)),this}linearRampTo(e,n,i){return i=this.toSeconds(i),this.setRampPoint(i),this.linearRampToValueAtTime(e,i+this.toSeconds(n)),this}targetRampTo(e,n,i){return i=this.toSeconds(i),this.setRampPoint(i),this.exponentialApproachValueAtTime(e,i,n),this}exponentialApproachValueAtTime(e,n,i){n=this.toSeconds(n),i=this.toSeconds(i);const o=Math.log(i+1)/Math.log(200);return this.setTargetAtTime(e,n,o),this.cancelAndHoldAtTime(n+i*.9),this.linearRampToValueAtTime(e,n+i),this}setTargetAtTime(e,n,i){const o=this._fromType(e);xe(isFinite(i)&&i>0,"timeConstant must be a number greater than 0");const c=this.toSeconds(n);return this._assertRange(o),xe(isFinite(o)&&isFinite(c),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(e)}, ${JSON.stringify(n)}`),this._events.add({constant:i,time:c,type:"setTargetAtTime",value:o}),this.log(this.units,"setTargetAtTime",e,c,i),this._param.setTargetAtTime(o,c,i),this}setValueCurveAtTime(e,n,i,o=1){i=this.toSeconds(i),n=this.toSeconds(n);const c=this._fromType(e[0])*o;this.setValueAtTime(this._toType(c),n);const u=i/(e.length-1);for(let d=1;d<e.length;d++){const f=this._fromType(e[d])*o;this.linearRampToValueAtTime(this._toType(f),n+d*u)}return this}cancelScheduledValues(e){const n=this.toSeconds(e);return xe(isFinite(n),`Invalid argument to cancelScheduledValues: ${JSON.stringify(e)}`),this._events.cancel(n),this._param.cancelScheduledValues(n),this.log(this.units,"cancelScheduledValues",n),this}cancelAndHoldAtTime(e){const n=this.toSeconds(e),i=this._fromType(this.getValueAtTime(n));xe(isFinite(n),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(e)}`),this.log(this.units,"cancelAndHoldAtTime",n,"value="+i);const o=this._events.get(n),c=this._events.getAfter(n);return o&&Gn(o.time,n)?c?(this._param.cancelScheduledValues(c.time),this._events.cancel(c.time)):(this._param.cancelAndHoldAtTime(n),this._events.cancel(n+this.sampleTime)):c&&(this._param.cancelScheduledValues(c.time),this._events.cancel(c.time),c.type==="linearRampToValueAtTime"?this.linearRampToValueAtTime(this._toType(i),n):c.type==="exponentialRampToValueAtTime"&&this.exponentialRampToValueAtTime(this._toType(i),n)),this._events.add({time:n,type:"setValueAtTime",value:i}),this._param.setValueAtTime(i,n),this}rampTo(e,n=.1,i){return this.units==="frequency"||this.units==="bpm"||this.units==="decibels"?this.exponentialRampTo(e,n,i):this.linearRampTo(e,n,i),this}apply(e){const n=this.context.currentTime;e.setValueAtTime(this.getValueAtTime(n),n);const i=this._events.get(n);if(i&&i.type==="setTargetAtTime"){const o=this._events.getAfter(i.time),c=o?o.time:n+2,u=(c-n)/10;for(let d=n;d<c;d+=u)e.linearRampToValueAtTime(this.getValueAtTime(d),d)}return this._events.forEachAfter(this.context.currentTime,o=>{o.type==="cancelScheduledValues"?e.cancelScheduledValues(o.time):o.type==="setTargetAtTime"?e.setTargetAtTime(o.value,o.time,o.constant):e[o.type](o.value,o.time)}),this}setParam(e){xe(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const n=this.input;return n.disconnect(this._param),this.apply(e),this._param=e,n.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(e,n,i,o,c){return i+(n-i)*Math.exp(-(c-e)/o)}_linearInterpolate(e,n,i,o,c){return n+(o-n)*((c-e)/(i-e))}_exponentialInterpolate(e,n,i,o,c){return n*Math.pow(o/n,(c-e)/(i-e))}}class ge extends nn{constructor(){super(...arguments),this._internalChannels=[]}get numberOfInputs(){return Ce(this.input)?Ji(this.input)||this.input instanceof Pe?1:this.input.numberOfInputs:0}get numberOfOutputs(){return Ce(this.output)?this.output.numberOfOutputs:0}_isAudioNode(e){return Ce(e)&&(e instanceof ge||_i(e))}_getInternalNodes(){const e=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&e.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&e.push(this.output),e}_setChannelProperties(e){this._getInternalNodes().forEach(i=>{i.channelCount=e.channelCount,i.channelCountMode=e.channelCountMode,i.channelInterpretation=e.channelInterpretation})}_getChannelProperties(){const e=this._getInternalNodes();xe(e.length>0,"ToneAudioNode does not have any internal nodes");const n=e[0];return{channelCount:n.channelCount,channelCountMode:n.channelCountMode,channelInterpretation:n.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(e){const n=this._getChannelProperties();this._setChannelProperties(Object.assign(n,{channelCount:e}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(e){const n=this._getChannelProperties();this._setChannelProperties(Object.assign(n,{channelCountMode:e}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(e){const n=this._getChannelProperties();this._setChannelProperties(Object.assign(n,{channelInterpretation:e}))}connect(e,n=0,i=0){return ls(this,e,n,i),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return mp("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(e,n=0,i=0){return Lb(this,e,n,i),this}chain(...e){return Fc(this,...e),this}fan(...e){return e.forEach(n=>this.connect(n)),this}dispose(){return super.dispose(),Ce(this.input)&&(this.input instanceof ge?this.input.dispose():_i(this.input)&&this.input.disconnect()),Ce(this.output)&&(this.output instanceof ge?this.output.dispose():_i(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function Fc(...r){const e=r.shift();r.reduce((n,i)=>(n instanceof ge?n.connect(i):_i(n)&&ls(n,i),i),e)}function ls(r,e,n=0,i=0){for(xe(Ce(r),"Cannot connect from undefined node"),xe(Ce(e),"Cannot connect to undefined node"),(e instanceof ge||_i(e))&&xe(e.numberOfInputs>0,"Cannot connect to node with no inputs"),xe(r.numberOfOutputs>0,"Cannot connect from node with no outputs");e instanceof ge||e instanceof Pe;)Ce(e.input)&&(e=e.input);for(;r instanceof ge;)Ce(r.output)&&(r=r.output);Ji(e)?r.connect(e,n):r.connect(e,n,i)}function Lb(r,e,n=0,i=0){if(Ce(e))for(;e instanceof ge;)e=e.input;for(;!_i(r);)Ce(r.output)&&(r=r.output);Ji(e)?r.disconnect(e,n):_i(e)?r.disconnect(e,n,i):r.disconnect()}class Ye extends ge{constructor(){const e=pe(Ye.getDefaults(),arguments,["gain","units"]);super(e),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode,this.gain=new Pe({context:this.context,convert:e.convert,param:this._gainNode.gain,units:e.units,value:e.gain,minValue:e.minValue,maxValue:e.maxValue}),qe(this,"gain")}static getDefaults(){return Object.assign(ge.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class fa extends ge{constructor(e){super(e),this.onended=He,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new Ye({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(n){const i=this.toSeconds(n);return this._startTime!==-1&&i>=this._startTime&&(this._stopTime===-1||i<=this._stopTime)?"started":"stopped"},this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut,this._curve=e.curve,this.onended=e.onended}static getDefaults(){return Object.assign(ge.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:He})}_startGain(e,n=1){xe(this._startTime===-1,"Source cannot be started more than once");const i=this.toSeconds(this._fadeIn);return this._startTime=e+i,this._startTime=Math.max(this._startTime,this.context.currentTime),i>0?(this._gainNode.gain.setValueAtTime(0,e),this._curve==="linear"?this._gainNode.gain.linearRampToValueAtTime(n,e+i):this._gainNode.gain.exponentialApproachValueAtTime(n,e,i)):this._gainNode.gain.setValueAtTime(n,e),this}stop(e){return this.log("stop",e),this._stopGain(this.toSeconds(e)),this}_stopGain(e){xe(this._startTime!==-1,"'start' must be called before 'stop'"),this.cancelStop();const n=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(e)+n,this._stopTime=Math.max(this._stopTime,this.now()),n>0?this._curve==="linear"?this._gainNode.gain.linearRampTo(0,n,e):this._gainNode.gain.targetRampTo(0,n,e):(this._gainNode.gain.cancelAndHoldAtTime(e),this._gainNode.gain.setValueAtTime(0,e)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{const i=this._curve==="exponential"?n*2:0;this._stopSource(this.now()+i),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==He&&(this.onended(this),this.onended=He,!this.context.isOffline)){const e=()=>this.dispose();typeof requestIdleCallback<"u"?requestIdleCallback(e):setTimeout(e,10)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),xe(this._startTime!==-1,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.dispose(),this.onended=He,this}}class vp extends fa{constructor(){const e=pe(vp.getDefaults(),arguments,["offset"]);super(e),this.name="ToneConstantSource",this._source=this.context.createConstantSource(),ls(this._source,this._gainNode),this.offset=new Pe({context:this.context,convert:e.convert,param:this._source.offset,units:e.units,value:e.offset,minValue:e.minValue,maxValue:e.maxValue})}static getDefaults(){return Object.assign(fa.getDefaults(),{convert:!0,offset:1,units:"number"})}start(e){const n=this.toSeconds(e);return this.log("start",n),this._startGain(n),this._source.start(n),this}_stopSource(e){this._source.stop(e)}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class ot extends ge{constructor(){const e=pe(ot.getDefaults(),arguments,["value","units"]);super(e),this.name="Signal",this.override=!0,this.output=this._constantSource=new vp({context:this.context,convert:e.convert,offset:e.value,units:e.units,minValue:e.minValue,maxValue:e.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(ge.getDefaults(),{convert:!0,units:"number",value:0})}connect(e,n=0,i=0){return du(this,e,n,i),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(e,n){return this._param.setValueAtTime(e,n),this}getValueAtTime(e){return this._param.getValueAtTime(e)}setRampPoint(e){return this._param.setRampPoint(e),this}linearRampToValueAtTime(e,n){return this._param.linearRampToValueAtTime(e,n),this}exponentialRampToValueAtTime(e,n){return this._param.exponentialRampToValueAtTime(e,n),this}exponentialRampTo(e,n,i){return this._param.exponentialRampTo(e,n,i),this}linearRampTo(e,n,i){return this._param.linearRampTo(e,n,i),this}targetRampTo(e,n,i){return this._param.targetRampTo(e,n,i),this}exponentialApproachValueAtTime(e,n,i){return this._param.exponentialApproachValueAtTime(e,n,i),this}setTargetAtTime(e,n,i){return this._param.setTargetAtTime(e,n,i),this}setValueCurveAtTime(e,n,i,o){return this._param.setValueCurveAtTime(e,n,i,o),this}cancelScheduledValues(e){return this._param.cancelScheduledValues(e),this}cancelAndHoldAtTime(e){return this._param.cancelAndHoldAtTime(e),this}rampTo(e,n,i){return this._param.rampTo(e,n,i),this}get value(){return this._param.value}set value(e){this._param.value=e}get convert(){return this._param.convert}set convert(e){this._param.convert=e}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(e){this._param.overridden=e}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(e){return this._param.apply(e),this}}function du(r,e,n,i){(e instanceof Pe||Ji(e)||e instanceof ot&&e.override)&&(e.cancelScheduledValues(0),e.setValueAtTime(0,0),e instanceof ot&&(e.overridden=!0)),ls(r,e,n,i)}class bp extends Pe{constructor(){const e=pe(bp.getDefaults(),arguments,["value"]);super(e),this.name="TickParam",this._events=new Dn(1/0),this._multiplier=1,this._multiplier=e.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(e.value)}),this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(Pe.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(e,n,i){n=this.toSeconds(n),this.setRampPoint(n);const o=this._fromType(e),c=this._events.get(n),u=Math.round(Math.max(1/i,1));for(let d=0;d<=u;d++){const f=i*d+n,m=this._exponentialApproach(c.time,c.value,o,i,f);this.linearRampToValueAtTime(this._toType(m),f)}return this}setValueAtTime(e,n){const i=this.toSeconds(n);super.setValueAtTime(e,n);const o=this._events.get(i),c=this._events.previousEvent(o),u=this._getTicksUntilEvent(c,i);return o.ticks=Math.max(u,0),this}linearRampToValueAtTime(e,n){const i=this.toSeconds(n);super.linearRampToValueAtTime(e,n);const o=this._events.get(i),c=this._events.previousEvent(o),u=this._getTicksUntilEvent(c,i);return o.ticks=Math.max(u,0),this}exponentialRampToValueAtTime(e,n){n=this.toSeconds(n);const i=this._fromType(e),o=this._events.get(n),c=Math.round(Math.max((n-o.time)*10,1)),u=(n-o.time)/c;for(let d=0;d<=c;d++){const f=u*d+o.time,m=this._exponentialInterpolate(o.time,o.value,n,i,f);this.linearRampToValueAtTime(this._toType(m),f)}return this}_getTicksUntilEvent(e,n){if(e===null)e={ticks:0,time:0,type:"setValueAtTime",value:0};else if(jn(e.ticks)){const u=this._events.previousEvent(e);e.ticks=this._getTicksUntilEvent(u,e.time)}const i=this._fromType(this.getValueAtTime(e.time));let o=this._fromType(this.getValueAtTime(n));const c=this._events.get(n);return c&&c.time===n&&c.type==="setValueAtTime"&&(o=this._fromType(this.getValueAtTime(n-this.sampleTime))),.5*(n-e.time)*(i+o)+e.ticks}getTicksAtTime(e){const n=this.toSeconds(e),i=this._events.get(n);return Math.max(this._getTicksUntilEvent(i,n),0)}getDurationOfTicks(e,n){const i=this.toSeconds(n),o=this.getTicksAtTime(n);return this.getTimeOfTick(o+e)-i}getTimeOfTick(e){const n=this._events.get(e,"ticks"),i=this._events.getAfter(e,"ticks");if(n&&n.ticks===e)return n.time;if(n&&i&&i.type==="linearRampToValueAtTime"&&n.value!==i.value){const o=this._fromType(this.getValueAtTime(n.time)),u=(this._fromType(this.getValueAtTime(i.time))-o)/(i.time-n.time),d=Math.sqrt(Math.pow(o,2)-2*u*(n.ticks-e)),f=(-o+d)/u,m=(-o-d)/u;return(f>0?f:m)+n.time}else return n?n.value===0?1/0:n.time+(e-n.ticks)/n.value:e/this._initialValue}ticksToTime(e,n){return this.getDurationOfTicks(e,n)}timeToTicks(e,n){const i=this.toSeconds(n),o=this.toSeconds(e),c=this.getTicksAtTime(i);return this.getTicksAtTime(i+o)-c}_fromType(e){return this.units==="bpm"&&this.multiplier?1/(60/e/this.multiplier):super._fromType(e)}_toType(e){return this.units==="bpm"&&this.multiplier?e/this.multiplier*60:super._toType(e)}get multiplier(){return this._multiplier}set multiplier(e){const n=this.value;this._multiplier=e,this.cancelScheduledValues(0),this.setValueAtTime(n,0)}}class wp extends ot{constructor(){const e=pe(wp.getDefaults(),arguments,["value"]);super(e),this.name="TickSignal",this.input=this._param=new bp({context:this.context,convert:e.convert,multiplier:e.multiplier,param:this._constantSource.offset,units:e.units,value:e.value})}static getDefaults(){return Object.assign(ot.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(e,n){return this._param.ticksToTime(e,n)}timeToTicks(e,n){return this._param.timeToTicks(e,n)}getTimeOfTick(e){return this._param.getTimeOfTick(e)}getDurationOfTicks(e,n){return this._param.getDurationOfTicks(e,n)}getTicksAtTime(e){return this._param.getTicksAtTime(e)}get multiplier(){return this._param.multiplier}set multiplier(e){this._param.multiplier=e}dispose(){return super.dispose(),this._param.dispose(),this}}class Sp extends nn{constructor(){const e=pe(Sp.getDefaults(),arguments,["frequency"]);super(e),this.name="TickSource",this._state=new _p,this._tickOffset=new Dn,this._ticksAtTime=new Dn,this._secondsAtTime=new Dn,this.frequency=new wp({context:this.context,units:e.units,value:e.frequency}),qe(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},nn.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(e,n){const i=this.toSeconds(e);return this._state.getValueAtTime(i)!=="started"&&(this._state.setStateAtTime("started",i),Ce(n)&&this.setTicksAtTime(n,i),this._ticksAtTime.cancel(i),this._secondsAtTime.cancel(i)),this}stop(e){const n=this.toSeconds(e);if(this._state.getValueAtTime(n)==="stopped"){const i=this._state.get(n);i&&i.time>0&&(this._tickOffset.cancel(i.time),this._state.cancel(i.time))}return this._state.cancel(n),this._state.setStateAtTime("stopped",n),this.setTicksAtTime(0,n),this._ticksAtTime.cancel(n),this._secondsAtTime.cancel(n),this}pause(e){const n=this.toSeconds(e);return this._state.getValueAtTime(n)==="started"&&(this._state.setStateAtTime("paused",n),this._ticksAtTime.cancel(n),this._secondsAtTime.cancel(n)),this}cancel(e){return e=this.toSeconds(e),this._state.cancel(e),this._tickOffset.cancel(e),this._ticksAtTime.cancel(e),this._secondsAtTime.cancel(e),this}getTicksAtTime(e){const n=this.toSeconds(e),i=this._state.getLastState("stopped",n),o=this._ticksAtTime.get(n),c={state:"paused",time:n};this._state.add(c);let u=o||i,d=o?o.ticks:0,f=null;return this._state.forEachBetween(u.time,n+this.sampleTime,m=>{let y=u.time;const _=this._tickOffset.get(m.time);_&&_.time>=u.time&&(d=_.ticks,y=_.time),u.state==="started"&&m.state!=="started"&&(d+=this.frequency.getTicksAtTime(m.time)-this.frequency.getTicksAtTime(y),m.time!==c.time&&(f={state:m.state,time:m.time,ticks:d})),u=m}),this._state.remove(c),f&&this._ticksAtTime.add(f),d}get ticks(){return this.getTicksAtTime(this.now())}set ticks(e){this.setTicksAtTime(e,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(e){const n=this.now(),i=this.frequency.timeToTicks(e,n);this.setTicksAtTime(i,n)}getSecondsAtTime(e){e=this.toSeconds(e);const n=this._state.getLastState("stopped",e),i={state:"paused",time:e};this._state.add(i);const o=this._secondsAtTime.get(e);let c=o||n,u=o?o.seconds:0,d=null;return this._state.forEachBetween(c.time,e+this.sampleTime,f=>{let m=c.time;const y=this._tickOffset.get(f.time);y&&y.time>=c.time&&(u=y.seconds,m=y.time),c.state==="started"&&f.state!=="started"&&(u+=f.time-m,f.time!==i.time&&(d={state:f.state,time:f.time,seconds:u})),c=f}),this._state.remove(i),d&&this._secondsAtTime.add(d),u}setTicksAtTime(e,n){return n=this.toSeconds(n),this._tickOffset.cancel(n),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(e,n),ticks:e,time:n}),this._ticksAtTime.cancel(n),this._secondsAtTime.cancel(n),this}getStateAtTime(e){return e=this.toSeconds(e),this._state.getValueAtTime(e)}getTimeOfTick(e,n=this.now()){const i=this._tickOffset.get(n),o=this._state.get(n),c=Math.max(i.time,o.time),u=this.frequency.getTicksAtTime(c)+e-i.ticks;return this.frequency.getTimeOfTick(u)}forEachTickBetween(e,n,i){let o=this._state.get(e);this._state.forEachBetween(e,n,u=>{o&&o.state==="started"&&u.state!=="started"&&this.forEachTickBetween(Math.max(o.time,e),u.time-this.sampleTime,i),o=u});let c=null;if(o&&o.state==="started"){const u=Math.max(o.time,e),d=this.frequency.getTicksAtTime(u),f=this.frequency.getTicksAtTime(o.time),m=d-f;let y=Math.ceil(m)-m;y=Gn(y,1)?0:y;let _=this.frequency.getTimeOfTick(d+y);for(;_<n;){try{i(_,Math.round(this.getTicksAtTime(_)))}catch(b){c=b;break}_+=this.frequency.getDurationOfTicks(1,_)}}if(c)throw c;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this._ticksAtTime.dispose(),this._secondsAtTime.dispose(),this.frequency.dispose(),this}}class fu extends nn{constructor(){const e=pe(fu.getDefaults(),arguments,["callback","frequency"]);super(e),this.name="Clock",this.callback=He,this._lastUpdate=0,this._state=new _p("stopped"),this._boundLoop=this._loop.bind(this),this.callback=e.callback,this._tickSource=new Sp({context:this.context,frequency:e.frequency,units:e.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,qe(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(nn.getDefaults(),{callback:He,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(e,n){kb(this.context);const i=this.toSeconds(e);return this.log("start",i),this._state.getValueAtTime(i)!=="started"&&(this._state.setStateAtTime("started",i),this._tickSource.start(i,n),i<this._lastUpdate&&this.emit("start",i,n)),this}stop(e){const n=this.toSeconds(e);return this.log("stop",n),this._state.cancel(n),this._state.setStateAtTime("stopped",n),this._tickSource.stop(n),n<this._lastUpdate&&this.emit("stop",n),this}pause(e){const n=this.toSeconds(e);return this._state.getValueAtTime(n)==="started"&&(this._state.setStateAtTime("paused",n),this._tickSource.pause(n),n<this._lastUpdate&&this.emit("pause",n)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(e){this._tickSource.ticks=e}get seconds(){return this._tickSource.seconds}set seconds(e){this._tickSource.seconds=e}getSecondsAtTime(e){return this._tickSource.getSecondsAtTime(e)}setTicksAtTime(e,n){return this._tickSource.setTicksAtTime(e,n),this}getTimeOfTick(e,n=this.now()){return this._tickSource.getTimeOfTick(e,n)}getTicksAtTime(e){return this._tickSource.getTicksAtTime(e)}nextTickTime(e,n){const i=this.toSeconds(n),o=this.getTicksAtTime(i);return this._tickSource.getTimeOfTick(o+e,i)}_loop(){const e=this._lastUpdate,n=this.now();this._lastUpdate=n,this.log("loop",e,n),e!==n&&(this._state.forEachBetween(e,n,i=>{switch(i.state){case"started":const o=this._tickSource.getTicksAtTime(i.time);this.emit("start",i.time,o);break;case"stopped":i.time!==0&&this.emit("stop",i.time);break;case"paused":this.emit("pause",i.time);break}}),this._tickSource.forEachTickBetween(e,n,(i,o)=>{this.callback(i,o)}))}getStateAtTime(e){const n=this.toSeconds(e);return this._state.getValueAtTime(n)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}Wo.mixin(fu);class ca extends ge{constructor(){const e=pe(ca.getDefaults(),arguments,["delayTime","maxDelay"]);super(e),this.name="Delay";const n=this.toSeconds(e.maxDelay);this._maxDelay=Math.max(n,this.toSeconds(e.delayTime)),this._delayNode=this.input=this.output=this.context.createDelay(n),this.delayTime=new Pe({context:this.context,param:this._delayNode.delayTime,units:"time",value:e.delayTime,minValue:0,maxValue:this.maxDelay}),qe(this,"delayTime")}static getDefaults(){return Object.assign(ge.getDefaults(),{delayTime:0,maxDelay:1})}get maxDelay(){return this._maxDelay}dispose(){return super.dispose(),this._delayNode.disconnect(),this.delayTime.dispose(),this}}class sr extends ge{constructor(){const e=pe(sr.getDefaults(),arguments,["volume"]);super(e),this.name="Volume",this.input=this.output=new Ye({context:this.context,gain:e.volume,units:"decibels"}),this.volume=this.output.gain,qe(this,"volume"),this._unmutedVolume=e.volume,this.mute=e.mute}static getDefaults(){return Object.assign(ge.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(e){!this.mute&&e?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!e&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}class Tp extends ge{constructor(){const e=pe(Tp.getDefaults(),arguments);super(e),this.name="Destination",this.input=new sr({context:this.context}),this.output=new Ye({context:this.context}),this.volume=this.input.volume,Fc(this.input,this.output,this.context.rawContext.destination),this.mute=e.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(ge.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(e){this.input.mute=e}chain(...e){return this.input.disconnect(),e.unshift(this.input),e.push(this.output),Fc(...e),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}}lu(r=>{r.destination=new Tp({context:r})});cu(r=>{r.destination.dispose()});class jj extends ge{constructor(){super(...arguments),this.name="Listener",this.positionX=new Pe({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new Pe({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new Pe({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new Pe({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new Pe({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new Pe({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new Pe({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new Pe({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new Pe({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(ge.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}lu(r=>{r.listener=new jj({context:r})});cu(r=>{r.listener.dispose()});class xp extends Vs{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const e=pe(xp.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=e.baseUrl,Object.keys(e.urls).forEach(n=>{this._loadingCount++;const i=e.urls[n];this.add(n,i,this._bufferLoaded.bind(this,e.onload),e.onerror)})}static getDefaults(){return{baseUrl:"",onerror:He,onload:He,urls:{}}}has(e){return this._buffers.has(e.toString())}get(e){return xe(this.has(e),`ToneAudioBuffers has no buffer named: ${e}`),this._buffers.get(e.toString())}_bufferLoaded(e){this._loadingCount--,this._loadingCount===0&&e&&e()}get loaded(){return Array.from(this._buffers).every(([e,n])=>n.loaded)}add(e,n,i=He,o=He){return Bs(n)?(this.baseUrl&&n.trim().substring(0,11).toLowerCase()==="data:audio/"&&(this.baseUrl=""),this._buffers.set(e.toString(),new Ke(this.baseUrl+n,i,o))):this._buffers.set(e.toString(),new Ke(n,i,o)),this}dispose(){return super.dispose(),this._buffers.forEach(e=>e.dispose()),this._buffers.clear(),this}}class ia extends Ao{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(e){return this._getPPQ()*e}_secondsToUnits(e){return Math.floor(e/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(e){return e}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}class Dj extends nn{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new Dn,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(e,n){return this._events.add({callback:e,time:this.toSeconds(n)}),this._events.length===1&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(e){return this._events.cancel(this.toSeconds(e)),this}_drawLoop(){const e=this.context.currentTime;this._events.forEachBefore(e+this.anticipation,n=>{e-n.time<=this.expiration&&n.callback(),this._events.remove(n)}),this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}lu(r=>{r.draw=new Dj({context:r})});cu(r=>{r.draw.dispose()});class Mj extends Vs{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(e){xe(Ce(e.time),"Events must have a time property"),xe(Ce(e.duration),"Events must have a duration parameter"),e.time=e.time.valueOf();let n=new Uj(e.time,e.time+e.duration,e);for(this._root===null?this._root=n:this._root.insert(n),this._length++;n!==null;)n.updateHeight(),n.updateMax(),this._rebalance(n),n=n.parent;return this}remove(e){if(this._root!==null){const n=[];this._root.search(e.time,n);for(const i of n)if(i.event===e){this._removeNode(i),this._length--;break}}return this}get length(){return this._length}cancel(e){return this.forEachFrom(e,n=>this.remove(n)),this}_setRoot(e){this._root=e,this._root!==null&&(this._root.parent=null)}_replaceNodeInParent(e,n){e.parent!==null?(e.isLeftChild()?e.parent.left=n:e.parent.right=n,this._rebalance(e.parent)):this._setRoot(n)}_removeNode(e){if(e.left===null&&e.right===null)this._replaceNodeInParent(e,null);else if(e.right===null)this._replaceNodeInParent(e,e.left);else if(e.left===null)this._replaceNodeInParent(e,e.right);else{const n=e.getBalance();let i,o=null;if(n>0)if(e.left.right===null)i=e.left,i.right=e.right,o=i;else{for(i=e.left.right;i.right!==null;)i=i.right;i.parent&&(i.parent.right=i.left,o=i.parent,i.left=e.left,i.right=e.right)}else if(e.right.left===null)i=e.right,i.left=e.left,o=i;else{for(i=e.right.left;i.left!==null;)i=i.left;i.parent&&(i.parent.left=i.right,o=i.parent,i.left=e.left,i.right=e.right)}e.parent!==null?e.isLeftChild()?e.parent.left=i:e.parent.right=i:this._setRoot(i),o&&this._rebalance(o)}e.dispose()}_rotateLeft(e){const n=e.parent,i=e.isLeftChild(),o=e.right;o&&(e.right=o.left,o.left=e),n!==null?i?n.left=o:n.right=o:this._setRoot(o)}_rotateRight(e){const n=e.parent,i=e.isLeftChild(),o=e.left;o&&(e.left=o.right,o.right=e),n!==null?i?n.left=o:n.right=o:this._setRoot(o)}_rebalance(e){const n=e.getBalance();n>1&&e.left?e.left.getBalance()<0?this._rotateLeft(e.left):this._rotateRight(e):n<-1&&e.right&&(e.right.getBalance()>0?this._rotateRight(e.right):this._rotateLeft(e))}get(e){if(this._root!==null){const n=[];if(this._root.search(e,n),n.length>0){let i=n[0];for(let o=1;o<n.length;o++)n[o].low>i.low&&(i=n[o]);return i.event}}return null}forEach(e){if(this._root!==null){const n=[];this._root.traverse(i=>n.push(i)),n.forEach(i=>{i.event&&e(i.event)})}return this}forEachAtTime(e,n){if(this._root!==null){const i=[];this._root.search(e,i),i.forEach(o=>{o.event&&n(o.event)})}return this}forEachFrom(e,n){if(this._root!==null){const i=[];this._root.searchAfter(e,i),i.forEach(o=>{o.event&&n(o.event)})}return this}dispose(){return super.dispose(),this._root!==null&&this._root.traverse(e=>e.dispose()),this._root=null,this}}class Uj{constructor(e,n,i){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=i,this.low=e,this.high=n,this.max=this.high}insert(e){e.low<=this.low?this.left===null?this.left=e:this.left.insert(e):this.right===null?this.right=e:this.right.insert(e)}search(e,n){e>this.max||(this.left!==null&&this.left.search(e,n),this.low<=e&&this.high>e&&n.push(this),!(this.low>e)&&this.right!==null&&this.right.search(e,n))}searchAfter(e,n){this.low>=e&&(n.push(this),this.left!==null&&this.left.searchAfter(e,n)),this.right!==null&&this.right.searchAfter(e,n)}traverse(e){e(this),this.left!==null&&this.left.traverse(e),this.right!==null&&this.right.traverse(e)}updateHeight(){this.left!==null&&this.right!==null?this.height=Math.max(this.left.height,this.right.height)+1:this.right!==null?this.height=this.right.height+1:this.left!==null?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,this.left!==null&&(this.max=Math.max(this.max,this.left.max)),this.right!==null&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let e=0;return this.left!==null&&this.right!==null?e=this.left.height-this.right.height:this.left!==null?e=this.left.height+1:this.right!==null&&(e=-(this.right.height+1)),e}isLeftChild(){return this.parent!==null&&this.parent.left===this}get left(){return this._left}set left(e){this._left=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(e){this._right=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}class zj extends Vs{constructor(e){super(),this.name="TimelineValue",this._timeline=new Dn({memory:10}),this._initialValue=e}set(e,n){return this._timeline.add({value:e,time:n}),this}get(e){const n=this._timeline.get(e);return n?n.value:this._initialValue}}class cs extends ge{constructor(){super(pe(cs.getDefaults(),arguments,["context"]))}connect(e,n=0,i=0){return du(this,e,n,i),this}}class ir extends cs{constructor(){const e=pe(ir.getDefaults(),arguments,["mapping","length"]);super(e),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper,Wn(e.mapping)||e.mapping instanceof Float32Array?this.curve=Float32Array.from(e.mapping):aj(e.mapping)&&this.setMap(e.mapping,e.length)}static getDefaults(){return Object.assign(ot.getDefaults(),{length:1024})}setMap(e,n=1024){const i=new Float32Array(n);for(let o=0,c=n;o<c;o++){const u=o/(c-1)*2-1;i[o]=e(u,o)}return this.curve=i,this}get curve(){return this._shaper.curve}set curve(e){this._shaper.curve=e}get oversample(){return this._shaper.oversample}set oversample(e){const n=["none","2x","4x"].some(i=>i.includes(e));xe(n,"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=e}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class Ap extends cs{constructor(){const e=pe(Ap.getDefaults(),arguments,["value"]);super(e),this.name="Pow",this._exponentScaler=this.input=this.output=new ir({context:this.context,mapping:this._expFunc(e.value),length:8192}),this._exponent=e.value}static getDefaults(){return Object.assign(cs.getDefaults(),{value:1})}_expFunc(e){return n=>Math.pow(Math.abs(n),e)}get value(){return this._exponent}set value(e){this._exponent=e,this._exponentScaler.setMap(this._expFunc(this._exponent))}dispose(){return super.dispose(),this._exponentScaler.dispose(),this}}class bi{constructor(e,n){this.id=bi._eventId++,this._remainderTime=0;const i=Object.assign(bi.getDefaults(),n);this.transport=e,this.callback=i.callback,this._once=i.once,this.time=Math.floor(i.time),this._remainderTime=i.time-this.time}static getDefaults(){return{callback:He,once:!1,time:0}}get floatTime(){return this.time+this._remainderTime}invoke(e){if(this.callback){const n=this.transport.bpm.getDurationOfTicks(1,e);this.callback(e+this._remainderTime*n),this._once&&this.transport.clear(this.id)}}dispose(){return this.callback=void 0,this}}bi._eventId=0;class Ep extends bi{constructor(e,n){super(e,n),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const i=Object.assign(Ep.getDefaults(),n);this.duration=i.duration,this._interval=i.interval,this._nextTick=i.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.transport.on("ticks",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},bi.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(e){this._createEvents(e),super.invoke(e)}_createEvent(){return $c(this._nextTick,this.floatTime+this.duration)?this.transport.scheduleOnce(this.invoke.bind(this),new ia(this.context,this._nextTick).toSeconds()):-1}_createEvents(e){$c(this._nextTick+this._interval,this.floatTime+this.duration)&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new ia(this.context,this._nextTick).toSeconds()))}_restart(e){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.floatTime;const n=this.transport.getTicksAtTime(e);da(n,this.time)&&(this._nextTick=this.floatTime+Math.ceil((n-this.floatTime)/this._interval)*this._interval),this._currentId=this._createEvent(),this._nextTick+=this._interval,this._nextId=this._createEvent()}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this.transport.off("ticks",this._boundRestart),this}}class pu extends nn{constructor(){const e=pe(pu.getDefaults(),arguments);super(e),this.name="Transport",this._loop=new zj(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new Dn,this._repeatedEvents=new Mj,this._syncedSignals=[],this._swingAmount=0,this._ppq=e.ppq,this._clock=new fu({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=e.ppq,this.bpm.setValueAtTime(e.bpm,0),qe(this,"bpm"),this._timeSignature=e.timeSignature,this._swingTicks=e.ppq/2}static getDefaults(){return Object.assign(nn.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(e,n){if(this._loop.get(e)&&n>=this._loopEnd&&(this.emit("loopEnd",e),this._clock.setTicksAtTime(this._loopStart,e),n=this._loopStart,this.emit("loopStart",e,this._clock.getSecondsAtTime(e)),this.emit("loop",e)),this._swingAmount>0&&n%this._ppq!==0&&n%(this._swingTicks*2)!==0){const i=n%(this._swingTicks*2)/(this._swingTicks*2),o=Math.sin(i*Math.PI)*this._swingAmount;e+=new ia(this.context,this._swingTicks*2/3).toSeconds()*o}Gv(!0),this._timeline.forEachAtTime(n,i=>i.invoke(e)),Gv(!1)}schedule(e,n){const i=new bi(this,{callback:e,time:new Ao(this.context,n).toTicks()});return this._addEvent(i,this._timeline)}scheduleRepeat(e,n,i,o=1/0){const c=new Ep(this,{callback:e,duration:new Yn(this.context,o).toTicks(),interval:new Yn(this.context,n).toTicks(),time:new Ao(this.context,i).toTicks()});return this._addEvent(c,this._repeatedEvents)}scheduleOnce(e,n){const i=new bi(this,{callback:e,once:!0,time:new Ao(this.context,n).toTicks()});return this._addEvent(i,this._timeline)}clear(e){if(this._scheduledEvents.hasOwnProperty(e)){const n=this._scheduledEvents[e.toString()];n.timeline.remove(n.event),n.event.dispose(),delete this._scheduledEvents[e.toString()]}return this}_addEvent(e,n){return this._scheduledEvents[e.id.toString()]={event:e,timeline:n},n.add(e),e.id}cancel(e=0){const n=this.toTicks(e);return this._timeline.forEachFrom(n,i=>this.clear(i.id)),this._repeatedEvents.forEachFrom(n,i=>this.clear(i.id)),this}_bindClockEvents(){this._clock.on("start",(e,n)=>{n=new ia(this.context,n).toSeconds(),this.emit("start",e,n)}),this._clock.on("stop",e=>{this.emit("stop",e)}),this._clock.on("pause",e=>{this.emit("pause",e)})}get state(){return this._clock.getStateAtTime(this.now())}start(e,n){this.context.resume();let i;return Ce(n)&&(i=this.toTicks(n)),this._clock.start(e,i),this}stop(e){return this._clock.stop(e),this}pause(e){return this._clock.pause(e),this}toggle(e){return e=this.toSeconds(e),this._clock.getStateAtTime(e)!=="started"?this.start(e):this.stop(e),this}get timeSignature(){return this._timeSignature}set timeSignature(e){Wn(e)&&(e=e[0]/e[1]*4),this._timeSignature=e}get loopStart(){return new Yn(this.context,this._loopStart,"i").toSeconds()}set loopStart(e){this._loopStart=this.toTicks(e)}get loopEnd(){return new Yn(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(e){this._loopEnd=this.toTicks(e)}get loop(){return this._loop.get(this.now())}set loop(e){this._loop.set(e,this.now())}setLoopPoints(e,n){return this.loopStart=e,this.loopEnd=n,this}get swing(){return this._swingAmount}set swing(e){this._swingAmount=e}get swingSubdivision(){return new ia(this.context,this._swingTicks).toNotation()}set swingSubdivision(e){this._swingTicks=this.toTicks(e)}get position(){const e=this.now(),n=this._clock.getTicksAtTime(e);return new ia(this.context,n).toBarsBeatsSixteenths()}set position(e){const n=this.toTicks(e);this.ticks=n}get seconds(){return this._clock.seconds}set seconds(e){const n=this.now(),i=this._clock.frequency.timeToTicks(e,n);this.ticks=i}get progress(){if(this.loop){const e=this.now();return(this._clock.getTicksAtTime(e)-this._loopStart)/(this._loopEnd-this._loopStart)}else return 0}get ticks(){return this._clock.ticks}set ticks(e){if(this._clock.ticks!==e){const n=this.now();if(this.state==="started"){const i=this._clock.getTicksAtTime(n),o=this._clock.frequency.getDurationOfTicks(Math.ceil(i)-i,n),c=n+o;this.emit("stop",c),this._clock.setTicksAtTime(e,c),this.emit("start",c,this._clock.getSecondsAtTime(c))}else this.emit("ticks",n),this._clock.setTicksAtTime(e,n)}}getTicksAtTime(e){return this._clock.getTicksAtTime(e)}getSecondsAtTime(e){return this._clock.getSecondsAtTime(e)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(e){this._clock.frequency.multiplier=e}nextSubdivision(e){if(e=this.toTicks(e),this.state!=="started")return 0;{const n=this.now(),i=this.getTicksAtTime(n),o=e-i%e;return this._clock.nextTickTime(o,n)}}syncSignal(e,n){const i=this.now();let o=this.bpm,c=1/(60/o.getValueAtTime(i)/this.PPQ),u=[];if(e.units==="time"){const f=.015625/c,m=new Ye(f),y=new Ap(-1),_=new Ye(f);o.chain(m,y,_),o=_,c=1/c,u=[m,y,_]}n||(e.getValueAtTime(i)!==0?n=e.getValueAtTime(i)/c:n=0);const d=new Ye(n);return o.connect(d),d.connect(e._param),u.push(d),this._syncedSignals.push({initial:e.value,nodes:u,signal:e}),e.value=0,this}unsyncSignal(e){for(let n=this._syncedSignals.length-1;n>=0;n--){const i=this._syncedSignals[n];i.signal===e&&(i.nodes.forEach(o=>o.dispose()),i.signal.value=i.initial,this._syncedSignals.splice(n,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),zb(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}Wo.mixin(pu);lu(r=>{r.transport=new pu({context:r})});cu(r=>{r.transport.dispose()});class Ft extends ge{constructor(e){super(e),this.input=void 0,this._state=new _p("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=He,this._syncedStop=He,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new sr({context:this.context,mute:e.mute,volume:e.volume}),this.volume=this._volume.volume,qe(this,"volume"),this.onstop=e.onstop}static getDefaults(){return Object.assign(ge.getDefaults(),{mute:!1,onstop:He,volume:0})}get state(){return this._synced?this.context.transport.state==="started"?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}_clampToCurrentTime(e){return this._synced?e:Math.max(e,this.context.currentTime)}start(e,n,i){let o=jn(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(o=this._clampToCurrentTime(o),!this._synced&&this._state.getValueAtTime(o)==="started")xe(da(o,this._state.get(o).time),"Start time must be strictly greater than previous start time"),this._state.cancel(o),this._state.setStateAtTime("started",o),this.log("restart",o),this.restart(o,n,i);else if(this.log("start",o),this._state.setStateAtTime("started",o),this._synced){const c=this._state.get(o);c&&(c.offset=this.toSeconds(la(n,0)),c.duration=i?this.toSeconds(i):void 0);const u=this.context.transport.schedule(d=>{this._start(d,n,i)},o);this._scheduled.push(u),this.context.transport.state==="started"&&this.context.transport.getSecondsAtTime(this.immediate())>o&&this._syncedStart(this.now(),this.context.transport.seconds)}else kb(this.context),this._start(o,n,i);return this}stop(e){let n=jn(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(n=this._clampToCurrentTime(n),this._state.getValueAtTime(n)==="started"||Ce(this._state.getNextState("started",n))){if(this.log("stop",n),!this._synced)this._stop(n);else{const i=this.context.transport.schedule(this._stop.bind(this),n);this._scheduled.push(i)}this._state.cancel(n),this._state.setStateAtTime("stopped",n)}return this}restart(e,n,i){return e=this.toSeconds(e),this._state.getValueAtTime(e)==="started"&&(this._state.cancel(e),this._restart(e,n,i)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(e,n)=>{if(da(n,0)){const i=this._state.get(n);if(i&&i.state==="started"&&i.time!==n){const o=n-this.toSeconds(i.time);let c;i.duration&&(c=this.toSeconds(i.duration)-o),this._start(e,this.toSeconds(i.offset)+o,c)}}},this._syncedStop=e=>{const n=this.context.transport.getSecondsAtTime(Math.max(e-this.sampleTime,0));this._state.getValueAtTime(n)==="started"&&this._stop(e)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(e=>this.context.transport.clear(e)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=He,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class Ko extends fa{constructor(){const e=pe(Ko.getDefaults(),arguments,["url","onload"]);super(e),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1,ls(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new Pe({context:this.context,param:this._source.playbackRate,units:"positive",value:e.playbackRate}),this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this._buffer=new Ke(e.url,e.onload,e.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(fa.getDefaults(),{url:new Ke,loop:!1,loopEnd:0,loopStart:0,onload:He,onerror:He,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e}get curve(){return this._curve}set curve(e){this._curve=e}start(e,n,i,o=1){xe(this.buffer.loaded,"buffer is either not set or not loaded");const c=this.toSeconds(e);this._startGain(c,o),this.loop?n=la(n,this.loopStart):n=la(n,0);let u=Math.max(this.toSeconds(n),0);if(this.loop){const d=this.toSeconds(this.loopEnd)||this.buffer.duration,f=this.toSeconds(this.loopStart),m=d-f;Rf(u,d)&&(u=(u-f)%m+f),Gn(u,this.buffer.duration)&&(u=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,$c(u,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(c,u)),Ce(i)){let d=this.toSeconds(i);d=Math.max(d,0),this.stop(c+d)}return this}_stopSource(e){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(e)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(e){this._source.loopStart=this.toSeconds(e)}get loopEnd(){return this._source.loopEnd}set loopEnd(e){this._source.loopEnd=this.toSeconds(e)}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._source.loop}set loop(e){this._source.loop=e,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}class Yc extends Ft{constructor(){const e=pe(Yc.getDefaults(),arguments,["type"]);super(e),this.name="Noise",this._source=null,this._playbackRate=e.playbackRate,this.type=e.type,this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut}static getDefaults(){return Object.assign(Ft.getDefaults(),{fadeIn:0,fadeOut:0,playbackRate:1,type:"white"})}get type(){return this._type}set type(e){if(xe(e in Yv,"Noise: invalid type: "+e),this._type!==e&&(this._type=e,this.state==="started")){const n=this.now();this._stop(n),this._start(n)}}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e,this._source&&(this._source.playbackRate.value=e)}_start(e){const n=Yv[this._type];this._source=new Ko({url:n,context:this.context,fadeIn:this._fadeIn,fadeOut:this._fadeOut,loop:!0,onended:()=>this.onstop(this),playbackRate:this._playbackRate}).connect(this.output),this._source.start(this.toSeconds(e),Math.random()*(n.duration-.001))}_stop(e){this._source&&(this._source.stop(this.toSeconds(e)),this._source=null)}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e,this._source&&(this._source.fadeIn=this._fadeIn)}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e,this._source&&(this._source.fadeOut=this._fadeOut)}_restart(e){this._stop(e),this._start(e)}dispose(){return super.dispose(),this._source&&this._source.disconnect(),this}}const Kr=44100*5,sf=2,Ds={brown:null,pink:null,white:null},Yv={get brown(){if(!Ds.brown){const r=[];for(let e=0;e<sf;e++){const n=new Float32Array(Kr);r[e]=n;let i=0;for(let o=0;o<Kr;o++){const c=Math.random()*2-1;n[o]=(i+.02*c)/1.02,i=n[o],n[o]*=3.5}}Ds.brown=new Ke().fromArray(r)}return Ds.brown},get pink(){if(!Ds.pink){const r=[];for(let e=0;e<sf;e++){const n=new Float32Array(Kr);r[e]=n;let i,o,c,u,d,f,m;i=o=c=u=d=f=m=0;for(let y=0;y<Kr;y++){const _=Math.random()*2-1;i=.99886*i+_*.0555179,o=.99332*o+_*.0750759,c=.969*c+_*.153852,u=.8665*u+_*.3104856,d=.55*d+_*.5329522,f=-.7616*f-_*.016898,n[y]=i+o+c+u+d+f+m+_*.5362,n[y]*=.11,m=_*.115926}}Ds.pink=new Ke().fromArray(r)}return Ds.pink},get white(){if(!Ds.white){const r=[];for(let e=0;e<sf;e++){const n=new Float32Array(Kr);r[e]=n;for(let i=0;i<Kr;i++)n[i]=Math.random()*2-1}Ds.white=new Ke().fromArray(r)}return Ds.white}};class Eo extends ge{constructor(){const e=pe(Eo.getDefaults(),arguments,["volume"]);super(e),this.name="UserMedia",this._volume=this.output=new sr({context:this.context,volume:e.volume}),this.volume=this._volume.volume,qe(this,"volume"),this.mute=e.mute}static getDefaults(){return Object.assign(ge.getDefaults(),{mute:!1,volume:0})}open(e){return at(this,void 0,void 0,function*(){xe(Eo.supported,"UserMedia is not supported"),this.state==="started"&&this.close();const n=yield Eo.enumerateDevices();vi(e)?this._device=n[e]:(this._device=n.find(c=>c.label===e||c.deviceId===e),!this._device&&n.length>0&&(this._device=n[0]),xe(Ce(this._device),`No matching device ${e}`));const i={audio:{echoCancellation:!1,sampleRate:this.context.sampleRate,noiseSuppression:!1,mozNoiseSuppression:!1}};this._device&&(i.audio.deviceId=this._device.deviceId);const o=yield navigator.mediaDevices.getUserMedia(i);if(!this._stream){this._stream=o;const c=this.context.createMediaStreamSource(o);ls(c,this.output),this._mediaStream=c}return this})}close(){return this._stream&&this._mediaStream&&(this._stream.getAudioTracks().forEach(e=>{e.stop()}),this._stream=void 0,this._mediaStream.disconnect(),this._mediaStream=void 0),this._device=void 0,this}static enumerateDevices(){return at(this,void 0,void 0,function*(){return(yield navigator.mediaDevices.enumerateDevices()).filter(n=>n.kind==="audioinput")})}get state(){return this._stream&&this._stream.active?"started":"stopped"}get deviceId(){if(this._device)return this._device.deviceId}get groupId(){if(this._device)return this._device.groupId}get label(){if(this._device)return this._device.label}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}dispose(){return super.dispose(),this.close(),this._volume.dispose(),this.volume.dispose(),this}static get supported(){return Ce(navigator.mediaDevices)&&Ce(navigator.mediaDevices.getUserMedia)}}function rr(r,e){return at(this,void 0,void 0,function*(){const n=e/r.context.sampleRate,i=new uu(1,n,r.context.sampleRate);return new r.constructor(Object.assign(r.get(),{frequency:2/n,detune:0,context:i})).toDestination().start(0),(yield i.render()).getChannelData(0)})}class Cp extends fa{constructor(){const e=pe(Cp.getDefaults(),arguments,["frequency","type"]);super(e),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator],ls(this._oscillator,this._gainNode),this.type=e.type,this.frequency=new Pe({context:this.context,param:this._oscillator.frequency,units:"frequency",value:e.frequency}),this.detune=new Pe({context:this.context,param:this._oscillator.detune,units:"cents",value:e.detune}),qe(this,["frequency","detune"])}static getDefaults(){return Object.assign(fa.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(e){const n=this.toSeconds(e);return this.log("start",n),this._startGain(n),this._oscillator.start(n),this}_stopSource(e){this._oscillator.stop(e)}setPeriodicWave(e){return this._oscillator.setPeriodicWave(e),this}get type(){return this._oscillator.type}set type(e){this._oscillator.type=e}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}class ft extends Ft{constructor(){const e=pe(ft.getDefaults(),arguments,["frequency","type"]);super(e),this.name="Oscillator",this._oscillator=null,this.frequency=new ot({context:this.context,units:"frequency",value:e.frequency}),qe(this,"frequency"),this.detune=new ot({context:this.context,units:"cents",value:e.detune}),qe(this,"detune"),this._partials=e.partials,this._partialCount=e.partialCount,this._type=e.type,e.partialCount&&e.type!=="custom"&&(this._type=this.baseType+e.partialCount.toString()),this.phase=e.phase}static getDefaults(){return Object.assign(Ft.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(e){const n=this.toSeconds(e),i=new Cp({context:this.context,onended:()=>this.onstop(this)});this._oscillator=i,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(n)}_stop(e){const n=this.toSeconds(e);this._oscillator&&this._oscillator.stop(n)}_restart(e){const n=this.toSeconds(e);return this.log("restart",n),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(n),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if(this._type==="custom")return ft._periodicWaveCache.find(n=>n.phase===this._phase&&yj(n.partials,this._partials));{const e=ft._periodicWaveCache.find(n=>n.type===this._type&&n.phase===this._phase);return this._partialCount=e?e.partialCount:this._partialCount,e}}get type(){return this._type}set type(e){this._type=e;const n=["sine","square","sawtooth","triangle"].indexOf(e)!==-1;if(this._phase===0&&n)this._wave=void 0,this._partialCount=0,this._oscillator!==null&&(this._oscillator.type=e);else{const i=this._getCachedPeriodicWave();if(Ce(i)){const{partials:o,wave:c}=i;this._wave=c,this._partials=o,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave)}else{const[o,c]=this._getRealImaginary(e,this._phase),u=this.context.createPeriodicWave(o,c);this._wave=u,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave),ft._periodicWaveCache.push({imag:c,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:o,type:this._type,wave:this._wave}),ft._periodicWaveCache.length>100&&ft._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(e){this.partialCount&&this._type!=="custom"&&e!=="custom"?this.type=e+this.partialCount:this.type=e}get partialCount(){return this._partialCount}set partialCount(e){vn(e,0);let n=this._type;const i=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(i&&(n=i[1]),this._type!=="custom")e===0?this.type=n:this.type=n+e.toString();else{const o=new Float32Array(e);this._partials.forEach((c,u)=>o[u]=c),this._partials=Array.from(o),this.type=this._type}}_getRealImaginary(e,n){let o=2048;const c=new Float32Array(o),u=new Float32Array(o);let d=1;if(e==="custom"){if(d=this._partials.length+1,this._partialCount=this._partials.length,o=d,this._partials.length===0)return[c,u]}else{const f=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(e);f?(d=parseInt(f[2],10)+1,this._partialCount=parseInt(f[2],10),e=f[1],d=Math.max(d,2),o=d):this._partialCount=0,this._partials=[]}for(let f=1;f<o;++f){const m=2/(f*Math.PI);let y;switch(e){case"sine":y=f<=d?1:0,this._partials[f-1]=y;break;case"square":y=f&1?2*m:0,this._partials[f-1]=y;break;case"sawtooth":y=m*(f&1?1:-1),this._partials[f-1]=y;break;case"triangle":f&1?y=2*(m*m)*(f-1>>1&1?-1:1):y=0,this._partials[f-1]=y;break;case"custom":y=this._partials[f-1];break;default:throw new TypeError("Oscillator: invalid type: "+e)}y!==0?(c[f]=-y*Math.sin(n*f),u[f]=y*Math.cos(n*f)):(c[f]=0,u[f]=0)}return[c,u]}_inverseFFT(e,n,i){let o=0;const c=e.length;for(let u=0;u<c;u++)o+=e[u]*Math.cos(u*i)+n[u]*Math.sin(u*i);return o}getInitialValue(){const[e,n]=this._getRealImaginary(this._type,0);let i=0;const o=Math.PI*2,c=32;for(let u=0;u<c;u++)i=Math.max(this._inverseFFT(e,n,u/c*o),i);return vj(-this._inverseFFT(e,n,this._phase)/i,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(e){this._phase=e*Math.PI/180,this.type=this._type}asArray(){return at(this,arguments,void 0,function*(e=1024){return rr(this,e)})}dispose(){return super.dispose(),this._oscillator!==null&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}ft._periodicWaveCache=[];class Vb extends cs{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new ir({context:this.context,mapping:e=>(e+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class er extends ot{constructor(){const e=pe(er.getDefaults(),arguments,["value"]);super(e),this.name="Multiply",this.override=!1,this._mult=this.input=this.output=new Ye({context:this.context,minValue:e.minValue,maxValue:e.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(ot.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class mu extends Ft{constructor(){const e=pe(mu.getDefaults(),arguments,["frequency","type","modulationType"]);super(e),this.name="AMOscillator",this._modulationScale=new Vb({context:this.context}),this._modulationNode=new Ye({context:this.context}),this._carrier=new ft({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new ft({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new er({context:this.context,units:"positive",value:e.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),qe(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(ft.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){this._modulator.restart(e),this._carrier.restart(e)}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(){return at(this,arguments,void 0,function*(e=1024){return rr(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class gu extends Ft{constructor(){const e=pe(gu.getDefaults(),arguments,["frequency","type","modulationType"]);super(e),this.name="FMOscillator",this._modulationNode=new Ye({context:this.context,gain:0}),this._carrier=new ft({context:this.context,detune:e.detune,frequency:0,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.detune=this._carrier.detune,this.frequency=new ot({context:this.context,units:"frequency",value:e.frequency}),this._modulator=new ft({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new er({context:this.context,units:"positive",value:e.harmonicity}),this.modulationIndex=new er({context:this.context,units:"positive",value:e.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),qe(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(ft.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){return this._modulator.restart(e),this._carrier.restart(e),this}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(){return at(this,arguments,void 0,function*(e=1024){return rr(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class Zo extends Ft{constructor(){const e=pe(Zo.getDefaults(),arguments,["frequency","width"]);super(e),this.name="PulseOscillator",this._widthGate=new Ye({context:this.context,gain:0}),this._thresh=new ir({context:this.context,mapping:n=>n<=0?-1:1}),this.width=new ot({context:this.context,units:"audioRange",value:e.width}),this._triangle=new ft({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),qe(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(Ft.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(e){e=this.toSeconds(e),this._triangle.start(e),this._widthGate.gain.setValueAtTime(1,e)}_stop(e){e=this.toSeconds(e),this._triangle.stop(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(0,e)}_restart(e){this._triangle.restart(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(1,e)}get phase(){return this._triangle.phase}set phase(e){this._triangle.phase=e}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(e){this._triangle.type=e}asArray(){return at(this,arguments,void 0,function*(e=1024){return rr(this,e)})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class yu extends Ft{constructor(){const e=pe(yu.getDefaults(),arguments,["frequency","type","spread"]);super(e),this.name="FatOscillator",this._oscillators=[],this.frequency=new ot({context:this.context,units:"frequency",value:e.frequency}),this.detune=new ot({context:this.context,units:"cents",value:e.detune}),this._spread=e.spread,this._type=e.type,this._phase=e.phase,this._partials=e.partials,this._partialCount=e.partialCount,this.count=e.count,qe(this,["frequency","detune"])}static getDefaults(){return Object.assign(ft.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(e){e=this.toSeconds(e),this._forEach(n=>n.start(e))}_stop(e){e=this.toSeconds(e),this._forEach(n=>n.stop(e))}_restart(e){this._forEach(n=>n.restart(e))}_forEach(e){for(let n=0;n<this._oscillators.length;n++)e(this._oscillators[n],n)}get type(){return this._type}set type(e){this._type=e,this._forEach(n=>n.type=e)}get spread(){return this._spread}set spread(e){if(this._spread=e,this._oscillators.length>1){const n=-e/2,i=e/(this._oscillators.length-1);this._forEach((o,c)=>o.detune.value=n+i*c)}}get count(){return this._oscillators.length}set count(e){if(vn(e,1),this._oscillators.length!==e){this._forEach(n=>n.dispose()),this._oscillators=[];for(let n=0;n<e;n++){const i=new ft({context:this.context,volume:-6-e*1.1,type:this._type,phase:this._phase+n/e*360,partialCount:this._partialCount,onstop:n===0?()=>this.onstop(this):He});this.type==="custom"&&(i.partials=this._partials),this.frequency.connect(i.frequency),this.detune.connect(i.detune),i.detune.overridden=!1,i.connect(this.output),this._oscillators[n]=i}this.spread=this._spread,this.state==="started"&&this._forEach(n=>n.start())}}get phase(){return this._phase}set phase(e){this._phase=e,this._forEach((n,i)=>n.phase=this._phase+i/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(e){this._forEach(n=>n.baseType=e),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this._type="custom",this._forEach(n=>n.partials=e))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(e){this._partialCount=e,this._forEach(n=>n.partialCount=e),this._type=this._oscillators[0].type}asArray(){return at(this,arguments,void 0,function*(e=1024){return rr(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(e=>e.dispose()),this}}class _u extends Ft{constructor(){const e=pe(_u.getDefaults(),arguments,["frequency","modulationFrequency"]);super(e),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new er({context:this.context,value:2}),this._pulse=new Zo({context:this.context,frequency:e.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new ft({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),qe(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(Ft.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(e){e=this.toSeconds(e),this._modulator.start(e),this._pulse.start(e)}_stop(e){e=this.toSeconds(e),this._modulator.stop(e),this._pulse.stop(e)}_restart(e){this._modulator.restart(e),this._pulse.restart(e)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(e){this._modulator.phase=e}asArray(){return at(this,arguments,void 0,function*(e=1024){return rr(this,e)})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const Wv={am:mu,fat:yu,fm:gu,oscillator:ft,pulse:Zo,pwm:_u};class Wc extends Ft{constructor(){const e=pe(Wc.getDefaults(),arguments,["frequency","type"]);super(e),this.name="OmniOscillator",this.frequency=new ot({context:this.context,units:"frequency",value:e.frequency}),this.detune=new ot({context:this.context,units:"cents",value:e.detune}),qe(this,["frequency","detune"]),this.set(e)}static getDefaults(){return Object.assign(ft.getDefaults(),gu.getDefaults(),mu.getDefaults(),yu.getDefaults(),Zo.getDefaults(),_u.getDefaults())}_start(e){this._oscillator.start(e)}_stop(e){this._oscillator.stop(e)}_restart(e){return this._oscillator.restart(e),this}get type(){let e="";return["am","fm","fat"].some(n=>this._sourceType===n)&&(e=this._sourceType),e+this._oscillator.type}set type(e){e.substr(0,2)==="fm"?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,2)==="am"?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,3)==="fat"?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(3)):e==="pwm"?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):e==="pulse"?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=e)}get partials(){return this._oscillator.partials}set partials(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partials=e)}get partialCount(){return this._oscillator.partialCount}set partialCount(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partialCount=e)}set(e){return Reflect.has(e,"type")&&e.type&&(this.type=e.type),super.set(e),this}_createNewOscillator(e){if(e!==this._sourceType){this._sourceType=e;const n=Wv[e],i=this.now();if(this._oscillator){const o=this._oscillator;o.stop(i),this.context.setTimeout(()=>o.dispose(),this.blockTime)}this._oscillator=new n({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),this.state==="started"&&this._oscillator.start(i)}}get phase(){return this._oscillator.phase}set phase(e){this._oscillator.phase=e}get sourceType(){return this._sourceType}set sourceType(e){let n="sine";this._oscillator.type!=="pwm"&&this._oscillator.type!=="pulse"&&(n=this._oscillator.type),e==="fm"?this.type="fm"+n:e==="am"?this.type="am"+n:e==="fat"?this.type="fat"+n:e==="oscillator"?this.type=n:e==="pulse"?this.type="pulse":e==="pwm"&&(this.type="pwm")}_getOscType(e,n){return e instanceof Wv[n]}get baseType(){return this._oscillator.baseType}set baseType(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&e!=="pulse"&&e!=="pwm"&&(this._oscillator.baseType=e)}get width(){if(this._getOscType(this._oscillator,"pulse"))return this._oscillator.width}get count(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.count}set count(e){this._getOscType(this._oscillator,"fat")&&vi(e)&&(this._oscillator.count=e)}get spread(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.spread}set spread(e){this._getOscType(this._oscillator,"fat")&&vi(e)&&(this._oscillator.spread=e)}get modulationType(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.modulationType}set modulationType(e){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&Bs(e)&&(this._oscillator.modulationType=e)}get modulationIndex(){if(this._getOscType(this._oscillator,"fm"))return this._oscillator.modulationIndex}get harmonicity(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.harmonicity}get modulationFrequency(){if(this._getOscType(this._oscillator,"pwm"))return this._oscillator.modulationFrequency}asArray(){return at(this,arguments,void 0,function*(e=1024){return rr(this,e)})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}class Np extends ot{constructor(){super(pe(Np.getDefaults(),arguments,["value"])),this.override=!1,this.name="Add",this._sum=new Ye({context:this.context}),this.input=this._sum,this.output=this._sum,this.addend=this._param,Fc(this._constantSource,this._sum)}static getDefaults(){return Object.assign(ot.getDefaults(),{value:0})}dispose(){return super.dispose(),this._sum.dispose(),this}}class Op extends cs{constructor(){const e=pe(Op.getDefaults(),arguments,["min","max"]);super(e),this.name="Scale",this._mult=this.input=new er({context:this.context,value:e.max-e.min}),this._add=this.output=new Np({context:this.context,value:e.min}),this._min=e.min,this._max=e.max,this.input.connect(this.output)}static getDefaults(){return Object.assign(cs.getDefaults(),{max:1,min:0})}get min(){return this._min}set min(e){this._min=e,this._setRange()}get max(){return this._max}set max(e){this._max=e,this._setRange()}_setRange(){this._add.value=this._min,this._mult.value=this._max-this._min}dispose(){return super.dispose(),this._add.dispose(),this._mult.dispose(),this}}class kp extends cs{constructor(){super(pe(kp.getDefaults(),arguments)),this.name="Zero",this._gain=new Ye({context:this.context}),this.output=this._gain,this.input=void 0,ls(this.context.getConstant(0),this._gain)}dispose(){return super.dispose(),Lb(this.context.getConstant(0),this._gain),this}}class Co extends ge{constructor(){const e=pe(Co.getDefaults(),arguments,["frequency","min","max"]);super(e),this.name="LFO",this._stoppedValue=0,this._units="number",this.convert=!0,this._fromType=Pe.prototype._fromType,this._toType=Pe.prototype._toType,this._is=Pe.prototype._is,this._clampValue=Pe.prototype._clampValue,this._oscillator=new ft(e),this.frequency=this._oscillator.frequency,this._amplitudeGain=new Ye({context:this.context,gain:e.amplitude,units:"normalRange"}),this.amplitude=this._amplitudeGain.gain,this._stoppedSignal=new ot({context:this.context,units:"audioRange",value:0}),this._zeros=new kp({context:this.context}),this._a2g=new Vb({context:this.context}),this._scaler=this.output=new Op({context:this.context,max:e.max,min:e.min}),this.units=e.units,this.min=e.min,this.max=e.max,this._oscillator.chain(this._amplitudeGain,this._a2g,this._scaler),this._zeros.connect(this._a2g),this._stoppedSignal.connect(this._a2g),qe(this,["amplitude","frequency"]),this.phase=e.phase}static getDefaults(){return Object.assign(ft.getDefaults(),{amplitude:1,frequency:"4n",max:1,min:0,type:"sine",units:"number"})}start(e){return e=this.toSeconds(e),this._stoppedSignal.setValueAtTime(0,e),this._oscillator.start(e),this}stop(e){return e=this.toSeconds(e),this._stoppedSignal.setValueAtTime(this._stoppedValue,e),this._oscillator.stop(e),this}sync(){return this._oscillator.sync(),this._oscillator.syncFrequency(),this}unsync(){return this._oscillator.unsync(),this._oscillator.unsyncFrequency(),this}_setStoppedValue(){this._stoppedValue=this._oscillator.getInitialValue(),this._stoppedSignal.value=this._stoppedValue}get min(){return this._toType(this._scaler.min)}set min(e){e=this._fromType(e),this._scaler.min=e}get max(){return this._toType(this._scaler.max)}set max(e){e=this._fromType(e),this._scaler.max=e}get type(){return this._oscillator.type}set type(e){this._oscillator.type=e,this._setStoppedValue()}get partials(){return this._oscillator.partials}set partials(e){this._oscillator.partials=e,this._setStoppedValue()}get phase(){return this._oscillator.phase}set phase(e){this._oscillator.phase=e,this._setStoppedValue()}get units(){return this._units}set units(e){const n=this.min,i=this.max;this._units=e,this.min=n,this.max=i}get state(){return this._oscillator.state}connect(e,n,i){return(e instanceof Pe||e instanceof ot)&&(this.convert=e.convert,this.units=e.units),du(this,e,n,i),this}dispose(){return super.dispose(),this._oscillator.dispose(),this._stoppedSignal.dispose(),this._zeros.dispose(),this._scaler.dispose(),this._a2g.dispose(),this._amplitudeGain.dispose(),this.amplitude.dispose(),this}}function Ib(r,e=1/0){const n=new WeakMap;return function(i,o){Reflect.defineProperty(i,o,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(c){vn(c,r,e),n.set(this,c)}})}}function Is(r,e=1/0){const n=new WeakMap;return function(i,o){Reflect.defineProperty(i,o,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(c){vn(this.toSeconds(c),r,e),n.set(this,c)}})}}class vu extends Ft{constructor(){const e=pe(vu.getDefaults(),arguments,["url","onload"]);super(e),this.name="Player",this._activeSources=new Set,this._buffer=new Ke({onload:this._onload.bind(this,e.onload),onerror:e.onerror,reverse:e.reverse,url:e.url}),this.autostart=e.autostart,this._loop=e.loop,this._loopStart=e.loopStart,this._loopEnd=e.loopEnd,this._playbackRate=e.playbackRate,this.fadeIn=e.fadeIn,this.fadeOut=e.fadeOut}static getDefaults(){return Object.assign(Ft.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:He,onerror:He,playbackRate:1,reverse:!1})}load(e){return at(this,void 0,void 0,function*(){return yield this._buffer.load(e),this._onload(),this})}_onload(e=He){e(),this.autostart&&this.start()}_onSourceEnd(e){this.onstop(this),this._activeSources.delete(e),this._activeSources.size===0&&!this._synced&&this._state.getValueAtTime(this.now())==="started"&&(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(e,n,i){return super.start(e,n,i),this}_start(e,n,i){this._loop?n=la(n,this._loopStart):n=la(n,0);const o=this.toSeconds(n),c=i;i=la(i,Math.max(this._buffer.duration-o,0));let u=this.toSeconds(i);u=u/this._playbackRate,e=this.toSeconds(e);const d=new Ko({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);!this._loop&&!this._synced&&(this._state.cancel(e+u),this._state.setStateAtTime("stopped",e+u,{implicitEnd:!0})),this._activeSources.add(d),this._loop&&jn(c)?d.start(e,o):d.start(e,o,u-this.toSeconds(this.fadeOut))}_stop(e){const n=this.toSeconds(e);this._activeSources.forEach(i=>i.stop(n))}restart(e,n,i){return super.restart(e,n,i),this}_restart(e,n,i){var o;(o=[...this._activeSources].pop())===null||o===void 0||o.stop(e),this._start(e,n,i)}seek(e,n){const i=this.toSeconds(n);if(this._state.getValueAtTime(i)==="started"){const o=this.toSeconds(e);this._stop(i),this._start(i,o)}return this}setLoopPoints(e,n){return this.loopStart=e,this.loopEnd=n,this}get loopStart(){return this._loopStart}set loopStart(e){this._loopStart=e,this.buffer.loaded&&vn(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(n=>{n.loopStart=e})}get loopEnd(){return this._loopEnd}set loopEnd(e){this._loopEnd=e,this.buffer.loaded&&vn(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(n=>{n.loopEnd=e})}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._loop}set loop(e){if(this._loop!==e&&(this._loop=e,this._activeSources.forEach(n=>{n.loop=e}),e)){const n=this._state.getNextState("stopped",this.now());n&&this._state.cancel(n.time)}}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e;const n=this.now(),i=this._state.getNextState("stopped",n);i&&i.implicitEnd&&(this._state.cancel(i.time),this._activeSources.forEach(o=>o.cancelStop())),this._activeSources.forEach(o=>{o.playbackRate.setValueAtTime(e,n)})}get reverse(){return this._buffer.reverse}set reverse(e){this._buffer.reverse=e}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(e=>e.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}}Kn([Is(0)],vu.prototype,"fadeIn",void 0);Kn([Is(0)],vu.prototype,"fadeOut",void 0);class Bj extends cs{constructor(){super(...arguments),this.name="GainToAudio",this._norm=new ir({context:this.context,mapping:e=>Math.abs(e)*2-1}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class Ti extends ge{constructor(){const e=pe(Ti.getDefaults(),arguments,["attack","decay","sustain","release"]);super(e),this.name="Envelope",this._sig=new ot({context:this.context,value:0}),this.output=this._sig,this.input=void 0,this.attack=e.attack,this.decay=e.decay,this.sustain=e.sustain,this.release=e.release,this.attackCurve=e.attackCurve,this.releaseCurve=e.releaseCurve,this.decayCurve=e.decayCurve}static getDefaults(){return Object.assign(ge.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(e,n){if(Bs(e))return e;{let i;for(i in Ec)if(Ec[i][n]===e)return i;return e}}_setCurve(e,n,i){if(Bs(i)&&Reflect.has(Ec,i)){const o=Ec[i];Zi(o)?e!=="_decayCurve"&&(this[e]=o[n]):this[e]=o}else if(Wn(i)&&e!=="_decayCurve")this[e]=i;else throw new Error("Envelope: invalid curve: "+i)}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(e){this._setCurve("_attackCurve","In",e)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(e){this._setCurve("_releaseCurve","Out",e)}get decayCurve(){return this._getCurve(this._decayCurve,"Out")}set decayCurve(e){this._setCurve("_decayCurve","Out",e)}triggerAttack(e,n=1){this.log("triggerAttack",e,n),e=this.toSeconds(e);let o=this.toSeconds(this.attack);const c=this.toSeconds(this.decay),u=this.getValueAtTime(e);if(u>0){const d=1/o;o=(1-u)/d}if(o<this.sampleTime)this._sig.cancelScheduledValues(e),this._sig.setValueAtTime(n,e);else if(this._attackCurve==="linear")this._sig.linearRampTo(n,o,e);else if(this._attackCurve==="exponential")this._sig.targetRampTo(n,o,e);else{this._sig.cancelAndHoldAtTime(e);let d=this._attackCurve;for(let f=1;f<d.length;f++)if(d[f-1]<=u&&u<=d[f]){d=this._attackCurve.slice(f),d[0]=u;break}this._sig.setValueCurveAtTime(d,e,o,n)}if(c&&this.sustain<1){const d=n*this.sustain,f=e+o;this.log("decay",f),this._decayCurve==="linear"?this._sig.linearRampToValueAtTime(d,c+f):this._sig.exponentialApproachValueAtTime(d,f,c)}return this}triggerRelease(e){this.log("triggerRelease",e),e=this.toSeconds(e);const n=this.getValueAtTime(e);if(n>0){const i=this.toSeconds(this.release);i<this.sampleTime?this._sig.setValueAtTime(0,e):this._releaseCurve==="linear"?this._sig.linearRampTo(0,i,e):this._releaseCurve==="exponential"?this._sig.targetRampTo(0,i,e):(xe(Wn(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(e),this._sig.setValueCurveAtTime(this._releaseCurve,e,i,n))}return this}getValueAtTime(e){return this._sig.getValueAtTime(e)}triggerAttackRelease(e,n,i=1){return n=this.toSeconds(n),this.triggerAttack(n,i),this.triggerRelease(n+this.toSeconds(e)),this}cancel(e){return this._sig.cancelScheduledValues(this.toSeconds(e)),this}connect(e,n=0,i=0){return du(this,e,n,i),this}asArray(){return at(this,arguments,void 0,function*(e=1024){const n=e/this.context.sampleRate,i=new uu(1,n,this.context.sampleRate),o=this.toSeconds(this.attack)+this.toSeconds(this.decay),c=o+this.toSeconds(this.release),u=c*.1,d=c+u,f=new this.constructor(Object.assign(this.get(),{attack:n*this.toSeconds(this.attack)/d,decay:n*this.toSeconds(this.decay)/d,release:n*this.toSeconds(this.release)/d,context:i}));return f._sig.toDestination(),f.triggerAttackRelease(n*(o+u)/d,0),(yield i.render()).getChannelData(0)})}dispose(){return super.dispose(),this._sig.dispose(),this}}Kn([Is(0)],Ti.prototype,"attack",void 0);Kn([Is(0)],Ti.prototype,"decay",void 0);Kn([Ib(0,1)],Ti.prototype,"sustain",void 0);Kn([Is(0)],Ti.prototype,"release",void 0);const Ec=(()=>{let e,n;const i=[];for(e=0;e<128;e++)i[e]=Math.sin(e/127*(Math.PI/2));const o=[],c=6.4;for(e=0;e<127;e++){n=e/127;const b=Math.sin(n*(Math.PI*2)*c-Math.PI/2)+1;o[e]=b/10+n*.83}o[127]=1;const u=[],d=5;for(e=0;e<128;e++)u[e]=Math.ceil(e/127*d)/d;const f=[];for(e=0;e<128;e++)n=e/127,f[e]=.5*(1-Math.cos(Math.PI*n));const m=[];for(e=0;e<128;e++){n=e/127;const b=Math.pow(n,3)*4+.2,S=Math.cos(b*Math.PI*2*n);m[e]=Math.abs(S*(1-n))}function y(b){const S=new Array(b.length);for(let w=0;w<b.length;w++)S[w]=1-b[w];return S}function _(b){return b.slice(0).reverse()}return{bounce:{In:y(m),Out:m},cosine:{In:i,Out:_(i)},exponential:"exponential",linear:"linear",ripple:{In:o,Out:y(o)},sine:{In:f,Out:y(f)},step:{In:u,Out:y(u)}}})();class pa extends ge{constructor(){const e=pe(pa.getDefaults(),arguments);super(e),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease,this._syncedRelease=n=>this._original_triggerRelease(n),this._volume=this.output=new sr({context:this.context,volume:e.volume}),this.volume=this._volume.volume,qe(this,"volume")}static getDefaults(){return Object.assign(ge.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}_syncState(){let e=!1;return this._synced||(this._synced=!0,e=!0),e}_syncMethod(e,n){const i=this["_original_"+e]=this[e];this[e]=(...o)=>{const c=o[n],u=this.context.transport.schedule(d=>{o[n]=d,i.apply(this,o)},c);this._scheduledEvents.push(u)}}unsync(){return this._scheduledEvents.forEach(e=>this.context.transport.clear(e)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease,this.context.transport.off("stop",this._syncedRelease),this.context.transport.off("pause",this._syncedRelease),this.context.transport.off("loopEnd",this._syncedRelease)),this}triggerAttackRelease(e,n,i,o){const c=this.toSeconds(i),u=this.toSeconds(n);return this.triggerAttack(e,c,o),this.triggerRelease(c+u),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}class ma extends pa{constructor(){const e=pe(ma.getDefaults(),arguments);super(e),this.portamento=e.portamento,this.onsilence=e.onsilence}static getDefaults(){return Object.assign(pa.getDefaults(),{detune:0,onsilence:He,portamento:0})}triggerAttack(e,n,i=1){this.log("triggerAttack",e,n,i);const o=this.toSeconds(n);return this._triggerEnvelopeAttack(o,i),this.setNote(e,o),this}triggerRelease(e){this.log("triggerRelease",e);const n=this.toSeconds(e);return this._triggerEnvelopeRelease(n),this}setNote(e,n){const i=this.toSeconds(n),o=e instanceof Rn?e.toFrequency():e;if(this.portamento>0&&this.getLevelAtTime(i)>.05){const c=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(o,c,i)}else this.frequency.setValueAtTime(o,i);return this}}Kn([Is(0)],ma.prototype,"portamento",void 0);class Rp extends Ti{constructor(){super(pe(Rp.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new Ye({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class Xc extends ma{constructor(){const e=pe(Xc.getDefaults(),arguments);super(e),this.name="Synth",this.oscillator=new Wc(Object.assign({context:this.context,detune:e.detune,onstop:()=>this.onsilence(this)},e.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new Rp(Object.assign({context:this.context},e.envelope)),this.oscillator.chain(this.envelope,this.output),qe(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(ma.getDefaults(),{envelope:Object.assign(Fv(Ti.getDefaults(),Object.keys(ge.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(Fv(Wc.getDefaults(),[...Object.keys(Ft.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(e,n){if(this.envelope.triggerAttack(e,n),this.oscillator.start(e),this.envelope.sustain===0){const i=this.toSeconds(this.envelope.attack),o=this.toSeconds(this.envelope.decay);this.oscillator.stop(e+i+o)}}_triggerEnvelopeRelease(e){this.envelope.triggerRelease(e),this.oscillator.stop(e+this.toSeconds(this.envelope.release))}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class bu extends Xc{constructor(){const e=pe(bu.getDefaults(),arguments);super(e),this.name="MembraneSynth",this.portamento=0,this.pitchDecay=e.pitchDecay,this.octaves=e.octaves,qe(this,["oscillator","envelope"])}static getDefaults(){return oa(ma.getDefaults(),Xc.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(e,n){const i=this.toSeconds(n),o=this.toFrequency(e instanceof Rn?e.toFrequency():e),c=o*this.octaves;return this.oscillator.frequency.setValueAtTime(c,i),this.oscillator.frequency.exponentialRampToValueAtTime(o,i+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}Kn([Ib(0)],bu.prototype,"octaves",void 0);Kn([Is(0)],bu.prototype,"pitchDecay",void 0);const Pb=new Set;function jp(r){Pb.add(r)}function Hb(r,e){const n=`registerProcessor("${r}", ${e})`;Pb.add(n)}const qj=`
	/**
	 * The base AudioWorkletProcessor for use in Tone.js. Works with the {@link ToneAudioWorklet}. 
	 */
	class ToneAudioWorkletProcessor extends AudioWorkletProcessor {

		constructor(options) {
			
			super(options);
			/**
			 * If the processor was disposed or not. Keep alive until it's disposed.
			 */
			this.disposed = false;
		   	/** 
			 * The number of samples in the processing block
			 */
			this.blockSize = 128;
			/**
			 * the sample rate
			 */
			this.sampleRate = sampleRate;

			this.port.onmessage = (event) => {
				// when it receives a dispose 
				if (event.data === "dispose") {
					this.disposed = true;
				}
			};
		}
	}
`;jp(qj);const Lj=`
	/**
	 * Abstract class for a single input/output processor. 
	 * has a 'generate' function which processes one sample at a time
	 */
	class SingleIOProcessor extends ToneAudioWorkletProcessor {

		constructor(options) {
			super(Object.assign(options, {
				numberOfInputs: 1,
				numberOfOutputs: 1
			}));
			/**
			 * Holds the name of the parameter and a single value of that
			 * parameter at the current sample
			 * @type { [name: string]: number }
			 */
			this.params = {}
		}

		/**
		 * Generate an output sample from the input sample and parameters
		 * @abstract
		 * @param input number
		 * @param channel number
		 * @param parameters { [name: string]: number }
		 * @returns number
		 */
		generate(){}

		/**
		 * Update the private params object with the 
		 * values of the parameters at the given index
		 * @param parameters { [name: string]: Float32Array },
		 * @param index number
		 */
		updateParams(parameters, index) {
			for (const paramName in parameters) {
				const param = parameters[paramName];
				if (param.length > 1) {
					this.params[paramName] = parameters[paramName][index];
				} else {
					this.params[paramName] = parameters[paramName][0];
				}
			}
		}

		/**
		 * Process a single frame of the audio
		 * @param inputs Float32Array[][]
		 * @param outputs Float32Array[][]
		 */
		process(inputs, outputs, parameters) {
			const input = inputs[0];
			const output = outputs[0];
			// get the parameter values
			const channelCount = Math.max(input && input.length || 0, output.length);
			for (let sample = 0; sample < this.blockSize; sample++) {
				this.updateParams(parameters, sample);
				for (let channel = 0; channel < channelCount; channel++) {
					const inputSample = input && input.length ? input[channel][sample] : 0;
					output[channel][sample] = this.generate(inputSample, channel, this.params);
				}
			}
			return !this.disposed;
		}
	};
`;jp(Lj);const Vj=`
	/**
	 * A multichannel buffer for use within an AudioWorkletProcessor as a delay line
	 */
	class DelayLine {
		
		constructor(size, channels) {
			this.buffer = [];
			this.writeHead = []
			this.size = size;

			// create the empty channels
			for (let i = 0; i < channels; i++) {
				this.buffer[i] = new Float32Array(this.size);
				this.writeHead[i] = 0;
			}
		}

		/**
		 * Push a value onto the end
		 * @param channel number
		 * @param value number
		 */
		push(channel, value) {
			this.writeHead[channel] += 1;
			if (this.writeHead[channel] > this.size) {
				this.writeHead[channel] = 0;
			}
			this.buffer[channel][this.writeHead[channel]] = value;
		}

		/**
		 * Get the recorded value of the channel given the delay
		 * @param channel number
		 * @param delay number delay samples
		 */
		get(channel, delay) {
			let readHead = this.writeHead[channel] - Math.floor(delay);
			if (readHead < 0) {
				readHead += this.size;
			}
			return this.buffer[channel][readHead];
		}
	}
`;jp(Vj);const Ij="feedback-comb-filter",Pj=`
	class FeedbackCombFilterWorklet extends SingleIOProcessor {

		constructor(options) {
			super(options);
			this.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);
		}

		static get parameterDescriptors() {
			return [{
				name: "delayTime",
				defaultValue: 0.1,
				minValue: 0,
				maxValue: 1,
				automationRate: "k-rate"
			}, {
				name: "feedback",
				defaultValue: 0.5,
				minValue: 0,
				maxValue: 0.9999,
				automationRate: "k-rate"
			}];
		}

		generate(input, channel, parameters) {
			const delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);
			this.delayLine.push(channel, input + delayedSample * parameters.feedback);
			return delayedSample;
		}
	}
`;Hb(Ij,Pj);class wu extends pa{constructor(){const e=pe(wu.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");super(e),this.name="Sampler",this._activeSources=new Map;const n={};Object.keys(e.urls).forEach(i=>{const o=parseInt(i,10);if(xe(Ac(i)||vi(o)&&isFinite(o),`url key is neither a note or midi pitch: ${i}`),Ac(i)){const c=new Rn(this.context,i).toMidi();n[c]=e.urls[i]}else vi(o)&&isFinite(o)&&(n[o]=e.urls[o])}),this._buffers=new xp({urls:n,onload:e.onload,baseUrl:e.baseUrl,onerror:e.onerror}),this.attack=e.attack,this.release=e.release,this.curve=e.curve,this._buffers.loaded&&Promise.resolve().then(e.onload)}static getDefaults(){return Object.assign(pa.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:He,onerror:He,release:.1,urls:{}})}_findClosest(e){let i=0;for(;i<96;){if(this._buffers.has(e+i))return-i;if(this._buffers.has(e-i))return i;i++}throw new Error(`No available buffers for note: ${e}`)}triggerAttack(e,n,i=1){return this.log("triggerAttack",e,n,i),Array.isArray(e)||(e=[e]),e.forEach(o=>{const c=qb(new Rn(this.context,o).toFrequency()),u=Math.round(c),d=c-u,f=this._findClosest(u),m=u-f,y=this._buffers.get(m),_=Gc(f+d),b=new Ko({url:y,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:_}).connect(this.output);b.start(n,0,y.duration/_,i),Wn(this._activeSources.get(u))||this._activeSources.set(u,[]),this._activeSources.get(u).push(b),b.onended=()=>{if(this._activeSources&&this._activeSources.has(u)){const S=this._activeSources.get(u),w=S.indexOf(b);w!==-1&&S.splice(w,1)}}}),this}triggerRelease(e,n){return this.log("triggerRelease",e,n),Array.isArray(e)||(e=[e]),e.forEach(i=>{const o=new Rn(this.context,i).toMidi();if(this._activeSources.has(o)&&this._activeSources.get(o).length){const c=this._activeSources.get(o);n=this.toSeconds(n),c.forEach(u=>{u.stop(n)}),this._activeSources.set(o,[])}}),this}releaseAll(e){const n=this.toSeconds(e);return this._activeSources.forEach(i=>{for(;i.length;)i.shift().stop(n)}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(e,n,i,o=1){const c=this.toSeconds(i);return this.triggerAttack(e,c,o),Wn(n)?(xe(Wn(e),"notes must be an array when duration is array"),e.forEach((u,d)=>{const f=n[Math.min(d,n.length-1)];this.triggerRelease(u,c+this.toSeconds(f))})):this.triggerRelease(e,c+this.toSeconds(n)),this}add(e,n,i){if(xe(Ac(e)||isFinite(e),`note must be a pitch or midi: ${e}`),Ac(e)){const o=new Rn(this.context,e).toMidi();this._buffers.add(o,n,i)}else this._buffers.add(e,n,i);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(e=>{e.forEach(n=>n.dispose())}),this._activeSources.clear(),this}}Kn([Is(0)],wu.prototype,"attack",void 0);Kn([Is(0)],wu.prototype,"release",void 0);class Su extends ge{constructor(){const e=pe(Su.getDefaults(),arguments,["fade"]);super(e),this.name="CrossFade",this._panner=this.context.createStereoPanner(),this._split=this.context.createChannelSplitter(2),this._g2a=new Bj({context:this.context}),this.a=new Ye({context:this.context,gain:0}),this.b=new Ye({context:this.context,gain:0}),this.output=new Ye({context:this.context}),this._internalChannels=[this.a,this.b],this.fade=new ot({context:this.context,units:"normalRange",value:e.fade}),qe(this,"fade"),this.context.getConstant(1).connect(this._panner),this._panner.connect(this._split),this._panner.channelCount=1,this._panner.channelCountMode="explicit",ls(this._split,this.a.gain,0),ls(this._split,this.b.gain,1),this.fade.chain(this._g2a,this._panner.pan),this.a.connect(this.output),this.b.connect(this.output)}static getDefaults(){return Object.assign(ge.getDefaults(),{fade:.5})}dispose(){return super.dispose(),this.a.dispose(),this.b.dispose(),this.output.dispose(),this.fade.dispose(),this._g2a.dispose(),this._panner.disconnect(),this._split.disconnect(),this}}class ga extends ge{constructor(e){super(e),this.name="Effect",this._dryWet=new Su({context:this.context}),this.wet=this._dryWet.fade,this.effectSend=new Ye({context:this.context}),this.effectReturn=new Ye({context:this.context}),this.input=new Ye({context:this.context}),this.output=this._dryWet,this.input.fan(this._dryWet.a,this.effectSend),this.effectReturn.connect(this._dryWet.b),this.wet.setValueAtTime(e.wet,0),this._internalChannels=[this.effectReturn,this.effectSend],qe(this,"wet")}static getDefaults(){return Object.assign(ge.getDefaults(),{wet:1})}connectEffect(e){return this._internalChannels.push(e),this.effectSend.chain(e,this.effectReturn),this}dispose(){return super.dispose(),this._dryWet.dispose(),this.effectSend.dispose(),this.effectReturn.dispose(),this.wet.dispose(),this}}class Dp extends ge{constructor(){const e=pe(Dp.getDefaults(),arguments,["pan"]);super(e),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner,this.pan=new Pe({context:this.context,param:this._panner.pan,value:e.pan,minValue:-1,maxValue:1}),this._panner.channelCount=e.channelCount,this._panner.channelCountMode="explicit",qe(this,"pan")}static getDefaults(){return Object.assign(ge.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}const Hj="bit-crusher",$j=`
	class BitCrusherWorklet extends SingleIOProcessor {

		static get parameterDescriptors() {
			return [{
				name: "bits",
				defaultValue: 12,
				minValue: 1,
				maxValue: 16,
				automationRate: 'k-rate'
			}];
		}

		generate(input, _channel, parameters) {
			const step = Math.pow(0.5, parameters.bits - 1);
			const val = step * Math.floor(input / step + 0.5);
			return val;
		}
	}
`;Hb(Hj,$j);class Mp extends ge{constructor(){const e=pe(Mp.getDefaults(),arguments,["channels"]);super(e),this.name="Split",this._splitter=this.input=this.output=this.context.createChannelSplitter(e.channels),this._internalChannels=[this._splitter]}static getDefaults(){return Object.assign(ge.getDefaults(),{channels:2})}dispose(){return super.dispose(),this._splitter.disconnect(),this}}class Up extends ge{constructor(){const e=pe(Up.getDefaults(),arguments,["channels"]);super(e),this.name="Merge",this._merger=this.output=this.input=this.context.createChannelMerger(e.channels)}static getDefaults(){return Object.assign(ge.getDefaults(),{channels:2})}dispose(){return super.dispose(),this._merger.disconnect(),this}}class zp extends ga{constructor(){const e=pe(zp.getDefaults(),arguments,["distortion"]);super(e),this.name="Distortion",this._shaper=new ir({context:this.context,length:4096}),this._distortion=e.distortion,this.connectEffect(this._shaper),this.distortion=e.distortion,this.oversample=e.oversample}static getDefaults(){return Object.assign(ga.getDefaults(),{distortion:.4,oversample:"none"})}get distortion(){return this._distortion}set distortion(e){this._distortion=e;const n=e*100,i=Math.PI/180;this._shaper.setMap(o=>Math.abs(o)<.001?0:(3+n)*o*20*i/(Math.PI+n*Math.abs(o)))}get oversample(){return this._shaper.oversample}set oversample(e){this._shaper.oversample=e}dispose(){return super.dispose(),this._shaper.dispose(),this}}class Kc extends ga{constructor(e){super(e),this.name="FeedbackEffect",this._feedbackGain=new Ye({context:this.context,gain:e.feedback,units:"normalRange"}),this.feedback=this._feedbackGain.gain,qe(this,"feedback"),this.effectReturn.chain(this._feedbackGain,this.effectSend)}static getDefaults(){return Object.assign(ga.getDefaults(),{feedback:.125})}dispose(){return super.dispose(),this._feedbackGain.dispose(),this.feedback.dispose(),this}}class Bp extends Kc{constructor(){const e=pe(Bp.getDefaults(),arguments,["delayTime","feedback"]);super(e),this.name="FeedbackDelay",this._delayNode=new ca({context:this.context,delayTime:e.delayTime,maxDelay:e.maxDelay}),this.delayTime=this._delayNode.delayTime,this.connectEffect(this._delayNode),qe(this,"delayTime")}static getDefaults(){return Object.assign(Kc.getDefaults(),{delayTime:.25,maxDelay:1})}dispose(){return super.dispose(),this._delayNode.dispose(),this.delayTime.dispose(),this}}class qp extends Kc{constructor(){const e=pe(qp.getDefaults(),arguments,["pitch"]);super(e),this.name="PitchShift",this._frequency=new ot({context:this.context}),this._delayA=new ca({maxDelay:1,context:this.context}),this._lfoA=new Co({context:this.context,min:0,max:.1,type:"sawtooth"}).connect(this._delayA.delayTime),this._delayB=new ca({maxDelay:1,context:this.context}),this._lfoB=new Co({context:this.context,min:0,max:.1,type:"sawtooth",phase:180}).connect(this._delayB.delayTime),this._crossFade=new Su({context:this.context}),this._crossFadeLFO=new Co({context:this.context,min:0,max:1,type:"triangle",phase:90}).connect(this._crossFade.fade),this._feedbackDelay=new ca({delayTime:e.delayTime,context:this.context}),this.delayTime=this._feedbackDelay.delayTime,qe(this,"delayTime"),this._pitch=e.pitch,this._windowSize=e.windowSize,this._delayA.connect(this._crossFade.a),this._delayB.connect(this._crossFade.b),this._frequency.fan(this._lfoA.frequency,this._lfoB.frequency,this._crossFadeLFO.frequency),this.effectSend.fan(this._delayA,this._delayB),this._crossFade.chain(this._feedbackDelay,this.effectReturn);const n=this.now();this._lfoA.start(n),this._lfoB.start(n),this._crossFadeLFO.start(n),this.windowSize=this._windowSize}static getDefaults(){return Object.assign(Kc.getDefaults(),{pitch:0,windowSize:.1,delayTime:0,feedback:0})}get pitch(){return this._pitch}set pitch(e){this._pitch=e;let n=0;e<0?(this._lfoA.min=0,this._lfoA.max=this._windowSize,this._lfoB.min=0,this._lfoB.max=this._windowSize,n=Gc(e-1)+1):(this._lfoA.min=this._windowSize,this._lfoA.max=0,this._lfoB.min=this._windowSize,this._lfoB.max=0,n=Gc(e)-1),this._frequency.value=n*(1.2/this._windowSize)}get windowSize(){return this._windowSize}set windowSize(e){this._windowSize=this.toSeconds(e),this.pitch=this._pitch}dispose(){return super.dispose(),this._frequency.dispose(),this._delayA.dispose(),this._delayB.dispose(),this._lfoA.dispose(),this._lfoB.dispose(),this._crossFade.dispose(),this._crossFadeLFO.dispose(),this._feedbackDelay.dispose(),this}}class Lp extends ga{constructor(){const e=pe(Lp.getDefaults(),arguments,["decay"]);super(e),this.name="Reverb",this._convolver=this.context.createConvolver(),this.ready=Promise.resolve();const n=this.toSeconds(e.decay);vn(n,.001),this._decay=n;const i=this.toSeconds(e.preDelay);vn(i,0),this._preDelay=i,this.generate(),this.connectEffect(this._convolver)}static getDefaults(){return Object.assign(ga.getDefaults(),{decay:1.5,preDelay:.01})}get decay(){return this._decay}set decay(e){e=this.toSeconds(e),vn(e,.001),this._decay=e,this.generate()}get preDelay(){return this._preDelay}set preDelay(e){e=this.toSeconds(e),vn(e,0),this._preDelay=e,this.generate()}generate(){return at(this,void 0,void 0,function*(){const e=this.ready,n=new uu(2,this._decay+this._preDelay,this.context.sampleRate),i=new Yc({context:n}),o=new Yc({context:n}),c=new Up({context:n});i.connect(c,0,0),o.connect(c,0,1);const u=new Ye({context:n}).toDestination();c.connect(u),i.start(0),o.start(0),u.gain.setValueAtTime(0,0),u.gain.setValueAtTime(1,this._preDelay),u.gain.exponentialApproachValueAtTime(0,this._preDelay,this.decay);const d=n.render();return this.ready=d.then(He),yield e,this._convolver.buffer=(yield d).get(),this})}dispose(){return super.dispose(),this._convolver.disconnect(),this}}class Vp extends ge{constructor(){const e=pe(Vp.getDefaults(),arguments,["type","size"]);super(e),this.name="Analyser",this._analysers=[],this._buffers=[],this.input=this.output=this._gain=new Ye({context:this.context}),this._split=new Mp({context:this.context,channels:e.channels}),this.input.connect(this._split),vn(e.channels,1);for(let n=0;n<e.channels;n++)this._analysers[n]=this.context.createAnalyser(),this._split.connect(this._analysers[n],n,0);this.size=e.size,this.type=e.type,this.smoothing=e.smoothing}static getDefaults(){return Object.assign(ge.getDefaults(),{size:1024,smoothing:.8,type:"fft",channels:1})}getValue(){return this._analysers.forEach((e,n)=>{const i=this._buffers[n];this._type==="fft"?e.getFloatFrequencyData(i):this._type==="waveform"&&e.getFloatTimeDomainData(i)}),this.channels===1?this._buffers[0]:this._buffers}get size(){return this._analysers[0].frequencyBinCount}set size(e){this._analysers.forEach((n,i)=>{n.fftSize=e*2,this._buffers[i]=new Float32Array(e)})}get channels(){return this._analysers.length}get type(){return this._type}set type(e){xe(e==="waveform"||e==="fft",`Analyser: invalid type: ${e}`),this._type=e}get smoothing(){return this._analysers[0].smoothingTimeConstant}set smoothing(e){this._analysers.forEach(n=>n.smoothingTimeConstant=e)}dispose(){return super.dispose(),this._analysers.forEach(e=>e.disconnect()),this._split.dispose(),this._gain.dispose(),this}}class St extends ge{constructor(){const e=pe(St.getDefaults(),arguments,["solo"]);super(e),this.name="Solo",this.input=this.output=new Ye({context:this.context}),St._allSolos.has(this.context)||St._allSolos.set(this.context,new Set),St._allSolos.get(this.context).add(this),this.solo=e.solo}static getDefaults(){return Object.assign(ge.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(e){e?this._addSolo():this._removeSolo(),St._allSolos.get(this.context).forEach(n=>n._updateSolo())}get muted(){return this.input.gain.value===0}_addSolo(){St._soloed.has(this.context)||St._soloed.set(this.context,new Set),St._soloed.get(this.context).add(this)}_removeSolo(){St._soloed.has(this.context)&&St._soloed.get(this.context).delete(this)}_isSoloed(){return St._soloed.has(this.context)&&St._soloed.get(this.context).has(this)}_noSolos(){return!St._soloed.has(this.context)||St._soloed.has(this.context)&&St._soloed.get(this.context).size===0}_updateSolo(){this._isSoloed()?this.input.gain.value=1:this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),St._allSolos.get(this.context).delete(this),this._removeSolo(),this}}St._allSolos=new Map;St._soloed=new Map;class Ip extends ge{constructor(){const e=pe(Ip.getDefaults(),arguments,["pan","volume"]);super(e),this.name="PanVol",this._panner=this.input=new Dp({context:this.context,pan:e.pan,channelCount:e.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new sr({context:this.context,volume:e.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=e.mute,qe(this,["pan","volume"])}static getDefaults(){return Object.assign(ge.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class ra extends ge{constructor(){const e=pe(ra.getDefaults(),arguments,["volume","pan"]);super(e),this.name="Channel",this._solo=this.input=new St({solo:e.solo,context:this.context}),this._panVol=this.output=new Ip({context:this.context,pan:e.pan,volume:e.volume,mute:e.mute,channelCount:e.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),qe(this,["pan","volume"])}static getDefaults(){return Object.assign(ge.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(e){this._solo.solo=e}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(e){this._panVol.mute=e}_getBus(e){return ra.buses.has(e)||ra.buses.set(e,new Ye({context:this.context})),ra.buses.get(e)}send(e,n=0){const i=this._getBus(e),o=new Ye({context:this.context,units:"decibels",gain:n});return this.connect(o),o.connect(i),o}receive(e){return this._getBus(e).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}ra.buses=new Map;Fn().transport;const Gj=Fn().destination;Fn().destination;Fn().listener;Fn().draw;Fn();const Fj=()=>{const[r,e]=Z.useState(!1),[n,i]=Z.useState(!1),[o,c]=Z.useState(0),[u,d]=Z.useState(0),[f,m]=Z.useState(0),[y,_]=Z.useState(0),b=Z.useRef(null),S=Z.useRef(null),w=Z.useRef(null),x=Z.useRef(null),A=Z.useRef(null),E=Z.useRef(null),D=Z.useRef(null),O=async()=>{await xj(),b.current=new Eo,S.current=new qp({pitch:0}).toDestination(),w.current=new Lp({decay:2,wet:0}).toDestination(),x.current=new zp({distortion:0,wet:0}).toDestination(),A.current=new Bp({delayTime:0,feedback:.2,wet:0}).toDestination(),E.current=new Vp("waveform",256),b.current.connect(S.current),S.current.connect(x.current),x.current.connect(A.current),A.current.connect(w.current),w.current.connect(E.current),b.current.disconnect(),S.current.disconnect(),x.current.disconnect(),A.current.disconnect(),w.current.disconnect(),b.current.chain(S.current,x.current,A.current,w.current,E.current,Gj),e(!0)},I=async()=>{if(r||await O(),n)b.current.close(),i(!1);else try{await b.current.open(),i(!0),k()}catch(R){alert("Mic access denied or error"),console.error(R)}};Z.useEffect(()=>{S.current&&(S.current.pitch=o)},[o]),Z.useEffect(()=>{w.current&&(w.current.wet.value=u)},[u]),Z.useEffect(()=>{x.current&&(x.current.distortion=f,x.current.wet.value=f>0?1:0)},[f]),Z.useEffect(()=>{A.current&&(A.current.delayTime.value=y,A.current.wet.value=y>0?.5:0)},[y]);const k=()=>{if(!n||!D.current||!E.current)return;requestAnimationFrame(k);const R=E.current.getValue(),M=D.current.getContext("2d"),z=D.current.width,X=D.current.height;M.clearRect(0,0,z,X),M.lineWidth=2,M.strokeStyle="#00f2ff",M.beginPath();const Q=z/R.length;let K=0;for(let F=0;F<R.length;F++){const te=(R[F]+1)/2*X;F===0?M.moveTo(K,te):M.lineTo(K,te),K+=Q}M.stroke()};return g.jsxs("div",{className:"voice-fx-container animate-fade",children:[g.jsxs("div",{className:"fx-header",children:[g.jsxs("h1",{children:["Voice FX Lab ",g.jsx("span",{className:"beta-tag",children:"BETA"})]}),g.jsx("p",{children:"Real-time vocal processing provided by Tone.js"})]}),g.jsxs("div",{className:"main-stage glass",children:[g.jsx("canvas",{ref:D,width:"600",height:"150",className:"visualizer"}),g.jsxs("button",{className:`power-btn ${n?"active":""}`,onClick:I,children:[g.jsx(mT,{size:32}),n?"LIVE":"ACTIVATE MIC"]})]}),g.jsxs("div",{className:"controls-grid glass",children:[g.jsxs("div",{className:"control-slider",children:[g.jsxs("label",{children:[g.jsx(qf,{size:16})," Pitch Shift (",o>0?"+":"",o," st)"]}),g.jsx("input",{type:"range",min:"-12",max:"12",step:"1",value:o,onChange:R=>c(Number(R.target.value))})]}),g.jsxs("div",{className:"control-slider",children:[g.jsxs("label",{children:[g.jsx(YT,{size:16})," Reverb (",(u*100).toFixed(0),"%)"]}),g.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:u,onChange:R=>d(Number(R.target.value))})]}),g.jsxs("div",{className:"control-slider",children:[g.jsxs("label",{children:[g.jsx(CT,{size:16})," Distortion (",(f*100).toFixed(0),"%)"]}),g.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:f,onChange:R=>m(Number(R.target.value))})]}),g.jsxs("div",{className:"control-slider",children:[g.jsxs("label",{children:[g.jsx(Yj,{})," Delay (",y,"s)"]}),g.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:y,onChange:R=>_(Number(R.target.value))})]})]}),g.jsx("div",{className:"warning-box",children:" Use headphones to prevent feedback loops!"})]})},Yj=()=>g.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:g.jsx("path",{d:"M22 12h-4l-3 9L9 3l-3 9H2"})}),Wj="/assets/silver_badge-Cdx-0xbp.jpg",Xj="/assets/gold_badge-3OqBLUXa.jpg",Kj="/assets/vinyl_gold_record-ttQhBiTA.png",Zr=[{id:"bronze",points:1e3,label:"Bronze Producer",img:Xf},{id:"silver",points:1e4,label:"Silver Artist",img:Wj},{id:"gold",points:25e3,label:"Gold Star",img:Xj},{id:"vinyl",points:5e4,label:"Vinyl Legend",img:Kj}],Zj=()=>{const{points:r}=Kf(),n=Math.min(r/5e4*100,100),i=Zr.slice().reverse().find(o=>r>=o.points)||{img:null};return Zr.find(o=>r<o.points)||Zr[Zr.length-1],g.jsxs("div",{className:"rtv-container animate-fade",children:[g.jsxs("div",{className:"rtv-header",children:[g.jsx("h1",{children:"Road to Vinyl"}),g.jsx("p",{children:"Accumulate Vibe Points to unlock your physical Vinyl pressing."})]}),g.jsx("div",{className:"rtv-hero glss",children:g.jsxs("div",{className:"progress-circle",children:[g.jsx("img",{src:i.img||Xf,alt:"Current Badge",className:"main-badge glow-pulse"}),g.jsxs("div",{className:"points-display",children:[g.jsx("span",{className:"count",children:r.toLocaleString()}),g.jsx("span",{className:"label",children:"Vibe Points"})]})]})}),g.jsxs("div",{className:"rtv-roadmap glass",children:[g.jsx("div",{className:"progress-track",children:g.jsx("div",{className:"progress-fill",style:{width:`${n}%`}})}),g.jsx("div",{className:"milestones-grid",children:Zr.map((o,c)=>{const u=r>=o.points,d=!u&&r<o.points&&(c===0||r>=Zr[c-1].points);return g.jsxs("div",{className:`milestone-card ${u?"unlocked":""} ${d?"next":""}`,children:[g.jsxs("div",{className:"badge-wrapper",children:[g.jsx("img",{src:o.img,alt:o.label,className:"badge-img"}),!u&&g.jsx("div",{className:"lock-overlay",children:g.jsx(zf,{size:24})})]}),g.jsx("h3",{children:o.label}),g.jsxs("p",{children:[o.points.toLocaleString()," VP"]})]},o.id)})})]}),g.jsxs("div",{className:"rtv-rewards glass",children:[g.jsxs("h2",{children:[g.jsx(qo,{className:"icon"})," Rewards Unlocked"]}),g.jsxs("ul",{children:[r>=1e3&&g.jsx("li",{children:" Bronze Badge on Profile"}),r>=1e4&&g.jsx("li",{children:" Access to Private Collab Rooms"}),r>=25e3&&g.jsx("li",{children:" Featured Artist Spot (1 Week)"}),r>=5e4&&g.jsx("li",{className:"gold",children:" FREE Custom Vinyl Pressing (100 copies)"})]})]})]})};class Qj extends fS.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,n){console.error("ErrorBoundary caught:",e,n),this.setState({error:e,errorInfo:n})}render(){return this.state.hasError?g.jsx("div",{className:"error-boundary-container",children:g.jsxs("div",{className:"error-card glass",children:[g.jsx("div",{className:"error-icon",children:""}),g.jsx("h1",{children:"Oops! Something went wrong"}),g.jsx("p",{children:"We're sorry for the inconvenience. The error has been logged."}),g.jsx("button",{className:"retry-btn",onClick:()=>window.location.reload(),children:"Reload Page"}),!1]})}):this.props.children}}function Jj(){const[r,e]=Z.useState("home"),[n,i]=Z.useState(!1),{user:o,addPoints:c,getLeaderboard:u,upgradeTier:d}=Kf({id:"alex_vibe",name:"Alex Vibe",vibePoints:850,vinylThreshold:5e4,referralLink:"vibe.music/join/alex_vibe_99",tracks:[{id:1,title:"Cybernetic Soul",rating:4.8},{id:2,title:"Obsidian Pulse",rating:4.5}]}),[f,m]=Z.useState({title:"Cybernetic Soul",artist:"Alex Vibe",duration:"3:45",cover:"https://images.unsplash.com/photo-1614613535308-eb5fbd3d2c17?q=80&w=300&auto=format&fit=crop"}),y=()=>{c(5,"RATE")},_=D=>{c(D,"SHOP")},b=async D=>{try{const O=await d(D);alert(O)}catch(O){alert("Upgrade failed: "+O.message)}};Z.useEffect(()=>{const D=O=>{(O.metaKey||O.ctrlKey)&&O.key==="k"&&(O.preventDefault(),i(!0))};return window.addEventListener("keydown",D),()=>window.removeEventListener("keydown",D)},[]);const S=({children:D})=>g.jsx("div",{className:"h-full overflow-y-auto p-6 scrollbar-hide",children:D}),w=()=>{switch(r){case"profile":return g.jsx(S,{children:g.jsx(HE,{user:E})});case"community":return g.jsx(S,{children:g.jsx(GE,{fetchLeaderboard:u})});case"explore":return g.jsx(S,{children:g.jsx(FE,{onNavigate:e})});case"shop":return g.jsx(S,{children:g.jsx(YE,{onPurchase:_})});case"premium":return g.jsx(S,{children:g.jsx($E,{onUpgrade:b})});case"game":return g.jsx(S,{children:g.jsx(PC,{})});case"forum":return g.jsx(S,{children:g.jsx(HC,{})});case"lyric-assistant":return g.jsx(S,{children:g.jsx($C,{})});case"beat-matcher":return g.jsx(S,{children:g.jsx(GC,{})});case"chord-wizard":return g.jsx(S,{children:g.jsx(FC,{})});case"rap-battle":return g.jsx(S,{children:g.jsx(WC,{})});case"services":return g.jsx(S,{children:g.jsx(QC,{})});case"collab":return g.jsx(S,{children:g.jsx(JC,{})});case"voice-fx":return g.jsx(S,{children:g.jsx(Fj,{})});case"road-to-vinyl":return g.jsx(S,{children:g.jsx(Zj,{})});case"analytics":return g.jsx(S,{children:g.jsx("div",{className:"text-white",children:"Analytics Dashboard (Coming Soon)"})});default:return g.jsx(S,{children:g.jsx(IE,{onRate:y})})}},{user:x,loading:A}=us();if(A)return g.jsx("div",{className:"loading-screen",children:"Loading VibeOS..."});const E=x?{...o,id:x.id,name:x.user_metadata?.username||o.name,email:x.email}:o;return x?g.jsxs("div",{className:"app-container",children:[g.jsx(ZT,{isOpen:n,onClose:()=>i(!1)}),g.jsx(BE,{activePage:r,setActivePage:e}),g.jsxs("main",{className:"main-content flex flex-col relative w-full h-full overflow-hidden",children:[g.jsx(UE,{activePage:r,user:E,onSearchClick:()=>i(!0)}),g.jsx("div",{className:"flex-1 overflow-hidden relative",children:w()})]}),g.jsx(PE,{currentTrack:f})]}):g.jsx(XE,{})}const eD=()=>g.jsx(Qj,{children:g.jsx(kE,{children:g.jsx(ME,{children:g.jsx(Jj,{})})})});bS.createRoot(document.getElementById("root")).render(g.jsx(Z.StrictMode,{children:g.jsx(eD,{})}));
